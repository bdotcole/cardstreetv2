(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{957:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eI});var s=a(5155),r=a(2115),l=function(e){return e.NM="Near Mint",e.LP="Lightly Played",e.MP="Moderately Played",e.HP="Heavily Played",e.DMG="Damaged",e}({}),i=function(e){return e.C="Common",e.U="Uncommon",e.R="Rare",e.RR="Double Rare",e.RRR="Triple Rare",e.SR="Super Rare",e.SAR="Special Art Rare",e.UR="Ultra Rare",e}({});let n=["Wild Force (ไวลด์ฟอร์ซ)","Shadow Birth (เงาแห่งพงไพร)","VMAX Rising (VMAX ไรซิง)","Sky Legend (สกาย เลเจนด์)","First Impact (เฟิรสท์ อิมแพค)"],c=[{id:"collections",name:"Collection",icon:"fa-boxes-stacked",count:0},{id:"listings",name:"Listings",icon:"fa-tag",count:0},{id:"wishlist",name:"Wishlist",icon:"fa-heart",count:0},{id:"master",name:"Master Sets",icon:"fa-book-bookmark",count:142}],d=["Romance Dawn","Paramount War","Pillars of Strength","Kingdoms of Intrigue","Awakening of the New Era","Wings of the Captain","500 Years in the Future","Memorial Collection"],o=["Cyber Judge","Wild Force","Shiny Treasure ex","Ancient Roar","Future Flash","Ruler of the Black Flame","Pokemon Card 151","Clay Burst","Snow Hazard","Triplet Beat","Violet ex","Scarlet ex"],x={THB:1,USD:.028,EUR:.026,JPY:4.15,CNY:.2,RM:.13,IDR:440,SGD:.038,PHP:1.58,HKD:.22,TWD:.88};Object.keys(x);let p={THB:"฿",USD:"$",EUR:"€",JPY:"\xa5",CNY:"\xa5",RM:"RM",IDR:"Rp",SGD:"S$",PHP:"₱",HKD:"HK$",TWD:"NT$"},m=[{id:"p1",name:"Charizard ex",thaiName:"ลิซาร์ดอน ex",set:"Wild Force",number:"054/071",rarity:i.SAR,imageUrl:"https://images.pokemontcg.io/sv4pt5/234_hires.png",marketPrice:4500,change7d:12.5,priceHistory:[{date:"1D",price:4400},{date:"7D",price:4e3},{date:"1M",price:3800},{date:"3M",price:4200},{date:"6M",price:4500}]},{id:"p2",name:"Pikachu",thaiName:"ปิกาจู",set:"Shadow Birth",number:"023/071",rarity:i.SR,imageUrl:"https://images.pokemontcg.io/swsh4/44_hires.png",marketPrice:1200,change7d:-2.1,priceHistory:[{date:"1D",price:1200},{date:"7D",price:1220},{date:"1M",price:1100},{date:"3M",price:1250},{date:"6M",price:1200}]},{id:"p3",name:"Iono",thaiName:"นันจาโม",set:"Clay Burst",number:"091/071",rarity:i.SAR,imageUrl:"https://images.pokemontcg.io/sv2/269_hires.png",marketPrice:8500,change7d:5.4,priceHistory:[{date:"1D",price:8400},{date:"7D",price:8200},{date:"1M",price:8e3},{date:"3M",price:7800},{date:"6M",price:8500}]},{id:"p4",name:"Mewtwo V",thaiName:"มิวทู V",set:"Pokemon GO",number:"072/071",rarity:i.SAR,imageUrl:"https://images.pokemontcg.io/pgo/72_hires.png",marketPrice:2200,change7d:1.2,priceHistory:[{date:"1D",price:2150},{date:"7D",price:2100},{date:"1M",price:2200},{date:"3M",price:2250},{date:"6M",price:2200}]}],h=[{id:"u1",name:"PokeMaster99",avatar:"https://i.pravatar.cc/150?u=u1",rating:4.9},{id:"u2",name:"CardSharkTH",avatar:"https://i.pravatar.cc/150?u=u2",rating:4.5},{id:"u3",name:"CollectorJane",avatar:"https://i.pravatar.cc/150?u=u3",rating:5}],u=[{id:"r1",reviewerId:"u5",reviewerName:"Pawat T.",reviewerAvatar:"https://i.pravatar.cc/150?u=u5",rating:5,comment:"Card arrived in perfect condition. Packaging was insane! bubble wrap inside a box inside another box.",date:"2 days ago",verifiedPurchase:!0,itemName:"Charizard ex (SAR)"},{id:"r2",reviewerId:"u6",reviewerName:"Sarah J.",reviewerAvatar:"https://i.pravatar.cc/150?u=u6",rating:4,comment:"Good communication, shipping took a bit longer than expected but card is nice.",date:"1 week ago",verifiedPurchase:!0,itemName:"Pikachu (Promo)"},{id:"r3",reviewerId:"u7",reviewerName:"CryptoKing",reviewerAvatar:"https://i.pravatar.cc/150?u=u7",rating:5,comment:"Legit seller. Will buy again.",date:"2 weeks ago",verifiedPurchase:!1}],b=[{id:"l1",card_id:"p1",card_data:m[0],price:4300,condition:"NM",seller:h[0],created_at:new Date().toISOString()},{id:"l2",card_id:"p1",card_data:m[0],price:4500,condition:"NM",seller:h[1],created_at:new Date().toISOString()},{id:"l3",card_id:"p1",card_data:m[0],price:3900,condition:"LP",seller:h[2],created_at:new Date().toISOString()},{id:"l4",card_id:"p2",card_data:m[1],price:1100,condition:"NM",seller:h[1],created_at:new Date().toISOString()},{id:"l5",card_id:"p2",card_data:m[1],price:1050,condition:"LP",seller:h[0],created_at:new Date().toISOString()},{id:"l6",card_id:"p3",card_data:m[2],price:8500,condition:"NM",seller:h[0],created_at:new Date().toISOString()},{id:"l7",card_id:"p3",card_data:m[2],price:8200,condition:"LP",seller:h[1],created_at:new Date().toISOString()},{id:"l8",card_id:"p3",card_data:m[2],price:8e3,condition:"MP",seller:h[2],created_at:new Date().toISOString()},{id:"l9",card_id:"p4",card_data:m[3],price:2200,condition:"NM",seller:h[2],created_at:new Date().toISOString()},{id:"l10",card_id:"p4",card_data:m[3],price:2100,condition:"LP",seller:h[0],created_at:new Date().toISOString()}],g=e=>{let{currentCurrency:t,onCurrencyChange:a}=e,[l,i]=(0,r.useState)(!1),n=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{n.current&&!n.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let c=Object.keys(x);return(0,s.jsxs)("div",{className:"relative z-50",ref:n,children:[(0,s.jsxs)("button",{onClick:()=>i(!l),className:"glass h-9 pl-3 pr-3 rounded-xl flex items-center gap-2 border border-white/10 hover:bg-white/5 transition-all text-[10px] font-black text-brand-cyan min-w-[70px] justify-between",children:[(0,s.jsx)("span",{children:t}),(0,s.jsx)("i",{className:"fa-solid fa-chevron-down text-[8px] text-slate-500 transition-transform ".concat(l?"rotate-180":"")})]}),l&&(0,s.jsx)("div",{className:"absolute top-full right-0 mt-2 w-24 max-h-60 overflow-y-auto bg-brand-darker/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl py-1 animate-fadeIn scrollbar-hide",children:c.map(e=>(0,s.jsxs)("button",{onClick:()=>{a(e),i(!1)},className:"w-full text-left px-3 py-2 text-[10px] font-bold hover:bg-white/5 transition-colors flex justify-between items-center ".concat(t===e?"text-brand-cyan bg-brand-cyan/10":"text-slate-300"),children:[e,t===e&&(0,s.jsx)("i",{className:"fa-solid fa-check text-[8px]"})]},e))})]})};var f=a(5417);function j(){return(0,f.createBrowserClient)("https://fdxgzddvywtmnqsaqysx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkeGd6ZGR2eXd0bW5xc2FxeXN4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzMTc3MTksImV4cCI6MjA4NDg5MzcxOX0.xvoLoBzTP_Tzff5E35tupTBNdUFUuiMOaOAQd6zGI6I")}let w=new Map,v=new Map,N={async fetchSets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,s="sets-".concat(e,"-").concat(t,"-").concat(a);if(v.has(s))return v.get(s);try{let r=j(),l=(t-1)*a,i=l+a-1,n="en";(null==e?void 0:e.includes("jp"))&&(n="ja"),(null==e?void 0:e.includes("th"))&&(n="th");let{data:c,error:d,count:o}=await r.from("pokemon_sets").select("*",{count:"exact"}).eq("language",n).order("release_date",{ascending:!1}).range(l,i);if(d)return console.error("Supabase error fetching sets:",d),{data:[],totalCount:0};let x={data:(c||[]).map(e=>{let t=e=>e?e.includes("tcgdex.net")&&!e.match(/\.(png|jpg|jpeg|webp|svg)$/i)?"".concat(e,".png"):e:"";return{id:e.id,name:e.name,series:e.series||"",printedTotal:e.printed_total||0,total:e.total||0,releaseDate:e.release_date||"",updatedAt:e.updated_at||"",images:{symbol:t(e.symbol_url),logo:t(e.logo_url)}}}),totalCount:o||0};return v.set(s,x),x}catch(e){return console.error("Failed to fetch sets from Supabase:",e),{data:[],totalCount:0}}},async fetchCardsBySet(e){try{let t=j(),{data:a,error:s}=await t.from("pokemon_cards").select("*").eq("set_id",e).order("number",{ascending:!0});if(s)return console.error("Supabase error fetching cards:",s),[];return(a||[]).map(e=>this.mapSupabaseCardToInternal(e))}catch(e){return console.error("Failed to fetch cards from Supabase:",e),[]}},async findCardByMetadata(e,t,a){try{let t=j(),s=a.split("/")[0].trim(),r=e.replace(/[^a-zA-Z0-9 ]/g,"").trim(),{data:l,error:i}=await t.from("pokemon_cards").select("*").ilike("name","%".concat(r,"%")).eq("number",s).limit(5);if(!l||0===l.length){let{data:e}=await t.from("pokemon_cards").select("*").ilike("name","%".concat(r,"%")).limit(5);l=e}if(i)return console.error("Supabase error searching cards:",i),[];return(l||[]).map(e=>this.mapSupabaseCardToInternal(e))}catch(e){return console.error("Metadata match failed:",e),[]}},async searchCards(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],!e||e.trim().length<2)return[];let t=e.toLowerCase().trim();if(w.has(t))return w.get(t)||[];try{let a=j(),s=/[\u0E00-\u0E7F]/.test(e),r=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/.test(e),l=e.toLowerCase(),i=null;s||l.includes("thai")||l.includes(" th ")?i="th":r||l.includes("japanese")||l.includes(" jp")||l.includes(" ja ")?i="ja":(l.includes("english")||l.includes(" en "))&&(i="en");let n=e.toLowerCase().replace(/\b(japanese|jp|jpn|thai|th|english|en)\b/g,"").trim(),c=a.from("pokemon_cards").select("id, name, set_id, number, supertype, subtypes, rarity, hp, types, image_small, image_large, language, raw_data");i&&(c=c.eq("language",i)),n&&(c=c.ilike("name","%".concat(n,"%")));let{data:d,error:o}=await c.order("name",{ascending:!0}).limit(50);if(o)return console.error("Supabase search error:",o),[];let x=(d||[]).map(e=>{let t=e.name.toLowerCase(),a=n.toLowerCase(),s=0;return s=t===a?100:t.startsWith(a)?75:t.includes(a)?50:25,"Pok\xe9mon"===e.supertype&&(s+=10),{card:e,score:s}}).sort((e,t)=>t.score-e.score).slice(0,30).map(e=>this.mapSupabaseCardToInternal(e.card));return x.length>0&&w.set(t,x),x}catch(e){return console.error("Search failure:",e),[]}},mapSupabaseCardToInternal(e){var t,a,s;let r=e.raw_data||{},l=r.tcgplayer,i=(null==l?void 0:l.prices)||{},n=i.holofoil||i.normal||Object.values(i)[0]||{},c=(null==n?void 0:n.market)||(null==n?void 0:n.mid)||(null==n?void 0:n.low)||5,d=Math.round(35.85*c),o=e=>e?e.includes("tcgdex.net")&&!e.match(/\.(png|jpg|jpeg|webp)$/i)?"".concat(e,".png"):e:"",x="",p="";return e.image_large?x=o(e.image_large):e.image_small?x=o(e.image_small):(null==(t=r.images)?void 0:t.large)?(x=r.images.large,p=r.images.small):x=r.image?o(r.image.includes("http")?r.image:"".concat(r.image,"/high")):"https://images.pokemontcg.io/placeholder.png",e.image_small&&!p&&(p=o(e.image_small)),{id:e.id,name:e.name,thaiName:e.name,set:(null==(a=r.set)?void 0:a.name)||"Unknown Set",number:e.number?"".concat(e.number,"/").concat((null==(s=r.set)?void 0:s.printedTotal)||"??"):"??",rarity:e.rarity||"Common",imageUrl:x,images:{small:p||x,large:x},marketPrice:d,tcgplayerUrl:e.tcgplayer_url,prices:{market:d,low:Math.round(35.85*((null==n?void 0:n.low)||.9*c)),mid:Math.round(35.85*((null==n?void 0:n.mid)||c)),high:Math.round(35.85*((null==n?void 0:n.high)||1.2*c)),lastUpdated:(null==l?void 0:l.updatedAt)||new Date().toISOString()},change7d:parseFloat((15*Math.random()-5).toFixed(1)),priceHistory:[{date:"1D",price:Math.round(d*(.95+.1*Math.random()))},{date:"7D",price:Math.round(d*(.9+.1*Math.random()))},{date:"1M",price:Math.round(d*(.8+.2*Math.random()))},{date:"3M",price:Math.round(d*(.7+.3*Math.random()))},{date:"6M",price:d}]}}},y=e=>{var t;let{onSelectCard:a,searchRequest:l,localListings:i=[],currency:n="THB",exchangeRate:c=1}=e,[d,o]=(0,r.useState)("en"),[x,m]=(0,r.useState)([]),[h,u]=(0,r.useState)(""),[b,g]=(0,r.useState)([]),[f,j]=(0,r.useState)(!0),[w,v]=(0,r.useState)(!1),[y,k]=(0,r.useState)(""),[S,C]=(0,r.useState)(""),[_,P]=(0,r.useState)(!1),A=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=setTimeout(()=>{C(y)},400);return()=>clearTimeout(e)},[y]),(0,r.useEffect)(()=>{let e=e=>{A.current&&!A.current.contains(e.target)&&P(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{l&&k(l.term)},[l]),(0,r.useEffect)(()=>{(async()=>{j(!0);let e=await N.fetchSets("jp"===d?"jp":"en",1,50);m(e.data),e.data.length>0&&u(e.data[0].id),j(!1)})()},[d]),(0,r.useEffect)(()=>{h&&!(S.length>2)&&(async()=>{v(!0),g(await N.fetchCardsBySet(h)),v(!1)})()},[h,S]),(0,r.useEffect)(()=>{S.length>2?(async()=>{v(!0),g(await N.searchCards(S)),v(!1)})():0===S.length&&h&&(async()=>{v(!0),g(await N.fetchCardsBySet(h)),v(!1)})()},[S,h]);let M=p[n]||n,L=e=>i.filter(t=>t.card_data.id===e.id||t.card_data.name===e.name&&t.card_data.set===e.set).length,T=x.find(e=>e.id===h);return(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-brand-cyan/20 blur-md rounded-xl group-focus-within:opacity-100 opacity-0 transition-opacity"}),(0,s.jsx)("i",{className:"fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-brand-cyan transition-colors z-10"}),(0,s.jsx)("input",{type:"text",placeholder:"Search Card Registry...",className:"relative w-full h-12 pl-12 pr-4 bg-[#1e293b] border border-white/10 rounded-xl focus:border-brand-cyan outline-none text-sm font-medium text-white placeholder:text-slate-500 transition-all z-10 shadow-lg",value:y,onChange:e=>k(e.target.value)})]}),(0,s.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:["Expansion","Release","Variant","Pristine"].map(e=>(0,s.jsx)("button",{className:"h-7 px-4 bg-white/5 rounded-md transform skew-x-[-10deg] text-[9px] font-black uppercase tracking-widest text-slate-400 border border-white/5 hover:bg-brand-red hover:text-white hover:border-brand-red transition-all whitespace-nowrap",children:(0,s.jsx)("span",{className:"transform skew-x-[10deg] inline-block",children:e})},e))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-end",children:(0,s.jsxs)("h2",{className:"text-white text-lg font-black italic skew-x-[-10deg] uppercase tracking-tighter",children:["Card ",(0,s.jsx)("span",{className:"text-brand-cyan",children:"Database"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 z-30 relative",children:[(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:d,onChange:e=>o(e.target.value),className:"w-full h-10 bg-brand-darker rounded-lg px-3 text-xs font-bold text-slate-300 border border-white/10 appearance-none outline-none focus:border-brand-cyan",children:[(0,s.jsx)("option",{value:"en",children:"English (Global)"}),(0,s.jsx)("option",{value:"jp",children:"Japanese (Origin)"}),(0,s.jsx)("option",{value:"th",children:"Thai (CardStreet)"})]}),(0,s.jsx)("i",{className:"fa-solid fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-slate-600 text-[10px] pointer-events-none"})]})}),(0,s.jsx)("div",{className:"space-y-1",ref:A,children:(0,s.jsx)("div",{className:"relative",children:f?(0,s.jsx)("div",{className:"w-full h-10 bg-white/5 rounded-lg skeleton opacity-20"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>P(!_),className:"w-full h-10 bg-brand-darker rounded-lg px-2 flex items-center justify-between border border-white/10 outline-none focus:border-brand-cyan text-left active:bg-white/5 transition-colors",children:[T?(0,s.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden w-full pr-4",children:[(null==(t=T.images)?void 0:t.logo)&&(0,s.jsx)("img",{src:T.images.logo,alt:"",className:"h-5 w-auto object-contain max-w-[60px]"}),(0,s.jsx)("span",{className:"text-xs font-bold text-slate-300 truncate",children:T.name})]}):(0,s.jsx)("span",{className:"text-xs font-bold text-slate-500",children:"Select Set"}),(0,s.jsx)("i",{className:"fa-solid fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-slate-600 text-[10px]"})]}),_&&(0,s.jsxs)("div",{className:"absolute top-full right-0 w-[240px] max-w-[90vw] mt-2 bg-[#0f172a] rounded-xl border border-white/10 shadow-2xl max-h-80 overflow-y-auto z-50",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-[#0f172a]/95 backdrop-blur-md p-2 border-b border-white/10 z-10 flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 pl-2",children:"Select Expansion"}),(0,s.jsxs)("span",{className:"text-[9px] font-bold text-brand-cyan bg-brand-cyan/10 px-1.5 rounded",children:[x.length," Found"]})]}),x.map(e=>(0,s.jsxs)("button",{onClick:()=>{u(e.id),P(!1)},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-white/5 border-b border-white/5 last:border-0 transition-colors text-left group",children:[(0,s.jsx)("div",{className:"w-12 h-8 flex items-center justify-center flex-shrink-0 bg-white/5 rounded p-1 border border-white/5 group-hover:border-white/10",children:(0,s.jsx)("img",{src:e.images.logo,alt:e.name,className:"max-h-full max-w-full object-contain filter group-hover:brightness-110 transition-all"})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"text-xs font-bold truncate block ".concat(h===e.id?"text-brand-cyan":"text-slate-300 group-hover:text-white"),children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsx)("span",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:e.series}),(0,s.jsx)("span",{className:"text-[8px] text-slate-700 font-bold",children:"•"}),(0,s.jsxs)("span",{className:"text-[8px] text-slate-600 font-bold",children:[e.total," Cards"]})]})]}),h===e.id&&(0,s.jsx)("i",{className:"fa-solid fa-check text-brand-cyan text-xs"})]},e.id))]})]})})})]})]}),(0,s.jsx)("div",{className:"bg-[#1e293b]/50 backdrop-blur-md rounded-2xl border border-white/5 overflow-hidden shadow-2xl min-h-[400px]",children:w?(0,s.jsx)("div",{className:"p-6 space-y-4",children:[1,2,3,4,5,6].map(e=>(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)("div",{className:"w-10 h-14 skeleton rounded-lg opacity-20"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"h-2 w-32 skeleton rounded opacity-20"}),(0,s.jsx)("div",{className:"h-1.5 w-20 skeleton rounded opacity-20"})]})]},e))}):(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"grid grid-cols-[auto_1fr_auto] gap-4 px-5 py-3 bg-white/5 border-b border-white/5",children:[(0,s.jsx)("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Asset"}),(0,s.jsx)("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Market Price"}),(0,s.jsx)("span",{})]}),(0,s.jsx)("div",{className:"divide-y divide-white/[0.03]",children:b.map(e=>(0,s.jsxs)("div",{className:"grid grid-cols-[auto_1fr_auto] gap-4 items-center px-5 py-3 active:bg-white/[0.05] transition-colors group cursor-pointer",onClick:()=>a(e),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-14 bg-brand-darker rounded overflow-hidden flex-shrink-0 border border-white/5",children:(0,s.jsx)("img",{src:e.imageUrl,className:"w-full h-full object-contain",alt:e.name})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-white text-xs font-bold truncate group-hover:text-brand-cyan transition-colors",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-0.5",children:[(0,s.jsx)("span",{className:"text-[9px] bg-white/10 px-1.5 py-0.5 rounded text-slate-400 font-bold uppercase",children:e.rarity}),(0,s.jsxs)("span",{className:"text-[9px] text-slate-600 font-bold",children:["#",e.number]})]})]})]}),(0,s.jsx)("div",{className:"text-right",children:L(e)>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-brand-green text-sm font-black tracking-tight",children:["Buy from ",M,Math.round(((e=>{let t=i.filter(t=>t.card_data.id===e.id||t.card_data.name===e.name&&t.card_data.set===e.set);return 0===t.length?null:Math.min(...t.map(e=>e.price))})(e)||0)*c).toLocaleString()]}),(0,s.jsxs)("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-widest",children:[L(e)," Listing(s)"]})]}):(0,s.jsxs)("p",{className:"text-white text-sm font-black tracking-tight",children:[M,Math.round(e.marketPrice*c).toLocaleString()]})}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("button",{className:"w-8 h-8 flex items-center justify-center rounded-lg transition-colors ".concat(L(e)>0?"bg-brand-green text-brand-darker hover:bg-white":"bg-white/5 text-brand-cyan hover:bg-brand-cyan/20"),children:L(e)>0?(0,s.jsx)("i",{className:"fa-solid fa-cart-shopping text-[10px]"}):(0,s.jsx)("i",{className:"fa-solid fa-plus text-[10px]"})})})]},e.id))})]})})]})},k=e=>{let{initialGame:t="all",onSelectCard:a,onSelectListing:l,onSellerClick:i,onAddToCart:c,listings:x=[],currency:m="THB",exchangeRate:h=1}=e,[u,b]=(0,r.useState)(t),[g,f]=(0,r.useState)("all"),[j,w]=(0,r.useState)(""),[v,N]=(0,r.useState)("newest"),[y,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)([0,1e5]),_=(0,r.useMemo)(()=>x.filter(e=>{let t=e.card_data,a=t.set||"",s=!0;"pokemon"===u?s=!d.some(e=>a.includes(e)):"onepiece"===u&&(s=d.some(e=>a.includes(e)));let r=!0;if("en"===g){let e=n.some(e=>a.includes(e)||e.includes(a)),t=o.some(e=>a.includes(e)||e.includes(a));r=!e&&!t}else"jp"===g?r=o.some(e=>a.includes(e)||e.includes(a)):"th"===g&&(r=n.some(e=>a.includes(e)||e.includes(a)));let l=e.price*h,i=l>=S[0]&&l<=S[1],c=t.name.toLowerCase().includes(j.toLowerCase())||a.toLowerCase().includes(j.toLowerCase());return s&&r&&i&&c}).sort((e,t)=>"price_asc"===v?e.price-t.price:"price_desc"===v?t.price-e.price:new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),[x,u,g,S,j,v,h]),P=["all"!==u,"all"!==g,S[0]>0||S[1]<1e5].filter(Boolean).length;return(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-32",children:[(0,s.jsxs)("div",{className:"pt-6 px-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-end mb-2",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-brand-cyan text-[10px] font-black uppercase tracking-[0.2em] italic skew-x-[-10deg]",children:"Global Exchange"}),(0,s.jsxs)("h2",{className:"text-3xl font-black text-white tracking-tighter italic skew-x-[-6deg]",children:["Market ",(0,s.jsx)("span",{className:"text-brand-green",children:"Live"})]})]})}),(0,s.jsxs)("div",{className:"relative group z-20",children:[(0,s.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-brand-cyan via-brand-green to-brand-cyan rounded-xl opacity-20 group-focus-within:opacity-100 transition duration-500 blur"}),(0,s.jsxs)("div",{className:"relative flex items-center bg-[#0f172a] rounded-xl border border-white/10 p-1",children:[(0,s.jsx)("i",{className:"fa-solid fa-magnifying-glass text-slate-500 ml-3 mr-2"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by card name or set...",className:"w-full bg-transparent text-white text-xs font-bold focus:outline-none placeholder:text-slate-600 h-10",value:j,onChange:e=>w(e.target.value)})]})]})]}),(0,s.jsxs)("div",{className:"sticky top-0 z-30 bg-brand-darker/95 backdrop-blur-xl border-b border-white/5 py-3 px-4 shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("button",{onClick:()=>k(!y),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-wider transition-all border ".concat(y||P>0?"bg-brand-purple/20 text-brand-purple border-brand-purple/30":"bg-white/5 text-slate-400 border-white/5 hover:bg-white/10 hover:text-white"),children:[(0,s.jsx)("i",{className:"fa-solid fa-sliders"}),"Filters",P>0&&(0,s.jsx)("span",{className:"ml-1 w-4 h-4 rounded-full bg-brand-purple text-white text-[8px] flex items-center justify-center",children:P})]}),(0,s.jsx)("div",{className:"flex bg-white/5 rounded-lg p-0.5 border border-white/5",children:[{id:"newest",label:"New"},{id:"price_asc",label:"Low $"},{id:"price_desc",label:"High $"}].map(e=>(0,s.jsx)("button",{onClick:()=>N(e.id),className:"px-3 py-1 rounded-md text-[9px] font-bold uppercase transition-all ".concat(v===e.id?"bg-brand-cyan text-brand-darker shadow-md":"text-slate-500 hover:text-white"),children:e.label},e.id))})]}),y&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-[#0f172a] rounded-xl border border-white/10 space-y-4 animate-fadeIn",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest mb-2 block",children:"Card Game"}),(0,s.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{id:"all",label:"All Games"},{id:"pokemon",label:"Pok\xe9mon"},{id:"onepiece",label:"One Piece"}].map(e=>(0,s.jsx)("button",{onClick:()=>b(e.id),className:"px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition-all border ".concat(u===e.id?"bg-brand-cyan/20 text-brand-cyan border-brand-cyan/30":"bg-white/5 text-slate-400 border-white/5 hover:bg-white/10"),children:e.label},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest mb-2 block",children:"Language"}),(0,s.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{id:"all",label:"All",icon:"fa-globe"},{id:"en",label:"English",icon:"fa-earth-americas"},{id:"jp",label:"Japanese",icon:"fa-sun"},{id:"th",label:"Thai",icon:"fa-flag"}].map(e=>(0,s.jsxs)("button",{onClick:()=>f(e.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition-all border ".concat(g===e.id?"bg-brand-green/20 text-brand-green border-brand-green/30":"bg-white/5 text-slate-400 border-white/5 hover:bg-white/10"),children:[(0,s.jsx)("i",{className:"fa-solid ".concat(e.icon," text-[8px]")}),e.label]},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest mb-2 block",children:["Price Range: ",p[m]||m,S[0].toLocaleString()," - ",p[m]||m,S[1].toLocaleString()]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("input",{type:"range",min:"0",max:"100000",step:"500",value:S[0],onChange:e=>C([Math.min(Number(e.target.value),S[1]-500),S[1]]),className:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer accent-brand-cyan"}),(0,s.jsx)("input",{type:"range",min:"0",max:"100000",step:"500",value:S[1],onChange:e=>C([S[0],Math.max(Number(e.target.value),S[0]+500)]),className:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer accent-brand-purple"})]})]}),P>0&&(0,s.jsxs)("button",{onClick:()=>{b("all"),f("all"),C([0,1e5])},className:"w-full py-2 text-[10px] font-bold uppercase tracking-widest text-slate-400 hover:text-white transition-colors",children:[(0,s.jsx)("i",{className:"fa-solid fa-xmark mr-2"}),"Clear All Filters"]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-2 px-2",children:_.length>0?_.map(e=>{var t,r,n,d;return(0,s.jsxs)("div",{onClick:()=>l?l(e):a(e.card_data),className:"bg-[#1e293b]/50 border border-white/5 hover:border-brand-cyan/30 rounded-xl p-2 flex gap-3 group active:scale-[0.98] transition-all relative overflow-hidden cursor-pointer",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-brand-cyan to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,s.jsx)("div",{className:"w-20 aspect-[3/4] bg-brand-darker rounded-lg relative overflow-hidden flex-shrink-0 border border-white/10",children:(0,s.jsx)("img",{src:(null==(t=e.card_data.images)?void 0:t.small)||e.card_data.imageUrl,alt:"Card",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-between py-0.5",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h3",{className:"text-white font-bold text-sm truncate pr-2",children:e.card_data.name}),(0,s.jsx)("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border ".concat("NM"===e.condition?"bg-brand-green/10 text-brand-green border-brand-green/20":"bg-slate-700 text-slate-300 border-slate-600"),children:e.condition})]}),(0,s.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide truncate",children:e.card_data.set})]}),(0,s.jsxs)("div",{onClick:t=>{t.stopPropagation(),e.seller&&i(e.seller)},className:"flex items-center gap-1.5 mt-2 bg-black/20 p-1.5 rounded-lg w-fit cursor-pointer hover:bg-white/10 transition-colors",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full bg-slate-700 overflow-hidden",children:(null==(r=e.seller)?void 0:r.avatar_url)&&(0,s.jsx)("img",{src:e.seller.avatar_url,className:"w-full h-full object-cover"})}),(0,s.jsx)("span",{className:"text-[9px] text-slate-400 font-bold max-w-[80px] truncate",children:(null==(n=e.seller)?void 0:n.display_name)||"Ghost Seller"}),(0,s.jsxs)("span",{className:"text-[8px] text-yellow-500",children:["★ ",(null==(d=e.seller)?void 0:d.rating)||"5.0"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-between items-end border-l border-white/5 pl-3 min-w-[80px]",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:"Ask Price"}),(0,s.jsxs)("p",{className:"text-lg font-black text-brand-cyan leading-none",children:[p[m]||m," ",Math.round(e.price*h).toLocaleString()]})]}),(0,s.jsx)("button",{onClick:t=>{if(t.stopPropagation(),c){var a;c({id:e.id,card:e.card_data,price:e.price,sellerName:(null==(a=e.seller)?void 0:a.display_name)||"Unknown",condition:e.condition})}},className:"w-10 h-10 rounded-full bg-white/5 hover:bg-brand-green hover:text-brand-darker text-brand-green flex items-center justify-center transition-all shadow-lg shadow-black/20 active:scale-90",children:(0,s.jsx)("i",{className:"fa-solid fa-cart-plus"})})]})]},e.id)}):(0,s.jsxs)("div",{className:"text-center py-20 px-6",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-white/5 mb-4 animate-pulse",children:(0,s.jsx)("i",{className:"fa-solid fa-satellite-dish text-2xl text-slate-600"})}),(0,s.jsx)("h3",{className:"text-white font-bold text-sm uppercase tracking-widest mb-1",children:"Signal Lost"}),(0,s.jsx)("p",{className:"text-slate-500 text-xs",children:"No active listings found in this sector."}),(0,s.jsx)("button",{onClick:()=>{b("all"),f("all"),C([0,1e5])},className:"mt-4 text-brand-cyan text-xs font-bold uppercase tracking-widest hover:text-white transition-colors",children:"Reset Filters"})]})})]})},S=e=>{let{onScanClick:t,onSelectCard:a}=e,[l,i]=(0,r.useState)("options"),[n,c]=(0,r.useState)(""),[d,o]=(0,r.useState)([]),[x,p]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),u=(0,r.useRef)(null),b=async e=>{e.length>2?(p(!0),(/[\u0E00-\u0E7F]/.test(e)||e.split(" ").length>1)&&h(!0),o(await N.searchCards(e)),p(!1),h(!1)):o([])};return"options"===l?(0,s.jsxs)("div",{className:"space-y-8 animate-fadeIn pt-4 pb-12",children:[(0,s.jsxs)("div",{className:"text-center space-y-3 mb-12 px-4",children:[(0,s.jsx)("h2",{className:"text-3xl font-black text-white tracking-tight uppercase italic skew-x-[-10deg]",children:"Registry Entry"}),(0,s.jsx)("p",{className:"text-[10px] text-slate-600 font-black tracking-[0.3em] uppercase",children:"Digitize your physical collection"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-5",children:[(0,s.jsxs)("button",{onClick:t,className:"glass min-h-[180px] rounded-[2.5rem] border-white/10 flex flex-col items-center justify-center gap-5 active:scale-95 transition-all group relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-brand-cyan/5 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,s.jsx)("div",{className:"w-20 h-20 rounded-3xl bg-brand-cyan flex items-center justify-center shadow-2xl shadow-brand-cyan/20 transform group-hover:scale-110 group-hover:-rotate-3 transition-transform duration-500 z-10",children:(0,s.jsx)("i",{className:"fa-solid fa-expand text-brand-darker text-3xl"})}),(0,s.jsxs)("div",{className:"text-center z-10",children:[(0,s.jsx)("span",{className:"text-xl font-black text-white uppercase tracking-[0.2em] block",children:"Scan Card"}),(0,s.jsx)("span",{className:"text-[9px] text-brand-cyan/60 font-black uppercase tracking-[0.4em] mt-1",children:"Real-time Vision AI"})]})]}),(0,s.jsxs)("button",{onClick:()=>i("manual"),className:"glass min-h-[180px] rounded-[2.5rem] border-white/10 flex flex-col items-center justify-center gap-5 active:scale-95 transition-all group relative",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-3xl glass border-white/10 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-3 transition-transform duration-500 z-10",children:(0,s.jsx)("i",{className:"fa-solid fa-keyboard text-slate-400 text-2xl"})}),(0,s.jsxs)("div",{className:"text-center z-10",children:[(0,s.jsx)("span",{className:"text-xl font-black text-white uppercase tracking-[0.2em] block",children:"Search Registry"}),(0,s.jsx)("span",{className:"text-[9px] text-slate-600 font-black uppercase tracking-[0.4em] mt-1",children:"Global Product Archives"})]})]})]})]}):(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-2",children:[(0,s.jsx)("button",{onClick:()=>i("options"),className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,s.jsx)("div",{children:(0,s.jsx)("h3",{className:"text-white text-lg font-black tracking-tight uppercase",children:"Registry Search"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("i",{className:"fa-solid fa-magnifying-glass absolute left-5 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-brand-cyan transition-colors"}),(0,s.jsx)("input",{type:"text",autoFocus:!0,placeholder:"Search name, set, number...",className:"w-full h-14 pl-14 pr-4 bg-white/5 border border-white/10 rounded-2xl focus:border-brand-cyan/50 outline-none text-sm font-medium text-white placeholder:text-slate-600 transition-all",value:n,onChange:e=>(e=>{c(e),u.current&&window.clearTimeout(u.current),e.length>2?u.current=window.setTimeout(()=>{b(e)},350):o([])})(e.target.value)})]}),m&&(0,s.jsxs)("div",{className:"flex items-center gap-2 px-4 animate-pulse",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-brand-cyan"}),(0,s.jsx)("span",{className:"text-[8px] text-brand-cyan/80 font-black uppercase tracking-[0.2em]",children:"Syncing Multilingual Database..."})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:x?(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3,4].map(e=>(0,s.jsx)("div",{className:"h-24 glass rounded-[2rem] skeleton opacity-10"},e))}):d.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3",children:d.map(e=>(0,s.jsxs)("button",{onClick:()=>a(e),className:"glass p-5 rounded-[2.2rem] border-white/5 active:scale-[0.97] transition-all group flex items-center gap-5 text-left relative overflow-hidden",children:[(0,s.jsx)("div",{className:"w-14 h-20 rounded-xl bg-slate-900 flex items-center justify-center p-1.5 flex-shrink-0 shadow-lg group-hover:scale-105 transition-transform duration-300",children:(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-contain filter drop-shadow-md"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-white text-base font-black tracking-tight truncate mb-1 group-hover:text-brand-cyan transition-colors",children:e.name}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1",children:[(0,s.jsx)("span",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest",children:e.set}),(0,s.jsxs)("span",{className:"text-[9px] text-slate-600 font-black",children:["#",e.number]}),(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-white/5 text-[8px] text-brand-cyan/80 font-black uppercase border border-white/5",children:e.rarity})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-white text-sm font-black",children:["฿",e.marketPrice.toLocaleString()]}),(0,s.jsx)("p",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:"Market"})]})]},e.id))}):n.length>2?(0,s.jsxs)("div",{className:"text-center py-24 glass rounded-[3rem] border-dashed border-white/10 opacity-30",children:[(0,s.jsx)("i",{className:"fa-solid fa-ghost text-4xl mb-4 text-slate-800"}),(0,s.jsxs)("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest px-10",children:['No matches in the registry for "',n,'"']})]}):(0,s.jsxs)("div",{className:"text-center py-20 opacity-10",children:[(0,s.jsx)("i",{className:"fa-solid fa-keyboard text-5xl mb-6"}),(0,s.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Search Live Archives"})]})})]})},C=e=>{var t;let{card:a,initialCondition:i,onClose:n,onSuccess:c}=e,[d,o]=(0,r.useState)(""),[x,p]=(0,r.useState)(i||l.NM),[m,h]=(0,r.useState)(!1),[u,b]=(0,r.useState)("PSA"),[g,f]=(0,r.useState)("10"),[w,v]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null),[k,S]=(0,r.useState)(0);r.useEffect(()=>{S((e=>{let{basePrice:t,condition:a,isGraded:s,gradingCompany:r="PSA",grade:i="10"}=e;if(!t||t<=0)return 0;let n=1;if(!s){switch(a){case l.NM:n=1;break;case l.LP:n=.85;break;case l.MP:n=.7;break;case l.HP:n=.5;break;case l.DMG:n=.3;break;default:n=1}return Math.round(t*n)}let c=parseFloat(i.toString());return isNaN(c)?t:(10===c?n=3:c>=9.5?n=2:9===c?n=1.1:8===c?n=.85:7===c?n=.7:c<=6&&(n=.5),"BGS"===r&&(10===c&&(n*=1.5),9.5===c&&(n=1.3)),Math.round(t*n))})({basePrice:a.marketPrice,condition:x,isGraded:m,gradingCompany:m?u:void 0,grade:m?g:void 0}))},[a.marketPrice,x,m,u,g]);let C=async e=>{e.preventDefault(),v(!0),y(null);let t=j(),s="true"===localStorage.getItem("cardstreet-guest");if(!s){let{data:{user:e}}=await t.auth.getUser();if(!e){y("You must be logged in to sell cards."),v(!1);return}}try{if(s)await new Promise(e=>setTimeout(e,800));else{let e=await fetch("/api/listings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({card_id:a.id,card_data:a,price:parseFloat(d),condition:x,is_graded:m,grading_company:m?u:null,grade:m?parseFloat(g):null})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to create listing")}}let e={card_id:a.id,price:parseFloat(d),condition:x,is_graded:m,grading_company:m?u:null,grade:m?parseFloat(g):null};c(e),n()}catch(e){y(e.message)}finally{v(!1)}};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:n}),(0,s.jsxs)("div",{className:"relative w-full max-w-md bg-[#0f172a] border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-slideUp",children:[(0,s.jsxs)("div",{className:"bg-brand-darker/50 p-4 border-b border-white/5 flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-white font-black italic skew-x-[-5deg] text-lg uppercase",children:"List for Sale"}),(0,s.jsx)("button",{onClick:n,className:"text-slate-400 hover:text-white",children:(0,s.jsx)("i",{className:"fa-solid fa-xmark text-lg"})})]}),(0,s.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsx)("div",{className:"w-20 h-28 bg-brand-darker rounded-lg border border-white/10 overflow-hidden flex-shrink-0",children:(0,s.jsx)("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h4",{className:"text-white font-bold truncate",children:a.name}),(0,s.jsxs)("p",{className:"text-xs text-slate-400",children:[a.set," #",a.number]}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-brand-green font-bold bg-brand-green/10 inline-block px-2 py-1 rounded",children:["Market: ฿",(null==(t=a.marketPrice)?void 0:t.toLocaleString())||"-"]})]})]}),(0,s.jsxs)("form",{onSubmit:C,className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-end mb-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Asking Price (THB)"}),k>0&&(0,s.jsxs)("button",{type:"button",onClick:()=>o(k.toString()),className:"text-[10px] text-brand-cyan hover:text-white font-bold uppercase transition-colors",children:["Use Recommended: ฿",k.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 font-bold",children:"฿"}),(0,s.jsx)("input",{type:"number",required:!0,min:"1",value:d,onChange:e=>o(e.target.value),className:"w-full h-12 bg-white/5 border border-white/10 rounded-xl pl-8 pr-4 text-white font-bold focus:border-brand-cyan outline-none transition-colors placeholder-slate-600",placeholder:k>0?"Recommended: ".concat(k.toLocaleString()):"0.00"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1.5",children:"Condition"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.values(l).map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>p(e),className:"h-10 rounded-lg text-xs font-bold border transition-all ".concat(x===e?"bg-brand-cyan text-brand-darker border-brand-cyan":"bg-white/5 text-slate-400 border-white/5 hover:border-white/20"),children:"Near Mint"===e?"NM":"Lightly Played"===e?"LP":e.replace(" ","")},e))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 py-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>h(!m),className:"w-12 h-6 rounded-full p-1 transition-colors ".concat(m?"bg-brand-cyan":"bg-slate-700"),children:(0,s.jsx)("div",{className:"w-4 h-4 bg-white rounded-full shadow-md transform transition-transform ".concat(m?"translate-x-6":"translate-x-0")})}),(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:"This card is professionally graded"})]}),m&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-white/5 p-4 rounded-xl border border-white/5 animate-fadeIn",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1.5",children:"Company"}),(0,s.jsxs)("select",{value:u,onChange:e=>b(e.target.value),className:"w-full h-10 bg-brand-darker border border-white/10 rounded-lg px-2 text-white text-sm",children:[(0,s.jsx)("option",{value:"PSA",children:"PSA"}),(0,s.jsx)("option",{value:"BGS",children:"BGS"}),(0,s.jsx)("option",{value:"CGC",children:"CGC"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1.5",children:"Grade"}),(0,s.jsx)("input",{type:"number",value:g,onChange:e=>f(e.target.value),className:"w-full h-10 bg-brand-darker border border-white/10 rounded-lg px-3 text-white text-sm",max:"10",min:"1",step:"0.5"})]})]}),N&&(0,s.jsxs)("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-xs font-bold flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fa-solid fa-circle-exclamation"}),N]}),(0,s.jsx)("button",{type:"submit",disabled:w,className:"w-full h-14 bg-brand-green hover:bg-brand-green/90 active:scale-[0.98] rounded-xl text-brand-darker font-black uppercase tracking-wider shadow-lg shadow-brand-green/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-brand-darker border-t-transparent rounded-full animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fa-solid fa-tag"}),"List for Sale"]})})]})]})]})]})},_=[{id:"pokemon-en",title:"Pok\xe9mon TCG",region:"English",gradient:"from-[#FFCB05] to-[#c79d00]",textColor:"text-[#3c5aa6]",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/9/98/International_Pok%C3%A9mon_logo.svg",flagUrl:"https://flagcdn.com/w80/us.png",accent:"bg-[#3c5aa6]"},{id:"pokemon-jp",title:"Pok\xe9mon TCG",region:"Japanese",gradient:"from-[#e2e8f0] to-[#cbd5e1]",textColor:"text-[#121212]",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/9/98/International_Pok%C3%A9mon_logo.svg",flagUrl:"https://flagcdn.com/w80/jp.png",accent:"bg-[#ef4444]"},{id:"pokemon-th",title:"Pok\xe9mon TCG",region:"Thai",gradient:"from-[#1e293b] to-[#0f172a]",textColor:"text-white",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/9/98/International_Pok%C3%A9mon_logo.svg",flagUrl:"https://flagcdn.com/w80/th.png",accent:"bg-[#06b6d4]"}],P=e=>{let{onBack:t,onSelectGame:a}=e;return(0,s.jsxs)("div",{className:"space-y-8 animate-fadeIn pb-20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-4",children:[(0,s.jsx)("button",{onClick:t,className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,s.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:"Master Sets"})]}),(0,s.jsxs)("div",{className:"space-y-2 px-2",children:[(0,s.jsx)("h2",{className:"text-3xl font-black text-white italic skew-x-[-10deg] uppercase tracking-tighter",children:"Select Region"}),(0,s.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-[0.2em]",children:"Choose your registry database"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-5",children:[_.map(e=>(0,s.jsxs)("button",{onClick:()=>a(e.id),className:"relative h-48 rounded-[2.5rem] overflow-hidden group active:scale-95 transition-all shadow-2xl",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.gradient)}),(0,s.jsx)("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-black via-transparent to-transparent"}),(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 z-10",children:[(0,s.jsx)("div",{className:"h-20 w-full flex items-center justify-center mb-4 drop-shadow-xl transform group-hover:scale-110 transition-transform duration-500",children:(0,s.jsx)("img",{src:e.logoUrl,alt:e.title,className:"h-full w-auto object-contain"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3 px-4 py-1.5 rounded-full backdrop-blur-md bg-white/20 border border-white/20 shadow-lg",children:[(0,s.jsx)("img",{src:e.flagUrl,alt:e.region,className:"w-6 h-4 object-cover rounded shadow-sm"}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest ".concat("pokemon-th"===e.id?"text-white":"text-slate-800"),children:e.region})]})]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 ease-in-out"})]},e.id)),(0,s.jsxs)("div",{className:"h-32 rounded-[2.5rem] border-2 border-dashed border-white/10 flex flex-col items-center justify-center gap-2 opacity-30 bg-white/[0.02]",children:[(0,s.jsx)("i",{className:"fa-solid fa-plus text-2xl text-slate-600"}),(0,s.jsx)("span",{className:"text-[9px] text-slate-600 font-black uppercase tracking-widest",children:"More Regions Soon"})]})]})]})},A=e=>{let{region:t,onBack:a,onSelectSet:l}=e,[i,n]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[o,x]=(0,r.useState)(1),[p,m]=(0,r.useState)(!0),[h,u]=(0,r.useState)(0),b=(0,r.useRef)(null),g=async e=>{d(!0);let a=await N.fetchSets(t,e,9);a.totalCount>0&&u(a.totalCount),1===e?n(a.data):n(e=>[...e,...a.data]),m((1===e?a.data.length:i.length+a.data.length)<a.totalCount),d(!1)};(0,r.useEffect)(()=>{n([]),x(1),m(!0),g(1)},[t]);let f=(0,r.useCallback)(e=>{!c&&(b.current&&b.current.disconnect(),b.current=new IntersectionObserver(e=>{e[0].isIntersecting&&p&&x(e=>{let t=e+1;return g(t),t})}),e&&b.current.observe(e))},[c,p]);return(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-24",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-4 sticky top-0 bg-brand-darker/95 backdrop-blur-xl z-20 py-4 border-b border-white/5 shadow-lg",children:[(0,s.jsx)("button",{onClick:a,className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:(()=>{switch(t){case"pokemon-jp":return"Japanese Sets";case"pokemon-th":return"Thai Sets";default:return"English Sets"}})()}),(0,s.jsxs)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:[i.length," Loaded"]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3 px-1",children:i.map((e,t)=>{let a=t===i.length-1;return(0,s.jsxs)("button",{ref:a?f:null,onClick:()=>l(e),className:"group flex flex-col items-center gap-2 active:scale-95 transition-all w-full mb-4",children:[(0,s.jsxs)("div",{className:"w-full aspect-square glass rounded-3xl p-3 flex items-center justify-center border-white/5 group-hover:border-brand-cyan/30 group-hover:bg-white/[0.03] transition-all relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,s.jsx)("img",{src:e.images.logo,alt:e.name,className:"w-full h-full object-contain filter drop-shadow-lg group-hover:scale-110 transition-transform duration-300",loading:"lazy"}),(0,s.jsx)("div",{className:"absolute bottom-1 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-right text-brand-cyan text-xs"})})]}),(0,s.jsx)("span",{className:"text-[9px] font-bold text-slate-400 text-center leading-tight group-hover:text-white line-clamp-2 uppercase tracking-wide px-1 min-h-[2em] flex items-center justify-center",children:e.name.replace(/\(JP\)|\(TH\)/,"")})]},"".concat(e.id,"-").concat(t))})}),c&&(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3 px-1 mt-2",children:[1,2,3,4,5,6].map(e=>(0,s.jsx)("div",{className:"aspect-square rounded-2xl glass skeleton opacity-20"},e))}),!p&&i.length>0&&(0,s.jsx)("div",{className:"text-center py-8 opacity-40",children:(0,s.jsx)("span",{className:"text-[9px] uppercase tracking-widest font-black text-slate-500",children:"End of Registry"})})]})},M=e=>{var t;let{set:a,ownedCardIds:l,onBack:i,onCardClick:n}=e,[c,d]=(0,r.useState)([]),[o,x]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{x(!0),d((await N.fetchCardsBySet(a.id)).sort((e,t)=>{let a=parseInt(e.number.split("/")[0]),s=parseInt(t.number.split("/")[0]);return isNaN(a)||isNaN(s)?e.number.localeCompare(t.number):a-s})),x(!1)})()},[a.id]);let p=(0,r.useMemo)(()=>0===c.length?0:Math.round(c.filter(e=>l.has(e.id)).length/c.length*100),[c,l]),m=(0,r.useMemo)(()=>c.filter(e=>l.has(e.id)).length,[c,l]);return(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-24 h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-brand-darker/95 backdrop-blur-xl z-20 pb-4 border-b border-white/5 pt-4 -mx-6 px-6 shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)("button",{onClick:i,className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"text-white text-lg font-black uppercase tracking-tight italic skew-x-[-10deg] truncate",children:a.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-[9px] text-brand-cyan font-black uppercase tracking-widest",children:[m,"/",c.length," Collected"]}),(0,s.jsx)("span",{className:"text-[9px] text-slate-600 font-bold",children:"•"}),(0,s.jsx)("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:a.series})]})]}),(null==(t=a.images)?void 0:t.logo)&&(0,s.jsx)("img",{src:a.images.logo,className:"h-8 object-contain",alt:"logo"})]}),(0,s.jsx)("div",{className:"h-2 w-full bg-white/5 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-brand-cyan to-brand-green transition-all duration-1000 ease-out",style:{width:"".concat(p,"%")}})})]}),o?(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3 px-1",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(e=>(0,s.jsx)("div",{className:"aspect-[3/4] rounded-2xl glass skeleton opacity-20"},e))}):(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3 px-1",children:c.map(e=>{let t=l.has(e.id);return(0,s.jsxs)("div",{onClick:()=>null==n?void 0:n(e),className:"relative aspect-[3/4] rounded-xl overflow-hidden transition-all duration-500 group ".concat(t?"glass border-brand-cyan/30 shadow-lg shadow-brand-cyan/10":"bg-white/[0.02] border border-white/5"),children:[(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,loading:"lazy",className:"w-full h-full object-cover transition-all duration-500 ".concat(t?"opacity-100":"opacity-20 grayscale blur-[1px]")}),!t&&(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 p-2",children:[(0,s.jsx)("span",{className:"text-xl font-black text-white/40 drop-shadow-md",children:e.number.split("/")[0]}),(0,s.jsx)("span",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest text-center leading-tight mt-1 line-clamp-2",children:e.name})]}),t&&(0,s.jsx)("div",{className:"absolute top-1 right-1 z-10",children:(0,s.jsx)("div",{className:"w-5 h-5 rounded-full bg-brand-green flex items-center justify-center shadow-md",children:(0,s.jsx)("i",{className:"fa-solid fa-check text-[10px] text-brand-darker font-bold"})})}),t&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 backdrop-blur-sm p-1 text-center",children:(0,s.jsx)("span",{className:"text-[8px] text-white font-bold tracking-wider",children:e.number})})]},e.id)})})]})};var L=a(6265),T=a(2903),I=a(8425),E=a(7734),D=a(3697),z=a(232),R=a(8830);let O=e=>{let{data:t}=e;return(0,s.jsx)("div",{className:"h-48 w-full",children:(0,s.jsx)(L.u,{width:"100%",height:"100%",children:(0,s.jsxs)(T.b,{data:t,children:[(0,s.jsx)(I.d,{strokeDasharray:"3 3",vertical:!1,stroke:"rgba(255,255,255,0.05)"}),(0,s.jsx)(E.W,{dataKey:"date",tick:{fontSize:9,fill:"#64748b"},axisLine:!1,tickLine:!1,dy:10}),(0,s.jsx)(D.h,{tick:{fontSize:9,fill:"#64748b"},axisLine:!1,tickLine:!1,tickFormatter:e=>"฿".concat(e/1e3,"k")}),(0,s.jsx)(z.m,{cursor:{stroke:"#06b6d4",strokeWidth:1,strokeDasharray:"4 4"},contentStyle:{backgroundColor:"#020617",borderRadius:"8px",border:"1px solid #06b6d4",boxShadow:"0 10px 30px -10px rgba(6, 182, 212, 0.3)",padding:"8px 12px"},itemStyle:{color:"#fff",fontWeight:"800",fontSize:"12px"},labelStyle:{color:"#94a3b8",marginBottom:"4px",fontSize:"10px",textTransform:"uppercase",fontWeight:"700"},formatter:e=>["฿".concat(e.toLocaleString()),"Valuation"]}),(0,s.jsx)(R.N1,{type:"monotone",dataKey:"price",stroke:"#06b6d4",strokeWidth:3,dot:!1,activeDot:{r:6,fill:"#06b6d4",stroke:"#fff",strokeWidth:2}})]})})})},U=e=>{var t,a;let{card:l,isWishlisted:i,onClose:c,onAddToCollection:d,onToggleWishlist:o,onShopNow:x,listings:m=[],actionButtons:h,onAddToCart:u,currency:b="THB",exchangeRate:g=1}=e,[f,j]=(0,r.useState)(!1),w=g*(n.some(e=>l.set.includes(e)||e.includes(l.set))?.55:1),v=e=>e?Math.round(e*w).toLocaleString():"---",N=p[b]||b,y=l.imageUrl;return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-brand-darker animate-slideUp",children:[(0,s.jsxs)("div",{className:"px-6 py-6 flex justify-between items-center sticky top-0 z-10 bg-brand-darker/80 backdrop-blur-lg border-b border-white/5",children:[(0,s.jsx)("button",{onClick:c,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-white/5 active:bg-brand-cyan active:text-brand-darker transition-all border border-white/5",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-left text-sm"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"font-black italic skew-x-[-10deg] uppercase tracking-wider text-xs text-brand-cyan block",children:"Asset Details"}),(0,s.jsx)("span",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:l.number})]}),(0,s.jsx)("button",{onClick:()=>o(l),className:"w-10 h-10 flex items-center justify-center rounded-xl bg-white/5 border border-white/5 active:scale-90 transition-all group",children:(0,s.jsx)("i",{className:"fa-solid fa-heart transition-colors ".concat(i?"text-brand-red":"text-slate-500 group-hover:text-brand-red")})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto pb-40 scrollbar-hide bg-dots",children:[(0,s.jsxs)("div",{className:"p-8 flex justify-center relative min-h-[380px]",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-brand-cyan/5 to-transparent pointer-events-none"}),!f&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-0",children:(0,s.jsxs)("div",{className:"w-[280px] aspect-[3/4] glass rounded-xl animate-pulse flex items-center justify-center border border-white/10 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 via-white/10 to-transparent"}),(0,s.jsx)("i",{className:"fa-solid fa-image text-white/10 text-4xl"})]})}),(0,s.jsx)("img",{src:y,alt:l.name,loading:"lazy",decoding:"async",onLoad:()=>j(!0),className:"w-full max-w-[280px] drop-shadow-[0_25px_50px_rgba(0,0,0,0.8)] transition-all duration-700 ease-out z-10 ".concat(f?"opacity-100 scale-100 blur-0":"opacity-0 scale-95 blur-sm")})]}),(0,s.jsxs)("div",{className:"px-6 space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"bg-brand-cyan text-brand-darker px-2 py-0.5 rounded text-[9px] font-black uppercase italic skew-x-[-10deg] shadow-lg shadow-brand-cyan/20",children:l.rarity}),(0,s.jsx)("span",{className:"text-slate-400 text-[10px] font-bold tracking-widest uppercase",children:l.set})]}),(0,s.jsx)("h1",{className:"text-3xl font-black text-white leading-none tracking-tight",children:l.name}),(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-500 tracking-wide",children:l.thaiName})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"bg-[#1e293b]/50 backdrop-blur-sm p-4 rounded-2xl border border-white/5 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-12 h-12 bg-brand-cyan/10 rounded-bl-3xl"}),(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Spot Price"}),(0,s.jsxs)("p",{className:"text-2xl font-black text-white",children:[N," ",v((null==(t=l.prices)?void 0:t.market)||l.marketPrice)]}),(0,s.jsxs)("div",{className:"mt-2 text-[8px] text-brand-green font-bold uppercase tracking-widest flex items-center gap-1",children:[(0,s.jsx)("i",{className:"fa-solid fa-arrow-trend-up"})," +3.2%"]})]}),(0,s.jsxs)("div",{className:"bg-[#1e293b]/50 backdrop-blur-sm p-4 rounded-2xl border border-white/5",children:[(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Market High"}),(0,s.jsxs)("p",{className:"text-2xl font-black text-brand-red",children:[N," ",v((null==(a=l.prices)?void 0:a.high)||45e3)]}),(0,s.jsx)("div",{className:"mt-2 text-[8px] text-slate-500 font-bold uppercase tracking-widest",children:"Peak"})]})]}),(0,s.jsx)("div",{className:"bg-[#1e293b]/50 rounded-2xl border border-white/5 p-4",children:(0,s.jsx)(O,{data:l.priceHistory})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-black italic skew-x-[-10deg] text-white text-sm uppercase tracking-wider px-1 border-l-4 border-brand-green pl-3",children:"Marketplace Availability"}),(0,s.jsx)("div",{className:"space-y-2",children:m.filter(e=>e.card_data.id===l.id||e.card_data.name===l.name&&e.card_data.set===l.set).length>0?m.filter(e=>e.card_data.id===l.id||e.card_data.name===l.name&&e.card_data.set===l.set).map((e,t)=>(0,s.jsxs)("div",{className:"bg-white/[0.03] p-4 rounded-xl border border-white/5 flex justify-between items-center group hover:border-brand-green/30 transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-800 overflow-hidden border border-white/10 flex-shrink-0",children:e.seller.avatar_url?(0,s.jsx)("img",{src:e.seller.avatar_url,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-[10px] font-bold text-slate-500",children:"?"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white text-xs font-bold",children:e.seller.display_name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-[9px] text-brand-green font-black uppercase tracking-widest",children:e.condition}),(0,s.jsx)("span",{className:"w-1 h-1 rounded-full bg-slate-700"}),(0,s.jsxs)("span",{className:"text-[8px] text-slate-500 font-bold uppercase",children:[e.seller.rating||5," ★"]})]})]})]}),(0,s.jsxs)("div",{className:"text-right flex items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-white text-base font-black italic",children:[N," ",Math.round(e.price*g).toLocaleString()]}),(0,s.jsx)("p",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:"+ Free Ship"})]}),(0,s.jsx)("button",{onClick:()=>u&&u({id:e.id||Math.random().toString(),card:e.card_data,price:e.price,sellerName:e.seller.display_name,condition:e.condition}),className:"bg-brand-green text-brand-darker text-[9px] font-black px-4 py-2 rounded-lg hover:bg-white transition-colors active:scale-95 shadow-lg shadow-brand-green/10",children:"BUY"})]})]},t)):(0,s.jsxs)("div",{className:"py-8 border border-dashed border-white/5 rounded-xl text-center",children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:"No listings available for this item"}),(0,s.jsx)("button",{className:"mt-2 text-[9px] text-brand-cyan font-black uppercase tracking-widest hover:text-white transition-colors",children:"Notify me on drop"})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-black italic skew-x-[-10deg] text-white text-sm uppercase tracking-wider px-1 border-l-4 border-brand-cyan pl-3",children:"Graded Dashboard"}),(0,s.jsx)("div",{className:"space-y-2",children:[{label:"PSA 10",grade:"Gem Mint",multiplier:3.5,color:"text-brand-cyan"},{label:"BGS 9.5",grade:"Gem Mint",multiplier:3.2,color:"text-brand-green"},{label:"CGC 10",grade:"Pristine",multiplier:3.4,color:"text-brand-red"}].map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"flex justify-between items-center bg-white/[0.03] p-4 rounded-xl border border-white/5 hover:border-brand-cyan/30 transition-all cursor-default",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-black text-white text-sm tracking-tight",children:e.label}),(0,s.jsx)("p",{className:"text-[9px] text-slate-500 uppercase font-bold tracking-widest",children:e.grade})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-black text-base ".concat(e.color),children:[N," ",Math.round(((null==(a=l.prices)?void 0:a.market)||l.marketPrice)*e.multiplier*w).toLocaleString()]}),(0,s.jsxs)("p",{className:"text-[8px] text-slate-600 font-bold tracking-widest",children:[e.multiplier,"x Prem."]})]})]},t)})})]})]})]}),h||(0,s.jsxs)("div",{className:"fixed bottom-0 left-0 w-full p-6 bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 flex gap-3 z-20",children:[(0,s.jsxs)("button",{onClick:()=>d(l),className:"flex-1 h-14 bg-white/5 border border-white/10 text-white hover:bg-white/10 font-black text-[10px] tracking-[0.2em] rounded-xl active:scale-95 transition-all uppercase flex items-center justify-center gap-2 group",children:[(0,s.jsx)("i",{className:"fa-solid fa-vault text-brand-cyan group-hover:scale-110 transition-transform"}),"ADD TO VAULT"]}),(0,s.jsxs)("button",{onClick:x,className:"flex-1 h-14 bg-gradient-to-r from-brand-cyan to-brand-green text-brand-darker font-black text-[10px] tracking-[0.2em] rounded-xl shadow-lg shadow-brand-cyan/20 active:scale-95 transition-all uppercase flex items-center justify-center gap-2",children:[(0,s.jsx)("i",{className:"fa-solid fa-store"}),"SHOP NOW"]})]})]})},F=e=>{let{customCollections:t,wishlist:a,onUpdateCollections:l,onAddToCollection:i,onToggleWishlist:n,onListCard:d,listingTarget:o,onCancelListing:x,onPublishListing:p,activeListings:h=[],totalValue:u,currencySymbol:b}=e,[g,f]=(0,r.useState)("folders"),[j,w]=(0,r.useState)(""),[v,N]=(0,r.useState)(null),[y,k]=(0,r.useState)(!1),[S,_]=(0,r.useState)("1M"),L=(0,r.useMemo)(()=>{let e=.05*u;return Array.from({length:"1D"===S?24:"1W"===S?7:30}).map((t,a)=>({date:a.toString(),price:u-e*Math.cos(a/5)}))},[u,S]),[T,I]=(0,r.useState)(null),[E,D]=(0,r.useState)(null),[z,R]=(0,r.useState)(""),[F,B]=(0,r.useState)("date_desc"),[H,G]=(0,r.useState)(!1),W=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{W.current&&!W.current.contains(e.target)&&G(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let J=(0,r.useMemo)(()=>{let e=new Set;return t.forEach(t=>{t.items.forEach(t=>{t.quantity>0&&e.add(t.cardId)})}),e},[t]),V=(0,r.useMemo)(()=>{let e=[];return t.forEach(t=>{t.items.forEach(a=>{if(a.isListing){let s=a.card||m.find(e=>e.id===a.cardId);s&&e.push({colId:t.id,item:a,card:s})}})}),e},[t]),Y=(0,r.useMemo)(()=>{let e=[];return t.forEach(t=>{t.items.forEach(a=>{let s=a.card||m.find(e=>e.id===a.cardId);s&&e.push({colId:t.id,item:a,card:s})})}),e},[t]),q=(0,r.useMemo)(()=>{let e=z.toLowerCase();return Y.filter(t=>{let{card:a}=t;return a.name.toLowerCase().includes(e)||a.set.toLowerCase().includes(e)||a.number.includes(e)}).sort((e,t)=>{switch(F){case"name_asc":return e.card.name.localeCompare(t.card.name);case"price_desc":return t.card.marketPrice-e.card.marketPrice;case"price_asc":return e.card.marketPrice-t.card.marketPrice;case"date_asc":return new Date(e.item.addedAt).getTime()-new Date(t.item.addedAt).getTime();default:return new Date(t.item.addedAt).getTime()-new Date(e.item.addedAt).getTime()}})},[Y,z,F]);return"wishlist"===g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-4",children:[(0,s.jsx)("button",{onClick:()=>f("folders"),className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,s.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:"Wishlist"})]}),(0,s.jsx)("div",{className:"space-y-3",children:0===a.length?(0,s.jsxs)("div",{className:"text-center py-20 opacity-20",children:[(0,s.jsx)("i",{className:"fa-solid fa-heart text-4xl mb-4"}),(0,s.jsx)("p",{className:"text-xs font-black uppercase tracking-widest",children:"Wishlist is Empty"})]}):a.map(e=>(0,s.jsxs)("div",{onClick:()=>{I(e),D(null)},className:"glass p-4 rounded-3xl flex items-center gap-4 border-white/5 active:bg-white/[0.05] transition-colors cursor-pointer",children:[(0,s.jsx)("img",{src:e.imageUrl,className:"w-12 h-16 object-contain"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-white text-sm font-bold truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-[9px] text-slate-500 uppercase font-bold",children:[e.set," • ",e.rarity]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-white text-xs font-black",children:["฿",e.marketPrice.toLocaleString()]})})]},e.id))})]}),T&&(0,s.jsx)(U,{card:T,isWishlisted:!0,onClose:()=>{I(null),D(null)},onToggleWishlist:n,onAddToCollection:i,listings:h})]}):"collections"===g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-20",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>f("folders"),className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,s.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:"My Collection"})]}),(0,s.jsx)("div",{className:"bg-white/5 px-3 py-1.5 rounded-lg border border-white/5",children:(0,s.jsxs)("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:[Y.length," Cards"]})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"relative group flex-1",children:[(0,s.jsx)("i",{className:"fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-brand-green transition-colors"}),(0,s.jsx)("input",{type:"text",placeholder:"Search your cards...",className:"w-full h-12 pl-10 pr-4 bg-[#1e293b] border border-white/10 rounded-xl focus:border-brand-green outline-none text-sm font-medium text-white placeholder:text-slate-500 transition-all shadow-inner",value:z,onChange:e=>R(e.target.value)})]}),(0,s.jsxs)("div",{className:"relative",ref:W,children:[(0,s.jsx)("button",{onClick:()=>G(!H),className:"h-12 w-12 bg-[#1e293b] border border-white/10 rounded-xl flex items-center justify-center text-slate-400 hover:text-white hover:border-brand-green transition-all shadow-inner active:scale-95",children:(0,s.jsx)("i",{className:"fa-solid fa-arrow-up-wide-short text-sm"})}),H&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-[#0f172a] border border-white/10 rounded-2xl shadow-2xl z-50 overflow-hidden animate-fadeIn",children:[(0,s.jsx)("div",{className:"p-2 border-b border-white/5 bg-white/[0.02]",children:(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 pl-2",children:"Sort By"})}),(0,s.jsx)("div",{className:"p-1",children:[{id:"date_desc",label:"Recently Added"},{id:"name_asc",label:"Name (A-Z)"},{id:"price_desc",label:"Price (High-Low)"},{id:"price_asc",label:"Price (Low-High)"}].map(e=>(0,s.jsx)("button",{onClick:()=>{B(e.id),G(!1)},className:"w-full text-left px-3 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-wider mb-1 last:mb-0 transition-colors ".concat(F===e.id?"bg-brand-green/10 text-brand-green":"text-slate-400 hover:bg-white/5 hover:text-white"),children:e.label},e.id))})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end -mt-2",children:(0,s.jsxs)("span",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:["Sorted by: ",(()=>{switch(F){case"price_desc":return"Price: High to Low";case"price_asc":return"Price: Low to High";case"name_asc":return"Name: A-Z";default:return"Recently Added"}})()]})}),(0,s.jsx)("div",{className:"space-y-3",children:0===q.length?(0,s.jsxs)("div",{className:"text-center py-20 opacity-20",children:[(0,s.jsx)("i",{className:"fa-solid fa-layer-group text-4xl mb-4"}),(0,s.jsx)("p",{className:"text-xs font-black uppercase tracking-widest",children:z?"No matches found":"Collection is Empty"})]}):q.map(e=>{let{item:a,card:r,colId:i}=e;return(0,s.jsxs)("div",{onClick:()=>{I(r),D({colId:i,item:a})},className:"glass p-4 rounded-3xl flex items-center gap-4 border-white/5 group relative overflow-hidden active:bg-white/[0.05] transition-colors cursor-pointer",children:[(0,s.jsx)("div",{className:"w-14 h-20 bg-slate-900 rounded-xl overflow-hidden flex-shrink-0 p-1 border border-white/5",children:(0,s.jsx)("img",{src:r.imageUrl,className:"w-full h-full object-contain filter drop-shadow-md",alt:r.name})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h4",{className:"text-white text-sm font-bold truncate pr-2",children:r.name}),a.isListing&&(0,s.jsx)("span",{className:"text-[7px] bg-brand-cyan/20 text-brand-cyan px-1.5 py-0.5 rounded font-black uppercase tracking-widest border border-brand-cyan/20",children:"Listed"})]}),(0,s.jsxs)("p",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest truncate",children:[r.set," • #",r.number]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 pt-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 bg-white/5 px-2 py-0.5 rounded-md border border-white/5",children:[(0,s.jsx)("i",{className:"fa-regular fa-clock text-[8px] text-slate-500"}),(0,s.jsx)("span",{className:"text-[8px] text-slate-400 font-bold",children:new Date(a.addedAt).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),(0,s.jsx)("span",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:a.condition})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsxs)("p",{className:"text-white text-xs font-black",children:["฿",r.marketPrice.toLocaleString()]}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),confirm("Are you sure you want to delete this collection and all items inside it?")&&l(t.filter(e=>e.id!==i))},className:"w-8 h-8 rounded-xl flex items-center justify-center bg-white/5 hover:bg-brand-red/20 hover:text-brand-red text-slate-600 transition-colors",children:(0,s.jsx)("i",{className:"fa-solid fa-trash-can text-[10px]"})})]})]},a.id)})})]}),T&&E&&(0,s.jsx)(U,{card:T,isWishlisted:a.some(e=>e.id===T.id),onClose:()=>{I(null),D(null)},onToggleWishlist:n,onAddToCollection:i,actionButtons:E.item.isListing?(0,s.jsx)("div",{className:"fixed bottom-0 left-0 w-full p-6 bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 z-20 text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-brand-cyan font-black uppercase tracking-widest text-xs",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-brand-cyan animate-pulse"}),"Currently Listed on Market"]})}):(0,s.jsx)("div",{className:"fixed bottom-0 left-0 w-full p-6 bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 z-[60]",children:(0,s.jsxs)("button",{onClick:()=>{d(E.colId,E.item,T),I(null),D(null),k(!1),f("listings")},className:"w-full h-14 bg-brand-cyan text-brand-darker font-black text-[10px] tracking-[0.2em] rounded-xl shadow-lg shadow-brand-cyan/20 active:scale-95 transition-all uppercase flex items-center justify-center gap-2",children:[(0,s.jsx)("i",{className:"fa-solid fa-tag"}),"Sell Asset"]})}),listings:h})]}):"listings"===g?(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-20",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center pt-4 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>f("folders"),className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,s.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:"Active Listings"})]}),(0,s.jsx)("button",{onClick:()=>k(!0),className:"px-6 h-10 bg-brand-cyan text-brand-darker rounded-xl text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all shadow-lg shadow-brand-cyan/10 whitespace-nowrap",children:"New Listing"})]}),y?(0,s.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest",children:"Select an Asset from your Vault"}),(0,s.jsx)("button",{onClick:()=>k(!1),className:"text-[9px] text-brand-red font-black uppercase tracking-widest",children:"Cancel"})]}),(0,s.jsx)("div",{className:"space-y-3",children:0===Y.filter(e=>{let{item:t}=e;return!t.isListing}).length?(0,s.jsx)("div",{className:"py-20 text-center glass rounded-[2.5rem] border-dashed border-white/5",children:(0,s.jsx)("p",{className:"text-[10px] text-slate-600 font-black uppercase tracking-widest",children:"No unlisted assets available"})}):Y.filter(e=>{let{item:t}=e;return!t.isListing}).map(e=>{let{colId:t,item:a,card:r}=e;return(0,s.jsxs)("button",{onClick:()=>d(t,a,r),className:"w-full glass p-4 rounded-3xl flex items-center gap-4 border-white/5 active:scale-[0.98] transition-all text-left group",children:[(0,s.jsx)("div",{className:"w-12 h-16 rounded-xl overflow-hidden bg-white/5 p-1 flex-shrink-0",children:(0,s.jsx)("img",{src:r.imageUrl,className:"w-full h-full object-contain"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"text-white text-sm font-bold group-hover:text-brand-cyan transition-colors",children:r.name}),(0,s.jsxs)("p",{className:"text-[9px] text-slate-500 uppercase font-black",children:[a.condition," • ",r.set]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-white text-xs font-black",children:["฿",r.marketPrice.toLocaleString()]})})]},a.id)})})]}):0===V.length?(0,s.jsxs)("div",{className:"text-center py-32 glass rounded-[2.5rem] border-dashed border-white/5",children:[(0,s.jsx)("i",{className:"fa-solid fa-tag text-4xl text-slate-800 mb-6"}),(0,s.jsx)("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-[0.2em] px-12 leading-relaxed",children:"You currently have no active sales listings in the CardStreet market."}),(0,s.jsx)("button",{onClick:()=>k(!0),className:"mt-8 px-8 h-12 bg-white/5 border border-white/10 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-300 hover:bg-white/10 transition-colors",children:"Start Selling"})]}):(0,s.jsx)("div",{className:"space-y-4",children:V.map(e=>{var a;let{colId:r,item:i,card:n}=e;return(0,s.jsxs)("div",{className:"glass p-5 rounded-[2rem] border-white/5 space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)("div",{className:"w-16 aspect-[3/4] glass rounded-xl overflow-hidden p-1 flex-shrink-0",children:(0,s.jsx)("img",{src:n.imageUrl,className:"w-full h-full object-contain"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-brand-green animate-pulse"}),(0,s.jsx)("span",{className:"text-[8px] text-brand-green font-black uppercase tracking-widest",children:"Live on Market"})]}),(0,s.jsx)("h4",{className:"text-white text-base font-black truncate",children:n.name}),(0,s.jsxs)("p",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest",children:[i.condition," • ",i.quantity," Unit(s)"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-xl font-black text-brand-cyan",children:["฿",null==(a=i.listingPrice)?void 0:a.toLocaleString()]}),(0,s.jsx)("p",{className:"text-[8px] text-slate-600 font-black uppercase tracking-widest",children:"Asking Price"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsx)("button",{onClick:()=>{d(r,i,n),k(!1)},className:"flex-1 h-10 glass border-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-400 hover:text-white transition-colors",children:"Edit Listing"}),(0,s.jsx)("button",{onClick:()=>{l(t.map(e=>e.id===r?{...e,items:e.items.map(e=>e.id===i.id?{...e,isListing:!1,listingPrice:void 0}:e)}:e))},className:"flex-1 h-10 glass border-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-brand-red/60 hover:text-brand-red transition-colors",children:"Remove"})]})]},i.id)})}),o&&(0,s.jsx)(C,{card:o.card,initialCondition:o.item.condition,onClose:x,onSuccess:e=>{e&&p(e),k(!1),f("listings")}})]}):"master"===g?(0,s.jsx)(P,{onBack:()=>f("folders"),onSelectGame:e=>{w(e),f("sets")}}):"sets"===g?(0,s.jsx)(A,{region:j,onBack:()=>f("master"),onSelectSet:e=>{N(e),f("set-detail")}}):"set-detail"===g&&v?(0,s.jsx)(M,{set:v,ownedCardIds:J,onBack:()=>f("sets")}):(0,s.jsx)("div",{className:"space-y-6 animate-fadeIn pb-32",children:(0,s.jsxs)("div",{className:"pt-6 relative",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-brand-cyan to-brand-green opacity-20 blur-3xl rounded-full"}),(0,s.jsxs)("div",{className:"flex justify-between items-end mb-1 px-2",children:[(0,s.jsx)("p",{className:"text-brand-cyan text-[10px] font-black uppercase tracking-[0.2em] italic skew-x-[-10deg]",children:"My Portfolio"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 bg-brand-green/10 px-2 py-1 rounded-md border border-brand-green/20",children:[(0,s.jsx)("i",{className:"fa-solid fa-arrow-trend-up text-brand-green text-[10px]"}),(0,s.jsx)("span",{className:"text-brand-green text-[10px] font-black",children:"+4.2%"})]})]}),(0,s.jsxs)("h2",{className:"px-2 text-6xl font-black text-white tracking-tighter leading-none italic skew-x-[-6deg] drop-shadow-lg mb-6",children:[b,u.toLocaleString(void 0,{maximumFractionDigits:0})]}),(0,s.jsx)("div",{className:"glass-panel rounded-2xl p-0.5 border-brand-cyan/20 overflow-hidden shadow-2xl mb-8 mx-1",children:(0,s.jsxs)("div",{className:"bg-[#0f172a] rounded-2xl p-4",children:[(0,s.jsx)("div",{className:"flex justify-start items-center mb-4 gap-2",children:["1D","1W","1M","1Y"].map(e=>(0,s.jsx)("button",{onClick:()=>_(e),className:"px-3 py-1 rounded-md text-[10px] font-black tracking-widest transition-all skew-x-[-10deg] ".concat(S===e?"bg-brand-cyan text-brand-darker":"text-slate-600 hover:text-slate-300 bg-white/5"),children:e},e))}),(0,s.jsx)("div",{className:"h-40",children:(0,s.jsx)(O,{data:L})})]})}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:c.map(e=>{let t=0,r="text-slate-500";"wishlist"===e.id?(t=a.length,r="text-brand-red"):"listings"===e.id?(t=V.length,r="text-brand-cyan"):"collections"===e.id?(t=Y.length,r="text-brand-green"):t=e.count;let l="collections"===e.id?"collections":e.id;return(0,s.jsxs)("div",{onClick:()=>f(l),className:"glass p-6 rounded-[2.5rem] border-white/5 active:scale-95 transition-all group cursor-pointer hover:border-brand-cyan/20",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl glass border-white/10 flex items-center justify-center mb-4 group-hover:border-white/20 transition-colors",children:(0,s.jsx)("i",{className:"fa-solid ".concat(e.icon," ").concat(r," group-hover:scale-110 transition-transform")})}),(0,s.jsx)("h4",{className:"text-white text-sm font-bold tracking-tight mb-1",children:e.name}),(0,s.jsxs)("p",{className:"text-[9px] text-slate-600 font-black uppercase tracking-widest",children:[t," Items"]})]},e.id)})})]})})};var B=a(8382),H=a(6497),G=a(9347),W=a(8854),J=a(6154),V=a(508),Y=a(8519),q=a(709),$=a(5870),K=a(6617),X=a(4485),Z=a(952),Q=a(908),ee=a(9708),et=a(7937),ea=a(4926),es=a(368),er=a(3664),el=a(9141),ei=a(1873),en=a(5917),ec=a(1360),ed=a(6191),eo=a(7910),ex=a(2529),ep=a(6132),em=a(5998),eh=a(6983),eu=a(6398),eb=a(9715);let eg=e=>{let{isOpen:t,onClose:a}=e,[l,i]=(0,r.useState)(!1),n=j(),c=async e=>{i(!0);try{let{error:t}=await n.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/api/auth/callback")}});if(t)throw t}catch(e){console.error("Error logging in:",e),alert("Error logging in. Please try again."),i(!1)}};return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),(0,s.jsxs)("div",{className:"relative w-full max-w-sm glass-panel rounded-2xl p-6 transition-all animate-slideUp",children:[(0,s.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-slate-400 hover:text-white transition-colors",children:(0,s.jsx)("i",{className:"fa-solid fa-xmark text-xl"})}),(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-brand-cyan/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-brand-cyan/20 shadow-[0_0_20px_rgba(6,182,212,0.2)]",children:(0,s.jsx)("i",{className:"fa-solid fa-user-astronaut text-2xl text-brand-cyan"})}),(0,s.jsxs)("h2",{className:"text-xl font-black text-white italic skew-x-[-5deg]",children:["Welcome to ",(0,s.jsx)("span",{className:"text-brand-cyan",children:"CardStreet"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-400 mt-2 font-medium",children:"Sign in to manage your vault and track portfolio value."})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("button",{onClick:()=>c("google"),disabled:l,className:"w-full h-12 bg-white hover:bg-slate-50 active:bg-slate-100 rounded-xl flex items-center justify-center gap-3 transition-all font-bold text-slate-700 shadow-lg group disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("i",{className:"fa-brands fa-google text-xl text-red-500 group-hover:scale-110 transition-transform"}),(0,s.jsx)("span",{children:"Continue with Google"})]}),(0,s.jsxs)("div",{className:"relative flex py-2 items-center",children:[(0,s.jsx)("div",{className:"flex-grow border-t border-slate-600"}),(0,s.jsx)("span",{className:"flex-shrink-0 mx-4 text-[10px] text-slate-500 uppercase font-bold tracking-widest",children:"Or"}),(0,s.jsx)("div",{className:"flex-grow border-t border-slate-600"})]}),(0,s.jsxs)("button",{onClick:()=>{localStorage.setItem("cardstreet-guest","true"),window.location.reload()},className:"w-full h-12 bg-white/5 hover:bg-white/10 active:bg-white/15 rounded-xl flex items-center justify-center gap-3 transition-all font-bold text-slate-300 border border-white/10",children:[(0,s.jsx)("i",{className:"fa-solid fa-user-secret text-lg"}),(0,s.jsx)("span",{children:"Continue as Guest"})]})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("p",{className:"text-[10px] text-slate-500",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})})]})]}):null},ef={initial:{x:"100%",opacity:0},animate:{x:0,opacity:1,transition:{type:"spring",damping:25,stiffness:200}},exit:{x:"100%",opacity:0,transition:{duration:.2}}},ej={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-20,transition:{duration:.2}}},ew={bronze:{color:"from-amber-700 to-amber-900",icon:G.A,next:"silver",pointsNeeded:500},silver:{color:"from-slate-400 to-slate-600",icon:W.A,next:"gold",pointsNeeded:2e3},gold:{color:"from-yellow-400 to-amber-500",icon:W.A,next:"platinum",pointsNeeded:5e3},platinum:{color:"from-purple-400 to-indigo-600",icon:J.A,next:null,pointsNeeded:null}},ev=e=>{let{user:t,onNavigatePartner:a,onGuestLogin:l}=e,[i,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)("none"),o=j(),[x,p]=(0,r.useState)({phone_number:null,shipping_address:{},two_factor_enabled:!1,notify_price_drops:!0,notify_order_updates:!0,notify_marketing:!1}),[m,h]=(0,r.useState)({points_balance:0,tier:"bronze",lifetime_points:0,tier_progress:0}),[u,b]=(0,r.useState)([]),[g,f]=(0,r.useState)([]),[w,v]=(0,r.useState)([]),[N,y]=(0,r.useState)(0),[k,S]=(0,r.useState)(!1),[C,_]=(0,r.useState)(""),[P,A]=(0,r.useState)(""),[M,L]=(0,r.useState)({street:"",city:"",state:"",postal_code:"",country:""});(0,r.useEffect)(()=>{t&&"guest"!==t.provider&&T()},[t]);let T=async()=>{try{let e=await fetch("/api/profile");if(e.ok){let t=await e.json();t.settings&&p(t.settings),t.rewards&&h(t.rewards)}}catch(e){console.error("Error fetching profile:",e)}},I=async()=>{try{let e=await fetch("/api/profile/payment-methods");if(e.ok){let t=await e.json();b(t)}}catch(e){console.error("Error fetching payment methods:",e)}},E=async()=>{try{let e=await fetch("/api/profile/orders?status=active");if(e.ok){let t=await e.json();f(t.orders)}}catch(e){console.error("Error fetching orders:",e)}},D=async()=>{try{let e=await fetch("/api/profile/sales");if(e.ok){let t=await e.json();v(t.sales),y(t.totalEarnings)}}catch(e){console.error("Error fetching sales:",e)}},z=async()=>{(null==t?void 0:t.provider)==="guest"?localStorage.removeItem("cardstreet-guest"):await o.auth.signOut(),window.location.reload()},R=async(e,t)=>{p(a=>({...a,[e]:t}));try{await fetch("/api/profile/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({[e]:t})})}catch(a){console.error("Error updating settings:",a),p(a=>({...a,[e]:!t}))}},O=async()=>{S(!0);try{await fetch("/api/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({display_name:C,phone_number:P,shipping_address:M})}),p(e=>({...e,phone_number:P,shipping_address:M}))}catch(e){console.error("Error saving profile:",e)}S(!1)},U=async e=>{try{await fetch("/api/profile/payment-methods?id=".concat(e),{method:"DELETE"}),b(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting payment method:",e)}},F=e=>{if(d(e),"payment"===e&&I(),"orders"===e&&E(),"sales"===e&&D(),"account"===e&&t){var a,s,r,l,i;_(t.name),A(x.phone_number||""),L({street:(null==(a=x.shipping_address)?void 0:a.street)||"",city:(null==(s=x.shipping_address)?void 0:s.city)||"",state:(null==(r=x.shipping_address)?void 0:r.state)||"",postal_code:(null==(l=x.shipping_address)?void 0:l.postal_code)||"",country:(null==(i=x.shipping_address)?void 0:i.country)||""})}},G=[{title:"Account",items:[{name:"Edit Profile",icon:V.A,panel:"account",color:"text-brand-cyan"},{name:"Payment Methods",icon:Y.A,panel:"payment",color:"text-emerald-400"},{name:"Rewards",icon:q.A,panel:"rewards",color:"text-amber-400"}]},{title:"Security & Notifications",items:[{name:"Settings",icon:$.A,panel:"settings",color:"text-purple-400"}]},{title:"Orders & Sales",items:[{name:"Track Orders",icon:K.A,panel:"orders",color:"text-blue-400"},{name:"Sales History",icon:X.A,panel:"sales",color:"text-green-400"}]},{title:"Operations",items:[{name:"Partner Dashboard",icon:Z.A,action:a,color:"text-brand-green",special:!0}]},{title:"Support",items:[{name:"Help & Support",icon:Q.A,panel:"support",color:"text-slate-400"}]}];if(!t)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(B.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-12 py-10 flex flex-col items-center justify-center min-h-[70vh]",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-[2.2rem] glass mx-auto flex items-center justify-center border border-brand-cyan/20",children:(0,s.jsx)(ee.A,{className:"w-8 h-8 text-brand-cyan"})}),(0,s.jsxs)("div",{className:"space-y-1 px-4",children:[(0,s.jsx)("h2",{className:"text-3xl font-black text-white tracking-tight uppercase leading-tight italic skew-x-[-10deg]",children:"Elite Registry"}),(0,s.jsx)("p",{className:"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] leading-relaxed max-w-[240px] mx-auto",children:"Unlock cross-device vault synchronization"})]})]}),(0,s.jsxs)("div",{className:"w-full space-y-4 px-4 max-w-sm",children:[(0,s.jsxs)("button",{onClick:()=>n(!0),className:"w-full h-16 bg-white hover:bg-slate-50 active:bg-slate-100 rounded-2xl flex items-center justify-center gap-4 transition-all shadow-xl group mb-3",children:[(0,s.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.2em] text-slate-900",children:"Access Terminal"}),(0,s.jsx)(et.A,{className:"w-4 h-4 text-slate-900 group-hover:translate-x-1 transition-transform"})]}),(0,s.jsxs)("button",{onClick:l,className:"w-full py-4 text-[10px] font-bold uppercase tracking-widest text-slate-600 hover:text-white transition-colors flex items-center justify-center gap-2",children:["Enter as Guest ",(0,s.jsx)(V.A,{className:"w-3 h-3"})]})]})]}),(0,s.jsx)(eg,{isOpen:i,onClose:()=>n(!1)})]});let W=ew[m.tier].icon;return(0,s.jsxs)("div",{className:"relative min-h-screen pb-20",children:[(0,s.jsx)(H.N,{mode:"wait",children:"none"===c&&(0,s.jsxs)(B.P.div,{variants:ej,initial:"initial",animate:"animate",exit:"exit",className:"space-y-8 py-6",children:[(0,s.jsxs)("div",{className:"text-center pb-4",children:[(0,s.jsxs)("div",{className:"w-24 h-24 rounded-[2.8rem] glass mx-auto mb-5 flex items-center justify-center p-1.5 border border-brand-cyan/20 relative group overflow-hidden shadow-2xl",children:[(0,s.jsx)("div",{className:"w-full h-full rounded-[2.5rem] bg-slate-900 flex items-center justify-center overflow-hidden border border-white/10",children:(0,s.jsx)("img",{src:t.avatar,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",alt:t.name})}),(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-9 h-9 rounded-2xl flex items-center justify-center border-4 border-[#121212] shadow-lg bg-gradient-to-br ".concat(ew[m.tier].color),children:(0,s.jsx)(W,{className:"w-4 h-4 text-white"})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h3",{className:"text-2xl font-black text-white tracking-tight italic skew-x-[-10deg]",children:t.name}),(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-[0.4em] text-brand-cyan font-black",children:"guest"===t.provider?"Temporary Director":"".concat(m.tier.toUpperCase()," MEMBER")}),(0,s.jsx)("p",{className:"text-[9px] text-slate-600 font-bold uppercase tracking-widest pt-2",children:t.email})]}),"guest"!==t.provider&&(0,s.jsxs)("button",{onClick:()=>F("rewards"),className:"mt-4 mx-auto flex items-center gap-3 px-4 py-2 glass rounded-2xl border border-amber-500/20 hover:border-amber-500/40 transition-colors",children:[(0,s.jsx)(q.A,{className:"w-4 h-4 text-amber-400"}),(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:m.points_balance.toLocaleString()}),(0,s.jsx)("span",{className:"text-[9px] uppercase tracking-wider text-slate-500",children:"Points"}),(0,s.jsx)(et.A,{className:"w-3 h-3 text-slate-600"})]})]}),(0,s.jsx)("div",{className:"space-y-6",children:G.map(e=>(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h4",{className:"text-slate-700 text-[9px] font-black uppercase tracking-[0.4em] px-2",children:e.title}),(0,s.jsx)("div",{className:"glass rounded-[2rem] border-white/5 overflow-hidden shadow-xl",children:e.items.map((t,a)=>(0,s.jsxs)("button",{onClick:()=>t.action?t.action():t.panel&&F(t.panel),className:"w-full h-14 px-5 flex items-center justify-between group active:bg-white/[0.04] transition-colors ".concat(a!==e.items.length-1?"border-b border-white/[0.03]":""),children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(t.icon,{className:"w-5 h-5 ".concat(t.color," group-hover:scale-110 transition-transform")}),(0,s.jsx)("span",{className:"text-sm font-semibold ".concat(t.special?"text-white":"text-slate-300"," group-hover:text-white transition-colors"),children:t.name})]}),(0,s.jsx)(et.A,{className:"w-4 h-4 text-slate-700 group-hover:translate-x-1 transition-transform"})]},t.name))})]},e.title))}),(0,s.jsxs)("button",{onClick:z,className:"w-full h-14 glass rounded-[2rem] text-brand-red/70 font-bold text-xs uppercase tracking-[0.2em] border-brand-red/10 active:scale-[0.98] transition-all mt-4 hover:text-brand-red hover:bg-brand-red/5 shadow-lg flex items-center justify-center gap-3",children:[(0,s.jsx)(ea.A,{className:"w-4 h-4"}),"Sign Out"]})]},"main")}),(0,s.jsxs)(H.N,{children:["account"===c&&(0,s.jsx)(B.P.div,{variants:ef,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)("button",{onClick:()=>d("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,s.jsx)(es.A,{className:"w-5 h-5 text-slate-400"})}),(0,s.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Edit Profile"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2",children:[(0,s.jsx)(V.A,{className:"w-3 h-3"})," Name"]}),(0,s.jsx)("input",{type:"text",value:C,onChange:e=>_(e.target.value),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"Your name"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2",children:[(0,s.jsx)(er.A,{className:"w-3 h-3"})," Email"]}),(0,s.jsx)("input",{type:"email",value:t.email,disabled:!0,className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-slate-500 cursor-not-allowed"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2",children:[(0,s.jsx)(el.A,{className:"w-3 h-3"})," Phone Number"]}),(0,s.jsx)("input",{type:"tel",value:P,onChange:e=>A(e.target.value),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"+66 xxx xxx xxxx"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2",children:[(0,s.jsx)(ei.A,{className:"w-3 h-3"})," Shipping Address"]}),(0,s.jsx)("input",{type:"text",value:M.street,onChange:e=>L(t=>({...t,street:e.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"Street address"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"text",value:M.city,onChange:e=>L(t=>({...t,city:e.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"City"}),(0,s.jsx)("input",{type:"text",value:M.state,onChange:e=>L(t=>({...t,state:e.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"State/Province"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("input",{type:"text",value:M.postal_code,onChange:e=>L(t=>({...t,postal_code:e.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"Postal Code"}),(0,s.jsx)("input",{type:"text",value:M.country,onChange:e=>L(t=>({...t,country:e.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"Country"})]})]})]}),(0,s.jsx)("button",{onClick:O,disabled:k,className:"w-full h-14 bg-brand-cyan hover:bg-brand-cyan/90 text-black font-bold rounded-2xl flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:k?(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-black/20 border-t-black rounded-full animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(en.A,{className:"w-5 h-5"}),"Save Changes"]})})]})},"account"),"payment"===c&&(0,s.jsx)(B.P.div,{variants:ef,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)("button",{onClick:()=>d("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,s.jsx)(es.A,{className:"w-5 h-5 text-slate-400"})}),(0,s.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Payment Methods"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[0===u.length?(0,s.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,s.jsx)(Y.A,{className:"w-12 h-12 text-slate-700 mx-auto"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm",children:"No payment methods saved"})]}):u.map(e=>(0,s.jsxs)("div",{className:"glass px-4 py-3 rounded-2xl border border-white/5 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center ".concat("visa"===e.card_type?"bg-blue-600":"mastercard"===e.card_type?"bg-orange-500":"bg-slate-600"),children:(0,s.jsx)(Y.A,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-white font-semibold text-sm flex items-center gap-2",children:["•••• ",e.last_four,e.is_default&&(0,s.jsx)("span",{className:"text-[8px] px-2 py-0.5 bg-brand-cyan/20 text-brand-cyan rounded-full uppercase",children:"Default"})]}),(0,s.jsxs)("p",{className:"text-slate-500 text-xs",children:[e.expiry_month,"/",e.expiry_year]})]})]}),(0,s.jsx)("button",{onClick:()=>U(e.id),className:"p-2 hover:bg-red-500/20 rounded-xl transition-colors group",children:(0,s.jsx)(ec.A,{className:"w-4 h-4 text-slate-600 group-hover:text-red-400"})})]},e.id)),(0,s.jsxs)("button",{className:"w-full h-16 border-2 border-dashed border-white/10 rounded-2xl flex items-center justify-center gap-3 text-slate-500 hover:text-white hover:border-brand-cyan/30 transition-colors group",children:[(0,s.jsx)(ed.A,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),(0,s.jsx)("span",{className:"font-semibold",children:"Add New Card"})]})]})]})},"payment"),"rewards"===c&&(0,s.jsx)(B.P.div,{variants:ef,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)("button",{onClick:()=>d("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,s.jsx)(es.A,{className:"w-5 h-5 text-slate-400"})}),(0,s.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Rewards"})]}),(0,s.jsxs)("div",{className:"glass p-6 rounded-3xl border border-white/10 bg-gradient-to-br ".concat(ew[m.tier].color," relative overflow-hidden"),children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(W,{className:"w-6 h-6 text-white"}),(0,s.jsxs)("span",{className:"text-white/80 text-xs uppercase tracking-widest font-bold",children:[m.tier," Member"]})]}),(0,s.jsx)("p",{className:"text-5xl font-black text-white mb-1",children:m.points_balance.toLocaleString()}),(0,s.jsx)("p",{className:"text-white/60 text-sm",children:"Available Points"})]})]}),ew[m.tier].next&&(0,s.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/5 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-slate-400 text-xs uppercase tracking-wider font-bold",children:["Progress to ",ew[m.tier].next]}),(0,s.jsxs)("span",{className:"text-white font-bold text-sm",children:[m.lifetime_points," / ",ew[m.tier].pointsNeeded]})]}),(0,s.jsx)("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:(0,s.jsx)(B.P.div,{initial:{width:0},animate:{width:"".concat(Math.min(m.lifetime_points/(ew[m.tier].pointsNeeded||1)*100,100),"%")},transition:{duration:1,ease:"easeOut"},className:"h-full rounded-full bg-gradient-to-r ".concat(ew[m.tier].color)})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/5 text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-black text-white",children:m.lifetime_points.toLocaleString()}),(0,s.jsx)("p",{className:"text-slate-500 text-xs uppercase tracking-wider",children:"Lifetime Points"})]}),(0,s.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/5 text-center",children:[(0,s.jsxs)("p",{className:"text-2xl font-black text-brand-green",children:["฿",(.5*m.points_balance).toFixed(0)]}),(0,s.jsx)("p",{className:"text-slate-500 text-xs uppercase tracking-wider",children:"Points Value"})]})]})]})},"rewards"),"settings"===c&&(0,s.jsx)(B.P.div,{variants:ef,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)("button",{onClick:()=>d("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,s.jsx)(es.A,{className:"w-5 h-5 text-slate-400"})}),(0,s.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Settings"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h4",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest px-1",children:"Security"}),(0,s.jsx)("div",{className:"glass rounded-2xl border border-white/5 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(eo.A,{className:"w-5 h-5 ".concat(x.two_factor_enabled?"text-brand-green":"text-slate-500")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white font-semibold text-sm",children:"Two-Factor Authentication"}),(0,s.jsx)("p",{className:"text-slate-500 text-xs flex items-center gap-1",children:x.two_factor_enabled?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ex.A,{className:"w-3 h-3 text-brand-green"}),(0,s.jsx)("span",{className:"text-brand-green",children:"Secured"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.A,{className:"w-3 h-3 text-amber-500"}),(0,s.jsx)("span",{className:"text-amber-500",children:"Not enabled"})]})})]})]}),(0,s.jsx)("button",{onClick:()=>R("two_factor_enabled",!x.two_factor_enabled),className:"w-12 h-7 rounded-full transition-colors relative ".concat(x.two_factor_enabled?"bg-brand-green":"bg-slate-700"),children:(0,s.jsx)(B.P.div,{animate:{x:20*!!x.two_factor_enabled},className:"absolute left-1 top-1 w-5 h-5 bg-white rounded-full shadow-lg"})})]})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h4",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest px-1",children:"Notifications"}),(0,s.jsx)("div",{className:"glass rounded-2xl border border-white/5 overflow-hidden divide-y divide-white/5",children:[{key:"notify_price_drops",label:"Price Drop Alerts",desc:"Get notified when wishlist items drop"},{key:"notify_order_updates",label:"Order Updates",desc:"Shipping and delivery notifications"},{key:"notify_marketing",label:"Marketing",desc:"Promotions and special offers"}].map(e=>(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(em.A,{className:"w-5 h-5 text-slate-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white font-semibold text-sm",children:e.label}),(0,s.jsx)("p",{className:"text-slate-500 text-xs",children:e.desc})]})]}),(0,s.jsx)("button",{onClick:()=>R(e.key,!x[e.key]),className:"w-12 h-7 rounded-full transition-colors relative ".concat(x[e.key]?"bg-brand-cyan":"bg-slate-700"),children:(0,s.jsx)(B.P.div,{animate:{x:20*!!x[e.key]},className:"absolute left-1 top-1 w-5 h-5 bg-white rounded-full shadow-lg"})})]},e.key))})]})]})},"settings"),"orders"===c&&(0,s.jsx)(B.P.div,{variants:ef,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)("button",{onClick:()=>d("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,s.jsx)(es.A,{className:"w-5 h-5 text-slate-400"})}),(0,s.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Track Orders"})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===g.length?(0,s.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,s.jsx)(K.A,{className:"w-12 h-12 text-slate-700 mx-auto"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm",children:"No active orders"})]}):g.map(e=>{var t,a,l,i,n,c,d,o,x,p,m;return(0,s.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/5 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-xl bg-slate-800 overflow-hidden flex-shrink-0",children:(null==(i=e.transaction)||null==(l=i.listing)||null==(a=l.card_data)||null==(t=a.images)?void 0:t.small)&&(0,s.jsx)("img",{src:e.transaction.listing.card_data.images.small,alt:"Card",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-white font-semibold text-sm truncate",children:(null==(d=e.transaction)||null==(c=d.listing)||null==(n=c.card_data)?void 0:n.name)||"Card Order"}),(0,s.jsx)("p",{className:"text-slate-500 text-xs",children:null==(x=e.transaction)||null==(o=x.listing)?void 0:o.condition}),(0,s.jsxs)("p",{className:"text-brand-cyan font-bold text-sm mt-1",children:["฿",null==(m=e.transaction)||null==(p=m.amount)?void 0:p.toLocaleString()]})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:["processing","shipped","out_for_delivery","delivered"].map((t,a)=>{let l=["processing","shipped","out_for_delivery","delivered"].indexOf(e.status),i=a<=l,n=a===l;return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,s.jsxs)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center transition-colors ".concat(i?"bg-brand-green":"bg-slate-800"," ").concat(n?"ring-2 ring-brand-green ring-offset-2 ring-offset-brand-darker":""),children:["processing"===t&&(0,s.jsx)(eh.A,{className:"w-4 h-4 ".concat(i?"text-black":"text-slate-600")}),"shipped"===t&&(0,s.jsx)(K.A,{className:"w-4 h-4 ".concat(i?"text-black":"text-slate-600")}),"out_for_delivery"===t&&(0,s.jsx)(eu.A,{className:"w-4 h-4 ".concat(i?"text-black":"text-slate-600")}),"delivered"===t&&(0,s.jsx)(ex.A,{className:"w-4 h-4 ".concat(i?"text-black":"text-slate-600")})]}),(0,s.jsx)("span",{className:"text-[8px] uppercase tracking-wider ".concat(n?"text-brand-green font-bold":"text-slate-600"),children:t.replace("_"," ")})]}),a<3&&(0,s.jsx)("div",{className:"flex-1 h-0.5 ".concat(a<l?"bg-brand-green":"bg-slate-800")})]},t)})}),e.tracking_number&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("span",{className:"text-slate-500",children:"Tracking:"}),(0,s.jsx)("span",{className:"text-white font-mono",children:e.tracking_number})]})]},e.id)})})]})},"orders"),"sales"===c&&(0,s.jsx)(B.P.div,{variants:ef,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)("button",{onClick:()=>d("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,s.jsx)(es.A,{className:"w-5 h-5 text-slate-400"})}),(0,s.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Sales History"})]}),(0,s.jsxs)("div",{className:"glass p-4 rounded-2xl border border-brand-green/20 bg-brand-green/5",children:[(0,s.jsx)("p",{className:"text-slate-400 text-xs uppercase tracking-wider mb-1",children:"Total Earnings"}),(0,s.jsxs)("p",{className:"text-3xl font-black text-brand-green",children:["฿",N.toLocaleString()]})]}),(0,s.jsx)("div",{className:"space-y-3",children:0===w.length?(0,s.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,s.jsx)(X.A,{className:"w-12 h-12 text-slate-700 mx-auto"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm",children:"No sales yet"})]}):w.map(e=>{var t,a,r,l,i,n;return(0,s.jsxs)("div",{className:"glass p-3 rounded-2xl border border-white/5 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-xl bg-slate-800 overflow-hidden flex-shrink-0",children:(null==(r=e.listing)||null==(a=r.card_data)||null==(t=a.images)?void 0:t.small)&&(0,s.jsx)("img",{src:e.listing.card_data.images.small,alt:"Card",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-white font-semibold text-sm truncate",children:(null==(i=e.listing)||null==(l=i.card_data)?void 0:l.name)||"Card Sale"}),(0,s.jsx)("p",{className:"text-slate-500 text-xs",children:null==(n=e.listing)?void 0:n.condition})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-brand-green font-bold",children:["+฿",(e.amount-(e.platform_fee||0)).toLocaleString()]}),(0,s.jsx)("p",{className:"text-slate-600 text-[10px]",children:new Date(e.completed_at).toLocaleDateString()})]})]},e.id)})})]})},"sales"),"support"===c&&(0,s.jsx)(B.P.div,{variants:ef,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)("button",{onClick:()=>d("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,s.jsx)(es.A,{className:"w-5 h-5 text-slate-400"})}),(0,s.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Help & Support"})]}),(0,s.jsx)("div",{className:"glass rounded-2xl border border-white/5 overflow-hidden divide-y divide-white/5",children:[{icon:Q.A,label:"Help Center",href:"#"},{icon:er.A,label:"Contact Us",href:"mailto:support@cardstreet.app"},{icon:eb.A,label:"Privacy Policy",href:"#"},{icon:eb.A,label:"Terms of Service",href:"#"}].map(e=>(0,s.jsxs)("a",{href:e.href,className:"p-4 flex items-center justify-between group hover:bg-white/[0.02] transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(e.icon,{className:"w-5 h-5 text-slate-500 group-hover:text-white transition-colors"}),(0,s.jsx)("span",{className:"text-white font-semibold text-sm",children:e.label})]}),(0,s.jsx)(et.A,{className:"w-4 h-4 text-slate-700 group-hover:translate-x-1 transition-transform"})]},e.label))}),(0,s.jsxs)("div",{className:"text-center pt-8",children:[(0,s.jsx)("p",{className:"text-slate-600 text-xs",children:"CardStreet TCG v1.0.0"}),(0,s.jsx)("p",{className:"text-slate-700 text-[10px] mt-1",children:"Made with ❤️ in Thailand"})]})]})},"support")]})]})},eN=e=>{let{isOpen:t,onClose:a,cart:l,onRemoveItem:i,onCheckout:n,currencySymbol:c}=e,d=(0,r.useMemo)(()=>l.reduce((e,t)=>e+t.price,0),[l]);return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-[60] flex justify-end",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fadeIn",onClick:a}),(0,s.jsxs)("div",{className:"relative w-full max-w-sm bg-[#0f172a] h-full shadow-2xl border-l border-white/10 flex flex-col animate-slideLeft",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-brand-darker/50",children:[(0,s.jsxs)("h2",{className:"text-xl font-black italic skew-x-[-10deg] text-white uppercase tracking-tight",children:["Your Cart ",(0,s.jsxs)("span",{className:"text-brand-cyan text-sm not-italic ml-2",children:["(",l.length,")"]})]}),(0,s.jsx)("button",{onClick:a,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white/10 transition-colors",children:(0,s.jsx)("i",{className:"fa-solid fa-xmark text-slate-400"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:0===l.length?(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 opacity-50",children:[(0,s.jsx)("i",{className:"fa-solid fa-cart-shopping text-4xl mb-4"}),(0,s.jsx)("p",{className:"text-xs font-black uppercase tracking-widest",children:"Cart is Empty"})]}):l.map(e=>(0,s.jsxs)("div",{className:"bg-white/5 p-3 rounded-xl flex gap-3 border border-white/5 relative group",children:[(0,s.jsx)("div",{className:"w-16 h-20 bg-brand-darker rounded-lg overflow-hidden flex-shrink-0 border border-white/5",children:(0,s.jsx)("img",{src:e.card.imageUrl,className:"w-full h-full object-contain",alt:e.card.name})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 py-1",children:[(0,s.jsx)("h4",{className:"text-white text-sm font-bold truncate pr-6",children:e.card.name}),(0,s.jsxs)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:[e.condition," • ",e.sellerName]}),(0,s.jsxs)("p",{className:"text-brand-cyan font-black",children:[c,e.price.toLocaleString()]})]}),(0,s.jsx)("button",{onClick:()=>i(e.id),className:"absolute top-2 right-2 text-slate-600 hover:text-brand-red transition-colors p-1",children:(0,s.jsx)("i",{className:"fa-solid fa-trash-can text-xs"})})]},e.id))}),(0,s.jsxs)("div",{className:"p-6 bg-brand-darker/80 border-t border-white/5 backdrop-blur-xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-end mb-4",children:[(0,s.jsx)("span",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Total"}),(0,s.jsxs)("span",{className:"text-2xl font-black text-white",children:[c,d.toLocaleString()]})]}),(0,s.jsxs)("button",{onClick:n,disabled:0===l.length,className:"w-full h-14 bg-brand-green text-brand-darker font-black uppercase tracking-[0.2em] rounded-xl shadow-lg shadow-brand-green/20 hover:bg-white transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:["Checkout ",(0,s.jsx)("i",{className:"fa-solid fa-arrow-right"})]})]})]})]}):null},ey=e=>{let{candidates:t,onSelect:a,onCancel:r}=e;return(0,s.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-[#121212]/95 backdrop-blur-md animate-fadeIn",children:(0,s.jsxs)("div",{className:"w-full max-w-[400px] glass rounded-[2.5rem] border-white/10 p-8 flex flex-col max-h-[80vh]",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-brand-cyan/10 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("i",{className:"fa-solid fa-question text-brand-cyan"})}),(0,s.jsx)("h3",{className:"text-xl font-black text-white tracking-tight uppercase italic skew-x-[-10deg]",children:"Multiple Matches"}),(0,s.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"Select the exact version you scanned"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 scrollbar-hide",children:t.map(e=>(0,s.jsxs)("button",{onClick:()=>a(e),className:"w-full glass p-4 rounded-3xl border-white/5 flex items-center gap-4 text-left active:scale-95 transition-all group",children:[(0,s.jsx)("div",{className:"w-14 h-20 rounded-xl overflow-hidden bg-white/5 flex-shrink-0",children:(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-contain"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-white text-sm font-bold truncate group-hover:text-brand-cyan",children:e.name}),(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest mt-0.5",children:e.set}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("span",{className:"text-[8px] bg-white/10 text-slate-400 px-2 py-0.5 rounded-full",children:e.rarity}),(0,s.jsxs)("span",{className:"text-[8px] text-slate-600",children:["#",e.number]})]})]})]},e.id))}),(0,s.jsx)("button",{onClick:r,className:"mt-6 w-full h-12 rounded-2xl glass border-white/10 text-slate-500 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all hover:text-white",children:"Cancel Scan"})]})})};var ek=a(9488);let eS=e=>{let{isOpen:t,onClose:a,amount:l,currency:i,items:n,onPaymentSuccess:c,onPaymentFailed:d}=e,[o,x]=(0,r.useState)("promptpay"),[p,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)(null),[b,g]=(0,r.useState)({name:"",number:"",expiration_month:"",expiration_year:"",security_code:""}),f="THB"===i?(.028*l).toFixed(2):l.toFixed(2);(0,r.useEffect)(()=>{"undefined"!=typeof Omise&&Omise.setPublicKey("pkey_test_66dszputjckcbp2srfs")},[t]);let j=async()=>{m(!0),u(null);try{if("undefined"==typeof Omise)throw Error("Omise.js not loaded");if("promptpay"===o)Omise.createSource("promptpay",{amount:100*l,currency:i},(e,t)=>{200===e?w(t.id,"promptpay",l):(m(!1),d(t.message))});else if("card"===o){let e={name:b.name,number:b.number,expiration_month:b.expiration_month,expiration_year:b.expiration_year,security_code:b.security_code};Omise.createToken("card",e,(e,t)=>{200===e?w(t.id,"card",l):(m(!1),d(t.message))})}}catch(e){m(!1),d(e.message)}},w=async(e,t,a)=>{try{let h={amount:a,currency:i,metadata:{items:JSON.stringify(n.map(e=>e.id))}};"card"===t?h.token=e:h.source=e;let b=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),g=await b.json();if(!b.ok)throw Error(g.error||"Payment failed");if("promptpay"===t){var s,r,l,o,x,p;if(null==(l=g.source)||null==(r=l.scannable_code)||null==(s=r.image)?void 0:s.download_uri)u(g.source.scannable_code.image.download_uri),m(!1);else if("successful"===g.status||"pending"===g.status)u(null==(p=g.source)||null==(x=p.scannable_code)||null==(o=x.image)?void 0:o.download_uri),m(!1);else throw Error("Could not generate QR code")}else"successful"===g.status?c():g.authorize_uri?window.location.href=g.authorize_uri:d("Payment not successful: "+g.status),m(!1)}catch(e){m(!1),d(e.message)}},v=async()=>{try{let e=await fetch("/api/paypal/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(f),currency:"USD"})}),t=await e.json();if(t.error)throw Error(t.error);return t.orderID}catch(e){throw d(e.message),e}},N=async e=>{try{m(!0);let t=await fetch("/api/paypal/capture-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderID:e.orderID})}),a=await t.json();a.success?c():d(a.message||"Payment capture failed")}catch(e){d(e.message)}finally{m(!1)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-md p-4 animate-fadeIn",children:(0,s.jsxs)("div",{className:"bg-[#0f172a] w-full max-w-sm rounded-[2rem] border border-white/10 overflow-hidden shadow-2xl",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-brand-darker to-[#1e293b] p-6 border-b border-white/5 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white text-lg font-black italic skew-x-[-10deg]",children:"Secure Checkout"}),(0,s.jsx)("p",{className:"text-[10px] text-brand-green font-bold uppercase tracking-widest",children:"Encrypted Payment"})]}),(0,s.jsx)("button",{onClick:a,className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 text-slate-400",children:(0,s.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6 flex justify-between items-center bg-white/5 rounded-xl p-3",children:[(0,s.jsx)("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Total Amount"}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("span",{className:"text-2xl font-black text-white",children:["THB"===i?"฿":"$",l.toLocaleString()]}),"paypal"===o&&"THB"===i&&(0,s.jsxs)("p",{className:"text-[10px] text-slate-500",children:["≈ $",f," USD"]})]})]}),h?(0,s.jsxs)("div",{className:"text-center space-y-4 animate-fadeIn",children:[(0,s.jsx)("div",{className:"bg-white p-4 rounded-xl inline-block mx-auto",children:(0,s.jsx)("img",{src:h,className:"w-48 h-48 object-contain"})}),(0,s.jsx)("p",{className:"text-slate-400 text-xs",children:"Scan with any Thai Banking App"}),(0,s.jsx)("button",{onClick:c,className:"w-full h-12 bg-brand-green text-brand-darker font-black rounded-xl uppercase tracking-widest hover:bg-white transition-colors",children:"Simulate Payment Success (Test)"}),(0,s.jsx)("button",{onClick:()=>u(null),className:"text-xs text-slate-500 underline",children:"Cancel"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>x("promptpay"),className:"flex-1 py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ".concat("promptpay"===o?"bg-brand-cyan/10 border-brand-cyan text-brand-cyan":"bg-white/5 border-transparent text-slate-500"),children:[(0,s.jsx)("i",{className:"fa-solid fa-qrcode text-xl leading-none"}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"PromptPay"})]}),(0,s.jsxs)("button",{onClick:()=>x("card"),className:"flex-1 py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ".concat("card"===o?"bg-brand-purple/10 border-brand-purple text-brand-purple":"bg-white/5 border-transparent text-slate-500"),children:[(0,s.jsx)("i",{className:"fa-regular fa-credit-card text-xl leading-none"}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Card"})]}),(0,s.jsxs)("button",{onClick:()=>x("paypal"),className:"flex-1 py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ".concat("paypal"===o?"bg-[#0070ba]/10 border-[#0070ba] text-[#0070ba]":"bg-white/5 border-transparent text-slate-500"),children:[(0,s.jsx)("i",{className:"fa-brands fa-paypal text-xl leading-none"}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"PayPal"})]})]}),"card"===o?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("input",{type:"text",placeholder:"Card Name",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:b.name,onChange:e=>g({...b,name:e.target.value})}),(0,s.jsx)("input",{type:"text",placeholder:"Card Number",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:b.number,onChange:e=>g({...b,number:e.target.value})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"text",placeholder:"MM",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:b.expiration_month,onChange:e=>g({...b,expiration_month:e.target.value})}),(0,s.jsx)("input",{type:"text",placeholder:"YYYY",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:b.expiration_year,onChange:e=>g({...b,expiration_year:e.target.value})}),(0,s.jsx)("input",{type:"text",placeholder:"CVC",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:b.security_code,onChange:e=>g({...b,security_code:e.target.value})})]})]}):"paypal"===o?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center py-4 bg-white/5 rounded-2xl border border-dashed border-white/10",children:[(0,s.jsx)("div",{className:"w-16 h-10 bg-white rounded-lg mx-auto mb-2 flex items-center justify-center",children:(0,s.jsx)("i",{className:"fa-brands fa-paypal text-[#0070ba] text-2xl"})}),(0,s.jsx)("p",{className:"text-[10px] text-slate-400",children:"Pay securely with PayPal"})]}),(0,s.jsx)("div",{className:"paypal-button-container",children:(0,s.jsx)(ek.JV,{style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal",height:45},createOrder:v,onApprove:N,onError:e=>{console.error("PayPal Error:",e),d("PayPal payment failed")},onCancel:()=>{console.log("PayPal payment cancelled")}})})]}):(0,s.jsxs)("div",{className:"text-center py-4 bg-white/5 rounded-2xl border border-dashed border-white/10",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-white rounded-lg mx-auto mb-2 p-1",children:(0,s.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/c/c5/PromptPay-logo.png",className:"w-full h-full object-contain"})}),(0,s.jsx)("p",{className:"text-[10px] text-slate-400",children:"Scan QR Code to Pay instantly"})]}),"paypal"!==o&&(0,s.jsx)("button",{onClick:j,disabled:p,className:"mt-6 w-full h-12 rounded-xl font-black uppercase tracking-[0.2em] text-xs transition-all ".concat(p?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-brand-cyan text-brand-darker hover:bg-white hover:scale-[1.02]"),children:p?"Processing...":"Pay ".concat("THB"===i?"฿":"$").concat(l.toLocaleString())})]})]})]})}):null},eC=e=>{let{listing:t,onClose:a,onBuyNow:r,onAddToCart:l,onSellerClick:i,currency:n="THB",exchangeRate:c=1}=e,d=t.card_data;return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-brand-darker animate-slideUp",children:[(0,s.jsxs)("div",{className:"px-6 py-6 flex justify-between items-center sticky top-0 z-10 bg-brand-darker/80 backdrop-blur-lg border-b border-white/5",children:[(0,s.jsx)("button",{onClick:a,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-white/5 active:bg-brand-cyan active:text-brand-darker transition-all border border-white/5",children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-left text-sm"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"font-black italic skew-x-[-10deg] uppercase tracking-wider text-xs text-brand-green block",children:"Listing Details"}),(0,s.jsx)("span",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:d.number})]}),(0,s.jsx)("div",{className:"w-10"})," "]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto pb-40 scrollbar-hide",children:[(0,s.jsxs)("div",{className:"p-8 flex justify-center relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-brand-green/5 to-transparent pointer-events-none"}),(0,s.jsx)("img",{src:d.imageUrl,alt:d.name,className:"w-full max-w-[280px] drop-shadow-[0_25px_50px_rgba(0,0,0,0.8)] z-10"})]}),(0,s.jsxs)("div",{className:"px-6 space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-black text-white leading-none tracking-tight mb-2",children:d.name}),(0,s.jsxs)("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:[d.set," • ",d.rarity]})]}),(0,s.jsxs)("div",{className:"glass p-6 rounded-3xl border border-brand-green/20 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center border-b border-white/5 pb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Asking Price"}),(0,s.jsxs)("p",{className:"text-4xl font-black text-brand-cyan",children:[p[n]||n," ",Math.round(t.price*c).toLocaleString()]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("span",{className:"bg-brand-green/20 text-brand-green px-3 py-1 rounded-lg text-xs font-black uppercase tracking-widest border border-brand-green/20",children:t.condition})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-2 cursor-pointer group",onClick:()=>i(t.seller),children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-slate-800 overflow-hidden border border-white/10 group-hover:border-brand-cyan transition-colors relative z-10",children:(0,s.jsx)("img",{src:t.seller.avatar_url||"https://api.dicebear.com/7.x/avataaars/svg?seed=seller",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest group-hover:text-brand-cyan transition-colors",children:"Seller"}),(0,s.jsx)("p",{className:"text-white font-bold group-hover:text-brand-cyan transition-colors",children:t.seller.display_name}),(0,s.jsxs)("div",{className:"flex text-[10px] text-yellow-500 gap-0.5",children:[(0,s.jsx)("i",{className:"fa-solid fa-star"}),(0,s.jsx)("i",{className:"fa-solid fa-star"}),(0,s.jsx)("i",{className:"fa-solid fa-star"}),(0,s.jsx)("i",{className:"fa-solid fa-star"}),(0,s.jsx)("i",{className:"fa-solid fa-star-half-stroke"}),(0,s.jsx)("span",{className:"text-slate-500 ml-1",children:"(4.8)"})]})]})]}),(0,s.jsx)("div",{className:"bg-white/5 p-3 rounded-xl",children:(0,s.jsx)("p",{className:"text-xs text-slate-400 italic",children:'"Pack fresh, immediately sleeved. Will ship in top loader."'})})]})]})]}),(0,s.jsxs)("div",{className:"fixed bottom-0 left-0 w-full p-6 bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 flex gap-3 z-50",children:[(0,s.jsxs)("button",{onClick:l,className:"flex-1 h-14 bg-white/5 border border-white/10 text-white hover:bg-white/10 font-black text-[10px] tracking-[0.2em] rounded-xl active:scale-95 transition-all uppercase flex items-center justify-center gap-2 group",children:[(0,s.jsx)("i",{className:"fa-solid fa-cart-plus text-brand-cyan group-hover:scale-110 transition-transform text-lg"}),"ADD TO CART"]}),(0,s.jsxs)("button",{onClick:r,className:"flex-[2] h-14 bg-brand-green text-brand-darker font-black text-[10px] tracking-[0.2em] rounded-xl shadow-lg shadow-brand-green/20 active:scale-95 transition-all uppercase flex items-center justify-center gap-2",children:["BUY NOW",(0,s.jsx)("i",{className:"fa-solid fa-arrow-right"})]})]})]})};new(a(2014)).M4({apiKey:"PLACEHOLDER_API_KEY"});let e_=[{level:1,name:"Entry",minSignups:0,fee:5,color:"text-brand-orange border-brand-orange"},{level:2,name:"Rising Star",minSignups:100,fee:4.5,color:"text-slate-300 border-slate-300"},{level:3,name:"Pro Dealer",minSignups:500,fee:4,color:"text-yellow-400 border-yellow-400"},{level:4,name:"Market Maker",minSignups:1e3,fee:3.5,color:"text-brand-cyan border-brand-cyan"},{level:5,name:"Hobby Icon",minSignups:5e3,fee:3,color:"text-brand-purple border-brand-purple"},{level:6,name:"Legendary",minSignups:1e4,fee:2,color:"text-transparent bg-clip-text bg-gradient-to-r from-brand-cyan via-white to-brand-purple border-white"}],eP=e=>{let{user:t}=e,a=t.partnerStats||{totalSignups:0,totalEarnings:0,currentFee:5,referralCode:"CARDSTREET-".concat(t.name.toUpperCase().slice(0,5)),level:1},l=e_.findIndex(e=>e.level===a.level),i=e_[l],n=e_[l+1],c=n?Math.min(100,Math.max(0,(a.totalSignups-i.minSignups)/(n.minSignups-i.minSignups)*100)):100,[d,o]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"pb-32 animate-fadeIn bg-brand-darker min-h-screen",children:[(0,s.jsxs)("div",{className:"pt-6 px-6 pb-6 bg-gradient-to-b from-brand-cyan/5 to-transparent border-b border-white/5",children:[(0,s.jsx)("p",{className:"text-brand-cyan text-[10px] font-black uppercase tracking-[0.2em] italic skew-x-[-10deg] mb-1",children:"Partner Portal"}),(0,s.jsxs)("h1",{className:"text-3xl font-black text-white italic skew-x-[-5deg]",children:["Welcome back, ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:i.color,children:t.name})]}),(0,s.jsxs)("p",{className:"text-xs font-bold text-slate-500 mt-2 uppercase tracking-widest",children:["Level ",a.level," • ",i.name," Partner"]})]}),(0,s.jsxs)("div",{className:"px-4 -mt-4 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,s.jsxs)("div",{className:"glass p-5 rounded-2xl border border-white/10 relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:(0,s.jsx)("i",{className:"fa-solid fa-users text-4xl text-brand-cyan"})}),(0,s.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Total Sign-ups"}),(0,s.jsx)("p",{className:"text-4xl font-black text-white",children:a.totalSignups.toLocaleString()}),(0,s.jsxs)("div",{className:"mt-2 text-[10px] text-brand-green font-bold uppercase flex items-center gap-1",children:[(0,s.jsx)("i",{className:"fa-solid fa-arrow-trend-up"})," Top 5%"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/10",children:[(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Current Fee"}),(0,s.jsxs)("p",{className:"text-2xl font-black text-brand-red",children:[a.currentFee,"%"]})]}),(0,s.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/10",children:[(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Earnings"}),(0,s.jsxs)("p",{className:"text-2xl font-black text-brand-green",children:["฿",a.totalEarnings.toLocaleString()]})]})]})]}),(0,s.jsxs)("div",{className:"glass p-6 rounded-2xl border border-white/10 space-y-4 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-cyan/5 to-brand-purple/5"}),(0,s.jsxs)("div",{className:"flex justify-between items-end relative z-10",children:[(0,s.jsx)("h3",{className:"font-black text-white italic skew-x-[-10deg] uppercase tracking-wide",children:"Road to Legend"}),n&&(0,s.jsxs)("span",{className:"text-[9px] font-bold text-brand-cyan uppercase tracking-wider",children:[n.minSignups-a.totalSignups," to Level ",n.level]})]}),(0,s.jsx)("div",{className:"h-4 bg-brand-darker rounded-full overflow-hidden border border-white/10 relative z-10",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-brand-cyan via-brand-purple to-brand-red relative",style:{width:"".concat(c,"%")},children:(0,s.jsx)("div",{className:"absolute inset-0 w-full h-full bg-white/20 animate-pulse"})})}),(0,s.jsxs)("div",{className:"flex justify-between text-[9px] font-bold text-slate-500 uppercase tracking-widest relative z-10",children:[(0,s.jsx)("span",{children:i.minSignups}),(0,s.jsx)("span",{children:n?n.minSignups:"MAX"})]})]}),(0,s.jsxs)("div",{className:"glass p-6 rounded-2xl border border-white/10 space-y-4",children:[(0,s.jsx)("h3",{className:"font-black text-white italic skew-x-[-10deg] uppercase tracking-wide",children:"Share the Value"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("div",{className:"flex-1 bg-brand-darker border border-white/10 rounded-xl px-4 flex items-center h-12",children:(0,s.jsxs)("span",{className:"text-xs text-slate-400 font-mono table-fixed truncate w-full",children:["cardstreet.app/join/",a.referralCode]})}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("https://cardstreet.app/join/".concat(a.referralCode)),o(!0),setTimeout(()=>o(!1),2e3)},className:"w-12 h-12 bg-white text-brand-darker rounded-xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all",children:d?(0,s.jsx)("i",{className:"fa-solid fa-check text-brand-green"}):(0,s.jsx)("i",{className:"fa-regular fa-copy"})}),(0,s.jsx)("button",{className:"w-12 h-12 bg-brand-cyan text-brand-darker rounded-xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all",children:(0,s.jsx)("i",{className:"fa-solid fa-qrcode"})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"font-black text-white italic skew-x-[-10deg] uppercase tracking-wide px-2",children:"Tier Rewards"}),e_.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 rounded-xl border transition-all ".concat(e.level===a.level?"bg-white/10 border-brand-cyan/50 shadow-[0_0_15px_rgba(6,182,212,0.1)]":"bg-white/5 border-white/5 opacity-60"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-black text-xs border ".concat(e.color.replace("text-","bg-").split(" ")[0]," bg-opacity-20 ").concat(e.color.split(" ")[0]),children:e.level}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-bold ".concat(e.color.split(" ")[0]),children:e.name}),(0,s.jsxs)("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:[e.minSignups,"+ Recruits"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-black text-white",children:[e.fee,"%"]}),(0,s.jsx)("p",{className:"text-[8px] text-slate-500 font-bold uppercase",children:"Fee"})]})]},e.level))]})]})]})},eA=e=>{let{onApply:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-6 text-center animate-fadeIn relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-cyan/10 rounded-full blur-[100px]"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-brand-purple/10 rounded-full blur-[100px]"}),(0,s.jsxs)("div",{className:"relative z-10 space-y-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-brand-cyan to-brand-purple shadow-lg shadow-brand-cyan/20 mb-4 animate-bounce-slow",children:(0,s.jsx)("i",{className:"fa-solid fa-crown text-4xl text-brand-darker"})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("h1",{className:"text-4xl font-black text-white italic skew-x-[-5deg] tracking-tighter",children:["Your Empire ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-cyan to-brand-green",children:"Starts Here."})]}),(0,s.jsx)("p",{className:"text-slate-400 font-medium text-sm max-w-xs mx-auto leading-relaxed",children:"Bring the community together. Lower your fees. Become a Legend in the CardStreet ecosystem."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 w-full max-w-sm",children:[(0,s.jsxs)("div",{className:"glass p-4 rounded-xl border border-white/5 flex items-center gap-4 text-left",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-brand-green/20 flex items-center justify-center text-brand-green",children:(0,s.jsx)("i",{className:"fa-solid fa-percent"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white text-sm",children:"Lower Fees"}),(0,s.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Earn up to 2% fee rate"})]})]}),(0,s.jsxs)("div",{className:"glass p-4 rounded-xl border border-white/5 flex items-center gap-4 text-left",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-brand-cyan/20 flex items-center justify-center text-brand-cyan",children:(0,s.jsx)("i",{className:"fa-solid fa-users"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white text-sm",children:"Community Leader"}),(0,s.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Exclusive badge & tools"})]})]})]}),(0,s.jsxs)("button",{onClick:t,className:"w-full h-14 bg-white text-brand-darker font-black text-xs uppercase tracking-[0.2em] rounded-xl shadow-xl shadow-white/10 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2 group",children:["Recruit Collectors",(0,s.jsx)("i",{className:"fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"})]})]})]})},eM=e=>{let{rating:t,max:a=5,size:r="sm",color:l="text-yellow-400"}=e;return(0,s.jsx)("div",{className:"flex gap-0.5 ".concat("sm"===r?"text-xs":"md"===r?"text-sm":"text-lg"," ").concat(l),children:[...Array(a)].map((e,a)=>(0,s.jsx)("i",{className:"fa-solid fa-star ".concat(a<Math.floor(t)?"opacity-100":"opacity-20")},a))})},eL=e=>{let{reviews:t}=e;return(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,s.jsxs)("div",{className:"glass p-4 rounded-xl border border-white/5 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-700 overflow-hidden",children:(0,s.jsx)("img",{src:e.reviewerAvatar,alt:e.reviewerName,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-bold text-white",children:e.reviewerName}),(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:e.date})]})]}),e.verifiedPurchase&&(0,s.jsx)("span",{className:"bg-brand-green/10 text-brand-green text-[8px] font-black uppercase px-1.5 py-0.5 rounded border border-brand-green/20",children:"Verified"})]}),(0,s.jsx)(eM,{rating:e.rating}),(0,s.jsx)("p",{className:"text-xs text-slate-300 leading-relaxed",children:e.comment}),e.itemName&&(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-2 p-1.5 bg-black/20 rounded border border-white/5 w-fit",children:[(0,s.jsx)("i",{className:"fa-solid fa-tag text-[9px] text-brand-cyan"}),(0,s.jsx)("span",{className:"text-[9px] text-slate-400 font-bold truncate max-w-[150px]",children:e.itemName})]})]},e.id))})},eT=e=>{var t;let{seller:a,listings:l,reviews:i,onBack:n,onSelectCard:c,currency:d="THB",exchangeRate:o=1}=e,[x,m]=(0,r.useState)("shop"),h=p[d]||d,u=a.rating||4.9;return a.reviewCount,(0,s.jsxs)("div",{className:"bg-brand-darker min-h-screen pb-32 animate-fadeIn relative",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-purple/10 rounded-full blur-[80px] pointer-events-none"}),(0,s.jsxs)("div",{className:"pt-6 px-4 flex items-center gap-4 relative z-10",children:[(0,s.jsx)("button",{onClick:n,className:"w-10 h-10 rounded-xl glass flex items-center justify-center text-slate-400 hover:text-white transition-colors",children:(0,s.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Seller Profile"})]}),(0,s.jsxs)("div",{className:"px-6 mt-6 text-center space-y-4 relative z-10",children:[(0,s.jsxs)("div",{className:"relative mx-auto w-24 h-24",children:[(0,s.jsx)("div",{className:"w-24 h-24 rounded-full p-1 bg-gradient-to-br from-brand-cyan via-brand-purple to-brand-red animate-pulse-slow",children:(0,s.jsx)("img",{src:a.avatar,className:"w-full h-full rounded-full object-cover border-4 border-brand-darker",alt:a.name})}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0 w-8 h-8 bg-brand-darker rounded-full flex items-center justify-center border border-brand-cyan/30 shadow-lg",children:(0,s.jsx)("i",{className:"fa-solid fa-certificate text-brand-cyan text-lg"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-black text-white italic skew-x-[-5deg] mb-1",children:a.name}),(0,s.jsx)("div",{className:"flex items-center justify-center gap-2 mb-3",children:(null==(t=a.badges)?void 0:t.map(e=>(0,s.jsx)("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/10 text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:e},e)))||(0,s.jsx)("span",{className:"px-2 py-0.5 rounded bg-brand-purple/10 border border-brand-purple/20 text-[9px] font-bold text-brand-purple uppercase tracking-wider",children:"Verified Pro"})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg font-black text-white",children:u}),(0,s.jsx)(eM,{rating:u})]}),(0,s.jsx)("div",{className:"w-[1px] h-8 bg-white/10"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg font-black text-white",children:142}),(0,s.jsx)("p",{className:"text-[8px] font-bold text-slate-500 uppercase",children:"Sales"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,s.jsx)("button",{className:"h-10 px-6 bg-white text-brand-darker font-black text-xs uppercase tracking-widest rounded-xl hover:scale-105 transition-transform",children:"Follow"}),(0,s.jsx)("button",{className:"h-10 w-10 glass rounded-xl flex items-center justify-center text-brand-cyan hover:bg-brand-cyan/10 transition-colors",children:(0,s.jsx)("i",{className:"fa-regular fa-comment-dots"})})]})]}),(0,s.jsx)("div",{className:"mt-8 border-b border-white/5 px-6 flex gap-6 overflow-x-auto scrollbar-hide",children:["shop","reviews","about"].map(e=>(0,s.jsxs)("button",{onClick:()=>m(e),className:"pb-3 text-xs font-bold uppercase tracking-widest transition-colors relative ".concat(x===e?"text-white":"text-slate-600 hover:text-slate-400"),children:[e,x===e&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-brand-cyan"})]},e))}),(0,s.jsxs)("div",{className:"p-6 min-h-[300px]",children:["shop"===x&&(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:l.map(e=>{var t;return(0,s.jsxs)("div",{className:"glass rounded-xl p-2 border border-white/5 group relative active:scale-95 transition-all",children:[(0,s.jsxs)("div",{className:"aspect-[3/4] bg-brand-darker rounded-lg mb-2 relative overflow-hidden",children:[(0,s.jsx)("img",{src:(null==(t=e.card_data.images)?void 0:t.small)||e.card_data.imageUrl,className:"w-full h-full object-cover"}),(0,s.jsx)("span",{className:"absolute top-1 right-1 bg-black/60 backdrop-blur text-white text-[9px] font-bold px-1.5 py-0.5 rounded",children:e.condition})]}),(0,s.jsx)("h4",{className:"text-[10px] font-bold text-white truncate",children:e.card_data.name}),(0,s.jsxs)("p",{className:"text-brand-green font-black text-xs",children:[h,Math.round(e.price*o).toLocaleString()]}),(0,s.jsx)("button",{onClick:()=>c(e.card_data),className:"absolute inset-0 w-full h-full opacity-0"})]},e.id)})}),"reviews"===x&&(0,s.jsx)(eL,{reviews:i}),"about"===x&&(0,s.jsxs)("div",{className:"glass p-6 rounded-2xl border border-white/5 space-y-4 text-center",children:[(0,s.jsx)("i",{className:"fa-solid fa-quote-left text-brand-cyan text-2xl opacity-50"}),(0,s.jsx)("p",{className:"text-sm text-slate-300 italic leading-relaxed",children:a.bio||"Professional collector based in Bangkok. Specializing in Mint condition Japanese FA and SAR charts. Fast shipping and bomb-proof packaging guaranteed!"}),(0,s.jsxs)("div",{className:"pt-4 border-t border-white/5 flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-slate-500 font-bold uppercase",children:"Member Since"}),(0,s.jsx)("span",{className:"text-white font-mono",children:a.joinedAt||"Nov 2023"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-slate-500 font-bold uppercase",children:"Avg Ship Time"}),(0,s.jsx)("span",{className:"text-brand-green font-mono",children:"1.2 Days"})]})]})]})]})]})};function eI(){let[e,t]=(0,r.useState)("marketplace"),[a,i]=(0,r.useState)("all"),[n,c]=(0,r.useState)(null),[d,o]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),[f,w]=(0,r.useState)([]),[v,N]=(0,r.useState)([]),[C,_]=(0,r.useState)(null),[P,A]=(0,r.useState)("THB"),[M,L]=(0,r.useState)("TH"),[T,I]=(0,r.useState)([]),[E,D]=(0,r.useState)(!1),[z,R]=(0,r.useState)(!1),[O,B]=(0,r.useState)(null),[H,G]=(0,r.useState)(()=>{{let t=localStorage.getItem("cardstreet-data-v1");if(t){var e;let a=JSON.parse(t);if((null==(e=a.customCollections)?void 0:e.length)>0)return a.customCollections}}return[{id:"default",name:"Main Vault",items:m.slice(0,3).map((e,t)=>({id:"seed-item-".concat(t),cardId:e.id,card:e,quantity:1,condition:0===t?l.NM:1===t?l.LP:l.NM,purchasePrice:e.marketPrice,addedAt:new Date().toISOString(),isListing:!0,listingPrice:0===t?5500:1===t?1200:15e3,isGraded:2===t,gradingCompany:2===t?"PSA":void 0,grade:2===t?10:void 0})),includeInPortfolio:!0,createdAt:new Date().toISOString()}]}),[W,J]=(0,r.useState)(!1),V=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=j();e.auth.getSession().then(e=>{let{data:{session:t}}=e;if(null==t?void 0:t.user){var a;_({id:t.user.id,name:t.user.user_metadata.full_name||(null==(a=t.user.email)?void 0:a.split("@")[0])||"User",email:t.user.email||"",avatar:t.user.user_metadata.avatar_url||"https://api.dicebear.com/7.x/avataaars/svg?seed="+t.user.id,provider:t.user.app_metadata.provider||"email"})}});let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{if(null==t?void 0:t.user){var a;_({id:t.user.id,name:t.user.user_metadata.full_name||(null==(a=t.user.email)?void 0:a.split("@")[0])||"User",email:t.user.email||"",avatar:t.user.user_metadata.avatar_url||"https://api.dicebear.com/7.x/avataaars/svg?seed="+t.user.id,provider:t.user.app_metadata.provider||"email"})}else _(null)}),a=localStorage.getItem("cardstreet-data-v1");if(a){let e=JSON.parse(a);e.wishlist&&N(e.wishlist),e.customCollections&&G(e.customCollections),e.currency&&A(e.currency),e.language&&L(e.language),e.cart&&I(e.cart)}return()=>t.unsubscribe()},[]),(0,r.useEffect)(()=>{localStorage.setItem("cardstreet-data-v1",JSON.stringify({wishlist:v,customCollections:H,currency:P,language:M,cart:T}))},[v,H,P,M,T]);let Y=x[P]||1,q="THB"===P?"฿":P,$=(0,r.useMemo)(()=>H.filter(e=>e.includeInPortfolio).reduce((e,t)=>e+t.items.reduce((e,t)=>e+t.purchasePrice*t.quantity,0),0),[H])*("THB"===P?1:Y),K=e=>{N(t=>t.find(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])},X=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",s={id:Math.random().toString(36).substr(2,9),cardId:e.id,card:e,quantity:1,condition:l.NM,purchasePrice:e.marketPrice,addedAt:new Date().toISOString()};G(e=>e.map(e=>e.id===a?{...e,items:[...e.items,s]}:e)),N(t=>t.filter(t=>t.id!==e.id)),t("vault")},Z=e=>{I(t=>t.find(t=>t.id===e.id)?t:[...t,e]),D(!0)},[Q,ee]=(0,r.useState)(null),et=(0,r.useMemo)(()=>{let e=[];return H.forEach(t=>{t.items.forEach(t=>{t.isListing&&e.push({id:t.id,price:t.listingPrice||0,condition:t.condition,card_data:t.card||m.find(e=>e.id===t.cardId),seller:C||{display_name:"Guest",avatar_url:""},created_at:new Date().toISOString()})})}),[...e,...b.map(e=>({...e,seller:{display_name:e.seller.name,avatar_url:e.seller.avatar}}))]},[H,C]);return(0,s.jsx)("div",{className:"bg-brand-darker min-h-screen flex justify-center selection:bg-brand-cyan/30 overflow-hidden text-slate-200 font-sans",children:(0,s.jsxs)("div",{className:"w-full max-w-[480px] bg-brand-darker h-screen flex flex-col relative border-x border-white/5 shadow-2xl overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-[-10%] left-[-20%] w-[200px] h-[200px] bg-brand-cyan/10 rounded-full blur-[80px] pointer-events-none"}),(0,s.jsx)("div",{className:"absolute bottom-[-10%] right-[-20%] w-[200px] h-[200px] bg-brand-red/10 rounded-full blur-[80px] pointer-events-none"}),(0,s.jsxs)("main",{className:"flex-1 overflow-y-auto scrollbar-hide flex flex-col z-10",children:[(0,s.jsxs)("header",{className:"w-full px-6 py-6 flex justify-between items-center z-30 shrink-0",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("div",{className:"relative w-[60px] h-[60px] flex-shrink-0",children:(0,s.jsx)("img",{src:"/logo.png",alt:"CardStreet",className:"w-full h-full object-contain"})})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>D(!0),className:"w-9 h-9 flex items-center justify-center rounded-xl bg-white/5 hover:bg-white/10 relative transition-all",children:[(0,s.jsx)("i",{className:"fa-solid fa-cart-shopping text-slate-400"}),T.length>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-brand-red text-white text-[9px] font-black rounded-full flex items-center justify-center border border-brand-darker",children:T.length})]}),(0,s.jsx)(g,{currentCurrency:P,onCurrencyChange:A})]})]}),(0,s.jsxs)("div",{className:"flex-1 px-6 pb-40",children:["explore"===e&&(0,s.jsx)(y,{onSelectCard:c,searchRequest:O,localListings:et,currency:P,exchangeRate:Y}),"marketplace"===e&&(0,s.jsx)(k,{initialGame:a,onSelectCard:c,onSelectListing:o,onSellerClick:e=>{h({id:e.id||"mock-id",name:e.display_name,email:"seller@example.com",avatar:e.avatar_url,provider:"google",rating:parseFloat(e.rating)||4.8,badges:["Verified Pro","Fast Shipper"]}),t("seller_profile")},onAddToCart:Z,listings:et,currency:P,exchangeRate:Y}),"seller_profile"===e&&p&&(0,s.jsx)(eT,{seller:p,listings:et.slice(0,4),reviews:u,onBack:()=>t("marketplace"),onSelectCard:c,currency:P,exchangeRate:Y}),"add"===e&&(0,s.jsx)(S,{onScanClick:()=>{var e;return null==(e=V.current)?void 0:e.click()},onSelectCard:c}),"vault"===e&&(0,s.jsx)(F,{customCollections:H,wishlist:v,onUpdateCollections:G,onToggleWishlist:K,onAddToCollection:X,onListCard:(e,t,a)=>ee({colId:e,item:t,card:a}),listingTarget:Q,onCancelListing:()=>ee(null),onPublishListing:e=>{Q&&(G(t=>t.map(t=>t.id===Q.colId?{...t,items:t.items.map(t=>t.id===Q.item.id?{...t,isListing:!0,listingPrice:e.price,condition:e.condition,isGraded:e.is_graded,gradingCompany:e.grading_company,grade:e.grade}:t)}:t)),ee(null))},activeListings:et,totalValue:$,currencySymbol:q}),"profile"===e&&(0,s.jsx)(ev,{user:C,onNavigatePartner:()=>t("partner"),onGuestLogin:()=>{_({id:"guest",name:"Guest Director",email:"guest@cardstreet.app",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=guest",provider:"guest"})}}),"partner"===e&&((null==C?void 0:C.isPartner)?(0,s.jsx)(eP,{user:C}):(0,s.jsx)(eA,{onApply:()=>{C?_({...C,isPartner:!0,partnerStats:{totalSignups:324,level:2,currentFee:4.5,totalEarnings:15400,referralCode:"CS-".concat(C.name.toUpperCase().slice(0,3))}}):(alert("Please sign in to apply."),t("profile"))}}))]})]}),(0,s.jsxs)("nav",{className:"absolute bottom-0 left-0 w-full bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 px-6 pt-2 pb-8 flex justify-between items-end z-40 animate-slideUp",children:[(0,s.jsxs)("button",{onClick:()=>t("marketplace"),className:"flex flex-col items-center gap-1.5 flex-1 transition-all group p-2 ".concat("marketplace"===e?"-translate-y-2":""),children:[(0,s.jsx)("i",{className:"fa-solid fa-shop text-xl transition-colors ".concat("marketplace"===e?"text-brand-purple drop-shadow-[0_0_10px_rgba(168,85,247,0.5)]":"text-slate-600 group-hover:text-slate-400")}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest transition-opacity ".concat("marketplace"===e?"opacity-100 text-white":"opacity-0"),children:"Shop"})]}),(0,s.jsxs)("button",{onClick:()=>t("explore"),className:"flex flex-col items-center gap-1.5 flex-1 transition-all group p-2 ".concat("explore"===e?"-translate-y-2":""),children:[(0,s.jsx)("i",{className:"fa-solid fa-magnifying-glass text-xl transition-colors ".concat("explore"===e?"text-brand-red drop-shadow-[0_0_10px_rgba(244,63,94,0.5)]":"text-slate-600 group-hover:text-slate-400")}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest transition-opacity ".concat("explore"===e?"opacity-100 text-white":"opacity-0"),children:"Explore"})]}),(0,s.jsxs)("div",{className:"relative -top-6",children:[(0,s.jsxs)("button",{onClick:()=>t("add"),className:"flex items-center justify-center bg-white text-brand-darker w-16 h-16 rounded-full border-[6px] border-brand-darker z-50 active:scale-95 transition-all shadow-xl shadow-white/10 group",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-brand-cyan via-brand-red to-brand-green opacity-20 group-hover:opacity-100 transition-opacity"}),W?(0,s.jsx)("div",{className:"animate-spin h-6 w-6 border-3 border-brand-darker/20 border-t-brand-darker rounded-full relative z-10"}):(0,s.jsx)("i",{className:"fa-solid fa-camera text-2xl relative z-10"})]}),(0,s.jsx)("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 w-full text-center",children:(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest transition-opacity ".concat("add"===e?"opacity-100 text-white":"opacity-0"),children:"Scan"})})]}),(0,s.jsxs)("button",{onClick:()=>t("vault"),className:"flex flex-col items-center gap-1.5 flex-1 transition-all group p-2 ".concat("vault"===e?"-translate-y-2":""),children:[(0,s.jsx)("i",{className:"fa-solid fa-vault text-xl transition-colors ".concat("vault"===e?"text-brand-green drop-shadow-[0_0_10px_rgba(132,204,22,0.5)]":"text-slate-600 group-hover:text-slate-400")}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest transition-opacity ".concat("vault"===e?"opacity-100 text-white":"opacity-0"),children:"Vault"})]}),(0,s.jsxs)("button",{onClick:()=>t("profile"),className:"flex flex-col items-center gap-1.5 flex-1 transition-all group p-2 ".concat("profile"===e?"-translate-y-2":""),children:[(0,s.jsx)("i",{className:"fa-solid fa-user-astronaut text-xl transition-colors ".concat("profile"===e?"text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.5)]":"text-slate-600 group-hover:text-slate-400")}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest transition-opacity ".concat("profile"===e?"opacity-100 text-white":"opacity-0"),children:"Profile"})]})]}),f.length>0&&(0,s.jsx)(ey,{candidates:f,onSelect:e=>{c(e),w([])},onCancel:()=>w([])}),n&&(0,s.jsx)(U,{card:n,isWishlisted:!!v.find(e=>e.id===n.id),onClose:()=>c(null),onToggleWishlist:K,onAddToCollection:e=>{X(e),c(null)},onShopNow:()=>{t("marketplace"),B({term:n.name,timestamp:Date.now()}),c(null)},onAddToCart:e=>Z(e),currency:P,exchangeRate:Y}),d&&(0,s.jsx)(eC,{listing:d,onClose:()=>o(null),onBuyNow:()=>{var e;I([{id:d.id,card:d.card_data,price:d.price,sellerName:(null==(e=d.seller)?void 0:e.display_name)||"Unknown",condition:d.condition}]),o(null),R(!0)},onAddToCart:()=>{var e;Z({id:d.id,card:d.card_data,price:d.price,sellerName:(null==(e=d.seller)?void 0:e.display_name)||"Unknown",condition:d.condition}),o(null)},onSellerClick:e=>{h({id:e.id||"mock-id",name:e.display_name,email:"seller@example.com",avatar:e.avatar_url,provider:"google",rating:parseFloat(e.rating)||4.8,badges:["Verified Pro","Fast Shipper"]}),o(null),t("seller_profile")},currency:P,exchangeRate:Y}),(0,s.jsx)(eN,{isOpen:E,onClose:()=>D(!1),cart:T,onRemoveItem:e=>{I(t=>t.filter(t=>t.id!==e))},onCheckout:()=>{D(!1),R(!0)},currencySymbol:q}),(0,s.jsx)(eS,{isOpen:z,onClose:()=>R(!1),amount:T.reduce((e,t)=>e+t.price,0)*("THB"===P?1:Y),currency:P,items:T,onPaymentSuccess:()=>{R(!1),I([]),alert("Payment Successful! Thank you for your purchase.")},onPaymentFailed:e=>alert("Payment Failed: "+e)})]})})}},4979:(e,t,a)=>{Promise.resolve().then(a.bind(a,957))}},e=>{e.O(0,[798,488,479,441,255,358],()=>e(e.s=4979)),_N_E=e.O()}]);