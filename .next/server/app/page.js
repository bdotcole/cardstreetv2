(()=>{var a={};a.id=974,a.ids=[974],a.modules={78:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.GaxiosError=b.GAXIOS_ERROR_SYMBOL=void 0,b.defaultErrorRedactor=function a(b){let c="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function d(a){a&&a.forEach((b,d)=>{(/^authentication$/i.test(d)||/^authorization$/i.test(d)||/secret/i.test(d))&&a.set(d,c)})}function e(a,b){if("object"==typeof a&&null!==a&&"string"==typeof a[b]){let d=a[b];(/grant_type=/i.test(d)||/assertion=/i.test(d)||/secret/i.test(d))&&(a[b]=c)}}function f(a){a&&"object"==typeof a&&(a instanceof FormData||a instanceof URLSearchParams||"forEach"in a&&"set"in a?a.forEach((b,d)=>{(["grant_type","assertion"].includes(d)||/secret/.test(d))&&a.set(d,c)}):("grant_type"in a&&(a.grant_type=c),"assertion"in a&&(a.assertion=c),"client_secret"in a&&(a.client_secret=c)))}return b.config&&(d(b.config.headers),e(b.config,"data"),f(b.config.data),e(b.config,"body"),f(b.config.body),b.config.url.searchParams.has("token")&&b.config.url.searchParams.set("token",c),b.config.url.searchParams.has("client_secret")&&b.config.url.searchParams.set("client_secret",c)),b.response&&(a({config:b.response.config}),d(b.response.headers),b.response.bodyUsed&&(e(b.response,"data"),f(b.response.data))),b};let e=d(c(88633)),f=d(c(97376)).default.pkg;b.GAXIOS_ERROR_SYMBOL=Symbol.for(`${f.name}-gaxios-error`);class g extends Error{config;response;code;status;error;[b.GAXIOS_ERROR_SYMBOL]=f.version;static[Symbol.hasInstance](a){return!!a&&"object"==typeof a&&b.GAXIOS_ERROR_SYMBOL in a&&a[b.GAXIOS_ERROR_SYMBOL]===f.version||Function.prototype[Symbol.hasInstance].call(g,a)}constructor(a,b,c,d){if(super(a,{cause:d}),this.config=b,this.response=c,this.error=d instanceof Error?d:void 0,this.config=(0,e.default)(!0,{},b),this.response&&(this.response.config=(0,e.default)(!0,{},this.response.config)),this.response){try{this.response.data=function(a,b){switch(a){case"stream":default:return b;case"json":return JSON.parse(JSON.stringify(b));case"arraybuffer":return JSON.parse(Buffer.from(b).toString("utf8"));case"blob":return JSON.parse(b.text())}}(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}d instanceof DOMException?this.code=d.name:d&&"object"==typeof d&&"code"in d&&("string"==typeof d.code||"number"==typeof d.code)&&(this.code=d.code)}static extractAPIErrorFromResponse(a,b="The request failed"){let c=b;if("string"==typeof a.data&&(c=a.data),a.data&&"object"==typeof a.data&&"error"in a.data&&a.data.error&&!a.ok){if("string"==typeof a.data.error)return{message:a.data.error,code:a.status,status:a.statusText};if("object"==typeof a.data.error){c="message"in a.data.error&&"string"==typeof a.data.error.message?a.data.error.message:c;let b="status"in a.data.error&&"string"==typeof a.data.error.status?a.data.error.status:a.statusText,d="code"in a.data.error&&"number"==typeof a.data.error.code?a.data.error.code:a.status;if("errors"in a.data.error&&Array.isArray(a.data.error.errors)){let e=[];for(let b of a.data.error.errors)"object"==typeof b&&"message"in b&&"string"==typeof b.message&&e.push(b.message);return Object.assign({message:e.join("\n")||c,code:d,status:b},a.data.error)}return Object.assign({message:c,code:d,status:b},a.data.error)}}return{message:c,code:a.status,status:a.statusText}}}b.GaxiosError=g},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},1162:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isSymbol=function(a){return"symbol"==typeof a||a instanceof Symbol}},1682:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UserRefreshClient=b.USER_REFRESH_ACCOUNT_TYPE=void 0;let d=c(32852),e=c(72449);b.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class f extends d.OAuth2Client{_refreshToken;constructor(a,b,c,d,e){let f=a&&"object"==typeof a?a:{clientId:a,clientSecret:b,refreshToken:c,eagerRefreshThresholdMillis:d,forceRefreshOnFailure:e};super(f),this._refreshToken=f.refreshToken,this.credentials.refresh_token=f.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(a){let b={...f.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:a})};return e.AuthClient.setMethodName(b,"fetchIdToken"),(await this.transporter.request(b)).data.id_token}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the user refresh token");if("authorized_user"!==a.type)throw Error('The incoming JSON object does not have the "authorized_user" type');if(!a.client_id)throw Error("The incoming JSON object does not contain a client_id field");if(!a.client_secret)throw Error("The incoming JSON object does not contain a client_secret field");if(!a.refresh_token)throw Error("The incoming JSON object does not contain a refresh_token field");this._clientId=a.client_id,this._clientSecret=a.client_secret,this._refreshToken=a.refresh_token,this.credentials.refresh_token=a.refresh_token,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}async fromStreamAsync(a){return new Promise((b,c)=>{if(!a)return c(Error("Must pass in a stream containing the user refresh token."));let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);return this.fromJSON(a),b()}catch(a){return c(a)}})})}static fromJSON(a){let b=new f;return b.fromJSON(a),b}}b.UserRefreshClient=f},1708:a=>{"use strict";a.exports=require("node:process")},1829:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.last=function(a){return a[a.length-1]}},2095:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(34548),e=c(38649),f=c(38352);b.cloneDeepWith=function(a,b){return d.cloneDeepWith(a,(c,g,h,i)=>{let j=b?.(c,g,h,i);if(void 0!==j)return j;if("object"==typeof a){if(e.getTag(a)===f.objectTag&&"function"!=typeof a.constructor){let b={};return i.set(a,b),d.copyProperties(b,a,h,i),b}switch(Object.prototype.toString.call(a)){case f.numberTag:case f.stringTag:case f.booleanTag:{let b=new a.constructor(a?.valueOf());return d.copyProperties(b,a),b}case f.argumentsTag:{let b={};return d.copyProperties(b,a),b.length=a.length,b[Symbol.iterator]=a[Symbol.iterator],b}default:return}}})}},2958:(a,b,c)=>{"use strict";var d=c(38301),e=c(99088),f="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},g=e.useSyncExternalStore,h=d.useRef,i=d.useEffect,j=d.useMemo,k=d.useDebugValue;b.useSyncExternalStoreWithSelector=function(a,b,c,d,e){var l=h(null);if(null===l.current){var m={hasValue:!1,value:null};l.current=m}else m=l.current;var n=g(a,(l=j(function(){function a(a){if(!i){if(i=!0,g=a,a=d(a),void 0!==e&&m.hasValue){var b=m.value;if(e(b,a))return h=b}return h=a}if(b=h,f(g,a))return b;var c=d(a);return void 0!==e&&e(b,c)?(g=a,b):(g=a,h=c)}var g,h,i=!1,j=void 0===c?null:c;return[function(){return a(b())},null===j?void 0:function(){return a(j())}]},[b,c,d,e]))[0],l[1]);return i(function(){m.hasValue=!0,m.value=n},[n]),k(n),n}},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3752:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(5957),b)},4052:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.createCrypto=function(){return h()?new f.BrowserCrypto:new g.NodeCrypto},b.hasBrowserCrypto=h;let f=c(73133),g=c(96693);function h(){return"undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle}e(c(57932),b)},4516:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.getSymbols=function(a){return Object.getOwnPropertySymbols(a).filter(b=>Object.prototype.propertyIsEnumerable.call(a,b))}},4573:a=>{"use strict";a.exports=require("node:buffer")},5957:function(a,b,c){"use strict";let d;var e,f,g,h=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),i=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),j=this&&this.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&h(b,a,c[d]);return i(b,a),b});Object.defineProperty(b,"__esModule",{value:!0}),b.env=b.DebugLogBackendBase=b.placeholder=b.AdhocDebugLogger=b.LogSeverity=void 0,b.getNodeBackend=r,b.getDebugBackend=function(a){return new s(a)},b.getStructuredBackend=function(a){return new t(a)},b.setBackend=function(a){d=a,u.clear()},b.log=v;let k=c(94735),l=j(c(19771)),m=j(c(28354)),n=c(11229);(f=g||(b.LogSeverity=g={})).DEFAULT="DEFAULT",f.DEBUG="DEBUG",f.INFO="INFO",f.WARNING="WARNING",f.ERROR="ERROR";class o extends k.EventEmitter{constructor(a,b){super(),this.namespace=a,this.upstream=b,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(a,b)=>this.on(a,b)}),this.func.debug=(...a)=>this.invokeSeverity(g.DEBUG,...a),this.func.info=(...a)=>this.invokeSeverity(g.INFO,...a),this.func.warn=(...a)=>this.invokeSeverity(g.WARNING,...a),this.func.error=(...a)=>this.invokeSeverity(g.ERROR,...a),this.func.sublog=a=>v(a,this.func)}invoke(a,...b){if(this.upstream)try{this.upstream(a,...b)}catch(a){}try{this.emit("log",a,b)}catch(a){}}invokeSeverity(a,...b){this.invoke({severity:a},...b)}}b.AdhocDebugLogger=o,b.placeholder=new o("",()=>{}).func;class p{constructor(){var a;this.cached=new Map,this.filters=[],this.filtersSet=!1;let c=null!=(a=l.env[b.env.nodeEnables])?a:"*";"all"===c&&(c="*"),this.filters=c.split(",")}log(a,b,...c){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let d=this.cached.get(a);d||(d=this.makeLogger(a),this.cached.set(a,d)),d(b,...c)}catch(a){console.error(a)}}}b.DebugLogBackendBase=p;class q extends p{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(a){return this.enabledRegexp.test(a)}makeLogger(a){return this.enabledRegexp.test(a)?(b,...c)=>{var d;let e,f=`${n.Colours.green}${a}${n.Colours.reset}`,h=`${n.Colours.yellow}${l.pid}${n.Colours.reset}`;switch(b.severity){case g.ERROR:e=`${n.Colours.red}${b.severity}${n.Colours.reset}`;break;case g.INFO:e=`${n.Colours.magenta}${b.severity}${n.Colours.reset}`;break;case g.WARNING:e=`${n.Colours.yellow}${b.severity}${n.Colours.reset}`;break;default:e=null!=(d=b.severity)?d:g.DEFAULT}let i=m.formatWithOptions({colors:n.Colours.enabled},...c),j=Object.assign({},b);delete j.severity;let k=Object.getOwnPropertyNames(j).length?JSON.stringify(j):"",o=k?`${n.Colours.grey}${k}${n.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",h,f,e,i,k?` ${o}`:"")}:()=>{}}setFilters(){let a=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=RegExp(`^${a}$`,"i")}}function r(){return new q}class s extends p{constructor(a){super(),this.debugPkg=a}makeLogger(a){let b=this.debugPkg(a);return(a,...c)=>{b(c[0],...c.slice(1))}}setFilters(){var a;let b=null!=(a=l.env.NODE_DEBUG)?a:"";l.env.NODE_DEBUG=`${b}${b?",":""}${this.filters.join(",")}`}}class t extends p{constructor(a){super(),this.upstream=null!=a?a:void 0}makeLogger(a){var b;let c=null==(b=this.upstream)?void 0:b.makeLogger(a);return(a,...b)=>{var d;let e=JSON.stringify(Object.assign({severity:null!=(d=a.severity)?d:g.INFO,message:m.format(...b)},a));c?c(a,e):console.log("%s",e)}}setFilters(){var a;null==(a=this.upstream)||a.setFilters()}}b.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};let u=new Map;function v(a,c){let e;if(!d&&!l.env[b.env.nodeEnables]||!a)return b.placeholder;c&&(a=`${c.instance.namespace}:${a}`);let f=u.get(a);if(f)return f.func;if(null===d)return b.placeholder;void 0===d&&(d=r());let g=new o(a,(b,...c)=>{if(e!==d){if(null===d)return;void 0===d&&(d=r()),e=d}null==d||d.log(a,b,...c)});return u.set(a,g),g.func}},7363:(a,b,c)=>{"use strict";c(77740);let{Duplex:d}=c(27910);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}a.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._final(b)});null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._write(b,c,d)});a.send(b,d)},h.on("end",f),h.on("error",g),h}},7423:(a,b,c)=>{"use strict";b.kF=void 0;let d=c(58925);Object.defineProperty(b,"kF",{enumerable:!0,get:function(){return d.GoogleAuth}}),c(54447),c(30911),c(72449),c(82648),c(35046),c(82083),c(93759),c(53533),c(83364),c(41867),c(32852),c(56455),c(1682),c(83948),c(29780),c(41167),c(13284),c(52177),c(47447),c(12724),c(59857),c(73820),new d.GoogleAuth},8111:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FileSubjectTokenSupplier=void 0;let d=c(28354),e=c(29021),f=(0,d.promisify)(e.readFile??(()=>{})),g=(0,d.promisify)(e.realpath??(()=>{})),h=(0,d.promisify)(e.lstat??(()=>{}));class i{filePath;formatType;subjectTokenFieldName;constructor(a){this.filePath=a.filePath,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName}async getSubjectToken(){let a,b=this.filePath;try{if(b=await g(b),!(await h(b)).isFile())throw Error()}catch(a){throw a instanceof Error&&(a.message=`The file at ${b} does not exist, or it is not a file. ${a.message}`),a}let c=await f(b,{encoding:"utf8"});if("text"===this.formatType?a=c:"json"===this.formatType&&this.subjectTokenFieldName&&(a=JSON.parse(c)[this.subjectTokenFieldName]),!a)throw Error("Unable to parse the subject_token from the credential_source file");return a}}b.FileSubjectTokenSupplier=i},9356:(a,b,c)=>{a.exports=c(63724).range},10003:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isPlainObject=function(a){if("object"!=typeof a||null==a)return!1;if(null===Object.getPrototypeOf(a))return!0;if("[object Object]"!==Object.prototype.toString.call(a)){let b=a[Symbol.toStringTag];return null!=b&&!!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable&&a.toString()===`[object ${b}]`}let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}},10680:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isDeepKey=function(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}},10805:(a,b,c)=>{"use strict";var d=c(79428).Buffer,e=c(79428).SlowBuffer;function f(a,b){if(!d.isBuffer(a)||!d.isBuffer(b)||a.length!==b.length)return!1;for(var c=0,e=0;e<a.length;e++)c|=a[e]^b[e];return 0===c}a.exports=f,f.install=function(){d.prototype.equal=e.prototype.equal=function(a){return f(this,a)}};var g=d.prototype.equal,h=e.prototype.equal;f.restore=function(){d.prototype.equal=g,e.prototype.equal=h}},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11229:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Colours=void 0;class c{static isEnabled(a){return a&&a.isTTY&&("function"!=typeof a.getColorDepth||a.getColorDepth()>2)}static refresh(){c.enabled=c.isEnabled(null==process?void 0:process.stderr),this.enabled?(c.reset="\x1b[0m",c.bright="\x1b[1m",c.dim="\x1b[2m",c.red="\x1b[31m",c.green="\x1b[32m",c.yellow="\x1b[33m",c.blue="\x1b[34m",c.magenta="\x1b[35m",c.cyan="\x1b[36m",c.white="\x1b[37m",c.grey="\x1b[90m"):(c.reset="",c.bright="",c.dim="",c.red="",c.green="",c.yellow="",c.blue="",c.magenta="",c.cyan="",c.white="",c.grey="")}}b.Colours=c,c.enabled=!1,c.reset="",c.bright="",c.dim="",c.red="",c.green="",c.yellow="",c.blue="",c.magenta="",c.cyan="",c.white="",c.grey="",c.refresh()},11723:a=>{"use strict";a.exports=require("querystring")},12412:a=>{"use strict";a.exports=require("assert")},12724:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PluggableAuthClient=b.ExecutableError=void 0;let d=c(52177),e=c(75994),f=c(80223);var g=c(80223);Object.defineProperty(b,"ExecutableError",{enumerable:!0,get:function(){return g.ExecutableError}});class h extends d.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(a){if(super(a),!a.credential_source.executable||(this.command=a.credential_source.executable.command,!this.command))throw Error('No valid Pluggable Auth "credential_source" provided.');if(void 0===a.credential_source.executable.timeout_millis)this.timeoutMillis=3e4;else if(this.timeoutMillis=a.credential_source.executable.timeout_millis,this.timeoutMillis<5e3||this.timeoutMillis>12e4)throw Error("Timeout must be between 5000120000 milliseconds.");this.outputFile=a.credential_source.executable.output_file,this.handler=new f.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){let a;if("1"!==process.env.GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES)throw Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");if(this.outputFile&&(a=await this.handler.retrieveCachedResponse()),!a){let b=new Map;b.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),b.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),b.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&b.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let c=this.getServiceAccountEmail();c&&b.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",c),a=await this.handler.retrieveResponseFromExecutable(b)}if(a.version>1)throw Error("Version of executable is not currently supported, maximum supported version is 1.");if(!a.success)throw new f.ExecutableError(a.errorMessage,a.errorCode);if(this.outputFile&&!a.expirationTime)throw new e.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(a.isExpired())throw Error("Executable response is expired.");return a.subjectToken}}b.PluggableAuthClient=h},13258:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isObjectLike=function(a){return"object"==typeof a&&null!==a}},13284:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ExternalAccountClient=void 0;let d=c(52177),e=c(41167),f=c(83948),g=c(12724);class h{constructor(){throw Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(a){return a&&a.type===d.EXTERNAL_ACCOUNT_TYPE?a.credential_source?.environment_id?new f.AwsClient(a):a.credential_source?.executable?new g.PluggableAuthClient(a):new e.IdentityPoolClient(a):null}}b.ExternalAccountClient=h},14228:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(10680),e=c(96061),f=c(49560),g=c(77241);b.has=function(a,b){let c;if(0===(c=Array.isArray(b)?b:"string"==typeof b&&d.isDeepKey(b)&&a?.[b]==null?g.toPath(b):[b]).length)return!1;let h=a;for(let a=0;a<c.length;a++){let b=c[a];if((null==h||!Object.hasOwn(h,b))&&!((Array.isArray(h)||f.isArguments(h))&&e.isIndex(b)&&b<h.length))return!1;h=h[b]}return!0}},15261:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isLength=function(a){return Number.isSafeInteger(a)&&a>=0}},16293:(a,b,c)=>{var d,e=c(62253).Buffer,f=c(55511),g=c(89158),h=c(28354),i="secret must be a string or buffer",j="key must be a string or a buffer",k="function"==typeof f.createPublicKey;function l(a){if(!e.isBuffer(a)&&"string"!=typeof a&&(!k||"object"!=typeof a||"string"!=typeof a.type||"string"!=typeof a.asymmetricKeyType||"function"!=typeof a.export))throw p(j)}function m(a){if(!e.isBuffer(a)&&"string"!=typeof a&&"object"!=typeof a)throw p("key must be a string, a buffer or an object")}function n(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function o(a){var b=4-(a=a.toString()).length%4;if(4!==b)for(var c=0;c<b;++c)a+="=";return a.replace(/\-/g,"+").replace(/_/g,"/")}function p(a){var b=[].slice.call(arguments,1);return TypeError(h.format.bind(h,a).apply(null,b))}function q(a){var b;return b=a,e.isBuffer(b)||"string"==typeof b||(a=JSON.stringify(a)),a}function r(a){return function(b,c){!function(a){if(!e.isBuffer(a)){if("string"!=typeof a){if(!k||"object"!=typeof a||"secret"!==a.type||"function"!=typeof a.export)throw p(i)}}}(c),b=q(b);var d=f.createHmac("sha"+a,c);return n((d.update(b),d.digest("base64")))}}k&&(j+=" or a KeyObject",i+="or a KeyObject");var s="timingSafeEqual"in f?function(a,b){return a.byteLength===b.byteLength&&f.timingSafeEqual(a,b)}:function(a,b){return d||(d=c(10805)),d(a,b)};function t(a){return function(b,c,d){var f=r(a)(b,d);return s(e.from(c),e.from(f))}}function u(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign(c,"base64")))}}function v(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify(d,c,"base64")}}function w(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign({key:c,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function x(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify({key:d,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},c,"base64")}}function y(a){var b=u(a);return function(){var c=b.apply(null,arguments);return g.derToJose(c,"ES"+a)}}function z(a){var b=v(a);return function(c,d,e){return b(c,d=g.joseToDer(d,"ES"+a).toString("base64"),e)}}function A(){return function(){return""}}function B(){return function(a,b){return""===b}}a.exports=function(a){var b=a.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!b)throw p('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',a);var c=(b[1]||b[3]).toLowerCase(),d=b[2];return{sign:({hs:r,rs:u,ps:w,es:y,none:A})[c](d),verify:({hs:t,rs:v,ps:x,es:z,none:B})[c](d)}}},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>f,viewport:()=>g});var d=c(75338);c(82704);var e=c(82846);let f={title:"CardStreet TCG - Thai Pok\xe9mon Card Marketplace",description:"Buy, sell, and collect Pok\xe9mon cards in Thailand. Scan cards with AI, track your collection value, and trade with verified sellers.",keywords:["Pokemon","TCG","Thailand","การ์ด","โปเกมอน","marketplace"],manifest:"/manifest.json"},g={width:"device-width",initialScale:1,maximumScale:1};function h({children:a}){return(0,d.jsxs)("html",{lang:"th",children:[(0,d.jsx)("head",{children:(0,d.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"})}),(0,d.jsx)("body",{children:(0,d.jsx)(e.default,{children:a})})]})}},17605:(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=c(63674),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),a.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},17742:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\brand\\\\Downloads\\\\cardstreet-tcg\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\brand\\Downloads\\cardstreet-tcg\\app\\page.tsx","default")},18769:(a,b,c)=>{a.exports=c(21450).last},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:a=>{"use strict";a.exports=require("process")},20425:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GoogleToken=void 0;var d=i(c(29021)),e=c(30911),f=i(c(99255)),g=i(c(33873)),h=c(28354);function i(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(i=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=j(a)&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(var h in a)"default"!==h&&({}).hasOwnProperty.call(a,h)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,h))&&(f.get||f.set)?e(g,h,f):g[h]=a[h]);return g})(a,b)}function j(a){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function k(a,b){if(b.has(a))throw TypeError("Cannot initialize the same private elements twice on an object")}function l(a,b,c){return a.set(m(a,b),c),c}function m(a,b,c){if("function"==typeof a?a===b:a.has(b))return arguments.length<3?b:c;throw TypeError("Private element is not present on this object")}function n(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,v(d.key),d)}}function o(a,b,c){return b&&n(a.prototype,b),c&&n(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function p(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}function q(a){var b="function"==typeof Map?new Map:void 0;return(q=function(a){if(null===a||!function(a){try{return -1!==Function.toString.call(a).indexOf("[native code]")}catch(b){return"function"==typeof a}}(a))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return function(a,b,c){if(r())return Reflect.construct.apply(null,arguments);var d=[null];d.push.apply(d,b);var e=new(a.bind.apply(a,d));return c&&s(e,c.prototype),e}(a,arguments,t(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s(c,a)})(a)}function r(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(r=function(){return!!a})()}function s(a,b){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function t(a){return(t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function u(a,b,c){return(b=v(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function v(a){var b=function(a,b){if("object"!=j(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=j(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==j(b)?b:b+""}function w(){var a,b,c="function"==typeof Symbol?Symbol:{},d=c.iterator||"@@iterator",e=c.toStringTag||"@@toStringTag";function f(c,d,e,f){var i=Object.create((d&&d.prototype instanceof h?d:h).prototype);return x(i,"_invoke",function(c,d,e){var f,h,i,j=0,k=e||[],l=!1,m={p:0,n:0,v:a,a:n,f:n.bind(a,4),d:function(b,c){return f=b,h=0,i=a,m.n=c,g}};function n(c,d){for(h=c,i=d,b=0;!l&&j&&!e&&b<k.length;b++){var e,f=k[b],n=m.p,o=f[2];c>3?(e=o===d)&&(i=f[(h=f[4])?5:(h=3,3)],f[4]=f[5]=a):f[0]<=n&&((e=c<2&&n<f[1])?(h=0,m.v=d,m.n=f[1]):n<o&&(e=c<3||f[0]>d||d>o)&&(f[4]=c,f[5]=d,m.n=o,h=0))}if(e||c>1)return g;throw l=!0,d}return function(e,k,o){if(j>1)throw TypeError("Generator is already running");for(l&&1===k&&n(k,o),h=k,i=o;(b=h<2?a:i)||!l;){f||(h?h<3?(h>1&&(m.n=-1),n(h,i)):m.n=i:m.v=i);try{if(j=2,f){if(h||(e="next"),b=f[e]){if(!(b=b.call(f,i)))throw TypeError("iterator result is not an object");if(!b.done)return b;i=b.value,h<2&&(h=0)}else 1===h&&(b=f.return)&&b.call(f),h<2&&(i=TypeError("The iterator does not provide a '"+e+"' method"),h=1);f=a}else if((b=(l=m.n<0)?i:c.call(d,m))!==g)break}catch(b){f=a,h=1,i=b}finally{j=1}}return{value:b,done:l}}}(c,e,f),!0),i}var g={};function h(){}function i(){}function j(){}b=Object.getPrototypeOf;var k=j.prototype=h.prototype=Object.create([][d]?b(b([][d]())):(x(b={},d,function(){return this}),b));function l(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,j):(a.__proto__=j,x(a,e,"GeneratorFunction")),a.prototype=Object.create(k),a}return i.prototype=j,x(k,"constructor",j),x(j,"constructor",i),i.displayName="GeneratorFunction",x(j,e,"GeneratorFunction"),x(k),x(k,e,"Generator"),x(k,d,function(){return this}),x(k,"toString",function(){return"[object Generator]"}),(w=function(){return{w:f,m:l}})()}function x(a,b,c,d){var e=Object.defineProperty;try{e({},"",{})}catch(a){e=0}(x=function(a,b,c,d){if(b)e?e(a,b,{value:c,enumerable:!d,configurable:!d,writable:!d}):a[b]=c;else{var f=function(b,c){x(a,b,function(a){return this._invoke(b,c,a)})};f("next",0),f("throw",1),f("return",2)}})(a,b,c,d)}function y(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function z(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){y(f,d,e,g,h,"next",a)}function h(a){y(f,d,e,g,h,"throw",a)}g(void 0)})}}var A=d.readFile?(0,h.promisify)(d.readFile):z(w().m(function a(){return w().w(function(a){for(;;)switch(a.n){case 0:throw new C("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return a.a(2)}},a)})),B="https://oauth2.googleapis.com/token",C=function(a){function b(a,c){var d,e,f;return p(this,b),e=b,f=[a],e=t(e),u(d=function(a,b){if(b&&("object"==j(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");var c=a;if(void 0===c)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(this,r()?Reflect.construct(e,f||[],t(this).constructor):e.apply(this,f)),"code",void 0),d.code=c,d}if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");return b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),a&&s(b,a),o(b)}(q(Error)),D=new WeakMap,E=new WeakSet;function F(a){return G.apply(this,arguments)}function G(){return(G=z(w().m(function a(b){return w().w(function(a){for(;;)switch(a.n){case 0:if(!D.get(m(D,this))||b.forceRefresh){a.n=1;break}return a.a(2,D.get(m(D,this)));case 1:return a.p=1,a.n=2,l(D,this,m(E,this,H).call(this,b));case 2:return a.a(2,a.v);case 3:return a.p=3,l(D,this,void 0),a.f(3);case 4:return a.a(2)}},a,this,[[1,,3,4]])}))).apply(this,arguments)}function H(a){return I.apply(this,arguments)}function I(){return(I=z(w().m(function a(b){var c;return w().w(function(a){for(;;)switch(a.n){case 0:if(!1!==this.isTokenExpiring()||!1!==b.forceRefresh){a.n=1;break}return a.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){a.n=2;break}throw Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){a.n=4;break}return a.n=3,this.getCredentials(this.keyFile);case 3:c=a.v,this.key=c.privateKey,this.iss=c.clientEmail||this.iss,c.clientEmail||m(E,this,J).call(this);case 4:return a.a(2,m(E,this,N).call(this))}},a,this)}))).apply(this,arguments)}function J(){if(!this.iss)throw new C("email is required.","MISSING_CREDENTIALS")}function K(){return L.apply(this,arguments)}function L(){return(L=z(w().m(function a(){var b;return w().w(function(a){for(;;)switch(a.n){case 0:if(this.accessToken){a.n=1;break}throw Error("No token to revoke.");case 1:return b="https://oauth2.googleapis.com/revoke?token="+this.accessToken,a.n=2,this.transporter.request({url:b,retry:!0});case 2:m(E,this,M).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return a.a(2)}},a,this)}))).apply(this,arguments)}function M(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.keyFile=a.keyFile,this.key=a.key,this.rawToken=void 0,this.iss=a.email||a.iss,this.sub=a.sub,this.additionalClaims=a.additionalClaims,"object"===j(a.scope)?this.scope=a.scope.join(" "):this.scope=a.scope,this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,a.transporter&&(this.transporter=a.transporter)}function N(){return O.apply(this,arguments)}function O(){return(O=z(w().m(function a(){var b,c,d,e,g,h,i,j,k,l;return w().w(function(a){for(;;)switch(a.n){case 0:return b=Math.floor(new Date().getTime()/1e3),c=this.additionalClaims||{},d=Object.assign({iss:this.iss,scope:this.scope,aud:B,exp:b+3600,iat:b,sub:this.sub},c),e=f.sign({header:{alg:"RS256"},payload:d,secret:this.key}),a.p=1,a.n=2,this.transporter.request({method:"POST",url:B,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:e}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return g=a.v,this.rawToken=g.data,this.expiresAt=null===g.data.expires_in||void 0===g.data.expires_in?void 0:(b+g.data.expires_in)*1e3,a.a(2,this.rawToken);case 3:throw a.p=3,l=a.v,this.rawToken=void 0,this.tokenExpires=void 0,(j=l.response&&null!=(h=l.response)&&h.data?null==(i=l.response)?void 0:i.data:{}).error&&(k=j.error_description?": ".concat(j.error_description):"",l.message="".concat(j.error).concat(k)),l;case 4:return a.a(2)}},a,this,[[1,3]])}))).apply(this,arguments)}b.GoogleToken=function(){var a;return o(function a(b){p(this,a),k(this,E),E.add(this),u(this,"expiresAt",void 0),u(this,"key",void 0),u(this,"keyFile",void 0),u(this,"iss",void 0),u(this,"sub",void 0),u(this,"scope",void 0),u(this,"rawToken",void 0),u(this,"tokenExpires",void 0),u(this,"email",void 0),u(this,"additionalClaims",void 0),u(this,"eagerRefreshThresholdMillis",void 0),u(this,"transporter",{request:function(a){return(0,e.request)(a)}}),k(this,D),D.set(this,void 0),m(E,this,M).call(this,b)},[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var a=new Date().getTime();return!this.rawToken||!this.expiresAt||a>=this.expiresAt}},{key:"isTokenExpiring",value:function(){var a,b=new Date().getTime(),c=null!=(a=this.eagerRefreshThresholdMillis)?a:0;return!this.rawToken||!this.expiresAt||this.expiresAt<=b+c}},{key:"getToken",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===j(a)&&(b=a,a=void 0),b=Object.assign({forceRefresh:!1},b),a){var c=a;m(E,this,F).call(this,b).then(function(a){return c(null,a)},a);return}return m(E,this,F).call(this,b)}},{key:"getCredentials",value:(a=z(w().m(function a(b){var c,d,e,f,h;return w().w(function(a){for(;;)switch(a.n){case 0:a.n=".json"===(h=g.extname(b))?1:".der"===h||".crt"===h||".pem"===h?4:".p12"===h||".pfx"===h?6:7;break;case 1:return a.n=2,A(b,"utf8");case 2:if(d=(c=JSON.parse(a.v)).private_key,e=c.client_email,!(!d||!e)){a.n=3;break}throw new C("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return a.a(2,{privateKey:d,clientEmail:e});case 4:return a.n=5,A(b,"utf8");case 5:return f=a.v,a.a(2,{privateKey:f});case 6:throw new C("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new C("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return a.a(2)}},a)})),function(b){return a.apply(this,arguments)})},{key:"revokeToken",value:function(a){return a?void m(E,this,K).call(this).then(function(){return a()},a):m(E,this,K).call(this)}}])}()},20879:(a,b,c)=>{"use strict";let d,e=c(74075),f=c(78086),g=c(61075),{kStatusCode:h}=c(63674),i=Buffer[Symbol.species],j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");class p{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",s),this._inflate.on("data",r)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("data",q)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=new i(a.buffer,a.byteOffset,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}function q(a){this[n].push(a),this[l]+=a.length}function r(a){if(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)return void this[n].push(a);this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",r),this.reset()}function s(a){if(this[k]._inflate=null,this[o])return void this[m](this[o]);a[h]=1007,this[m](a)}a.exports=p},21111:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LRUCache=void 0,b.snakeToCamel=h,b.originalOrCamelOptions=function(a){return{get:function(b){let c=a||{};return c[b]??c[h(b)]}}},b.removeUndefinedValuesInObject=function(a){return Object.entries(a).forEach(([b,c])=>{(void 0===c||"undefined"===c)&&delete a[b]}),a},b.isValidFile=j,b.getWellKnownCertificateConfigFileLocation=function(){let a=process.env.CLOUDSDK_CONFIG||(e.platform().startsWith("win")?f.join(process.env.APPDATA||"",g):f.join(process.env.HOME||"",".config",g));return f.join(a,"certificate_config.json")};let d=c(29021),e=c(21820),f=c(33873),g="gcloud";function h(a){return a.replace(/([_][^_])/g,a=>a.slice(1).toUpperCase())}class i{capacity;#a=new Map;maxAge;constructor(a){this.capacity=a.capacity,this.maxAge=a.maxAge}#b(a,b){this.#a.delete(a),this.#a.set(a,{value:b,lastAccessed:Date.now()})}set(a,b){this.#b(a,b),this.#c()}get(a){let b=this.#a.get(a);if(b)return this.#b(a,b.value),this.#c(),b.value}#c(){let a=this.maxAge?Date.now()-this.maxAge:0,b=this.#a.entries().next();for(;!b.done&&(this.#a.size>this.capacity||b.value[1].lastAccessed<a);)this.#a.delete(b.value[0]),b=this.#a.entries().next()}}async function j(a){try{return(await d.promises.lstat(a)).isFile()}catch(a){return!1}}b.LRUCache=i},21450:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(1829),e=c(91143),f=c(77542);b.last=function(a){if(f.isArrayLike(a))return d.last(e.toArray(a))}},21820:a=>{"use strict";a.exports=require("os")},22263:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(72577),e=c(39115),f=c(30276);b.sortBy=function(a,...b){let c=b.length;return c>1&&f.isIterateeCall(a,b[0],b[1])?b=[]:c>2&&f.isIterateeCall(b[0],b[1],b[2])&&(b=[b[0]]),d.orderBy(a,e.flatten(b),["asc"])}},22580:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(44029),e=c(46193),f=c(51911),g=c(92264),h=c(14228);b.matchesProperty=function(a,b){switch(typeof a){case"object":Object.is(a?.valueOf(),-0)&&(a="-0");break;case"number":a=e.toKey(a)}return b=f.cloneDeep(b),function(c){let e=g.get(c,a);return void 0===e?h.has(c,a):void 0===b?void 0===e:d.isMatch(e,b)}}},22872:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(21124),e=c(32286);function f({children:a}){let b="AQrGx_xvAyszo733Zl_fN0jj9zmpwc7RhtiNpr0xWCE_81e20pia1pcCuR72eO-_gLETZw2qU6hZ4LQX";return b?(0,d.jsx)(e.ag,{options:{clientId:b,currency:"USD",intent:"capture"},children:a}):(0,d.jsx)(d.Fragment,{children:a})}},24545:(a,b,c)=>{Promise.resolve().then(c.bind(c,82846))},26069:(a,b,c)=>{var d=c(43604).stringify,e=c(75758);a.exports=function(a){return{parse:e(a),stringify:d}},a.exports.parse=e(),a.exports.stringify=d},26140:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isTypedArray=function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}},26609:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(41523);b.toFinite=function(a){return a?(a=d.toNumber(a))===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a==a?a:0:0===a?a:0}},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},26802:(a,b,c)=>{"use strict";let{Writable:d}=c(27910),e=c(20879),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=c(63674),{concat:j,toArrayBuffer:k,unmask:l}=c(78086),{isValidStatusCode:m,isValidUTF8:n}=c(86200),o=Buffer[Symbol.species];class p extends d{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new o(b.buffer,b.byteOffset+a,b.length-a),new o(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new o(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0);return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[e.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);if(c>2097151)return void a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"));this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a)}haveLength(a){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return void a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?j(c,b):"arraybuffer"===this._binaryType?k(j(c,b)):"blob"===this._binaryType?new Blob(c):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=j(c,b);if(!this._skipUTF8Validation&&!n(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,g),this.end();else{let c=a.readUInt16BE(0);if(!m(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new o(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!n(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[h]=d,f}}a.exports=p},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29780:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AwsRequestSigner=void 0;let d=c(30911),e=c(4052),f="AWS4-HMAC-SHA256";class g{getCredentials;region;crypto;constructor(a,b){this.getCredentials=a,this.region=b,this.crypto=(0,e.createCrypto)()}async getRequestOptions(a){if(!a.url)throw RangeError('"url" is required in "amzOptions"');let b="object"==typeof a.data?JSON.stringify(a.data):a.data,c=a.url,e=a.method||"GET",f=a.body||b,g=a.headers,h=await this.getCredentials(),i=new URL(c);if("string"!=typeof f&&void 0!==f)throw TypeError(`'requestPayload' is expected to be a string if provided. Got: ${f}`);let k=await j({crypto:this.crypto,host:i.host,canonicalUri:i.pathname,canonicalQuerystring:i.search.slice(1),method:e,region:this.region,securityCredentials:h,requestPayload:f,additionalAmzHeaders:g}),l=d.Gaxios.mergeHeaders(k.amzDate?{"x-amz-date":k.amzDate}:{},{authorization:k.authorizationHeader,host:i.host},g||{});h.token&&d.Gaxios.mergeHeaders(l,{"x-amz-security-token":h.token});let m={url:c,method:e,headers:l};return void 0!==f&&(m.body=f),m}}async function h(a,b,c){return await a.signWithHmacSha256(b,c)}async function i(a,b,c,d,e){let f=await h(a,`AWS4${b}`,c),g=await h(a,f,d),i=await h(a,g,e);return await h(a,i,"aws4_request")}async function j(a){let b=d.Gaxios.mergeHeaders(a.additionalAmzHeaders),c=a.requestPayload||"",g=a.host.split(".")[0],j=new Date,k=j.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),l=j.toISOString().replace(/[-]/g,"").replace(/T.*/,"");a.securityCredentials.token&&b.set("x-amz-security-token",a.securityCredentials.token);let m=d.Gaxios.mergeHeaders({host:a.host},b.has("date")?{}:{"x-amz-date":k},b),n="",o=[...m.keys()].sort();o.forEach(a=>{n+=`${a}:${m.get(a)}
`});let p=o.join(";"),q=await a.crypto.sha256DigestHex(c),r=`${a.method.toUpperCase()}
${a.canonicalUri}
${a.canonicalQuerystring}
${n}
${p}
${q}`,s=`${l}/${a.region}/${g}/aws4_request`,t=`${f}
${k}
${s}
`+await a.crypto.sha256DigestHex(r),u=await i(a.crypto,a.securityCredentials.secretAccessKey,l,a.region,g),v=await h(a.crypto,u,t),w=`${f} Credential=${a.securityCredentials.accessKeyId}/${s}, SignedHeaders=${p}, Signature=${(0,e.fromArrayBufferToHex)(v)}`;return{amzDate:b.has("date")?void 0:k,authorizationHeader:w,canonicalQuerystring:a.canonicalQuerystring}}b.AwsRequestSigner=g},30276:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(96061),e=c(77542),f=c(50497),g=c(48986);b.isIterateeCall=function(a,b,c){return!!f.isObject(c)&&(!!("number"==typeof b&&e.isArrayLike(c)&&d.isIndex(b))&&b<c.length||"string"==typeof b&&b in c)&&g.isEqualsSameValueZero(c[b],a)}},30896:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DefaultAwsSecurityCredentialsSupplier=void 0;let d=c(72449);class e{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(a){this.regionUrl=a.regionUrl,this.securityCredentialsUrl=a.securityCredentialsUrl,this.imdsV2SessionTokenUrl=a.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getAwsRegion(a){if(this.#d)return this.#d;let b=new Headers;if(!this.#d&&this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#e(a.transporter)),!this.regionUrl)throw RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let c={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:b};d.AuthClient.setMethodName(c,"getAwsRegion");let e=await a.transporter.request(c);return e.data.substr(0,e.data.length-1)}async getAwsSecurityCredentials(a){if(this.#f)return this.#f;let b=new Headers;this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#e(a.transporter));let c=await this.#g(b,a.transporter),d=await this.#h(c,b,a.transporter);return{accessKeyId:d.AccessKeyId,secretAccessKey:d.SecretAccessKey,token:d.Token}}async #e(a){let b={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return d.AuthClient.setMethodName(b,"#getImdsV2SessionToken"),(await a.request(b)).data}async #g(a,b){if(!this.securityCredentialsUrl)throw Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let c={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:a};return d.AuthClient.setMethodName(c,"#getAwsRoleName"),(await b.request(c)).data}async #h(a,b,c){let e={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${a}`,headers:b};return d.AuthClient.setMethodName(e,"#retrieveAwsSecurityCredentials"),(await c.request(e)).data}get #d(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get #f(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}}b.DefaultAwsSecurityCredentialsSupplier=e},30911:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.instance=b.Gaxios=b.GaxiosError=void 0,b.request=h;let f=c(81542);Object.defineProperty(b,"Gaxios",{enumerable:!0,get:function(){return f.Gaxios}});var g=c(78);async function h(a){return b.instance.request(a)}Object.defineProperty(b,"GaxiosError",{enumerable:!0,get:function(){return g.GaxiosError}}),e(c(31672),b),b.instance=new f.Gaxios},31672:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GaxiosInterceptorManager=void 0;class c extends Set{}b.GaxiosInterceptorManager=c},32737:(a,b,c)=>{"use strict";let d,e,f,g,h,i,j,k;c.r(b),c.d(b,{default:()=>Iq});var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM={};c.r(aM),c.d(aM,{scaleBand:()=>jd,scaleDiverging:()=>function a(){var b=kr(mG()(j9));return b.copy=function(){return mD(b,a())},i7.apply(b,arguments)},scaleDivergingLog:()=>function a(){var b=kz(mG()).domain([.1,1,10]);return b.copy=function(){return mD(b,a()).base(b.base())},i7.apply(b,arguments)},scaleDivergingPow:()=>mH,scaleDivergingSqrt:()=>mI,scaleDivergingSymlog:()=>function a(){var b=kC(mG());return b.copy=function(){return mD(b,a()).constant(b.constant())},i7.apply(b,arguments)},scaleIdentity:()=>function a(b){var c;function d(a){return null==a||isNaN(a*=1)?c:a}return d.invert=d,d.domain=d.range=function(a){return arguments.length?(b=Array.from(a,j7),d):b.slice()},d.unknown=function(a){return arguments.length?(c=a,d):c},d.copy=function(){return a(b).unknown(c)},b=arguments.length?Array.from(b,j7):[0,1],kr(d)},scaleImplicit:()=>jb,scaleLinear:()=>function a(){var b=kf();return b.copy=function(){return kd(b,a())},i6.apply(b,arguments),kr(b)},scaleLog:()=>function a(){let b=kz(ke()).domain([1,10]);return b.copy=()=>kd(b,a()).base(b.base()),i6.apply(b,arguments),b},scaleOrdinal:()=>jc,scalePoint:()=>je,scalePow:()=>kH,scaleQuantile:()=>function a(){var b,c=[],d=[],e=[];function f(){var a=0,b=Math.max(1,d.length);for(e=Array(b-1);++a<b;)e[a-1]=function(a,b,c=jq){if(!(!(d=a.length)||isNaN(b*=1))){if(b<=0||d<2)return+c(a[0],0,a);if(b>=1)return+c(a[d-1],d-1,a);var d,e=(d-1)*b,f=Math.floor(e),g=+c(a[f],f,a);return g+(c(a[f+1],f+1,a)-g)*(e-f)}}(c,a/b);return g}function g(a){return null==a||isNaN(a*=1)?b:d[js(e,a)]}return g.invertExtent=function(a){var b=d.indexOf(a);return b<0?[NaN,NaN]:[b>0?e[b-1]:c[0],b<e.length?e[b]:c[c.length-1]]},g.domain=function(a){if(!arguments.length)return c.slice();for(let b of(c=[],a))null==b||isNaN(b*=1)||c.push(b);return c.sort(jm),f()},g.range=function(a){return arguments.length?(d=Array.from(a),f()):d.slice()},g.unknown=function(a){return arguments.length?(b=a,g):b},g.quantiles=function(){return e.slice()},g.copy=function(){return a().domain(c).range(d).unknown(b)},i6.apply(g,arguments)},scaleQuantize:()=>function a(){var b,c=0,d=1,e=1,f=[.5],g=[0,1];function h(a){return null!=a&&a<=a?g[js(f,a,0,e)]:b}function i(){var a=-1;for(f=Array(e);++a<e;)f[a]=((a+1)*d-(a-e)*c)/(e+1);return h}return h.domain=function(a){return arguments.length?([c,d]=a,c*=1,d*=1,i()):[c,d]},h.range=function(a){return arguments.length?(e=(g=Array.from(a)).length-1,i()):g.slice()},h.invertExtent=function(a){var b=g.indexOf(a);return b<0?[NaN,NaN]:b<1?[c,f[0]]:b>=e?[f[e-1],d]:[f[b-1],f[b]]},h.unknown=function(a){return arguments.length&&(b=a),h},h.thresholds=function(){return f.slice()},h.copy=function(){return a().domain([c,d]).range(g).unknown(b)},i6.apply(kr(h),arguments)},scaleRadial:()=>function a(){var b,c=kf(),d=[0,1],e=!1;function f(a){var d,f=Math.sign(d=c(a))*Math.sqrt(Math.abs(d));return isNaN(f)?b:e?Math.round(f):f}return f.invert=function(a){return c.invert(kJ(a))},f.domain=function(a){return arguments.length?(c.domain(a),f):c.domain()},f.range=function(a){return arguments.length?(c.range((d=Array.from(a,j7)).map(kJ)),f):d.slice()},f.rangeRound=function(a){return f.range(a).round(!0)},f.round=function(a){return arguments.length?(e=!!a,f):e},f.clamp=function(a){return arguments.length?(c.clamp(a),f):c.clamp()},f.unknown=function(a){return arguments.length?(b=a,f):b},f.copy=function(){return a(c.domain(),d).round(e).clamp(c.clamp()).unknown(b)},i6.apply(f,arguments),kr(f)},scaleSequential:()=>function a(){var b=kr(mC()(j9));return b.copy=function(){return mD(b,a())},i7.apply(b,arguments)},scaleSequentialLog:()=>function a(){var b=kz(mC()).domain([1,10]);return b.copy=function(){return mD(b,a()).base(b.base())},i7.apply(b,arguments)},scaleSequentialPow:()=>mE,scaleSequentialQuantile:()=>function a(){var b=[],c=j9;function d(a){if(null!=a&&!isNaN(a*=1))return c((js(b,a,1)-1)/(b.length-1))}return d.domain=function(a){if(!arguments.length)return b.slice();for(let c of(b=[],a))null==c||isNaN(c*=1)||b.push(c);return b.sort(jm),d},d.interpolator=function(a){return arguments.length?(c=a,d):c},d.range=function(){return b.map((a,d)=>c(d/(b.length-1)))},d.quantiles=function(a){return Array.from({length:a+1},(c,d)=>(function(a,b,c){if(!(!(d=(a=Float64Array.from(function*(a,b){if(void 0===b)for(let b of a)null!=b&&(b*=1)>=b&&(yield b);else{let c=-1;for(let d of a)null!=(d=b(d,++c,a))&&(d*=1)>=d&&(yield d)}}(a,void 0))).length)||isNaN(b*=1))){if(b<=0||d<2)return kL(a);if(b>=1)return kK(a);var d,e=(d-1)*b,f=Math.floor(e),g=kK((function a(b,c,d=0,e=1/0,f){if(c=Math.floor(c),d=Math.floor(Math.max(0,d)),e=Math.floor(Math.min(b.length-1,e)),!(d<=c&&c<=e))return b;for(f=void 0===f?kM:function(a=jm){if(a===jm)return kM;if("function"!=typeof a)throw TypeError("compare is not a function");return(b,c)=>{let d=a(b,c);return d||0===d?d:(0===a(c,c))-(0===a(b,b))}}(f);e>d;){if(e-d>600){let g=e-d+1,h=c-d+1,i=Math.log(g),j=.5*Math.exp(2*i/3),k=.5*Math.sqrt(i*j*(g-j)/g)*(h-g/2<0?-1:1),l=Math.max(d,Math.floor(c-h*j/g+k)),m=Math.min(e,Math.floor(c+(g-h)*j/g+k));a(b,c,l,m,f)}let g=b[c],h=d,i=e;for(kN(b,d,c),f(b[e],g)>0&&kN(b,d,e);h<i;){for(kN(b,h,i),++h,--i;0>f(b[h],g);)++h;for(;f(b[i],g)>0;)--i}0===f(b[d],g)?kN(b,d,i):kN(b,++i,e),i<=c&&(d=i+1),c<=i&&(e=i-1)}return b})(a,f).subarray(0,f+1));return g+(kL(a.subarray(f+1))-g)*(e-f)}})(b,d/a))},d.copy=function(){return a(c).domain(b)},i7.apply(d,arguments)},scaleSequentialSqrt:()=>mF,scaleSequentialSymlog:()=>function a(){var b=kC(mC());return b.copy=function(){return mD(b,a()).constant(b.constant())},i7.apply(b,arguments)},scaleSqrt:()=>kI,scaleSymlog:()=>function a(){var b=kC(ke());return b.copy=function(){return kd(b,a()).constant(b.constant())},i6.apply(b,arguments)},scaleThreshold:()=>function a(){var b,c=[.5],d=[0,1],e=1;function f(a){return null!=a&&a<=a?d[js(c,a,0,e)]:b}return f.domain=function(a){return arguments.length?(e=Math.min((c=Array.from(a)).length,d.length-1),f):c.slice()},f.range=function(a){return arguments.length?(d=Array.from(a),e=Math.min(c.length,d.length-1),f):d.slice()},f.invertExtent=function(a){var b=d.indexOf(a);return[c[b-1],c[b]]},f.unknown=function(a){return arguments.length?(b=a,f):b},f.copy=function(){return a().domain(c).range(d).unknown(b)},i6.apply(f,arguments)},scaleTime:()=>mA,scaleUtc:()=>mB,tickFormat:()=>kq});var aN=c(21124),aO=c(38301),aP=c.n(aO),aQ=function(a){return a.NM="Near Mint",a.LP="Lightly Played",a.MP="Moderately Played",a.HP="Heavily Played",a.DMG="Damaged",a}({}),aR=function(a){return a.C="Common",a.U="Uncommon",a.R="Rare",a.RR="Double Rare",a.RRR="Triple Rare",a.SR="Super Rare",a.SAR="Special Art Rare",a.UR="Ultra Rare",a}({});let aS=["Wild Force (ไวลด์ฟอร์ซ)","Shadow Birth (เงาแห่งพงไพร)","VMAX Rising (VMAX ไรซิง)","Sky Legend (สกาย เลเจนด์)","First Impact (เฟิรสท์ อิมแพค)"],aT=[{id:"collections",name:"Collection",icon:"fa-boxes-stacked",count:0},{id:"listings",name:"Listings",icon:"fa-tag",count:0},{id:"wishlist",name:"Wishlist",icon:"fa-heart",count:0},{id:"master",name:"Master Sets",icon:"fa-book-bookmark",count:142}],aU=["Romance Dawn","Paramount War","Pillars of Strength","Kingdoms of Intrigue","Awakening of the New Era","Wings of the Captain","500 Years in the Future","Memorial Collection"],aV=["Cyber Judge","Wild Force","Shiny Treasure ex","Ancient Roar","Future Flash","Ruler of the Black Flame","Pokemon Card 151","Clay Burst","Snow Hazard","Triplet Beat","Violet ex","Scarlet ex"],aW={THB:1,USD:.028,EUR:.026,JPY:4.15,CNY:.2,RM:.13,IDR:440,SGD:.038,PHP:1.58,HKD:.22,TWD:.88};Object.keys(aW);let aX={THB:"฿",USD:"$",EUR:"€",JPY:"\xa5",CNY:"\xa5",RM:"RM",IDR:"Rp",SGD:"S$",PHP:"₱",HKD:"HK$",TWD:"NT$"},aY=[{id:"p1",name:"Charizard ex",thaiName:"ลิซาร์ดอน ex",set:"Wild Force",number:"054/071",rarity:aR.SAR,imageUrl:"https://images.pokemontcg.io/sv4pt5/234_hires.png",marketPrice:4500,change7d:12.5,priceHistory:[{date:"1D",price:4400},{date:"7D",price:4e3},{date:"1M",price:3800},{date:"3M",price:4200},{date:"6M",price:4500}]},{id:"p2",name:"Pikachu",thaiName:"ปิกาจู",set:"Shadow Birth",number:"023/071",rarity:aR.SR,imageUrl:"https://images.pokemontcg.io/swsh4/44_hires.png",marketPrice:1200,change7d:-2.1,priceHistory:[{date:"1D",price:1200},{date:"7D",price:1220},{date:"1M",price:1100},{date:"3M",price:1250},{date:"6M",price:1200}]},{id:"p3",name:"Iono",thaiName:"นันจาโม",set:"Clay Burst",number:"091/071",rarity:aR.SAR,imageUrl:"https://images.pokemontcg.io/sv2/269_hires.png",marketPrice:8500,change7d:5.4,priceHistory:[{date:"1D",price:8400},{date:"7D",price:8200},{date:"1M",price:8e3},{date:"3M",price:7800},{date:"6M",price:8500}]},{id:"p4",name:"Mewtwo V",thaiName:"มิวทู V",set:"Pokemon GO",number:"072/071",rarity:aR.SAR,imageUrl:"https://images.pokemontcg.io/pgo/72_hires.png",marketPrice:2200,change7d:1.2,priceHistory:[{date:"1D",price:2150},{date:"7D",price:2100},{date:"1M",price:2200},{date:"3M",price:2250},{date:"6M",price:2200}]}],aZ=[{id:"u1",name:"PokeMaster99",avatar:"https://i.pravatar.cc/150?u=u1",rating:4.9},{id:"u2",name:"CardSharkTH",avatar:"https://i.pravatar.cc/150?u=u2",rating:4.5},{id:"u3",name:"CollectorJane",avatar:"https://i.pravatar.cc/150?u=u3",rating:5}],a$=[{id:"r1",reviewerId:"u5",reviewerName:"Pawat T.",reviewerAvatar:"https://i.pravatar.cc/150?u=u5",rating:5,comment:"Card arrived in perfect condition. Packaging was insane! bubble wrap inside a box inside another box.",date:"2 days ago",verifiedPurchase:!0,itemName:"Charizard ex (SAR)"},{id:"r2",reviewerId:"u6",reviewerName:"Sarah J.",reviewerAvatar:"https://i.pravatar.cc/150?u=u6",rating:4,comment:"Good communication, shipping took a bit longer than expected but card is nice.",date:"1 week ago",verifiedPurchase:!0,itemName:"Pikachu (Promo)"},{id:"r3",reviewerId:"u7",reviewerName:"CryptoKing",reviewerAvatar:"https://i.pravatar.cc/150?u=u7",rating:5,comment:"Legit seller. Will buy again.",date:"2 weeks ago",verifiedPurchase:!1}],a_=[{id:"l1",card_id:"p1",card_data:aY[0],price:4300,condition:"NM",seller:aZ[0],created_at:new Date().toISOString()},{id:"l2",card_id:"p1",card_data:aY[0],price:4500,condition:"NM",seller:aZ[1],created_at:new Date().toISOString()},{id:"l3",card_id:"p1",card_data:aY[0],price:3900,condition:"LP",seller:aZ[2],created_at:new Date().toISOString()},{id:"l4",card_id:"p2",card_data:aY[1],price:1100,condition:"NM",seller:aZ[1],created_at:new Date().toISOString()},{id:"l5",card_id:"p2",card_data:aY[1],price:1050,condition:"LP",seller:aZ[0],created_at:new Date().toISOString()},{id:"l6",card_id:"p3",card_data:aY[2],price:8500,condition:"NM",seller:aZ[0],created_at:new Date().toISOString()},{id:"l7",card_id:"p3",card_data:aY[2],price:8200,condition:"LP",seller:aZ[1],created_at:new Date().toISOString()},{id:"l8",card_id:"p3",card_data:aY[2],price:8e3,condition:"MP",seller:aZ[2],created_at:new Date().toISOString()},{id:"l9",card_id:"p4",card_data:aY[3],price:2200,condition:"NM",seller:aZ[2],created_at:new Date().toISOString()},{id:"l10",card_id:"p4",card_data:aY[3],price:2100,condition:"LP",seller:aZ[0],created_at:new Date().toISOString()}],a0=({currentCurrency:a,onCurrencyChange:b})=>{let[c,d]=(0,aO.useState)(!1),e=(0,aO.useRef)(null);(0,aO.useEffect)(()=>{let a=a=>{e.current&&!e.current.contains(a.target)&&d(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let f=Object.keys(aW);return(0,aN.jsxs)("div",{className:"relative z-50",ref:e,children:[(0,aN.jsxs)("button",{onClick:()=>d(!c),className:"glass h-9 pl-3 pr-3 rounded-xl flex items-center gap-2 border border-white/10 hover:bg-white/5 transition-all text-[10px] font-black text-brand-cyan min-w-[70px] justify-between",children:[(0,aN.jsx)("span",{children:a}),(0,aN.jsx)("i",{className:`fa-solid fa-chevron-down text-[8px] text-slate-500 transition-transform ${c?"rotate-180":""}`})]}),c&&(0,aN.jsx)("div",{className:"absolute top-full right-0 mt-2 w-24 max-h-60 overflow-y-auto bg-brand-darker/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl py-1 animate-fadeIn scrollbar-hide",children:f.map(c=>(0,aN.jsxs)("button",{onClick:()=>{b(c),d(!1)},className:`w-full text-left px-3 py-2 text-[10px] font-bold hover:bg-white/5 transition-colors flex justify-between items-center ${a===c?"text-brand-cyan bg-brand-cyan/10":"text-slate-300"}`,children:[c,a===c&&(0,aN.jsx)("i",{className:"fa-solid fa-check text-[8px]"})]},c))})]})};function a1(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}Object.create;Object.create,"function"==typeof SuppressedError&&SuppressedError;class a2 extends Error{constructor(a,b="FunctionsError",c){super(a),this.name=b,this.context=c}}class a3 extends a2{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class a4 extends a2{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class a5 extends a2{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}!function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"}(mP||(mP={}));class a6{constructor(a,{headers:b={},customFetch:c,region:d=mP.Any}={}){this.url=a,this.headers=b,this.region=d,this.fetch=(a=>a?(...b)=>a(...b):(...a)=>fetch(...a))(c)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){var b,c,d,e;return b=this,c=arguments,d=void 0,e=function*(a,b={}){var c;let d,e;try{let f,{headers:g,method:h,body:i,signal:j,timeout:k}=b,l={},{region:m}=b;m||(m=this.region);let n=new URL(`${this.url}/${a}`);m&&"any"!==m&&(l["x-region"]=m,n.searchParams.set("forceFunctionRegion",m)),i&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?"undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=i):"string"==typeof i?(l["Content-Type"]="text/plain",f=i):"undefined"!=typeof FormData&&i instanceof FormData?f=i:(l["Content-Type"]="application/json",f=JSON.stringify(i)):f=!i||"string"==typeof i||"undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer||"undefined"!=typeof FormData&&i instanceof FormData?i:JSON.stringify(i);let o=j;k&&(e=new AbortController,d=setTimeout(()=>e.abort(),k),j?(o=e.signal,j.addEventListener("abort",()=>e.abort())):o=e.signal);let p=yield this.fetch(n.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),g),body:f,signal:o}).catch(a=>{throw new a3(a)}),q=p.headers.get("x-relay-error");if(q&&"true"===q)throw new a4(p);if(!p.ok)throw new a5(p);let r=(null!=(c=p.headers.get("Content-Type"))?c:"text/plain").split(";")[0].trim();return{data:"application/json"===r?yield p.json():"application/octet-stream"===r||"application/pdf"===r?yield p.blob():"text/event-stream"===r?p:"multipart/form-data"===r?yield p.formData():yield p.text(),error:null,response:p}}catch(a){return{data:null,error:a,response:a instanceof a5||a instanceof a4?a.context:void 0}}finally{d&&clearTimeout(d)}},new(d||(d=Promise))(function(a,f){function g(a){try{i(e.next(a))}catch(a){f(a)}}function h(a){try{i(e.throw(a))}catch(a){f(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof d?c:new d(function(a){a(c)})).then(g,h)}i((e=e.apply(b,c||[])).next())})}}var a7=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},a8=class{constructor(a){var b,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=null!=(b=a.shouldThrowOnError)&&b,this.signal=a.signal,this.isMaybeSingle=null!=(c=a.isMaybeSingle)&&c,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,b){return this.headers=new Headers(this.headers),this.headers.set(a,b),this}then(a,b){var c=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let d=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var b,d,e,f;let g=null,h=null,i=null,j=a.status,k=a.statusText;if(a.ok){if("HEAD"!==c.method){let b=await a.text();""===b||(h="text/csv"===c.headers.get("Accept")||c.headers.get("Accept")&&(null==(e=c.headers.get("Accept"))?void 0:e.includes("application/vnd.pgrst.plan+text"))?b:JSON.parse(b))}let f=null==(b=c.headers.get("Prefer"))?void 0:b.match(/count=(exact|planned|estimated)/),l=null==(d=a.headers.get("content-range"))?void 0:d.split("/");f&&l&&l.length>1&&(i=parseInt(l[1])),c.isMaybeSingle&&"GET"===c.method&&Array.isArray(h)&&(h.length>1?(g={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,i=null,j=406,k="Not Acceptable"):h=1===h.length?h[0]:null)}else{let b=await a.text();try{g=JSON.parse(b),Array.isArray(g)&&404===a.status&&(h=[],g=null,j=200,k="OK")}catch(c){404===a.status&&""===b?(j=204,k="No Content"):g={message:b}}if(g&&c.isMaybeSingle&&(null==g||null==(f=g.details)?void 0:f.includes("0 rows"))&&(g=null,j=200,k="OK"),g&&c.shouldThrowOnError)throw new a7(g)}return{error:g,data:h,count:i,status:j,statusText:k}});return this.shouldThrowOnError||(d=d.catch(a=>{var b,c,d,e,f,g;let h="",i=null==a?void 0:a.cause;if(i){let b=null!=(c=null==i?void 0:i.message)?c:"",g=null!=(d=null==i?void 0:i.code)?d:"";h=`${null!=(e=null==a?void 0:a.name)?e:"FetchError"}: ${null==a?void 0:a.message}

Caused by: ${null!=(f=null==i?void 0:i.name)?f:"Error"}: ${b}`,g&&(h+=` (${g})`),(null==i?void 0:i.stack)&&(h+=`
${i.stack}`)}else h=null!=(g=null==a?void 0:a.stack)?g:"";return{error:{message:`${null!=(b=null==a?void 0:a.name)?b:"FetchError"}: ${null==a?void 0:a.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(a,b)}returns(){return this}overrideTypes(){return this}},a9=class extends a8{select(a){let b=!1,c=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!b?"":('"'===a&&(b=!b),a)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:b=!0,nullsFirst:c,foreignTable:d,referencedTable:e=d}={}){let f=e?`${e}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${b?"asc":"desc"}${void 0===c?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:b,referencedTable:c=b}={}){let d=void 0===c?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,b,{foreignTable:c,referencedTable:d=c}={}){let e=void 0===d?"offset":`${d}.offset`,f=void 0===d?"limit":`${d}.limit`;return this.url.searchParams.set(e,`${a}`),this.url.searchParams.set(f,`${b-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:b=!1,settings:c=!1,buffers:d=!1,wal:e=!1,format:f="text"}={}){var g;let h=[a?"analyze":null,b?"verbose":null,c?"settings":null,d?"buffers":null,e?"wal":null].filter(Boolean).join("|"),i=null!=(g=this.headers.get("Accept"))?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${i}"; options=${h};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};let ba=RegExp("[,()]");var bb=class extends a9{eq(a,b){return this.url.searchParams.append(a,`eq.${b}`),this}neq(a,b){return this.url.searchParams.append(a,`neq.${b}`),this}gt(a,b){return this.url.searchParams.append(a,`gt.${b}`),this}gte(a,b){return this.url.searchParams.append(a,`gte.${b}`),this}lt(a,b){return this.url.searchParams.append(a,`lt.${b}`),this}lte(a,b){return this.url.searchParams.append(a,`lte.${b}`),this}like(a,b){return this.url.searchParams.append(a,`like.${b}`),this}likeAllOf(a,b){return this.url.searchParams.append(a,`like(all).{${b.join(",")}}`),this}likeAnyOf(a,b){return this.url.searchParams.append(a,`like(any).{${b.join(",")}}`),this}ilike(a,b){return this.url.searchParams.append(a,`ilike.${b}`),this}ilikeAllOf(a,b){return this.url.searchParams.append(a,`ilike(all).{${b.join(",")}}`),this}ilikeAnyOf(a,b){return this.url.searchParams.append(a,`ilike(any).{${b.join(",")}}`),this}regexMatch(a,b){return this.url.searchParams.append(a,`match.${b}`),this}regexIMatch(a,b){return this.url.searchParams.append(a,`imatch.${b}`),this}is(a,b){return this.url.searchParams.append(a,`is.${b}`),this}isDistinct(a,b){return this.url.searchParams.append(a,`isdistinct.${b}`),this}in(a,b){let c=Array.from(new Set(b)).map(a=>"string"==typeof a&&ba.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}notIn(a,b){let c=Array.from(new Set(b)).map(a=>"string"==typeof a&&ba.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(a,`not.in.(${c})`),this}contains(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cs.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cs.{${b.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(b)}`),this}containedBy(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cd.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cd.{${b.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(b)}`),this}rangeGt(a,b){return this.url.searchParams.append(a,`sr.${b}`),this}rangeGte(a,b){return this.url.searchParams.append(a,`nxl.${b}`),this}rangeLt(a,b){return this.url.searchParams.append(a,`sl.${b}`),this}rangeLte(a,b){return this.url.searchParams.append(a,`nxr.${b}`),this}rangeAdjacent(a,b){return this.url.searchParams.append(a,`adj.${b}`),this}overlaps(a,b){return"string"==typeof b?this.url.searchParams.append(a,`ov.${b}`):this.url.searchParams.append(a,`ov.{${b.join(",")}}`),this}textSearch(a,b,{config:c,type:d}={}){let e="";"plain"===d?e="pl":"phrase"===d?e="ph":"websearch"===d&&(e="w");let f=void 0===c?"":`(${c})`;return this.url.searchParams.append(a,`${e}fts${f}.${b}`),this}match(a){return Object.entries(a).forEach(([a,b])=>{this.url.searchParams.append(a,`eq.${b}`)}),this}not(a,b,c){return this.url.searchParams.append(a,`not.${b}.${c}`),this}or(a,{foreignTable:b,referencedTable:c=b}={}){let d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,b,c){return this.url.searchParams.append(a,`${b}.${c}`),this}},bc=class{constructor(a,{headers:b={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(b),this.schema=c,this.fetch=d}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,b){let{head:c=!1,count:d}=null!=b?b:{},e=!1,f=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!e?"":('"'===a&&(e=!e),a)).join(""),{url:g,headers:h}=this.cloneRequestState();return g.searchParams.set("select",f),d&&h.append("Prefer",`count=${d}`),new bb({method:c?"HEAD":"GET",url:g,headers:h,schema:this.schema,fetch:this.fetch})}insert(a,{count:b,defaultToNull:c=!0}={}){var d;let{url:e,headers:f}=this.cloneRequestState();if(b&&f.append("Prefer",`count=${b}`),c||f.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);e.searchParams.set("columns",a.join(","))}}return new bb({method:"POST",url:e,headers:f,schema:this.schema,body:a,fetch:null!=(d=this.fetch)?d:fetch})}upsert(a,{onConflict:b,ignoreDuplicates:c=!1,count:d,defaultToNull:e=!0}={}){var f;let{url:g,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),void 0!==b&&g.searchParams.set("on_conflict",b),d&&h.append("Prefer",`count=${d}`),e||h.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);g.searchParams.set("columns",a.join(","))}}return new bb({method:"POST",url:g,headers:h,schema:this.schema,body:a,fetch:null!=(f=this.fetch)?f:fetch})}update(a,{count:b}={}){var c;let{url:d,headers:e}=this.cloneRequestState();return b&&e.append("Prefer",`count=${b}`),new bb({method:"PATCH",url:d,headers:e,schema:this.schema,body:a,fetch:null!=(c=this.fetch)?c:fetch})}delete({count:a}={}){var b;let{url:c,headers:d}=this.cloneRequestState();return a&&d.append("Prefer",`count=${a}`),new bb({method:"DELETE",url:c,headers:d,schema:this.schema,fetch:null!=(b=this.fetch)?b:fetch})}},bd=class a{constructor(a,{headers:b={},schema:c,fetch:d}={}){this.url=a,this.headers=new Headers(b),this.schemaName=c,this.fetch=d}from(a){if(!a||"string"!=typeof a||""===a.trim())throw Error("Invalid relation name: relation must be a non-empty string.");return new bc(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(b){return new a(this.url,{headers:this.headers,schema:b,fetch:this.fetch})}rpc(a,b={},{head:c=!1,get:d=!1,count:e}={}){var f;let g,h,i=new URL(`${this.url}/rpc/${a}`),j=a=>null!==a&&"object"==typeof a&&(!Array.isArray(a)||a.some(j)),k=c&&Object.values(b).some(j);k?(g="POST",h=b):c||d?(g=c?"HEAD":"GET",Object.entries(b).filter(([a,b])=>void 0!==b).map(([a,b])=>[a,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([a,b])=>{i.searchParams.append(a,b)})):(g="POST",h=b);let l=new Headers(this.headers);return k?l.set("Prefer",e?`count=${e},return=minimal`:"return=minimal"):e&&l.set("Prefer",`count=${e}`),new bb({method:g,url:i,headers:l,schema:this.schemaName,body:h,fetch:null!=(f=this.fetch)?f:fetch})}};class be{constructor(){}static detectEnvironment(){var a;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null==(a=navigator.userAgent)?void 0:a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let b=globalThis.process;if(b){let a=b.versions;if(a&&a.node){let b=parseInt(a.node.replace(/^v/,"").split(".")[0]);return b>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${b} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${b} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let a=this.detectEnvironment();if(a.constructor)return a.constructor;let b=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(b+=`

Suggested solution: ${a.workaround}`),Error(b)}static createWebSocket(a,b){return new(this.getWebSocketConstructor())(a,b)}static isWebSocketSupported(){try{let a=this.detectEnvironment();return"native"===a.type||"ws"===a.type}catch(a){return!1}}}let bf="2.0.0";!function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"}(mQ||(mQ={})),function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"}(mR||(mR={})),function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"}(mS||(mS={})),(mT||(mT={})).websocket="websocket",function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"}(mU||(mU={}));class bg{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=a?a:[]}encode(a,b){return a.event!==this.BROADCAST_EVENT||a.payload instanceof ArrayBuffer||"string"!=typeof a.payload.event?b(JSON.stringify([a.join_ref,a.ref,a.topic,a.event,a.payload])):b(this._binaryEncodeUserBroadcastPush(a))}_binaryEncodeUserBroadcastPush(a){var b;return this._isArrayBuffer(null==(b=a.payload)?void 0:b.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var b,c;let d=null!=(c=null==(b=a.payload)?void 0:b.payload)?c:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(a){var b,c;let d=null!=(c=null==(b=a.payload)?void 0:b.payload)?c:{},e=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,e)}_encodeUserBroadcastPush(a,b,c){let d=a.topic,e=null!=(n=a.ref)?n:"",f=null!=(o=a.join_ref)?o:"",g=a.payload.event,h=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},i=0===Object.keys(h).length?"":JSON.stringify(h);if(f.length>255)throw Error(`joinRef length ${f.length} exceeds maximum of 255`);if(e.length>255)throw Error(`ref length ${e.length} exceeds maximum of 255`);if(d.length>255)throw Error(`topic length ${d.length} exceeds maximum of 255`);if(g.length>255)throw Error(`userEvent length ${g.length} exceeds maximum of 255`);if(i.length>255)throw Error(`metadata length ${i.length} exceeds maximum of 255`);let j=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+e.length+d.length+g.length+i.length,k=new ArrayBuffer(this.HEADER_LENGTH+j),l=new DataView(k),m=0;l.setUint8(m++,this.KINDS.userBroadcastPush),l.setUint8(m++,f.length),l.setUint8(m++,e.length),l.setUint8(m++,d.length),l.setUint8(m++,g.length),l.setUint8(m++,i.length),l.setUint8(m++,b),Array.from(f,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(e,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(d,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(g,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(i,a=>l.setUint8(m++,a.charCodeAt(0)));var n,o,p=new Uint8Array(k.byteLength+c.byteLength);return p.set(new Uint8Array(k),0),p.set(new Uint8Array(c),k.byteLength),p.buffer}decode(a,b){if(this._isArrayBuffer(a))return b(this._binaryDecode(a));if("string"==typeof a){let[c,d,e,f,g]=JSON.parse(a);return b({join_ref:c,ref:d,topic:e,event:f,payload:g})}return b({})}_binaryDecode(a){let b=new DataView(a),c=b.getUint8(0),d=new TextDecoder;if(c===this.KINDS.userBroadcast)return this._decodeUserBroadcast(a,b,d)}_decodeUserBroadcast(a,b,c){let d=b.getUint8(1),e=b.getUint8(2),f=b.getUint8(3),g=b.getUint8(4),h=this.HEADER_LENGTH+4,i=c.decode(a.slice(h,h+d));h+=d;let j=c.decode(a.slice(h,h+e));h+=e;let k=c.decode(a.slice(h,h+f));h+=f;let l=a.slice(h,a.byteLength),m=g===this.JSON_ENCODING?JSON.parse(c.decode(l)):l,n={type:this.BROADCAST_EVENT,event:j,payload:m};return f>0&&(n.meta=JSON.parse(k)),{join_ref:null,ref:null,topic:i,event:this.BROADCAST_EVENT,payload:n}}_isArrayBuffer(a){var b;return a instanceof ArrayBuffer||(null==(b=null==a?void 0:a.constructor)?void 0:b.name)==="ArrayBuffer"}_pick(a,b){return a&&"object"==typeof a?Object.fromEntries(Object.entries(a).filter(([a])=>b.includes(a))):{}}}class bh{constructor(a,b){this.callback=a,this.timerCalc=b,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=b}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"}(mV||(mV={}));let bi=(a,b,c={})=>{var d;let e=null!=(d=c.skipTypes)?d:[];return b?Object.keys(b).reduce((c,d)=>(c[d]=bj(d,a,b,e),c),{}):{}},bj=(a,b,c,d)=>{let e=b.find(b=>b.name===a),f=null==e?void 0:e.type,g=c[a];return f&&!d.includes(f)?bk(f,g):bl(g)},bk=(a,b)=>{if("_"===a.charAt(0))return bp(b,a.slice(1,a.length));switch(a){case mV.bool:return bm(b);case mV.float4:case mV.float8:case mV.int2:case mV.int4:case mV.int8:case mV.numeric:case mV.oid:return bn(b);case mV.json:case mV.jsonb:return bo(b);case mV.timestamp:return bq(b);case mV.abstime:case mV.date:case mV.daterange:case mV.int4range:case mV.int8range:case mV.money:case mV.reltime:case mV.text:case mV.time:case mV.timestamptz:case mV.timetz:case mV.tsrange:case mV.tstzrange:default:return bl(b)}},bl=a=>a,bm=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},bn=a=>{if("string"==typeof a){let b=parseFloat(a);if(!Number.isNaN(b))return b}return a},bo=a=>{if("string"==typeof a)try{return JSON.parse(a)}catch(a){}return a},bp=(a,b)=>{if("string"!=typeof a)return a;let c=a.length-1,d=a[c];if("{"===a[0]&&"}"===d){let d,e=a.slice(1,c);try{d=JSON.parse("["+e+"]")}catch(a){d=e?e.split(","):[]}return d.map(a=>bk(b,a))}return a},bq=a=>"string"==typeof a?a.replace(" ","T"):a,br=a=>{let b=new URL(a);return b.protocol=b.protocol.replace(/^ws/i,"http"),b.pathname=b.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===b.pathname||"/"===b.pathname?b.pathname="/api/broadcast":b.pathname=b.pathname+"/api/broadcast",b.href};class bs{constructor(a,b,c={},d=1e4){this.channel=a,this.event=b,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,b){var c;return this._hasReceived(a)&&b(null==(c=this.receivedResp)?void 0:c.response),this.recHooks.push({status:a,callback:b}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let a=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,b){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:b})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:b}){this.recHooks.filter(b=>b.status===a).forEach(a=>a.callback(b))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}!function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"}(mW||(mW={}));class bt{constructor(a,b){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let c=(null==b?void 0:b.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bt.syncState(this.state,a,b,c),this.pendingDiffs.forEach(a=>{this.state=bt.syncDiff(this.state,a,b,c)}),this.pendingDiffs=[],d()}),this.channel._on(c.diff,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=bt.syncDiff(this.state,a,b,c),d())}),this.onJoin((a,b,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:b,newPresences:c})}),this.onLeave((a,b,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:b,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,b,c,d){let e=this.cloneDeep(a),f=this.transformState(b),g={},h={};return this.map(e,(a,b)=>{f[a]||(h[a]=b)}),this.map(f,(a,b)=>{let c=e[a];if(c){let d=b.map(a=>a.presence_ref),e=c.map(a=>a.presence_ref),f=b.filter(a=>0>e.indexOf(a.presence_ref)),i=c.filter(a=>0>d.indexOf(a.presence_ref));f.length>0&&(g[a]=f),i.length>0&&(h[a]=i)}else g[a]=b}),this.syncDiff(e,{joins:g,leaves:h},c,d)}static syncDiff(a,b,c,d){let{joins:e,leaves:f}={joins:this.transformState(b.joins),leaves:this.transformState(b.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(e,(b,d)=>{var e;let f=null!=(e=a[b])?e:[];if(a[b]=this.cloneDeep(d),f.length>0){let c=a[b].map(a=>a.presence_ref),d=f.filter(a=>0>c.indexOf(a.presence_ref));a[b].unshift(...d)}c(b,f,d)}),this.map(f,(b,c)=>{let e=a[b];if(!e)return;let f=c.map(a=>a.presence_ref);e=e.filter(a=>0>f.indexOf(a.presence_ref)),a[b]=e,d(b,e,c),0===e.length&&delete a[b]}),a}static map(a,b){return Object.getOwnPropertyNames(a).map(c=>b(c,a[c]))}static transformState(a){return Object.getOwnPropertyNames(a=this.cloneDeep(a)).reduce((b,c)=>{let d=a[c];return"metas"in d?b[c]=d.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):b[c]=d,b},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"}(mX||(mX={})),function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"}(mY||(mY={})),function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"}(mZ||(mZ={}));class bu{constructor(a,b={config:{}},c){var d,e;if(this.topic=a,this.params=b,this.socket=c,this.bindings={},this.state=mR.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},b.config),this.timeout=this.socket.timeout,this.joinPush=new bs(this,mS.join,this.params,this.timeout),this.rejoinTimer=new bh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mR.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mR.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=mR.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mR.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=mR.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mS.reply,{},(a,b)=>{this._trigger(this._replyEventName(b),a)}),this.presence=new bt(this),this.broadcastEndpointURL=br(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(e=null==(d=this.params.config)?void 0:d.broadcast)?void 0:e.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,b=this.timeout){var c,d,e;if(this.socket.isConnected()||this.socket.connect(),this.state==mR.closed){let{config:{broadcast:f,presence:g,private:h}}=this.params,i=null!=(d=null==(c=this.bindings.postgres_changes)?void 0:c.map(a=>a.filter))?d:[],j=!!this.bindings[mY.PRESENCE]&&this.bindings[mY.PRESENCE].length>0||(null==(e=this.params.config.presence)?void 0:e.enabled)===!0,k={},l={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:j}),postgres_changes:i,private:h};this.socket.accessTokenValue&&(k.access_token=this.socket.accessTokenValue),this._onError(b=>null==a?void 0:a(mZ.CHANNEL_ERROR,b)),this._onClose(()=>null==a?void 0:a(mZ.CLOSED)),this.updateJoinPayload(Object.assign({config:l},k)),this.joinedOnce=!0,this._rejoin(b),this.joinPush.receive("ok",async({postgres_changes:b})=>{var c;if(this.socket._isManualToken()||this.socket.setAuth(),void 0===b){null==a||a(mZ.SUBSCRIBED);return}{let d=this.bindings.postgres_changes,e=null!=(c=null==d?void 0:d.length)?c:0,f=[];for(let c=0;c<e;c++){let e=d[c],{filter:{event:g,schema:h,table:i,filter:j}}=e,k=b&&b[c];if(k&&k.event===g&&bu.isFilterValueEqual(k.schema,h)&&bu.isFilterValueEqual(k.table,i)&&bu.isFilterValueEqual(k.filter,j))f.push(Object.assign(Object.assign({},e),{id:k.id}));else{this.unsubscribe(),this.state=mR.errored,null==a||a(mZ.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,a&&a(mZ.SUBSCRIBED);return}}).receive("error",b=>{this.state=mR.errored,null==a||a(mZ.CHANNEL_ERROR,Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{null==a||a(mZ.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,b={}){return await this.send({type:"presence",event:"track",payload:a},b.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,b,c){return this.state===mR.joined&&a===mY.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,b,c)}async httpSend(a,b,c={}){var d;if(null==b)return Promise.reject("Payload is required for httpSend()");let e={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(e.Authorization=`Bearer ${this.socket.accessTokenValue}`);let f={method:"POST",headers:e,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:b,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,null!=(d=c.timeout)?d:this.timeout);if(202===g.status)return{success:!0};let h=g.statusText;try{let a=await g.json();h=a.error||a.message||h}catch(a){}return Promise.reject(Error(h))}async send(a,b={}){var c,d;if(this._canPush()||"broadcast"!==a.type)return new Promise(c=>{var d,e,f;let g=this._push(a.type,a,b.timeout||this.timeout);"broadcast"!==a.type||(null==(f=null==(e=null==(d=this.params)?void 0:d.config)?void 0:e.broadcast)?void 0:f.ack)||c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:e,payload:f}=a,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);let h={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:f,private:this.private}]})};try{let a=await this._fetchWithTimeout(this.broadcastEndpointURL,h,null!=(c=b.timeout)?c:this.timeout);return await (null==(d=a.body)?void 0:d.cancel()),a.ok?"ok":"error"}catch(a){if("AbortError"===a.name)return"timed out";return"error"}}}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=mR.leaving;let b=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mS.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(d=>{(c=new bs(this,mS.leave,{},a)).receive("ok",()=>{b(),d("ok")}).receive("timeout",()=>{b(),d("timed out")}).receive("error",()=>{d("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{null==c||c.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mR.closed,this.bindings={}}async _fetchWithTimeout(a,b,c){let d=new AbortController,e=setTimeout(()=>d.abort(),c),f=await this.socket.fetch(a,Object.assign(Object.assign({},b),{signal:d.signal}));return clearTimeout(e),f}_push(a,b,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new bs(this,a,b,c);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>100){let a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(a,b,c){return b}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,b,c){var d,e;let f=a.toLocaleLowerCase(),{close:g,error:h,leave:i,join:j}=mS;if(c&&[g,h,i,j].indexOf(f)>=0&&c!==this._joinRef())return;let k=this._onMessage(f,b,c);if(b&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?null==(d=this.bindings.postgres_changes)||d.filter(a=>{var b,c,d;return(null==(b=a.filter)?void 0:b.event)==="*"||(null==(d=null==(c=a.filter)?void 0:c.event)?void 0:d.toLocaleLowerCase())===f}).map(a=>a.callback(k,c)):null==(e=this.bindings[f])||e.filter(a=>{var c,d,e,g,h,i,j,k;if(!["broadcast","presence","postgres_changes"].includes(f))return a.type.toLocaleLowerCase()===f;if("id"in a){let f=a.id,i=null==(c=a.filter)?void 0:c.event;return f&&(null==(d=b.ids)?void 0:d.includes(f))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null==(e=b.data)?void 0:e.type.toLocaleLowerCase()))&&(!(null==(g=a.filter)?void 0:g.table)||a.filter.table===(null==(h=b.data)?void 0:h.table))}{let c=null==(j=null==(i=null==a?void 0:a.filter)?void 0:i.event)?void 0:j.toLocaleLowerCase();return"*"===c||c===(null==(k=null==b?void 0:b.event)?void 0:k.toLocaleLowerCase())}}).map(a=>{if("object"==typeof k&&"ids"in k){let a=k.data,{schema:b,table:c,commit_timestamp:d,type:e,errors:f}=a;k=Object.assign(Object.assign({},{schema:b,table:c,commit_timestamp:d,eventType:e,new:{},old:{},errors:f}),this._getPayloadRecords(a))}a.callback(k,c)})}_isClosed(){return this.state===mR.closed}_isJoined(){return this.state===mR.joined}_isJoining(){return this.state===mR.joining}_isLeaving(){return this.state===mR.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,b,c){let d=a.toLocaleLowerCase(),e={type:d,filter:b,callback:c};return this.bindings[d]?this.bindings[d].push(e):this.bindings[d]=[e],this}_off(a,b){let c=a.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(a=>{var d;return!((null==(d=a.type)?void 0:d.toLocaleLowerCase())===c&&bu.isEqual(a.filter,b))})),this}static isEqual(a,b){if(Object.keys(a).length!==Object.keys(b).length)return!1;for(let c in a)if(a[c]!==b[c])return!1;return!0}static isFilterValueEqual(a,b){return(null!=a?a:void 0)===(null!=b?b:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(mS.close,{},a)}_onError(a){this._on(mS.error,{},b=>a(b))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mR.joining,this.joinPush.resend(a))}_getPayloadRecords(a){let b={new:{},old:{}};return("INSERT"===a.type||"UPDATE"===a.type)&&(b.new=bi(a.columns,a.record)),("UPDATE"===a.type||"DELETE"===a.type)&&(b.old=bi(a.columns,a.old_record)),b}}let bv=()=>{},bw={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bx=[1e3,2e3,5e3,1e4],by=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bz{constructor(a,b){var c;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=bw.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bv,this.ref=0,this.reconnectTimer=null,this.vsn=bf,this.logger=bv,this.conn=null,this.sendBuffer=[],this.serializer=new bg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),!(null==(c=null==b?void 0:b.params)?void 0:c.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=b.params.apikey,this.endPoint=`${a}/${mT.websocket}`,this.httpEndpoint=br(a),this._initializeOptions(b),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==b?void 0:b.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=be.createWebSocket(this.endpointURL())}catch(b){this._setConnectionState("disconnected");let a=b.message;if(a.includes("Node.js"))throw Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,b){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(a?this.conn.close(a,null!=b?b:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){let b=await a.unsubscribe();return 0===this.channels.length&&this.disconnect(),b}async removeAllChannels(){let a=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,b,c){this.logger(a,b,c)}connectionState(){switch(this.conn&&this.conn.readyState){case mQ.connecting:return mU.Connecting;case mQ.open:return mU.Open;case mQ.closing:return mU.Closing;default:return mU.Closed}}isConnected(){return this.connectionState()===mU.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(a,b={config:{}}){let c=`realtime:${a}`,d=this.getChannels().find(a=>a.topic===c);if(d)return d;{let c=new bu(`realtime:${a}`,b,this);return this.channels.push(c),c}}push(a){let{topic:b,event:c,payload:d,ref:e}=a,f=()=>{this.encode(a,a=>{var b;null==(b=this.conn)||b.send(a)})};this.log("push",`${b} ${c} (${e})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,null==(a=this.conn)||a.close(1e3,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||null==(a=this.reconnectTimer)||a.scheduleTimeout()},bw.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let b=this.channels.find(b=>b.topic===a&&(b._isJoined()||b._isJoining()));b&&(this.log("transport",`leaving duplicate topic "${a}"`),b.unsubscribe())}_remove(a){this.channels=this.channels.filter(b=>b.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,a=>{if("phoenix"===a.topic&&"phx_reply"===a.event&&a.ref&&a.ref===this.pendingHeartbeatRef){let b=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===a.payload.status?"ok":"error",b)}catch(a){this.log("error","error in heartbeat callback",a)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:b,event:c,payload:d,ref:e}=a,f=e?`(${e})`:"",g=d.status||"";this.log("receive",`${g} ${b} ${c} ${f}`.trim(),d),this.channels.filter(a=>a._isMember(b)).forEach(a=>a._trigger(c,d,e)),this._triggerStateCallbacks("message",a)})}_clearTimer(a){var b;"heartbeat"===a&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===a&&(null==(b=this.reconnectTimer)||b.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===mQ.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===mQ.open||this.conn.readyState===mQ.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{"keepAlive"===a.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var b;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(b=this.reconnectTimer)||b.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(mS.error))}_appendParams(a,b){if(0===Object.keys(b).length)return a;let c=a.match(/\?/)?"&":"?",d=new URLSearchParams(b);return`${a}${c}${d}`}_workerObjectUrl(a){let b;if(a)b=a;else{let a=new Blob([by],{type:"application/javascript"});b=URL.createObjectURL(a)}return b}_setConnectionState(a,b=!1){this._connectionState=a,"connecting"===a?this._wasManualDisconnect=!1:"disconnecting"===a&&(this._wasManualDisconnect=b)}async _performAuth(a=null){let b,c=!1;if(a)b=a,c=!0;else if(this.accessToken)try{b=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),b=this.accessTokenValue}else b=this.accessTokenValue;c?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=b&&(this.accessTokenValue=b,this.channels.forEach(a=>{let c={access_token:b,version:"realtime-js/2.91.1"};b&&a.updateJoinPayload(c),a.joinedOnce&&a._isJoined()&&a._push(mS.access_token,{access_token:b})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(b=>{this.log("error",`Error setting auth in ${a}`,b)})}_triggerStateCallbacks(a,b){try{this.stateChangeCallbacks[a].forEach(c=>{try{c(b)}catch(b){this.log("error",`error in ${a} callback`,b)}})}catch(b){this.log("error",`error triggering ${a} callbacks`,b)}}_setupReconnectionTimer(){this.reconnectTimer=new bh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bw.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var b,c,d,e,f,g,h,i,j,k,l,m;switch(this.transport=null!=(b=null==a?void 0:a.transport)?b:null,this.timeout=null!=(c=null==a?void 0:a.timeout)?c:1e4,this.heartbeatIntervalMs=null!=(d=null==a?void 0:a.heartbeatIntervalMs)?d:bw.HEARTBEAT_INTERVAL,this.worker=null!=(e=null==a?void 0:a.worker)&&e,this.accessToken=null!=(f=null==a?void 0:a.accessToken)?f:null,this.heartbeatCallback=null!=(g=null==a?void 0:a.heartbeatCallback)?g:bv,this.vsn=null!=(h=null==a?void 0:a.vsn)?h:bf,(null==a?void 0:a.params)&&(this.params=a.params),(null==a?void 0:a.logger)&&(this.logger=a.logger),((null==a?void 0:a.logLevel)||(null==a?void 0:a.log_level))&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(i=null==a?void 0:a.reconnectAfterMs)?i:a=>bx[a-1]||1e4,this.vsn){case"1.0.0":this.encode=null!=(j=null==a?void 0:a.encode)?j:(a,b)=>b(JSON.stringify(a)),this.decode=null!=(k=null==a?void 0:a.decode)?k:(a,b)=>b(JSON.parse(a));break;case bf:this.encode=null!=(l=null==a?void 0:a.encode)?l:this.serializer.encode.bind(this.serializer),this.decode=null!=(m=null==a?void 0:a.decode)?m:this.serializer.decode.bind(this.serializer);break;default:throw Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.workerUrl=null==a?void 0:a.workerUrl}}}var bA=class extends Error{constructor(a,b){super(a),this.name="IcebergError",this.status=b.status,this.icebergType=b.icebergType,this.icebergCode=b.icebergCode,this.details=b.details,this.isCommitStateUnknown="CommitStateUnknownException"===b.icebergType||[500,502,504].includes(b.status)&&b.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function bB(a){return a&&"none"!==a.type?"bearer"===a.type?{Authorization:`Bearer ${a.token}`}:"header"===a.type?{[a.name]:a.value}:"custom"===a.type?await a.getHeaders():{}:{}}function bC(a){return a.join("\x1f")}var bD=class{constructor(a,b=""){this.client=a,this.prefix=b}async listNamespaces(a){let b=a?{parent:bC(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:b})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(a,b){let c={namespace:a.namespace,properties:b?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:c})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bC(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bC(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bC(a.namespace)}`}),!0}catch(a){if(a instanceof bA&&404===a.status)return!1;throw a}}async createNamespaceIfNotExists(a,b){try{return await this.createNamespace(a,b)}catch(a){if(a instanceof bA&&409===a.status)return;throw a}}};function bE(a){return a.join("\x1f")}var bF=class{constructor(a,b="",c){this.client=a,this.prefix=b,this.accessDelegation=c}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bE(a.namespace)}/tables`})).data.identifiers}async createTable(a,b){let c={};return this.accessDelegation&&(c["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bE(a.namespace)}/tables`,body:b,headers:c})).data.metadata}async updateTable(a,b){let c=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${bE(a.namespace)}/tables/${a.name}`,body:b});return{"metadata-location":c.data["metadata-location"],metadata:c.data.metadata}}async dropTable(a,b){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bE(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(b?.purge??!1)}})}async loadTable(a){let b={};return this.accessDelegation&&(b["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bE(a.namespace)}/tables/${a.name}`,headers:b})).data.metadata}async tableExists(a){let b={};this.accessDelegation&&(b["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bE(a.namespace)}/tables/${a.name}`,headers:b}),!0}catch(a){if(a instanceof bA&&404===a.status)return!1;throw a}}async createTableIfNotExists(a,b){try{return await this.createTable(a,b)}catch(c){if(c instanceof bA&&409===c.status)return await this.loadTable({namespace:a.namespace,name:b.name});throw c}}},bG=class{constructor(a){let b="v1";a.catalogName&&(b+=`/${a.catalogName}`);let c=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=function(a){let b=a.fetchImpl??globalThis.fetch;return{async request({method:c,path:d,query:e,body:f,headers:g}){let h=function(a,b,c){let d=new URL(b,a);if(c)for(let[a,b]of Object.entries(c))void 0!==b&&d.searchParams.set(a,b);return d.toString()}(a.baseUrl,d,e),i=await bB(a.auth),j=await b(h,{method:c,headers:{...f?{"Content-Type":"application/json"}:{},...i,...g},body:f?JSON.stringify(f):void 0}),k=await j.text(),l=(j.headers.get("content-type")||"").includes("application/json"),m=l&&k?JSON.parse(k):k;if(!j.ok){let a=l?m:void 0,b=a?.error;throw new bA(b?.message??`Request failed with status ${j.status}`,{status:j.status,icebergType:b?.type,icebergCode:b?.code,details:a})}return{status:j.status,headers:j.headers,data:m}}}}({baseUrl:c,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new bD(this.client,b),this.tableOps=new bF(this.client,b,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,b){return this.namespaceOps.createNamespace(a,b)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,b){return this.tableOps.createTable(a,b)}async updateTable(a,b){return this.tableOps.updateTable(a,b)}async dropTable(a,b){await this.tableOps.dropTable(a,b)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,b){return this.namespaceOps.createNamespaceIfNotExists(a,b)}async createTableIfNotExists(a,b){return this.tableOps.createTableIfNotExists(a,b)}},bH=class extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}};function bI(a){return"object"==typeof a&&null!==a&&"__isStorageError"in a}var bJ=class extends bH{constructor(a,b,c){super(a),this.name="StorageApiError",this.status=b,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},bK=class extends bH{constructor(a,b){super(a),this.name="StorageUnknownError",this.originalError=b}};let bL=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),bM=a=>{if(Array.isArray(a))return a.map(a=>bM(a));if("function"==typeof a||a!==Object(a))return a;let b={};return Object.entries(a).forEach(([a,c])=>{b[a.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""))]=bM(c)}),b};function bN(a){return(bN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function bO(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function bP(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?bO(Object(c),!0).forEach(function(b){!function(a,b,c){var d;(d=function(a,b){if("object"!=bN(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=bN(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"),(b="symbol"==bN(d)?d:d+"")in a)?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c}(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):bO(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}let bQ=a=>{var b;return a.msg||a.message||a.error_description||("string"==typeof a.error?a.error:null==(b=a.error)?void 0:b.message)||JSON.stringify(a)},bR=async(a,b,c)=>{a instanceof await Response&&!(null==c?void 0:c.noResolveJson)?a.json().then(c=>{let d=a.status||500,e=(null==c?void 0:c.statusCode)||d+"";b(new bJ(bQ(c),d,e))}).catch(a=>{b(new bK(bQ(a),a))}):b(new bK(bQ(a),a))};async function bS(a,b,c,d,e,f){return new Promise((g,h)=>{a(c,((a,b,c,d)=>{let e={method:a,headers:(null==b?void 0:b.headers)||{}};return"GET"!==a&&d?((a=>{if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)})(d)?(e.headers=bP({"Content-Type":"application/json"},null==b?void 0:b.headers),e.body=JSON.stringify(d)):e.body=d,(null==b?void 0:b.duplex)&&(e.duplex=b.duplex),bP(bP({},e),c)):e})(b,d,e,f)).then(a=>{if(!a.ok)throw a;return(null==d?void 0:d.noResolveJson)?a:a.json()}).then(a=>g(a)).catch(a=>bR(a,h,d))})}async function bT(a,b,c,d){return bS(a,"GET",b,c,d)}async function bU(a,b,c,d,e){return bS(a,"POST",b,d,e,c)}async function bV(a,b,c,d,e){return bS(a,"PUT",b,d,e,c)}async function bW(a,b,c,d){return bS(a,"HEAD",b,bP(bP({},c),{},{noResolveJson:!0}),d)}async function bX(a,b,c,d,e){return bS(a,"DELETE",b,d,e,c)}var bY=class{constructor(a,b){this.downloadFn=a,this.shouldThrowOnError=b}then(a,b){return this.execute().then(a,b)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}};d=Symbol.toStringTag;var bZ=class{constructor(a,b){this.downloadFn=a,this.shouldThrowOnError=b,this[d]="BlobDownloadBuilder",this.promise=null}asStream(){return new bY(this.downloadFn,this.shouldThrowOnError)}then(a,b){return this.getPromise().then(a,b)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await (await this.downloadFn()).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}};let b$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},b_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var b0=class{constructor(a,b={},c,d){this.shouldThrowOnError=!1,this.url=a,this.headers=b,this.bucketId=c,this.fetch=bL(d)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(a,b,c,d){try{let e,f=bP(bP({},b_),d),g=bP(bP({},this.headers),"POST"===a&&{"x-upsert":String(f.upsert)}),h=f.metadata;"undefined"!=typeof Blob&&c instanceof Blob?((e=new FormData).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h)),e.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?((e=c).has("cacheControl")||e.append("cacheControl",f.cacheControl),h&&!e.has("metadata")&&e.append("metadata",this.encodeMetadata(h))):(e=c,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,h&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(h))),("undefined"!=typeof ReadableStream&&e instanceof ReadableStream||e&&"object"==typeof e&&"pipe"in e&&"function"==typeof e.pipe)&&!f.duplex&&(f.duplex="half")),(null==d?void 0:d.headers)&&(g=bP(bP({},g),d.headers));let i=this._removeEmptyFolders(b),j=this._getFinalPath(i),k=await ("PUT"==a?bV:bU)(this.fetch,`${this.url}/object/${j}`,e,bP({headers:g},(null==f?void 0:f.duplex)?{duplex:f.duplex}:{}));return{data:{path:i,id:k.Id,fullPath:k.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async upload(a,b,c){return this.uploadOrUpdate("POST",a,b,c)}async uploadToSignedUrl(a,b,c,d){let e=this._removeEmptyFolders(a),f=this._getFinalPath(e),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",b);try{let a,b=bP({upsert:b_.upsert},d),f=bP(bP({},this.headers),{"x-upsert":String(b.upsert)});return"undefined"!=typeof Blob&&c instanceof Blob?((a=new FormData).append("cacheControl",b.cacheControl),a.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?(a=c).append("cacheControl",b.cacheControl):(a=c,f["cache-control"]=`max-age=${b.cacheControl}`,f["content-type"]=b.contentType),{data:{path:e,fullPath:(await bV(this.fetch,g.toString(),a,{headers:f})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async createSignedUploadUrl(a,b){try{let c=this._getFinalPath(a),d=bP({},this.headers);(null==b?void 0:b.upsert)&&(d["x-upsert"]="true");let e=await bU(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:d}),f=new URL(this.url+e.url),g=f.searchParams.get("token");if(!g)throw new bH("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:g},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async update(a,b,c){return this.uploadOrUpdate("PUT",a,b,c)}async move(a,b,c){try{return{data:await bU(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async copy(a,b,c){try{return{data:{path:(await bU(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async createSignedUrl(a,b,c){try{let d=this._getFinalPath(a),e=await bU(this.fetch,`${this.url}/object/sign/${d}`,bP({expiresIn:b},(null==c?void 0:c.transform)?{transform:c.transform}:{}),{headers:this.headers}),f=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:e={signedUrl:encodeURI(`${this.url}${e.signedURL}${f}`)},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async createSignedUrls(a,b,c){var d=this;try{let e=await bU(d.fetch,`${d.url}/object/sign/${d.bucketId}`,{expiresIn:b,paths:a},{headers:d.headers}),f=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:e.map(a=>bP(bP({},a),{},{signedUrl:a.signedURL?encodeURI(`${d.url}${a.signedURL}${f}`):null})),error:null}}catch(a){if(d.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}download(a,b){let c=void 0!==(null==b?void 0:b.transform)?"render/image/authenticated":"object",d=this.transformOptsToQueryString((null==b?void 0:b.transform)||{}),e=d?`?${d}`:"",f=this._getFinalPath(a);return new bZ(()=>bT(this.fetch,`${this.url}/${c}/${f}${e}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(a){let b=this._getFinalPath(a);try{return{data:bM(await bT(this.fetch,`${this.url}/object/info/${b}`,{headers:this.headers})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async exists(a){let b=this._getFinalPath(a);try{return await bW(this.fetch,`${this.url}/object/${b}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a)&&a instanceof bK){let b=a.originalError;if([400,404].includes(null==b?void 0:b.status))return{data:!1,error:a}}throw a}}getPublicUrl(a,b){let c=this._getFinalPath(a),d=[],e=(null==b?void 0:b.download)?`download=${!0===b.download?"":b.download}`:"";""!==e&&d.push(e);let f=void 0!==(null==b?void 0:b.transform)?"render/image":"object",g=this.transformOptsToQueryString((null==b?void 0:b.transform)||{});""!==g&&d.push(g);let h=d.join("&");return""!==h&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${c}${h}`)}}}async remove(a){try{return{data:await bX(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async list(a,b,c){try{let d=bP(bP(bP({},b$),b),{},{prefix:a||""});return{data:await bU(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},c),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async listV2(a,b){try{let c=bP({},a);return{data:await bU(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},b),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return"undefined"!=typeof Buffer?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){let b=[];return a.width&&b.push(`width=${a.width}`),a.height&&b.push(`height=${a.height}`),a.resize&&b.push(`resize=${a.resize}`),a.format&&b.push(`format=${a.format}`),a.quality&&b.push(`quality=${a.quality}`),b.join("&")}};let b1="2.91.1",b2={"X-Client-Info":`storage-js/${b1}`};var b3=class{constructor(a,b={},c,d){this.shouldThrowOnError=!1;let e=new URL(a);(null==d?void 0:d.useNewHostname)&&/supabase\.(co|in|red)$/.test(e.hostname)&&!e.hostname.includes("storage.supabase.")&&(e.hostname=e.hostname.replace("supabase.","storage.supabase.")),this.url=e.href.replace(/\/$/,""),this.headers=bP(bP({},b2),b),this.fetch=bL(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(a){try{let b=this.listBucketOptionsToQueryString(a);return{data:await bT(this.fetch,`${this.url}/bucket${b}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async getBucket(a){try{return{data:await bT(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async createBucket(a,b={public:!1}){try{return{data:await bU(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:b.type,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async updateBucket(a,b){try{return{data:await bV(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async emptyBucket(a){try{return{data:await bU(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async deleteBucket(a){try{return{data:await bX(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}listBucketOptionsToQueryString(a){let b={};return a&&("limit"in a&&(b.limit=String(a.limit)),"offset"in a&&(b.offset=String(a.offset)),a.search&&(b.search=a.search),a.sortColumn&&(b.sortColumn=a.sortColumn),a.sortOrder&&(b.sortOrder=a.sortOrder)),Object.keys(b).length>0?"?"+new URLSearchParams(b).toString():""}},b4=class{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=bP(bP({},b2),b),this.fetch=bL(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){try{return{data:await bU(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async listBuckets(a){try{let b=new URLSearchParams;(null==a?void 0:a.limit)!==void 0&&b.set("limit",a.limit.toString()),(null==a?void 0:a.offset)!==void 0&&b.set("offset",a.offset.toString()),(null==a?void 0:a.sortColumn)&&b.set("sortColumn",a.sortColumn),(null==a?void 0:a.sortOrder)&&b.set("sortOrder",a.sortOrder),(null==a?void 0:a.search)&&b.set("search",a.search);let c=b.toString(),d=c?`${this.url}/bucket?${c}`:`${this.url}/bucket`;return{data:await bT(this.fetch,d,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}async deleteBucket(a){try{return{data:await bX(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bI(a))return{data:null,error:a};throw a}}from(a){var b=this;if(!(!(!a||"string"!=typeof a||0===a.length||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(a)))throw new bH("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let c=new bG({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>b.headers},fetch:this.fetch}),d=this.shouldThrowOnError;return new Proxy(c,{get(a,b){let c=a[b];return"function"!=typeof c?c:async(...b)=>{try{return{data:await c.apply(a,b),error:null}}catch(a){if(d)throw a;return{data:null,error:a}}}}})}};let b5={"X-Client-Info":`storage-js/${b1}`,"Content-Type":"application/json"};var b6=class extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function b7(a){return"object"==typeof a&&null!==a&&"__isStorageVectorsError"in a}var b8=class extends b6{constructor(a,b,c){super(a),this.name="StorageVectorsApiError",this.status=b,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},b9=class extends b6{constructor(a,b){super(a),this.name="StorageVectorsUnknownError",this.originalError=b}};let ca=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),cb=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),cc=async(a,b,c)=>{if(a&&"object"==typeof a&&"status"in a&&"ok"in a&&"number"==typeof a.status&&!(null==c?void 0:c.noResolveJson)){let c=a.status||500;"function"==typeof a.json?a.json().then(a=>{let d=(null==a?void 0:a.statusCode)||(null==a?void 0:a.code)||c+"";b(new b8(cb(a),c,d))}).catch(()=>{b(new b8(a.statusText||`HTTP ${c} error`,c,c+""))}):b(new b8(a.statusText||`HTTP ${c} error`,c,c+""))}else b(new b9(cb(a),a))};async function cd(a,b,c,d,e,f){return new Promise((g,h)=>{a(c,((a,b,c,d)=>{let e={method:a,headers:(null==b?void 0:b.headers)||{}};return"GET"!==a&&d?((a=>{if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)})(d)?(e.headers=bP({"Content-Type":"application/json"},null==b?void 0:b.headers),e.body=JSON.stringify(d)):e.body=d,bP(bP({},e),c)):e})(b,d,e,f)).then(a=>{if(!a.ok)throw a;if(null==d?void 0:d.noResolveJson)return a;let b=a.headers.get("content-type");return b&&b.includes("application/json")?a.json():{}}).then(a=>g(a)).catch(a=>cc(a,h,d))})}async function ce(a,b,c,d,e){return cd(a,"POST",b,d,e,c)}var cf=class{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=bP(bP({},b5),b),this.fetch=ca(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(a){try{return{data:await ce(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async getIndex(a,b){try{return{data:await ce(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:b},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async listIndexes(a){try{return{data:await ce(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async deleteIndex(a,b){try{return{data:await ce(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:b},{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}},cg=class{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=bP(bP({},b5),b),this.fetch=ca(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(a){try{if(a.vectors.length<1||a.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:await ce(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async getVectors(a){try{return{data:await ce(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async listVectors(a){try{if(void 0!==a.segmentCount){if(a.segmentCount<1||a.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==a.segmentIndex&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:await ce(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async queryVectors(a){try{return{data:await ce(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async deleteVectors(a){try{if(a.keys.length<1||a.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:await ce(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}},ch=class{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=bP(bP({},b5),b),this.fetch=ca(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){try{return{data:await ce(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async getBucket(a){try{return{data:await ce(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async listBuckets(a={}){try{return{data:await ce(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}async deleteBucket(a){try{return{data:await ce(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(b7(a))return{data:null,error:a};throw a}}},ci=class extends ch{constructor(a,b={}){super(a,b.headers||{},b.fetch)}from(a){return new cj(this.url,this.headers,a,this.fetch)}async createBucket(a){return super.createBucket.call(this,a)}async getBucket(a){return super.getBucket.call(this,a)}async listBuckets(a={}){return super.listBuckets.call(this,a)}async deleteBucket(a){return super.deleteBucket.call(this,a)}},cj=class extends cf{constructor(a,b,c,d){super(a,b,d),this.vectorBucketName=c}async createIndex(a){return super.createIndex.call(this,bP(bP({},a),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(a={}){return super.listIndexes.call(this,bP(bP({},a),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(a){return super.getIndex.call(this,this.vectorBucketName,a)}async deleteIndex(a){return super.deleteIndex.call(this,this.vectorBucketName,a)}index(a){return new ck(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},ck=class extends cg{constructor(a,b,c,d,e){super(a,b,e),this.vectorBucketName=c,this.indexName=d}async putVectors(a){return super.putVectors.call(this,bP(bP({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async getVectors(a){return super.getVectors.call(this,bP(bP({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async listVectors(a={}){return super.listVectors.call(this,bP(bP({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async queryVectors(a){return super.queryVectors.call(this,bP(bP({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async deleteVectors(a){return super.deleteVectors.call(this,bP(bP({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}},cl=class extends b3{constructor(a,b={},c,d){super(a,b,c,d)}from(a){return new b0(this.url,this.headers,a,this.fetch)}get vectors(){return new ci(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new b4(this.url+"/iceberg",this.headers,this.fetch)}};let cm="2.91.1",cn={"X-Client-Info":`gotrue-js/${cm}`},co="X-Supabase-Api-Version",cp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cq=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class cr extends Error{constructor(a,b,c){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=b,this.code=c}}function cs(a){return"object"==typeof a&&null!==a&&"__isAuthError"in a}class ct extends cr{constructor(a,b,c){super(a,b,c),this.name="AuthApiError",this.status=b,this.code=c}}class cu extends cr{constructor(a,b){super(a),this.name="AuthUnknownError",this.originalError=b}}class cv extends cr{constructor(a,b,c,d){super(a,c,d),this.name=b,this.status=c}}class cw extends cv{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class cx extends cv{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cy extends cv{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class cz extends cv{constructor(a,b=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cA extends cv{constructor(a,b=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cB extends cv{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class cC extends cv{constructor(a,b){super(a,"AuthRetryableFetchError",b,void 0)}}function cD(a){return cs(a)&&"AuthRetryableFetchError"===a.name}class cE extends cv{constructor(a,b,c){super(a,"AuthWeakPasswordError",b,"weak_password"),this.reasons=c}}class cF extends cv{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}let cG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cH=" 	\n\r=".split(""),cI=(()=>{let a=Array(128);for(let b=0;b<a.length;b+=1)a[b]=-1;for(let b=0;b<cH.length;b+=1)a[cH[b].charCodeAt(0)]=-2;for(let b=0;b<cG.length;b+=1)a[cG[b].charCodeAt(0)]=b;return a})();function cJ(a,b,c){if(null!==a)for(b.queue=b.queue<<8|a,b.queuedBits+=8;b.queuedBits>=6;)c(cG[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6;else if(b.queuedBits>0)for(b.queue=b.queue<<6-b.queuedBits,b.queuedBits=6;b.queuedBits>=6;)c(cG[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6}function cK(a,b,c){let d=cI[a];if(d>-1)for(b.queue=b.queue<<6|d,b.queuedBits+=6;b.queuedBits>=8;)c(b.queue>>b.queuedBits-8&255),b.queuedBits-=8;else if(-2===d)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}function cL(a){let b=[],c=a=>{b.push(String.fromCodePoint(a))},d={utf8seq:0,codepoint:0},e={queue:0,queuedBits:0},f=a=>{!function(a,b,c){if(0===b.utf8seq){if(a<=127)return c(a);for(let c=1;c<6;c+=1)if((a>>7-c&1)==0){b.utf8seq=c;break}if(2===b.utf8seq)b.codepoint=31&a;else if(3===b.utf8seq)b.codepoint=15&a;else if(4===b.utf8seq)b.codepoint=7&a;else throw Error("Invalid UTF-8 sequence");b.utf8seq-=1}else if(b.utf8seq>0){if(a<=127)throw Error("Invalid UTF-8 sequence");b.codepoint=b.codepoint<<6|63&a,b.utf8seq-=1,0===b.utf8seq&&c(b.codepoint)}}(a,d,c)};for(let b=0;b<a.length;b+=1)cK(a.charCodeAt(b),e,f);return b.join("")}function cM(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};for(let b=0;b<a.length;b+=1)cK(a.charCodeAt(b),c,d);return new Uint8Array(b)}function cN(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};return a.forEach(a=>cJ(a,c,d)),cJ(null,c,d),b.join("")}let cO=()=>"undefined"!=typeof window&&"undefined"!=typeof document,cP={tested:!1,writable:!1},cQ=()=>{if(!cO())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(a){return!1}if(cP.tested)return cP.writable;let a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),cP.tested=!0,cP.writable=!0}catch(a){cP.tested=!0,cP.writable=!1}return cP.writable},cR=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),cS=async(a,b,c)=>{await a.setItem(b,JSON.stringify(c))},cT=async(a,b)=>{let c=await a.getItem(b);if(!c)return null;try{return JSON.parse(c)}catch(a){return c}},cU=async(a,b)=>{await a.removeItem(b)};class cV{constructor(){this.promise=new cV.promiseConstructor((a,b)=>{this.resolve=a,this.reject=b})}}function cW(a){let b=a.split(".");if(3!==b.length)throw new cF("Invalid JWT structure");for(let a=0;a<b.length;a++)if(!cq.test(b[a]))throw new cF("JWT not in base64url format");return{header:JSON.parse(cL(b[0])),payload:JSON.parse(cL(b[1])),signature:cM(b[2]),raw:{header:b[0],payload:b[1]}}}async function cX(a){return await new Promise(b=>{setTimeout(()=>b(null),a)})}function cY(a){return("0"+a.toString(16)).substr(-2)}async function cZ(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>String.fromCharCode(a)).join("")}async function c$(a){return"undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder?(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a):btoa(await cZ(a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function c_(a,b,c=!1){let d=function(){let a=new Uint32Array(56);if("undefined"==typeof crypto){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=a.length,c="";for(let d=0;d<56;d++)c+=a.charAt(Math.floor(Math.random()*b));return c}return crypto.getRandomValues(a),Array.from(a,cY).join("")}(),e=d;c&&(e+="/PASSWORD_RECOVERY"),await cS(a,`${b}-code-verifier`,e);let f=await c$(d),g=d===f?"plain":"s256";return[f,g]}cV.promiseConstructor=Promise;let c0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,c1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function c2(a){if(!c1.test(a))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function c3(){return new Proxy({},{get:(a,b)=>{if("__isUserNotAvailableProxy"===b)return!0;if("symbol"==typeof b){let a=b.toString();if("Symbol(Symbol.toPrimitive)"===a||"Symbol(Symbol.toStringTag)"===a||"Symbol(util.inspect.custom)"===a)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${b}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function c4(a){return JSON.parse(JSON.stringify(a))}let c5=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),c6=[502,503,504];async function c7(a){var b;let c,d;if(!("object"==typeof a&&null!==a&&"status"in a&&"ok"in a&&"json"in a&&"function"==typeof a.json))throw new cC(c5(a),0);if(c6.includes(a.status))throw new cC(c5(a),a.status);try{c=await a.json()}catch(a){throw new cu(c5(a),a)}let e=function(a){let b=a.headers.get(co);if(!b||!b.match(c0))return null;try{return new Date(`${b}T00:00:00.0Z`)}catch(a){return null}}(a);if(e&&e.getTime()>=cp["2024-01-01"].timestamp&&"object"==typeof c&&c&&"string"==typeof c.code?d=c.code:"object"==typeof c&&c&&"string"==typeof c.error_code&&(d=c.error_code),d){if("weak_password"===d)throw new cE(c5(c),a.status,(null==(b=c.weak_password)?void 0:b.reasons)||[]);else if("session_not_found"===d)throw new cw}else if("object"==typeof c&&c&&"object"==typeof c.weak_password&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0))throw new cE(c5(c),a.status,c.weak_password.reasons);throw new ct(c5(c),a.status||500,d)}async function c8(a,b,c,d){var e;let f=Object.assign({},null==d?void 0:d.headers);f[co]||(f[co]=cp["2024-01-01"].name),(null==d?void 0:d.jwt)&&(f.Authorization=`Bearer ${d.jwt}`);let g=null!=(e=null==d?void 0:d.query)?e:{};(null==d?void 0:d.redirectTo)&&(g.redirect_to=d.redirectTo);let h=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",i=await c9(a,b,c+h,{headers:f,noResolveJson:null==d?void 0:d.noResolveJson},{},null==d?void 0:d.body);return(null==d?void 0:d.xform)?null==d?void 0:d.xform(i):{data:Object.assign({},i),error:null}}async function c9(a,b,c,d,e,f){let g,h=((a,b,c,d)=>{let e={method:a,headers:(null==b?void 0:b.headers)||{}};return"GET"===a?e:(e.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==b?void 0:b.headers),e.body=JSON.stringify(d),Object.assign(Object.assign({},e),c))})(b,d,e,f);try{g=await a(c,Object.assign({},h))}catch(a){throw console.error(a),new cC(c5(a),0)}if(g.ok||await c7(g),null==d?void 0:d.noResolveJson)return g;try{return await g.json()}catch(a){await c7(a)}}function da(a){var b,c,d;let e=null;(d=a).access_token&&d.refresh_token&&d.expires_in&&(e=Object.assign({},a),a.expires_at||(e.expires_at=(c=a.expires_in,Math.round(Date.now()/1e3)+c)));return{data:{session:e,user:null!=(b=a.user)?b:a},error:null}}function db(a){let b=da(a);return!b.error&&a.weak_password&&"object"==typeof a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&"string"==typeof a.weak_password.message&&a.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0)&&(b.data.weak_password=a.weak_password),b}function dc(a){var b;return{data:{user:null!=(b=a.user)?b:a},error:null}}function dd(a){return{data:a,error:null}}function de(a){let{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f}=a;return{data:{properties:{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f},user:Object.assign({},a1(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function df(a){return a}let dg=["global","local","others"];class dh{constructor({url:a="",headers:b={},fetch:c}){this.url=a,this.headers=b,this.fetch=cR(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,b=dg[0]){if(0>dg.indexOf(b))throw Error(`@supabase/auth-js: Parameter scope must be one of ${dg.join(", ")}`);try{return await c8(this.fetch,"POST",`${this.url}/logout?scope=${b}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(a){if(cs(a))return{data:null,error:a};throw a}}async inviteUserByEmail(a,b={}){try{return await c8(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:b.data},headers:this.headers,redirectTo:b.redirectTo,xform:dc})}catch(a){if(cs(a))return{data:{user:null},error:a};throw a}}async generateLink(a){try{let{options:b}=a,c=a1(a,["options"]),d=Object.assign(Object.assign({},c),b);return"newEmail"in c&&(d.new_email=null==c?void 0:c.newEmail,delete d.newEmail),await c8(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:de,redirectTo:null==b?void 0:b.redirectTo})}catch(a){if(cs(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(a){try{return await c8(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:dc})}catch(a){if(cs(a))return{data:{user:null},error:a};throw a}}async listUsers(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await c8(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:df});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(cs(a))return{data:{users:[]},error:a};throw a}}async getUserById(a){c2(a);try{return await c8(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:dc})}catch(a){if(cs(a))return{data:{user:null},error:a};throw a}}async updateUserById(a,b){c2(a);try{return await c8(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:b,headers:this.headers,xform:dc})}catch(a){if(cs(a))return{data:{user:null},error:a};throw a}}async deleteUser(a,b=!1){c2(a);try{return await c8(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:b},xform:dc})}catch(a){if(cs(a))return{data:{user:null},error:a};throw a}}async _listFactors(a){c2(a.userId);try{let{data:b,error:c}=await c8(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:b,error:c}}catch(a){if(cs(a))return{data:null,error:a};throw a}}async _deleteFactor(a){c2(a.userId),c2(a.id);try{return{data:await c8(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(a){if(cs(a))return{data:null,error:a};throw a}}async _listOAuthClients(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await c8(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:df});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(cs(a))return{data:{clients:[]},error:a};throw a}}async _createOAuthClient(a){try{return await c8(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cs(a))return{data:null,error:a};throw a}}async _getOAuthClient(a){try{return await c8(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cs(a))return{data:null,error:a};throw a}}async _updateOAuthClient(a,b){try{return await c8(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:b,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cs(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(a){try{return await c8(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(cs(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(a){try{return await c8(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(cs(a))return{data:null,error:a};throw a}}}function di(a={}){return{getItem:b=>a[b]||null,setItem:(b,c)=>{a[b]=c},removeItem:b=>{delete a[b]}}}let dj={debug:!!(globalThis&&cQ()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class dk extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class dl extends dk{}async function dm(a,b,c){dj.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,b);let d=new globalThis.AbortController;return b>0&&setTimeout(()=>{d.abort(),dj.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},b),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,0===b?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:d.signal},async d=>{if(d){dj.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,d.name);try{return await c()}finally{dj.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,d.name)}}if(0===b)throw dj.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new dl(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(dj.debug)try{let a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await c()}))}function dn(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}class dp extends Error{constructor({message:a,code:b,cause:c,name:d}){var e;super(a,{cause:c}),this.__isWebAuthnError=!0,this.name=null!=(e=null!=d?d:c instanceof Error?c.name:void 0)?e:"Unknown Error",this.code=b}}class dq extends dp{constructor(a,b){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:b,message:a}),this.name="WebAuthnUnknownError",this.originalError=b}}class dr{createNewAbortSignal(){if(this.controller){let a=Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}let a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){let a=Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}let ds=new dr;function dt(a){return"localhost"===a||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function du(){var a,b;return!!(cO()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null==(a=null==navigator?void 0:navigator.credentials)?void 0:a.create)&&"function"==typeof(null==(b=null==navigator?void 0:navigator.credentials)?void 0:b.get))}async function dv(a){try{let b=await navigator.credentials.create(a);if(!b)return{data:null,error:new dq("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new dq("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){var c,d,e;let{publicKey:f}=b;if(!f)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new dp({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("ConstraintError"===a.name){if((null==(c=f.authenticatorSelection)?void 0:c.requireResidentKey)===!0)return new dp({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});else if("conditional"===b.mediation&&(null==(d=f.authenticatorSelection)?void 0:d.userVerification)==="required")return new dp({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});else if((null==(e=f.authenticatorSelection)?void 0:e.userVerification)==="required")return new dp({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else if("InvalidStateError"===a.name)return new dp({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});else if("NotAllowedError"===a.name)return new dp({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("NotSupportedError"===a.name)return new dp(0===f.pubKeyCredParams.filter(a=>"public-key"===a.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!dt(b))return new dp({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(f.rp.id!==b)return new dp({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("TypeError"===a.name){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new dp({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if("UnknownError"===a.name)return new dp({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new dp({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}async function dw(a){try{let b=await navigator.credentials.get(a);if(!b)return{data:null,error:new dq("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new dq("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){let{publicKey:c}=b;if(!c)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new dp({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("NotAllowedError"===a.name)return new dp({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!dt(b))return new dp({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(c.rpId!==b)return new dp({message:`The RP ID "${c.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("UnknownError"===a.name)return new dp({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new dp({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}let dx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},dy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function dz(...a){let b=a=>null!==a&&"object"==typeof a&&!Array.isArray(a),c=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),d={};for(let e of a)if(e)for(let a in e){let f=e[a];if(void 0!==f)if(Array.isArray(f))d[a]=f;else if(c(f))d[a]=f;else if(b(f)){let c=d[a];b(c)?d[a]=dz(c,f):d[a]=dz(f)}else d[a]=f}return d}class dA{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:b,friendlyName:c,signal:d},e){try{var f,g,h,i;let{data:j,error:k}=await this.client.mfa.challenge({factorId:a,webauthn:b});if(!j)return{data:null,error:k};let l=null!=d?d:ds.createNewAbortSignal();if("create"===j.webauthn.type){let{user:a}=j.webauthn.credential_options.publicKey;a.name||(a.name=`${a.id}:${c}`),a.displayName||(a.displayName=a.name)}switch(j.webauthn.type){case"create":{let b=(f=j.webauthn.credential_options.publicKey,g=null==e?void 0:e.create,dz(dx,f,g||{})),{data:c,error:d}=await dv({publicKey:b,signal:l});if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}case"request":{let b=(h=j.webauthn.credential_options.publicKey,i=null==e?void 0:e.request,dz(dy,h,i||{})),{data:c,error:d}=await dw(Object.assign(Object.assign({},j.webauthn.credential_options),{publicKey:b,signal:l}));if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}}}catch(a){if(cs(a))return{data:null,error:a};return{data:null,error:new cu("Unexpected error in challenge",a)}}}async _verify({challengeId:a,factorId:b,webauthn:c}){return this.client.mfa.verify({factorId:b,challengeId:a,webauthn:c})}async _authenticate({factorId:a,webauthn:{rpId:b="undefined"!=typeof window?window.location.hostname:void 0,rpOrigins:c="undefined"!=typeof window?[window.location.origin]:void 0,signal:d}={}},e){if(!b)return{data:null,error:new cr("rpId is required for WebAuthn authentication")};try{if(!du())return{data:null,error:new cu("Browser does not support WebAuthn",null)};let{data:f,error:g}=await this.challenge({factorId:a,webauthn:{rpId:b,rpOrigins:c},signal:d},{request:e});if(!f)return{data:null,error:g};let{webauthn:h}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:h.type,rpId:b,rpOrigins:c,credential_response:h.credential_response}})}catch(a){if(cs(a))return{data:null,error:a};return{data:null,error:new cu("Unexpected error in authenticate",a)}}}async _register({friendlyName:a,webauthn:{rpId:b="undefined"!=typeof window?window.location.hostname:void 0,rpOrigins:c="undefined"!=typeof window?[window.location.origin]:void 0,signal:d}={}},e){if(!b)return{data:null,error:new cr("rpId is required for WebAuthn registration")};try{if(!du())return{data:null,error:new cu("Browser does not support WebAuthn",null)};let{data:f,error:g}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(b=>{var c;return null==(c=b.data)?void 0:c.all.find(b=>"webauthn"===b.factor_type&&b.friendly_name===a&&"unverified"!==b.status)}).then(a=>a?this.client.mfa.unenroll({factorId:null==a?void 0:a.id}):void 0),{data:null,error:g};let{data:h,error:i}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:b,rpOrigins:c},signal:d},{create:e});if(!h)return{data:null,error:i};return this._verify({factorId:f.id,challengeId:h.challengeId,webauthn:{rpId:b,rpOrigins:c,type:h.webauthn.type,credential_response:h.webauthn.credential_response}})}catch(a){if(cs(a))return{data:null,error:a};return{data:null,error:new cu("Unexpected error in register",a)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(a){"undefined"!=typeof self&&(self.globalThis=self)}let dB={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function dC(a,b,c){return await c()}let dD={};class dE{get jwks(){var a,b;return null!=(b=null==(a=dD[this.storageKey])?void 0:a.jwks)?b:{keys:[]}}set jwks(a){dD[this.storageKey]=Object.assign(Object.assign({},dD[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,b;return null!=(b=null==(a=dD[this.storageKey])?void 0:a.cachedAt)?b:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){dD[this.storageKey]=Object.assign(Object.assign({},dD[this.storageKey]),{cachedAt:a})}constructor(a){var b,c,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let e=Object.assign(Object.assign({},dB),a);if(this.storageKey=e.storageKey,this.instanceID=null!=(b=dE.nextInstanceID[this.storageKey])?b:0,dE.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!e.debug,"function"==typeof e.debug&&(this.logger=e.debug),this.instanceID>0&&cO()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=e.persistSession,this.autoRefreshToken=e.autoRefreshToken,this.admin=new dh({url:e.url,headers:e.headers,fetch:e.fetch}),this.url=e.url,this.headers=e.headers,this.fetch=cR(e.fetch),this.lock=e.lock||dC,this.detectSessionInUrl=e.detectSessionInUrl,this.flowType=e.flowType,this.hasCustomAuthorizationHeader=e.hasCustomAuthorizationHeader,this.throwOnError=e.throwOnError,this.lockAcquireTimeout=e.lockAcquireTimeout,e.lock?this.lock=e.lock:this.persistSession&&cO()&&(null==(c=null==globalThis?void 0:globalThis.navigator)?void 0:c.locks)?this.lock=dm:this.lock=dC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dA(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(e.storage?this.storage=e.storage:cQ()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=di(this.memoryStorage)),e.userStorage&&(this.userStorage=e.userStorage)):(this.memoryStorage={},this.storage=di(this.memoryStorage)),cO()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null==(d=this.broadcastChannel)||d.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cm}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var a;try{let b={},c="none";if(cO()&&(b=function(a){let b={},c=new URL(a);if(c.hash&&"#"===c.hash[0])try{new URLSearchParams(c.hash.substring(1)).forEach((a,c)=>{b[c]=a})}catch(a){}return c.searchParams.forEach((a,c)=>{b[c]=a}),b}(window.location.href),this._isImplicitGrantCallback(b)?c="implicit":await this._isPKCECallback(b)&&(c="pkce")),cO()&&this.detectSessionInUrl&&"none"!==c){let{data:d,error:e}=await this._getSessionFromURL(b,c);if(e){(this._debug("#_initialize()","error detecting session from URL",e),cs(e)&&"AuthImplicitGrantRedirectError"===e.name)&&(null==(a=e.details)||a.code);return{error:e}}let{session:f,redirectType:g}=d;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{"recovery"===g?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){if(cs(a))return this._returnResult({error:a});return this._returnResult({error:new cu("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var b,c,d;try{let{data:e,error:f}=await c8(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(c=null==(b=null==a?void 0:a.options)?void 0:b.data)?c:{},gotrue_meta_security:{captcha_token:null==(d=null==a?void 0:a.options)?void 0:d.captchaToken}},xform:da});if(f||!e)return this._returnResult({data:{user:null,session:null},error:f});let g=e.session,h=e.user;return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(a){if(cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(a){var b,c,d;try{let e;if("email"in a){let{email:c,password:d,options:f}=a,g=null,h=null;"pkce"===this.flowType&&([g,h]=await c_(this.storage,this.storageKey)),e=await c8(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==f?void 0:f.emailRedirectTo,body:{email:c,password:d,data:null!=(b=null==f?void 0:f.data)?b:{},gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken},code_challenge:g,code_challenge_method:h},xform:da})}else if("phone"in a){let{phone:b,password:f,options:g}=a;e=await c8(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:f,data:null!=(c=null==g?void 0:g.data)?c:{},channel:null!=(d=null==g?void 0:g.channel)?d:"sms",gotrue_meta_security:{captcha_token:null==g?void 0:g.captchaToken}},xform:da})}else throw new cy("You must provide either an email or phone number and a password");let{data:f,error:g}=e;if(g||!f)return await cU(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});let h=f.session,i=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:i,session:h},error:null})}catch(a){if(await cU(this.storage,`${this.storageKey}-code-verifier`),cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(a){try{let b;if("email"in a){let{email:c,password:d,options:e}=a;b=await c8(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:db})}else if("phone"in a){let{phone:c,password:d,options:e}=a;b=await c8(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:db})}else throw new cy("You must provide either an email or phone number and a password");let{data:c,error:d}=b;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){let a=new cx;return this._returnResult({data:{user:null,session:null},error:a})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d})}catch(a){if(cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(a){var b,c,d,e;return await this._handleProviderSignIn(a.provider,{redirectTo:null==(b=a.options)?void 0:b.redirectTo,scopes:null==(c=a.options)?void 0:c.scopes,queryParams:null==(d=a.options)?void 0:d.queryParams,skipBrowserRedirect:null==(e=a.options)?void 0:e.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){let{chain:b}=a;switch(b){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw Error(`@supabase/auth-js: Unsupported chain "${b}"`)}}async signInWithEthereum(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let k,{chain:l,wallet:p,statement:q,options:r}=a;if(cO())if("object"==typeof p)k=p;else{let a=window;if("ethereum"in a&&"object"==typeof a.ethereum&&"request"in a.ethereum&&"function"==typeof a.ethereum.request)k=a.ethereum;else throw Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof p||!(null==r?void 0:r.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=p}let s=new URL(null!=(b=null==r?void 0:r.url)?b:window.location.href),t=await k.request({method:"eth_requestAccounts"}).then(a=>a).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!t||0===t.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let u=dn(t[0]),v=null==(c=null==r?void 0:r.signInWithEthereum)?void 0:c.chainId;v||(v=parseInt(await k.request({method:"eth_chainId"}),16)),n=function(a){var b;let{chainId:c,domain:d,expirationTime:e,issuedAt:f=new Date,nonce:g,notBefore:h,requestId:i,resources:j,scheme:k,uri:l,version:m}=a;if(!Number.isInteger(c))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${c}`);if(!d)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!l)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==m)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(null==(b=a.statement)?void 0:b.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`);let n=dn(a.address),o=k?`${k}://${d}`:d,p=a.statement?`${a.statement}
`:"",q=`${o} wants you to sign in with your Ethereum account:
${n}

${p}`,r=`URI: ${l}
Version: ${m}
Chain ID: ${c}${g?`
Nonce: ${g}`:""}
Issued At: ${f.toISOString()}`;if(e&&(r+=`
Expiration Time: ${e.toISOString()}`),h&&(r+=`
Not Before: ${h.toISOString()}`),i&&(r+=`
Request ID: ${i}`),j){let a="\nResources:";for(let b of j){if(!b||"string"!=typeof b)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);a+=`
- ${b}`}r+=a}return`${q}
${r}`}({domain:s.host,address:u,statement:q,uri:s.href,version:"1",chainId:v,nonce:null==(d=null==r?void 0:r.signInWithEthereum)?void 0:d.nonce,issuedAt:null!=(f=null==(e=null==r?void 0:r.signInWithEthereum)?void 0:e.issuedAt)?f:new Date,expirationTime:null==(g=null==r?void 0:r.signInWithEthereum)?void 0:g.expirationTime,notBefore:null==(h=null==r?void 0:r.signInWithEthereum)?void 0:h.notBefore,requestId:null==(i=null==r?void 0:r.signInWithEthereum)?void 0:i.requestId,resources:null==(j=null==r?void 0:r.signInWithEthereum)?void 0:j.resources}),o=await k.request({method:"personal_sign",params:[(m=n,"0x"+Array.from(new TextEncoder().encode(m),a=>a.toString(16).padStart(2,"0")).join("")),u]})}try{let{data:b,error:c}=await c8(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:n,signature:o},(null==(k=a.options)?void 0:k.captchaToken)?{gotrue_meta_security:{captcha_token:null==(l=a.options)?void 0:l.captchaToken}}:null),xform:da});if(c)throw c;if(!b||!b.session||!b.user){let a=new cx;return this._returnResult({data:{user:null,session:null},error:a})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:c})}catch(a){if(cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSolana(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let l,{chain:m,wallet:p,statement:q,options:r}=a;if(cO())if("object"==typeof p)l=p;else{let a=window;if("solana"in a&&"object"==typeof a.solana&&("signIn"in a.solana&&"function"==typeof a.solana.signIn||"signMessage"in a.solana&&"function"==typeof a.solana.signMessage))l=a.solana;else throw Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof p||!(null==r?void 0:r.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");l=p}let s=new URL(null!=(b=null==r?void 0:r.url)?b:window.location.href);if("signIn"in l&&l.signIn){let a,b=await l.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==r?void 0:r.signInWithSolana),{version:"1",domain:s.host,uri:s.href}),q?{statement:q}:null));if(Array.isArray(b)&&b[0]&&"object"==typeof b[0])a=b[0];else if(b&&"object"==typeof b&&"signedMessage"in b&&"signature"in b)a=b;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in a&&"signature"in a&&("string"==typeof a.signedMessage||a.signedMessage instanceof Uint8Array)&&a.signature instanceof Uint8Array)n="string"==typeof a.signedMessage?a.signedMessage:new TextDecoder().decode(a.signedMessage),o=a.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in l)||"function"!=typeof l.signMessage||!("publicKey"in l)||"object"!=typeof l||!l.publicKey||!("toBase58"in l.publicKey)||"function"!=typeof l.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");n=[`${s.host} wants you to sign in with your Solana account:`,l.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${s.href}`,`Issued At: ${null!=(d=null==(c=null==r?void 0:r.signInWithSolana)?void 0:c.issuedAt)?d:new Date().toISOString()}`,...(null==(e=null==r?void 0:r.signInWithSolana)?void 0:e.notBefore)?[`Not Before: ${r.signInWithSolana.notBefore}`]:[],...(null==(f=null==r?void 0:r.signInWithSolana)?void 0:f.expirationTime)?[`Expiration Time: ${r.signInWithSolana.expirationTime}`]:[],...(null==(g=null==r?void 0:r.signInWithSolana)?void 0:g.chainId)?[`Chain ID: ${r.signInWithSolana.chainId}`]:[],...(null==(h=null==r?void 0:r.signInWithSolana)?void 0:h.nonce)?[`Nonce: ${r.signInWithSolana.nonce}`]:[],...(null==(i=null==r?void 0:r.signInWithSolana)?void 0:i.requestId)?[`Request ID: ${r.signInWithSolana.requestId}`]:[],...(null==(k=null==(j=null==r?void 0:r.signInWithSolana)?void 0:j.resources)?void 0:k.length)?["Resources",...r.signInWithSolana.resources.map(a=>`- ${a}`)]:[]].join("\n");let a=await l.signMessage(new TextEncoder().encode(n),"utf8");if(!a||!(a instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");o=a}}try{let{data:b,error:c}=await c8(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:n,signature:cN(o)},(null==(l=a.options)?void 0:l.captchaToken)?{gotrue_meta_security:{captcha_token:null==(m=a.options)?void 0:m.captchaToken}}:null),xform:da});if(c)throw c;if(!b||!b.session||!b.user){let a=new cx;return this._returnResult({data:{user:null,session:null},error:a})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:c})}catch(a){if(cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _exchangeCodeForSession(a){let b=await cT(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(null!=b?b:"").split("/");try{if(!c&&"pkce"===this.flowType)throw new cB;let{data:b,error:e}=await c8(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:c},xform:da});if(await cU(this.storage,`${this.storageKey}-code-verifier`),e)throw e;if(!b||!b.session||!b.user){let a=new cx;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign(Object.assign({},b),{redirectType:null!=d?d:null}),error:e})}catch(a){if(await cU(this.storage,`${this.storageKey}-code-verifier`),cs(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(a){try{let{options:b,provider:c,token:d,access_token:e,nonce:f}=a,{data:g,error:h}=await c8(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:e,nonce:f,gotrue_meta_security:{captcha_token:null==b?void 0:b.captchaToken}},xform:da});if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!g||!g.session||!g.user){let a=new cx;return this._returnResult({data:{user:null,session:null},error:a})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:h})}catch(a){if(cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(a){var b,c,d,e,f;try{if("email"in a){let{email:d,options:e}=a,f=null,g=null;"pkce"===this.flowType&&([f,g]=await c_(this.storage,this.storageKey));let{error:h}=await c8(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:null!=(b=null==e?void 0:e.data)?b:{},create_user:null==(c=null==e?void 0:e.shouldCreateUser)||c,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:null==e?void 0:e.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in a){let{phone:b,options:c}=a,{data:g,error:h}=await c8(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:null!=(d=null==c?void 0:c.data)?d:{},create_user:null==(e=null==c?void 0:c.shouldCreateUser)||e,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken},channel:null!=(f=null==c?void 0:c.channel)?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==g?void 0:g.message_id},error:h})}throw new cy("You must provide either an email or phone number.")}catch(a){if(await cU(this.storage,`${this.storageKey}-code-verifier`),cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(a){var b,c;try{let d,e;"options"in a&&(d=null==(b=a.options)?void 0:b.redirectTo,e=null==(c=a.options)?void 0:c.captchaToken);let{data:f,error:g}=await c8(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:e}}),redirectTo:d,xform:da});if(g)throw g;if(!f)throw Error("An error occurred on token verification.");let h=f.session,i=f.user;return(null==h?void 0:h.access_token)&&(await this._saveSession(h),await this._notifyAllSubscribers("recovery"==a.type?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:i,session:h},error:null})}catch(a){if(cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(a){var b,c,d,e,f;try{let g=null,h=null;"pkce"===this.flowType&&([g,h]=await c_(this.storage,this.storageKey));let i=await c8(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:null!=(c=null==(b=a.options)?void 0:b.redirectTo)?c:void 0}),(null==(d=null==a?void 0:a.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:h}),headers:this.headers,xform:dd});return(null==(e=i.data)?void 0:e.url)&&cO()&&!(null==(f=a.options)?void 0:f.skipBrowserRedirect)&&window.location.assign(i.data.url),this._returnResult(i)}catch(a){if(await cU(this.storage,`${this.storageKey}-code-verifier`),cs(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;if(c)throw c;if(!b)throw new cw;let{error:d}=await c8(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:b.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(a){if(cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{let b=`${this.url}/resend`;if("email"in a){let{email:c,type:d,options:e}=a,{error:f}=await c8(this.fetch,"POST",b,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},redirectTo:null==e?void 0:e.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in a){let{phone:c,type:d,options:e}=a,{data:f,error:g}=await c8(this.fetch,"POST",b,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==f?void 0:f.message_id},error:g})}throw new cy("You must provide either an email or phone number and a type")}catch(a){if(cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async a=>a))}async _acquireLock(a,b){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){let a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await a,await b()))();return this.pendingInLock.push((async()=>{try{await c}catch(a){}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let a=b();for(this.pendingInLock.push((async()=>{try{await a}catch(a){}})()),await a;this.pendingInLock.length;){let a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{let b=await this.__loadSession();return await a(b)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let b=null,c=await cT(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",c),null!==c&&(this._isValidSession(c)?b=c:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!b)return{data:{session:null},error:null};let d=!!b.expires_at&&1e3*b.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${d?"":" not"} expired`,"expires_at",b.expires_at),!d){if(this.userStorage){let a=await cT(this.userStorage,this.storageKey+"-user");(null==a?void 0:a.user)?b.user=a.user:b.user=c3()}if(this.storage.isServer&&b.user&&!b.user.__isUserNotAvailableProxy){var a;let c={value:this.suppressGetSessionWarning};b.user=(a=b.user,new Proxy(a,{get:(a,b,d)=>{if("__isInsecureUserWarningProxy"===b)return!0;if("symbol"==typeof b){let c=b.toString();if("Symbol(Symbol.toPrimitive)"===c||"Symbol(Symbol.toStringTag)"===c||"Symbol(util.inspect.custom)"===c||"Symbol(nodejs.util.inspect.custom)"===c)return Reflect.get(a,b,d)}return c.value||"string"!=typeof b||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c.value=!0),Reflect.get(a,b,d)}})),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:b},error:null}}let{data:e,error:f}=await this._callRefreshToken(b.refresh_token);if(f)return this._returnResult({data:{session:null},error:f});return this._returnResult({data:{session:e},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;let b=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return b.data.user&&(this.suppressGetSessionWarning=!0),b}async _getUser(a){try{if(a)return await c8(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:dc});return await this._useSession(async a=>{var b,c,d;let{data:e,error:f}=a;if(f)throw f;return(null==(b=e.session)?void 0:b.access_token)||this.hasCustomAuthorizationHeader?await c8(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0,xform:dc}):{data:{user:null},error:new cw}})}catch(a){if(cs(a))return cs(a)&&"AuthSessionMissingError"===a.name&&(await this._removeSession(),await cU(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(a,b={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(a,b))}async _updateUser(a,b={}){try{return await this._useSession(async c=>{let{data:d,error:e}=c;if(e)throw e;if(!d.session)throw new cw;let f=d.session,g=null,h=null;"pkce"===this.flowType&&null!=a.email&&([g,h]=await c_(this.storage,this.storageKey));let{data:i,error:j}=await c8(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==b?void 0:b.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:h}),jwt:f.access_token,xform:dc});if(j)throw j;return f.user=i.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(a){if(await cU(this.storage,`${this.storageKey}-code-verifier`),cs(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new cw;let b=Date.now()/1e3,c=b,d=!0,e=null,{payload:f}=cW(a.access_token);if(f.exp&&(d=(c=f.exp)<=b),d){let{data:b,error:c}=await this._callRefreshToken(a.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!b)return{data:{user:null,session:null},error:null};e=b}else{let{data:d,error:f}=await this._getUser(a.access_token);if(f)throw f;e={access_token:a.access_token,refresh_token:a.refresh_token,user:d.user,token_type:"bearer",expires_in:c-b,expires_at:c},await this._saveSession(e),await this._notifyAllSubscribers("SIGNED_IN",e)}return this._returnResult({data:{user:e.user,session:e},error:null})}catch(a){if(cs(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async b=>{var c;if(!a){let{data:d,error:e}=b;if(e)throw e;a=null!=(c=d.session)?c:void 0}if(!(null==a?void 0:a.refresh_token))throw new cw;let{data:d,error:e}=await this._callRefreshToken(a.refresh_token);return e?this._returnResult({data:{user:null,session:null},error:e}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(a,b){try{if(!cO())throw new cz("No browser detected.");if(a.error||a.error_description||a.error_code)throw new cz(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(b){case"implicit":if("pkce"===this.flowType)throw new cA("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new cz("Not a valid implicit grant flow url.")}if("pkce"===b){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new cA("No code detected.");let{data:b,error:c}=await this._exchangeCodeForSession(a.code);if(c)throw c;let d=new URL(window.location.href);return d.searchParams.delete("code"),window.history.replaceState(window.history.state,"",d.toString()),{data:{session:b.session,redirectType:null},error:null}}let{provider_token:c,provider_refresh_token:d,access_token:e,refresh_token:f,expires_in:g,expires_at:h,token_type:i}=a;if(!e||!g||!f||!i)throw new cz("No session defined in URL");let j=Math.round(Date.now()/1e3),k=parseInt(g),l=j+k;h&&(l=parseInt(h));let m=l-j;1e3*m<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${k}s`);let n=l-k;j-n>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",n,l,j):j-n<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",n,l,j);let{data:o,error:p}=await this._getUser(e);if(p)throw p;let q={provider_token:c,provider_refresh_token:d,access_token:e,expires_in:k,expires_at:l,refresh_token:f,token_type:i,user:o.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:q,redirectType:a.type},error:null})}catch(a){if(cs(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(a){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){let b=await cT(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&b)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return this._returnResult({error:e});let f=null==(c=d.session)?void 0:c.access_token;if(f){let{error:b}=await this.admin.signOut(f,a);if(b&&!(cs(b)&&"AuthApiError"===b.name&&(404===b.status||401===b.status||403===b.status)))return this._returnResult({error:b})}return"others"!==a&&(await this._removeSession(),await cU(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){let b=Symbol("auth-callback"),c={id:b,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",b),this.stateChangeEmitters.delete(b)}};return this._debug("#onAuthStateChange()","registered callback with id",b),this.stateChangeEmitters.set(b,c),(async()=>{await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(b)})})(),{data:{subscription:c}}}async _emitInitialSession(a){return await this._useSession(async b=>{var c,d;try{let{data:{session:d},error:e}=b;if(e)throw e;await (null==(c=this.stateChangeEmitters.get(a))?void 0:c.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(b){await (null==(d=this.stateChangeEmitters.get(a))?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",b),console.error(b)}})}async resetPasswordForEmail(a,b={}){let c=null,d=null;"pkce"===this.flowType&&([c,d]=await c_(this.storage,this.storageKey,!0));try{return await c8(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:b.captchaToken}},headers:this.headers,redirectTo:b.redirectTo})}catch(a){if(await cU(this.storage,`${this.storageKey}-code-verifier`),cs(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var a;try{let{data:b,error:c}=await this.getUser();if(c)throw c;return this._returnResult({data:{identities:null!=(a=b.user.identities)?a:[]},error:null})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var b;try{let{data:c,error:d}=await this._useSession(async b=>{var c,d,e,f,g;let{data:h,error:i}=b;if(i)throw i;let j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:null==(c=a.options)?void 0:c.redirectTo,scopes:null==(d=a.options)?void 0:d.scopes,queryParams:null==(e=a.options)?void 0:e.queryParams,skipBrowserRedirect:!0});return await c8(this.fetch,"GET",j,{headers:this.headers,jwt:null!=(g=null==(f=h.session)?void 0:f.access_token)?g:void 0})});if(d)throw d;return!cO()||(null==(b=a.options)?void 0:b.skipBrowserRedirect)||window.location.assign(null==c?void 0:c.url),this._returnResult({data:{provider:a.provider,url:null==c?void 0:c.url},error:null})}catch(b){if(cs(b))return this._returnResult({data:{provider:a.provider,url:null},error:b});throw b}}async linkIdentityIdToken(a){return await this._useSession(async b=>{var c;try{let{error:d,data:{session:e}}=b;if(d)throw d;let{options:f,provider:g,token:h,access_token:i,nonce:j}=a,{data:k,error:l}=await c8(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(c=null==e?void 0:e.access_token)?c:void 0,body:{provider:g,id_token:h,access_token:i,nonce:j,link_identity:!0,gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken}},xform:da});if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!k||!k.session||!k.user)return this._returnResult({data:{user:null,session:null},error:new cx});return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:l})}catch(a){if(await cU(this.storage,`${this.storageKey}-code-verifier`),cs(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)throw f;return await c8(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0})})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(a){let b=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(b,"begin");try{var c,d;let e=Date.now();return await (c=async c=>(c>0&&await cX(200*Math.pow(2,c-1)),this._debug(b,"refreshing attempt",c),await c8(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:da})),d=(a,b)=>{let c=200*Math.pow(2,a);return b&&cD(b)&&Date.now()+c-e<3e4},new Promise((a,b)=>{(async()=>{for(let e=0;e<1/0;e++)try{let b=await c(e);if(!d(e,null,b))return void a(b)}catch(a){if(!d(e,a))return void b(a)}})()}))}catch(a){if(this._debug(b,"error",a),cs(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(b,"end")}}_isValidSession(a){return"object"==typeof a&&null!==a&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,b){let c=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:b.redirectTo,scopes:b.scopes,queryParams:b.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",b,"url",c),cO()&&!b.skipBrowserRedirect&&window.location.assign(c),{data:{provider:a,url:c},error:null}}async _recoverAndRefresh(){var a,b;let c="#_recoverAndRefresh()";this._debug(c,"begin");try{let d=await cT(this.storage,this.storageKey);if(d&&this.userStorage){let b=await cT(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:d.user},await cS(this.userStorage,this.storageKey+"-user",b)),d.user=null!=(a=null==b?void 0:b.user)?a:c3()}else if(d&&!d.user&&!d.user){let a=await cT(this.storage,this.storageKey+"-user");a&&(null==a?void 0:a.user)?(d.user=a.user,await cU(this.storage,this.storageKey+"-user"),await cS(this.storage,this.storageKey,d)):d.user=c3()}if(this._debug(c,"session from storage",d),!this._isValidSession(d)){this._debug(c,"session is not valid"),null!==d&&await this._removeSession();return}let e=(null!=(b=d.expires_at)?b:1/0)*1e3-Date.now()<9e4;if(this._debug(c,`session has${e?"":" not"} expired with margin of 90000s`),e){if(this.autoRefreshToken&&d.refresh_token){let{error:a}=await this._callRefreshToken(d.refresh_token);a&&(console.error(a),cD(a)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(d.user&&!0===d.user.__isUserNotAvailableProxy)try{let{data:a,error:b}=await this._getUser(d.access_token);!b&&(null==a?void 0:a.user)?(d.user=a.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(c,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(a){this._debug(c,"error",a),console.error(a);return}finally{this._debug(c,"end")}}async _callRefreshToken(a){var b,c;if(!a)throw new cw;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new cV;let{data:b,error:c}=await this._refreshAccessToken(a);if(c)throw c;if(!b.session)throw new cw;await this._saveSession(b.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",b.session);let d={data:b.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(d,"error",a),cs(a)){let c={data:null,error:a};return cD(a)||await this._removeSession(),null==(b=this.refreshingDeferred)||b.resolve(c),c}throw null==(c=this.refreshingDeferred)||c.reject(a),a}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,b,c=!0){let d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",b,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:a,session:b});let d=[],e=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(a,b)}catch(a){d.push(a)}});if(await Promise.all(e),d.length>0){for(let a=0;a<d.length;a+=1)console.error(d[a]);throw d[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await cU(this.storage,`${this.storageKey}-code-verifier`);let b=Object.assign({},a),c=b.user&&!0===b.user.__isUserNotAvailableProxy;if(this.userStorage){!c&&b.user&&await cS(this.userStorage,this.storageKey+"-user",{user:b.user});let a=Object.assign({},b);delete a.user;let d=c4(a);await cS(this.storage,this.storageKey,d)}else{let a=c4(b);await cS(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await cU(this.storage,this.storageKey),await cU(this.storage,this.storageKey+"-code-verifier"),await cU(this.storage,this.storageKey+"-user"),this.userStorage&&await cU(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&cO()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",a)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let a=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=a,a&&"object"==typeof a&&"function"==typeof a.unref?a.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(a);let b=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=b,b&&"object"==typeof b&&"function"==typeof b.unref?b.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(b)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a);let b=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,b&&clearTimeout(b)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let a=Date.now();try{return await this._useSession(async b=>{let{data:{session:c}}=b;if(!c||!c.refresh_token||!c.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let d=Math.floor((1e3*c.expires_at-a)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),d<=3&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof dk)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!cO()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){let b=`#_onVisibilityChanged(${a})`;this._debug(b,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if("visible"!==document.visibilityState)return void this._debug(b,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,b,c){let d=[`provider=${encodeURIComponent(b)}`];if((null==c?void 0:c.redirectTo)&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),(null==c?void 0:c.scopes)&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),"pkce"===this.flowType){let[a,b]=await c_(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(b)}`});d.push(c.toString())}if(null==c?void 0:c.queryParams){let a=new URLSearchParams(c.queryParams);d.push(a.toString())}return(null==c?void 0:c.skipBrowserRedirect)&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;return e?this._returnResult({data:null,error:e}):await c8(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token})})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)return this._returnResult({data:null,error:f});let g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},"phone"===a.factorType?{phone:a.phone}:"totp"===a.factorType?{issuer:a.issuer}:{}),{data:h,error:i}=await c8(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:null==(c=null==e?void 0:e.session)?void 0:c.access_token});return i?this._returnResult({data:null,error:i}):("totp"===a.factorType&&"totp"===h.type&&(null==(d=null==h?void 0:h.totp)?void 0:d.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}async _verify(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async b=>{var c,d,e;let{data:f,error:g}=b;if(g)return this._returnResult({data:null,error:g});let h=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:"create"===a.webauthn.type?(d=a.webauthn.credential_response,"toJSON"in d&&"function"==typeof d.toJSON?d.toJSON():{id:d.id,rawId:d.id,response:{attestationObject:cN(new Uint8Array(d.response.attestationObject)),clientDataJSON:cN(new Uint8Array(d.response.clientDataJSON))},type:"public-key",clientExtensionResults:d.getClientExtensionResults(),authenticatorAttachment:null!=(e=d.authenticatorAttachment)?e:void 0}):function(a){var b;if("toJSON"in a&&"function"==typeof a.toJSON)return a.toJSON();let c=a.getClientExtensionResults(),d=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:cN(new Uint8Array(d.authenticatorData)),clientDataJSON:cN(new Uint8Array(d.clientDataJSON)),signature:cN(new Uint8Array(d.signature)),userHandle:d.userHandle?cN(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:null!=(b=a.authenticatorAttachment)?b:void 0}}(a.webauthn.credential_response)})}:{code:a.code}),{data:i,error:j}=await c8(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:h,headers:this.headers,jwt:null==(c=null==f?void 0:f.session)?void 0:c.access_token});return j?this._returnResult({data:null,error:j}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:j}))})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return this._returnResult({data:null,error:e});let f=await c8(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token});if(f.error)return f;let{data:g}=f;if("webauthn"!==g.type)return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(a);let{challenge:b,user:c,excludeCredentials:d}=a,e=a1(a,["challenge","user","excludeCredentials"]),f=cM(b).buffer,g=Object.assign(Object.assign({},c),{id:cM(c.id).buffer}),h=Object.assign(Object.assign({},e),{challenge:f,user:g});if(d&&d.length>0){h.excludeCredentials=Array(d.length);for(let a=0;a<d.length;a++){let b=d[a];h.excludeCredentials[a]=Object.assign(Object.assign({},b),{id:cM(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return h}(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(a);let{challenge:b,allowCredentials:c}=a,d=a1(a,["challenge","allowCredentials"]),e=cM(b).buffer,f=Object.assign(Object.assign({},d),{challenge:e});if(c&&c.length>0){f.allowCredentials=Array(c.length);for(let a=0;a<c.length;a++){let b=c[a];f.allowCredentials[a]=Object.assign(Object.assign({},b),{id:cM(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return f}(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(a){let{data:b,error:c}=await this._challenge({factorId:a.factorId});return c?this._returnResult({data:null,error:c}):await this._verify({factorId:a.factorId,challengeId:b.id,code:a.code})}async _listFactors(){var a;let{data:{user:b},error:c}=await this.getUser();if(c)return{data:null,error:c};let d={all:[],phone:[],totp:[],webauthn:[]};for(let c of null!=(a=null==b?void 0:b.factors)?a:[])d.all.push(c),"verified"===c.status&&d[c.factor_type].push(c);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var a,b;let{data:{session:c},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:e}=cW(c.access_token),f=null;e.aal&&(f=e.aal);let g=f;return(null!=(b=null==(a=c.user.factors)?void 0:a.filter(a=>"verified"===a.status))?b:[]).length>0&&(g="aal2"),{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:e.amr||[]},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;return d?this._returnResult({data:null,error:d}):c?await c8(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:c.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new cw})})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(a,b){try{return await this._useSession(async c=>{let{data:{session:d},error:e}=c;if(e)return this._returnResult({data:null,error:e});if(!d)return this._returnResult({data:null,error:new cw});let f=await c8(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return f.data&&f.data.redirect_url&&cO()&&!(null==b?void 0:b.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(a,b){try{return await this._useSession(async c=>{let{data:{session:d},error:e}=c;if(e)return this._returnResult({data:null,error:e});if(!d)return this._returnResult({data:null,error:new cw});let f=await c8(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return f.data&&f.data.redirect_url&&cO()&&!(null==b?void 0:b.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;return c?this._returnResult({data:null,error:c}):b?await c8(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:b.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new cw})})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;return d?this._returnResult({data:null,error:d}):c?(await c8(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:c.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new cw})})}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(a,b={keys:[]}){let c=b.keys.find(b=>b.kid===a);if(c)return c;let d=Date.now();if((c=this.jwks.keys.find(b=>b.kid===a))&&this.jwks_cached_at+6e5>d)return c;let{data:e,error:f}=await c8(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return e.keys&&0!==e.keys.length&&(this.jwks=e,this.jwks_cached_at=d,c=e.keys.find(b=>b.kid===a))?c:null}async getClaims(a,b={}){try{let c=a;if(!c){let{data:a,error:b}=await this.getSession();if(b||!a.session)return this._returnResult({data:null,error:b});c=a.session.access_token}let{header:d,payload:e,signature:f,raw:{header:g,payload:h}}=cW(c);(null==b?void 0:b.allowExpired)||function(a){if(!a)throw Error("Missing exp claim");if(a<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(e.exp);let i=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,(null==b?void 0:b.keys)?{keys:b.keys}:null==b?void 0:b.jwks);if(!i){let{error:a}=await this.getUser(c);if(a)throw a;return{data:{claims:e,header:d,signature:f},error:null}}let j=function(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(d.alg),k=await crypto.subtle.importKey("jwk",i,j,!0,["verify"]);if(!await crypto.subtle.verify(j,k,f,function(a){let b=[];return!function(a,b){for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);if(d>55295&&d<=56319){let b=(d-55296)*1024&65535;d=(a.charCodeAt(c+1)-56320&65535|b)+65536,c+=1}!function(a,b){if(a<=127)return b(a);if(a<=2047){b(192|a>>6),b(128|63&a);return}if(a<=65535){b(224|a>>12),b(128|a>>6&63),b(128|63&a);return}if(a<=1114111){b(240|a>>18),b(128|a>>12&63),b(128|a>>6&63),b(128|63&a);return}throw Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}(d,b)}}(a,a=>b.push(a)),new Uint8Array(b)}(`${g}.${h}`)))throw new cF("Invalid JWT signature");return{data:{claims:e,header:d,signature:f},error:null}}catch(a){if(cs(a))return this._returnResult({data:null,error:a});throw a}}}dE.nextInstanceID={};let dF=dE,dG="";dG="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let dH={headers:{"X-Client-Info":`supabase-js-${dG}/2.91.1`}},dI={schema:"public"},dJ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dK={};function dL(a){return(dL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function dM(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function dN(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?dM(Object(c),!0).forEach(function(b){!function(a,b,c){var d;(d=function(a,b){if("object"!=dL(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=dL(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"),(b="symbol"==dL(d)?d:d+"")in a)?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c}(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):dM(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var dO=class extends dF{constructor(a){super(a)}},dP=class{constructor(a,b,c){var d,e,f;this.supabaseUrl=a,this.supabaseKey=b;let g=function(a){let b=null==a?void 0:a.trim();if(!b)throw Error("supabaseUrl is required.");if(!b.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b.endsWith("/")?b:b+"/")}catch(a){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(a);if(!b)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);let h=`sb-${g.hostname.split(".")[0]}-auth-token`,i=function(a,b){var c,d;let{db:e,auth:f,realtime:g,global:h}=a,{db:i,auth:j,realtime:k,global:l}=b,m={db:dN(dN({},i),e),auth:dN(dN({},j),f),realtime:dN(dN({},k),g),storage:{},global:dN(dN(dN({},l),h),{},{headers:dN(dN({},null!=(c=null==l?void 0:l.headers)?c:{}),null!=(d=null==h?void 0:h.headers)?d:{})}),accessToken:async()=>""};return a.accessToken?m.accessToken=a.accessToken:delete m.accessToken,m}(null!=c?c:{},{db:dI,realtime:dK,auth:dN(dN({},dJ),{},{storageKey:h}),global:dH});this.storageKey=null!=(d=i.auth.storageKey)?d:"",this.headers=null!=(e=i.global.headers)?e:{},i.accessToken?(this.accessToken=i.accessToken,this.auth=new Proxy({},{get:(a,b)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(f=i.auth)?f:{},this.headers,i.global.fetch),this.fetch=((a,b,c)=>{let d=(a=>a?(...b)=>a(...b):(...a)=>fetch(...a))(c),e=Headers;return async(c,f)=>{var g;let h=null!=(g=await b())?g:a,i=new e(null==f?void 0:f.headers);return i.has("apikey")||i.set("apikey",a),i.has("Authorization")||i.set("Authorization",`Bearer ${h}`),d(c,dN(dN({},f),{},{headers:i}))}})(b,this._getAccessToken.bind(this),i.global.fetch),this.realtime=this._initRealtimeClient(dN({headers:this.headers,accessToken:this._getAccessToken.bind(this)},i.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(a=>this.realtime.setAuth(a)).catch(a=>console.warn("Failed to set initial Realtime auth token:",a)),this.rest=new bd(new URL("rest/v1",g).href,{headers:this.headers,schema:i.db.schema,fetch:this.fetch}),this.storage=new cl(this.storageUrl.href,this.headers,this.fetch,null==c?void 0:c.storage),i.accessToken||this._listenForAuthEvents()}get functions(){return new a6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,b={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,b,c)}channel(a,b={config:{}}){return this.realtime.channel(a,b)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,b;if(this.accessToken)return await this.accessToken();let{data:c}=await this.auth.getSession();return null!=(a=null==(b=c.session)?void 0:b.access_token)?a:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,storageKey:f,flowType:g,lock:h,debug:i,throwOnError:j},k,l){let m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dO({url:this.authUrl.href,headers:dN(dN({},m),k),storageKey:f,autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,flowType:g,lock:h,debug:i,throwOnError:j,fetch:l,hasCustomAuthorizationHeader:Object.keys(this.headers).some(a=>"authorization"===a.toLowerCase())})}_initRealtimeClient(a){return new bz(this.realtimeUrl.href,dN(dN({},a),{},{params:dN(dN({},{apikey:this.supabaseKey}),null==a?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,b)=>{this._handleTokenChanged(a,"CLIENT",null==b?void 0:b.access_token)})}_handleTokenChanged(a,b,c){("TOKEN_REFRESHED"===a||"SIGNED_IN"===a)&&this.changedAccessToken!==c?(this.changedAccessToken=c,this.realtime.setAuth(c)):"SIGNED_OUT"===a&&(this.realtime.setAuth(),"STORAGE"==b&&this.auth.signOut(),this.changedAccessToken=void 0)}};(function(){if("undefined"!=typeof window)return!1;let a=globalThis.process;if(!a)return!1;let b=a.version;if(null==b)return!1;let c=b.match(/^v(\d+)\./);return!!c&&18>=parseInt(c[1],10)})()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var dQ=c(46456);function dR(){return"undefined"!=typeof window&&void 0!==window.document}dQ.qg,dQ.lK;let dS={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},dT=/^(.*)[.](0|[1-9][0-9]*)$/;function dU(a,b){if(a===b)return!0;let c=a.match(dT);return!!c&&c[1]===b}function dV(a,b,c){let d=c??3180,e=encodeURIComponent(b);if(e.length<=d)return[{name:a,value:b}];let f=[];for(;e.length>0;){let a=e.slice(0,d),b=a.lastIndexOf("%");b>d-3&&(a=a.slice(0,b));let c="";for(;a.length>0;)try{c=decodeURIComponent(a);break}catch(b){if(b instanceof URIError&&"%"===a.at(-3)&&a.length>3)a=a.slice(0,a.length-3);else throw b}f.push(c),e=e.slice(a.length)}return f.map((b,c)=>({name:`${a}.${c}`,value:b}))}async function dW(a,b){let c=await b(a);if(c)return c;let d=[];for(let c=0;;c++){let e=`${a}.${c}`,f=await b(e);if(!f)break;d.push(f)}return d.length>0?d.join(""):null}let dX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dY=" 	\n\r=".split(""),dZ=(()=>{let a=Array(128);for(let b=0;b<a.length;b+=1)a[b]=-1;for(let b=0;b<dY.length;b+=1)a[dY[b].charCodeAt(0)]=-2;for(let b=0;b<dX.length;b+=1)a[dX[b].charCodeAt(0)]=b;return a})();function d$(a){let b=[],c=0,d=0;if(function(a,b){for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);if(d>55295&&d<=56319){let b=(d-55296)*1024&65535;d=(a.charCodeAt(c+1)-56320&65535|b)+65536,c+=1}!function(a,b){if(a<=127)return b(a);if(a<=2047){b(192|a>>6),b(128|63&a);return}if(a<=65535){b(224|a>>12),b(128|a>>6&63),b(128|63&a);return}if(a<=1114111){b(240|a>>18),b(128|a>>12&63),b(128|a>>6&63),b(128|63&a);return}throw Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}(d,b)}}(a,a=>{for(c=c<<8|a,d+=8;d>=6;){let a=c>>d-6&63;b.push(dX[a]),d-=6}}),d>0)for(c<<=6-d,d=6;d>=6;){let a=c>>d-6&63;b.push(dX[a]),d-=6}return b.join("")}function d_(a){let b=[],c=a=>{b.push(String.fromCodePoint(a))},d={utf8seq:0,codepoint:0},e=0,f=0;for(let b=0;b<a.length;b+=1){let g=dZ[a.charCodeAt(b)];if(g>-1)for(e=e<<6|g,f+=6;f>=8;)(function(a,b,c){if(0===b.utf8seq){if(a<=127)return c(a);for(let c=1;c<6;c+=1)if((a>>7-c&1)==0){b.utf8seq=c;break}if(2===b.utf8seq)b.codepoint=31&a;else if(3===b.utf8seq)b.codepoint=15&a;else if(4===b.utf8seq)b.codepoint=7&a;else throw Error("Invalid UTF-8 sequence");b.utf8seq-=1}else if(b.utf8seq>0){if(a<=127)throw Error("Invalid UTF-8 sequence");b.codepoint=b.codepoint<<6|63&a,b.utf8seq-=1,0===b.utf8seq&&c(b.codepoint)}})(e>>f-8&255,d,c),f-=8;else if(-2===g)continue;else throw Error(`Invalid Base64-URL character "${a.at(b)}" at position ${b}`)}return b.join("")}let d0="base64-";async function d1({getAll:a,setAll:b,setItems:c,removedItems:d},e){let f=e.cookieEncoding,g=e.cookieOptions??null,h=await a([...c?Object.keys(c):[],...d?Object.keys(d):[]]),i=h?.map(({name:a})=>a)||[],j=Object.keys(d).flatMap(a=>i.filter(b=>dU(b,a))),k=Object.keys(c).flatMap(a=>{let b=new Set(i.filter(b=>dU(b,a))),d=c[a];"base64url"===f&&(d=d0+d$(d));let e=dV(a,d);return e.forEach(a=>{b.delete(a.name)}),j.push(...b),e}),l={...dS,...g,maxAge:0},m={...dS,...g,maxAge:dS.maxAge};delete l.name,delete m.name,await b([...j.map(a=>({name:a,value:"",options:l})),...k.map(({name:a,value:b})=>({name:a,value:b,options:m}))])}if("undefined"!=typeof process&&process.env?.npm_package_name){let a=process.env.npm_package_name;["@supabase/auth-helpers-nextjs","@supabase/auth-helpers-react","@supabase/auth-helpers-remix","@supabase/auth-helpers-sveltekit"].includes(a)&&console.warn(`
╔════════════════════════════════════════════════════════════════════════════╗
║ ⚠️  IMPORTANT: Package Consolidation Notice                                ║
║                                                                            ║
║ The ${a.padEnd(35)} package name is deprecated.  ║
║                                                                            ║
║ You are now using @supabase/ssr - a unified solution for all frameworks.  ║
║                                                                            ║
║ The auth-helpers packages have been consolidated into @supabase/ssr       ║
║ to provide better maintenance and consistent APIs across frameworks.      ║
║                                                                            ║
║ Please update your package.json to use @supabase/ssr directly:            ║
║   npm uninstall ${a.padEnd(42)} ║
║   npm install @supabase/ssr                                               ║
║                                                                            ║
║ For more information, visit:                                              ║
║ https://supabase.com/docs/guides/auth/server-side                         ║
╚════════════════════════════════════════════════════════════════════════════╝
    `)}function d2(){return function(a,b,c){let d=dR();if(d&&e)return e;if(!a||!b)throw Error(`@supabase/ssr: Your project's URL and API key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let{storage:f}=function(a,b){let c,d,e=a.cookies??null,f=a.cookieEncoding,g={},h={};if(e)if("get"in e){let a=async a=>{let b=a.flatMap(a=>[a,...Array.from({length:5}).map((b,c)=>`${a}.${c}`)]),c=[];for(let a=0;a<b.length;a+=1){let d=await e.get(b[a]);(d||"string"==typeof d)&&c.push({name:b[a],value:d})}return c};if(c=async b=>await a(b),"set"in e&&"remove"in e)d=async a=>{for(let b=0;b<a.length;b+=1){let{name:c,value:d,options:f}=a[b];d?await e.set(c,d,f):await e.remove(c,f)}};else if(b)d=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in e)if(c=async()=>await e.getAll(),"setAll"in e)d=e.setAll;else if(b)d=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error(`@supabase/ssr: ${b?"createServerClient":"createBrowserClient"} requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).${dR()?" As this is called in a browser runtime, consider removing the cookies option object to use the document.cookie API automatically.":""}`);else if(!b&&dR())c=()=>(()=>{let a=(0,dQ.qg)(document.cookie);return Object.keys(a).map(b=>({name:b,value:a[b]??""}))})(),d=a=>{a.forEach(({name:a,value:b,options:c})=>{document.cookie=(0,dQ.lK)(a,b,c)})};else if(b)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else c=()=>[],d=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};return b?{getAll:c,setAll:d,setItems:g,removedItems:h,storage:{isServer:!0,getItem:async a=>{if("string"==typeof g[a])return g[a];if(h[a])return null;let b=await c([a]),d=await dW(a,async a=>{let c=b?.find(({name:b})=>b===a)||null;return c?c.value:null});if(!d)return null;let e=d;return"string"==typeof d&&d.startsWith(d0)&&(e=d_(d.substring(d0.length))),e},setItem:async(b,e)=>{b.endsWith("-code-verifier")&&await d1({getAll:c,setAll:d,setItems:{[b]:e},removedItems:{}},{cookieOptions:a?.cookieOptions??null,cookieEncoding:f}),g[b]=e,delete h[b]},removeItem:async a=>{delete g[a],h[a]=!0}}}:{getAll:c,setAll:d,setItems:g,removedItems:h,storage:{isServer:!1,getItem:async a=>{let b=await c([a]),d=await dW(a,async a=>{let c=b?.find(({name:b})=>b===a)||null;return c?c.value:null});if(!d)return null;let e=d;return d.startsWith(d0)&&(e=d_(d.substring(d0.length))),e},setItem:async(b,e)=>{let g=await c([b]),h=new Set((g?.map(({name:a})=>a)||[]).filter(a=>dU(a,b))),i=e;"base64url"===f&&(i=d0+d$(e));let j=dV(b,i);j.forEach(({name:a})=>{h.delete(a)});let k={...dS,...a?.cookieOptions,maxAge:0},l={...dS,...a?.cookieOptions,maxAge:dS.maxAge};delete k.name,delete l.name;let m=[...[...h].map(a=>({name:a,value:"",options:k})),...j.map(({name:a,value:b})=>({name:a,value:b,options:l}))];m.length>0&&await d(m)},removeItem:async b=>{let e=await c([b]),f=(e?.map(({name:a})=>a)||[]).filter(a=>dU(a,b)),g={...dS,...a?.cookieOptions,maxAge:0};delete g.name,f.length>0&&await d(f.map(a=>({name:a,value:"",options:g})))}}}}({...c,cookieEncoding:c?.cookieEncoding??"base64url"},!1),g=new dP(a,b,{...c,global:{...c?.global,headers:{...c?.global?.headers,"X-Client-Info":"supabase-ssr/0.8.0 createBrowserClient"}},auth:{...c?.auth,...c?.cookieOptions?.name?{storageKey:c.cookieOptions.name}:null,flowType:"pkce",autoRefreshToken:dR(),detectSessionInUrl:dR(),persistSession:!0,storage:f,...c?.cookies&&"encode"in c.cookies&&"tokens-only"===c.cookies.encode?{userStorage:c?.auth?.userStorage??window.localStorage}:null}});return d&&(e=g),g}("https://fdxgzddvywtmnqsaqysx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkeGd6ZGR2eXd0bW5xc2FxeXN4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzMTc3MTksImV4cCI6MjA4NDg5MzcxOX0.xvoLoBzTP_Tzff5E35tupTBNdUFUuiMOaOAQd6zGI6I")}let d3=new Map,d4=new Map,d5={async fetchSets(a="en",b=1,c=15){let d=`sets-${a}-${b}-${c}`;if(d4.has(d))return d4.get(d);try{let e=d2(),f=(b-1)*c,g=f+c-1,h="en";a?.includes("jp")&&(h="ja"),a?.includes("th")&&(h="th");let{data:i,error:j,count:k}=await e.from("pokemon_sets").select("*",{count:"exact"}).eq("language",h).order("release_date",{ascending:!1}).range(f,g);if(j)return console.error("Supabase error fetching sets:",j),{data:[],totalCount:0};let l={data:(i||[]).map(a=>{let b=a=>a?a.includes("tcgdex.net")&&!a.match(/\.(png|jpg|jpeg|webp|svg)$/i)?`${a}.png`:a:"";return{id:a.id,name:a.name,series:a.series||"",printedTotal:a.printed_total||0,total:a.total||0,releaseDate:a.release_date||"",updatedAt:a.updated_at||"",images:{symbol:b(a.symbol_url),logo:b(a.logo_url)}}}),totalCount:k||0};return d4.set(d,l),l}catch(a){return console.error("Failed to fetch sets from Supabase:",a),{data:[],totalCount:0}}},async fetchCardsBySet(a){try{let b=d2(),{data:c,error:d}=await b.from("pokemon_cards").select("*").eq("set_id",a).order("number",{ascending:!0});if(d)return console.error("Supabase error fetching cards:",d),[];return(c||[]).map(a=>this.mapSupabaseCardToInternal(a))}catch(a){return console.error("Failed to fetch cards from Supabase:",a),[]}},async findCardByMetadata(a,b,c){try{let b=d2(),d=c.split("/")[0].trim(),e=a.replace(/[^a-zA-Z0-9 ]/g,"").trim(),{data:f,error:g}=await b.from("pokemon_cards").select("*").ilike("name",`%${e}%`).eq("number",d).limit(5);if(!f||0===f.length){let{data:a}=await b.from("pokemon_cards").select("*").ilike("name",`%${e}%`).limit(5);f=a}if(g)return console.error("Supabase error searching cards:",g),[];return(f||[]).map(a=>this.mapSupabaseCardToInternal(a))}catch(a){return console.error("Metadata match failed:",a),[]}},async searchCards(a,b=!1){if(!a||a.trim().length<2)return[];let c=a.toLowerCase().trim();if(d3.has(c))return d3.get(c)||[];try{let b=d2(),d=/[\u0E00-\u0E7F]/.test(a),e=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/.test(a),f=a.toLowerCase(),g=null;d||f.includes("thai")||f.includes(" th ")?g="th":e||f.includes("japanese")||f.includes(" jp")||f.includes(" ja ")?g="ja":(f.includes("english")||f.includes(" en "))&&(g="en");let h=a.toLowerCase().replace(/\b(japanese|jp|jpn|thai|th|english|en)\b/g,"").trim(),i=b.from("pokemon_cards").select("id, name, set_id, number, supertype, subtypes, rarity, hp, types, image_small, image_large, language, raw_data");g&&(i=i.eq("language",g)),h&&(i=i.ilike("name",`%${h}%`));let{data:j,error:k}=await i.order("name",{ascending:!0}).limit(50);if(k)return console.error("Supabase search error:",k),[];let l=(j||[]).map(a=>{let b=a.name.toLowerCase(),c=h.toLowerCase(),d=0;return d=b===c?100:b.startsWith(c)?75:b.includes(c)?50:25,"Pok\xe9mon"===a.supertype&&(d+=10),{card:a,score:d}}).sort((a,b)=>b.score-a.score).slice(0,30).map(a=>this.mapSupabaseCardToInternal(a.card));return l.length>0&&d3.set(c,l),l}catch(a){return console.error("Search failure:",a),[]}},mapSupabaseCardToInternal(a){let b=a.raw_data||{},c=b.tcgplayer,d=c?.prices||{},e=d.holofoil||d.normal||Object.values(d)[0]||{},f=e?.market||e?.mid||e?.low||5,g=Math.round(35.85*f),h=a=>a?a.includes("tcgdex.net")&&!a.match(/\.(png|jpg|jpeg|webp)$/i)?`${a}.png`:a:"",i="",j="";return a.image_large?i=h(a.image_large):a.image_small?i=h(a.image_small):b.images?.large?(i=b.images.large,j=b.images.small):i=b.image?h(b.image.includes("http")?b.image:`${b.image}/high`):"https://images.pokemontcg.io/placeholder.png",a.image_small&&!j&&(j=h(a.image_small)),{id:a.id,name:a.name,thaiName:a.name,set:b.set?.name||"Unknown Set",number:a.number?`${a.number}/${b.set?.printedTotal||"??"}`:"??",rarity:a.rarity||"Common",imageUrl:i,images:{small:j||i,large:i},marketPrice:g,tcgplayerUrl:a.tcgplayer_url,prices:{market:g,low:Math.round(35.85*(e?.low||.9*f)),mid:Math.round(35.85*(e?.mid||f)),high:Math.round(35.85*(e?.high||1.2*f)),lastUpdated:c?.updatedAt||new Date().toISOString()},change7d:parseFloat((15*Math.random()-5).toFixed(1)),priceHistory:[{date:"1D",price:Math.round(g*(.95+.1*Math.random()))},{date:"7D",price:Math.round(g*(.9+.1*Math.random()))},{date:"1M",price:Math.round(g*(.8+.2*Math.random()))},{date:"3M",price:Math.round(g*(.7+.3*Math.random()))},{date:"6M",price:g}]}}},d6=({onSelectCard:a,searchRequest:b,localListings:c=[],currency:d="THB",exchangeRate:e=1})=>{let[f,g]=(0,aO.useState)("en"),[h,i]=(0,aO.useState)([]),[j,k]=(0,aO.useState)(""),[l,m]=(0,aO.useState)([]),[n,o]=(0,aO.useState)(!0),[p,q]=(0,aO.useState)(!1),[r,s]=(0,aO.useState)(""),[t,u]=(0,aO.useState)(""),[v,w]=(0,aO.useState)(!1),x=(0,aO.useRef)(null);(0,aO.useEffect)(()=>{let a=setTimeout(()=>{u(r)},400);return()=>clearTimeout(a)},[r]),(0,aO.useEffect)(()=>{let a=a=>{x.current&&!x.current.contains(a.target)&&w(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,aO.useEffect)(()=>{b&&s(b.term)},[b]),(0,aO.useEffect)(()=>{(async()=>{o(!0);let a=await d5.fetchSets("jp"===f?"jp":"en",1,50);i(a.data),a.data.length>0&&k(a.data[0].id),o(!1)})()},[f]),(0,aO.useEffect)(()=>{j&&!(t.length>2)&&(async()=>{q(!0),m(await d5.fetchCardsBySet(j)),q(!1)})()},[j,t]),(0,aO.useEffect)(()=>{t.length>2?(async()=>{q(!0),m(await d5.searchCards(t)),q(!1)})():0===t.length&&j&&(async()=>{q(!0),m(await d5.fetchCardsBySet(j)),q(!1)})()},[t,j]);let y=aX[d]||d,z=a=>c.filter(b=>b.card_data.id===a.id||b.card_data.name===a.name&&b.card_data.set===a.set).length,A=h.find(a=>a.id===j);return(0,aN.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,aN.jsxs)("div",{className:"space-y-3",children:[(0,aN.jsxs)("div",{className:"relative group",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-brand-cyan/20 blur-md rounded-xl group-focus-within:opacity-100 opacity-0 transition-opacity"}),(0,aN.jsx)("i",{className:"fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-brand-cyan transition-colors z-10"}),(0,aN.jsx)("input",{type:"text",placeholder:"Search Card Registry...",className:"relative w-full h-12 pl-12 pr-4 bg-[#1e293b] border border-white/10 rounded-xl focus:border-brand-cyan outline-none text-sm font-medium text-white placeholder:text-slate-500 transition-all z-10 shadow-lg",value:r,onChange:a=>s(a.target.value)})]}),(0,aN.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:["Expansion","Release","Variant","Pristine"].map(a=>(0,aN.jsx)("button",{className:"h-7 px-4 bg-white/5 rounded-md transform skew-x-[-10deg] text-[9px] font-black uppercase tracking-widest text-slate-400 border border-white/5 hover:bg-brand-red hover:text-white hover:border-brand-red transition-all whitespace-nowrap",children:(0,aN.jsx)("span",{className:"transform skew-x-[10deg] inline-block",children:a})},a))})]}),(0,aN.jsxs)("div",{className:"space-y-4",children:[(0,aN.jsx)("div",{className:"flex justify-between items-end",children:(0,aN.jsxs)("h2",{className:"text-white text-lg font-black italic skew-x-[-10deg] uppercase tracking-tighter",children:["Card ",(0,aN.jsx)("span",{className:"text-brand-cyan",children:"Database"})]})}),(0,aN.jsxs)("div",{className:"grid grid-cols-2 gap-3 z-30 relative",children:[(0,aN.jsx)("div",{className:"space-y-1",children:(0,aN.jsxs)("div",{className:"relative",children:[(0,aN.jsxs)("select",{value:f,onChange:a=>g(a.target.value),className:"w-full h-10 bg-brand-darker rounded-lg px-3 text-xs font-bold text-slate-300 border border-white/10 appearance-none outline-none focus:border-brand-cyan",children:[(0,aN.jsx)("option",{value:"en",children:"English (Global)"}),(0,aN.jsx)("option",{value:"jp",children:"Japanese (Origin)"}),(0,aN.jsx)("option",{value:"th",children:"Thai (CardStreet)"})]}),(0,aN.jsx)("i",{className:"fa-solid fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-slate-600 text-[10px] pointer-events-none"})]})}),(0,aN.jsx)("div",{className:"space-y-1",ref:x,children:(0,aN.jsx)("div",{className:"relative",children:n?(0,aN.jsx)("div",{className:"w-full h-10 bg-white/5 rounded-lg skeleton opacity-20"}):(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsxs)("button",{onClick:()=>w(!v),className:"w-full h-10 bg-brand-darker rounded-lg px-2 flex items-center justify-between border border-white/10 outline-none focus:border-brand-cyan text-left active:bg-white/5 transition-colors",children:[A?(0,aN.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden w-full pr-4",children:[A.images?.logo&&(0,aN.jsx)("img",{src:A.images.logo,alt:"",className:"h-5 w-auto object-contain max-w-[60px]"}),(0,aN.jsx)("span",{className:"text-xs font-bold text-slate-300 truncate",children:A.name})]}):(0,aN.jsx)("span",{className:"text-xs font-bold text-slate-500",children:"Select Set"}),(0,aN.jsx)("i",{className:"fa-solid fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-slate-600 text-[10px]"})]}),v&&(0,aN.jsxs)("div",{className:"absolute top-full right-0 w-[240px] max-w-[90vw] mt-2 bg-[#0f172a] rounded-xl border border-white/10 shadow-2xl max-h-80 overflow-y-auto z-50",children:[(0,aN.jsxs)("div",{className:"sticky top-0 bg-[#0f172a]/95 backdrop-blur-md p-2 border-b border-white/10 z-10 flex justify-between items-center",children:[(0,aN.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 pl-2",children:"Select Expansion"}),(0,aN.jsxs)("span",{className:"text-[9px] font-bold text-brand-cyan bg-brand-cyan/10 px-1.5 rounded",children:[h.length," Found"]})]}),h.map(a=>(0,aN.jsxs)("button",{onClick:()=>{k(a.id),w(!1)},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-white/5 border-b border-white/5 last:border-0 transition-colors text-left group",children:[(0,aN.jsx)("div",{className:"w-12 h-8 flex items-center justify-center flex-shrink-0 bg-white/5 rounded p-1 border border-white/5 group-hover:border-white/10",children:(0,aN.jsx)("img",{src:a.images.logo,alt:a.name,className:"max-h-full max-w-full object-contain filter group-hover:brightness-110 transition-all"})}),(0,aN.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,aN.jsx)("span",{className:`text-xs font-bold truncate block ${j===a.id?"text-brand-cyan":"text-slate-300 group-hover:text-white"}`,children:a.name}),(0,aN.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,aN.jsx)("span",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:a.series}),(0,aN.jsx)("span",{className:"text-[8px] text-slate-700 font-bold",children:"•"}),(0,aN.jsxs)("span",{className:"text-[8px] text-slate-600 font-bold",children:[a.total," Cards"]})]})]}),j===a.id&&(0,aN.jsx)("i",{className:"fa-solid fa-check text-brand-cyan text-xs"})]},a.id))]})]})})})]})]}),(0,aN.jsx)("div",{className:"bg-[#1e293b]/50 backdrop-blur-md rounded-2xl border border-white/5 overflow-hidden shadow-2xl min-h-[400px]",children:p?(0,aN.jsx)("div",{className:"p-6 space-y-4",children:[1,2,3,4,5,6].map(a=>(0,aN.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,aN.jsx)("div",{className:"w-10 h-14 skeleton rounded-lg opacity-20"}),(0,aN.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,aN.jsx)("div",{className:"h-2 w-32 skeleton rounded opacity-20"}),(0,aN.jsx)("div",{className:"h-1.5 w-20 skeleton rounded opacity-20"})]})]},a))}):(0,aN.jsxs)("div",{className:"w-full",children:[(0,aN.jsxs)("div",{className:"grid grid-cols-[auto_1fr_auto] gap-4 px-5 py-3 bg-white/5 border-b border-white/5",children:[(0,aN.jsx)("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Asset"}),(0,aN.jsx)("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Market Price"}),(0,aN.jsx)("span",{})]}),(0,aN.jsx)("div",{className:"divide-y divide-white/[0.03]",children:l.map(b=>(0,aN.jsxs)("div",{className:"grid grid-cols-[auto_1fr_auto] gap-4 items-center px-5 py-3 active:bg-white/[0.05] transition-colors group cursor-pointer",onClick:()=>a(b),children:[(0,aN.jsxs)("div",{className:"flex items-center gap-3",children:[(0,aN.jsx)("div",{className:"w-10 h-14 bg-brand-darker rounded overflow-hidden flex-shrink-0 border border-white/5",children:(0,aN.jsx)("img",{src:b.imageUrl,className:"w-full h-full object-contain",alt:b.name})}),(0,aN.jsxs)("div",{className:"min-w-0",children:[(0,aN.jsx)("p",{className:"text-white text-xs font-bold truncate group-hover:text-brand-cyan transition-colors",children:b.name}),(0,aN.jsxs)("div",{className:"flex items-center gap-1 mt-0.5",children:[(0,aN.jsx)("span",{className:"text-[9px] bg-white/10 px-1.5 py-0.5 rounded text-slate-400 font-bold uppercase",children:b.rarity}),(0,aN.jsxs)("span",{className:"text-[9px] text-slate-600 font-bold",children:["#",b.number]})]})]})]}),(0,aN.jsx)("div",{className:"text-right",children:z(b)>0?(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsxs)("p",{className:"text-brand-green text-sm font-black tracking-tight",children:["Buy from ",y,Math.round(((a=>{let b=c.filter(b=>b.card_data.id===a.id||b.card_data.name===a.name&&b.card_data.set===a.set);return 0===b.length?null:Math.min(...b.map(a=>a.price))})(b)||0)*e).toLocaleString()]}),(0,aN.jsxs)("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-widest",children:[z(b)," Listing(s)"]})]}):(0,aN.jsxs)("p",{className:"text-white text-sm font-black tracking-tight",children:[y,Math.round(b.marketPrice*e).toLocaleString()]})}),(0,aN.jsx)("div",{className:"text-right",children:(0,aN.jsx)("button",{className:`w-8 h-8 flex items-center justify-center rounded-lg transition-colors ${z(b)>0?"bg-brand-green text-brand-darker hover:bg-white":"bg-white/5 text-brand-cyan hover:bg-brand-cyan/20"}`,children:z(b)>0?(0,aN.jsx)("i",{className:"fa-solid fa-cart-shopping text-[10px]"}):(0,aN.jsx)("i",{className:"fa-solid fa-plus text-[10px]"})})})]},b.id))})]})})]})},d7=({initialGame:a="all",onSelectCard:b,onSelectListing:c,onSellerClick:d,onAddToCart:e,listings:f=[],currency:g="THB",exchangeRate:h=1})=>{let[i,j]=(0,aO.useState)(a),[k,l]=(0,aO.useState)("all"),[m,n]=(0,aO.useState)(""),[o,p]=(0,aO.useState)("newest"),[q,r]=(0,aO.useState)(!1),[s,t]=(0,aO.useState)([0,1e5]),u=(0,aO.useMemo)(()=>f.filter(a=>{let b=a.card_data,c=b.set||"",d=!0;"pokemon"===i?d=!aU.some(a=>c.includes(a)):"onepiece"===i&&(d=aU.some(a=>c.includes(a)));let e=!0;if("en"===k){let a=aS.some(a=>c.includes(a)||a.includes(c)),b=aV.some(a=>c.includes(a)||a.includes(c));e=!a&&!b}else"jp"===k?e=aV.some(a=>c.includes(a)||a.includes(c)):"th"===k&&(e=aS.some(a=>c.includes(a)||a.includes(c)));let f=a.price*h,g=f>=s[0]&&f<=s[1],j=b.name.toLowerCase().includes(m.toLowerCase())||c.toLowerCase().includes(m.toLowerCase());return d&&e&&g&&j}).sort((a,b)=>"price_asc"===o?a.price-b.price:"price_desc"===o?b.price-a.price:new Date(b.created_at).getTime()-new Date(a.created_at).getTime()),[f,i,k,s,m,o,h]),v=["all"!==i,"all"!==k,s[0]>0||s[1]<1e5].filter(Boolean).length;return(0,aN.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-32",children:[(0,aN.jsxs)("div",{className:"pt-6 px-4",children:[(0,aN.jsx)("div",{className:"flex justify-between items-end mb-2",children:(0,aN.jsxs)("div",{children:[(0,aN.jsx)("p",{className:"text-brand-cyan text-[10px] font-black uppercase tracking-[0.2em] italic skew-x-[-10deg]",children:"Global Exchange"}),(0,aN.jsxs)("h2",{className:"text-3xl font-black text-white tracking-tighter italic skew-x-[-6deg]",children:["Market ",(0,aN.jsx)("span",{className:"text-brand-green",children:"Live"})]})]})}),(0,aN.jsxs)("div",{className:"relative group z-20",children:[(0,aN.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-brand-cyan via-brand-green to-brand-cyan rounded-xl opacity-20 group-focus-within:opacity-100 transition duration-500 blur"}),(0,aN.jsxs)("div",{className:"relative flex items-center bg-[#0f172a] rounded-xl border border-white/10 p-1",children:[(0,aN.jsx)("i",{className:"fa-solid fa-magnifying-glass text-slate-500 ml-3 mr-2"}),(0,aN.jsx)("input",{type:"text",placeholder:"Search by card name or set...",className:"w-full bg-transparent text-white text-xs font-bold focus:outline-none placeholder:text-slate-600 h-10",value:m,onChange:a=>n(a.target.value)})]})]})]}),(0,aN.jsxs)("div",{className:"sticky top-0 z-30 bg-brand-darker/95 backdrop-blur-xl border-b border-white/5 py-3 px-4 shadow-2xl",children:[(0,aN.jsxs)("div",{className:"flex justify-between items-center",children:[(0,aN.jsxs)("button",{onClick:()=>r(!q),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-wider transition-all border ${q||v>0?"bg-brand-purple/20 text-brand-purple border-brand-purple/30":"bg-white/5 text-slate-400 border-white/5 hover:bg-white/10 hover:text-white"}`,children:[(0,aN.jsx)("i",{className:"fa-solid fa-sliders"}),"Filters",v>0&&(0,aN.jsx)("span",{className:"ml-1 w-4 h-4 rounded-full bg-brand-purple text-white text-[8px] flex items-center justify-center",children:v})]}),(0,aN.jsx)("div",{className:"flex bg-white/5 rounded-lg p-0.5 border border-white/5",children:[{id:"newest",label:"New"},{id:"price_asc",label:"Low $"},{id:"price_desc",label:"High $"}].map(a=>(0,aN.jsx)("button",{onClick:()=>p(a.id),className:`px-3 py-1 rounded-md text-[9px] font-bold uppercase transition-all ${o===a.id?"bg-brand-cyan text-brand-darker shadow-md":"text-slate-500 hover:text-white"}`,children:a.label},a.id))})]}),q&&(0,aN.jsxs)("div",{className:"mt-4 p-4 bg-[#0f172a] rounded-xl border border-white/10 space-y-4 animate-fadeIn",children:[(0,aN.jsxs)("div",{children:[(0,aN.jsx)("label",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest mb-2 block",children:"Card Game"}),(0,aN.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{id:"all",label:"All Games"},{id:"pokemon",label:"Pok\xe9mon"},{id:"onepiece",label:"One Piece"}].map(a=>(0,aN.jsx)("button",{onClick:()=>j(a.id),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition-all border ${i===a.id?"bg-brand-cyan/20 text-brand-cyan border-brand-cyan/30":"bg-white/5 text-slate-400 border-white/5 hover:bg-white/10"}`,children:a.label},a.id))})]}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("label",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest mb-2 block",children:"Language"}),(0,aN.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{id:"all",label:"All",icon:"fa-globe"},{id:"en",label:"English",icon:"fa-earth-americas"},{id:"jp",label:"Japanese",icon:"fa-sun"},{id:"th",label:"Thai",icon:"fa-flag"}].map(a=>(0,aN.jsxs)("button",{onClick:()=>l(a.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition-all border ${k===a.id?"bg-brand-green/20 text-brand-green border-brand-green/30":"bg-white/5 text-slate-400 border-white/5 hover:bg-white/10"}`,children:[(0,aN.jsx)("i",{className:`fa-solid ${a.icon} text-[8px]`}),a.label]},a.id))})]}),(0,aN.jsxs)("div",{children:[(0,aN.jsxs)("label",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest mb-2 block",children:["Price Range: ",aX[g]||g,s[0].toLocaleString()," - ",aX[g]||g,s[1].toLocaleString()]}),(0,aN.jsxs)("div",{className:"flex items-center gap-4",children:[(0,aN.jsx)("input",{type:"range",min:"0",max:"100000",step:"500",value:s[0],onChange:a=>t([Math.min(Number(a.target.value),s[1]-500),s[1]]),className:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer accent-brand-cyan"}),(0,aN.jsx)("input",{type:"range",min:"0",max:"100000",step:"500",value:s[1],onChange:a=>t([s[0],Math.max(Number(a.target.value),s[0]+500)]),className:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer accent-brand-purple"})]})]}),v>0&&(0,aN.jsxs)("button",{onClick:()=>{j("all"),l("all"),t([0,1e5])},className:"w-full py-2 text-[10px] font-bold uppercase tracking-widest text-slate-400 hover:text-white transition-colors",children:[(0,aN.jsx)("i",{className:"fa-solid fa-xmark mr-2"}),"Clear All Filters"]})]})]}),(0,aN.jsx)("div",{className:"grid grid-cols-1 gap-2 px-2",children:u.length>0?u.map(a=>(0,aN.jsxs)("div",{onClick:()=>c?c(a):b(a.card_data),className:"bg-[#1e293b]/50 border border-white/5 hover:border-brand-cyan/30 rounded-xl p-2 flex gap-3 group active:scale-[0.98] transition-all relative overflow-hidden cursor-pointer",children:[(0,aN.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-brand-cyan to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,aN.jsx)("div",{className:"w-20 aspect-[3/4] bg-brand-darker rounded-lg relative overflow-hidden flex-shrink-0 border border-white/10",children:(0,aN.jsx)("img",{src:a.card_data.images?.small||a.card_data.imageUrl,alt:"Card",className:"w-full h-full object-cover"})}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-between py-0.5",children:[(0,aN.jsxs)("div",{children:[(0,aN.jsxs)("div",{className:"flex justify-between items-start",children:[(0,aN.jsx)("h3",{className:"text-white font-bold text-sm truncate pr-2",children:a.card_data.name}),(0,aN.jsx)("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border ${"NM"===a.condition?"bg-brand-green/10 text-brand-green border-brand-green/20":"bg-slate-700 text-slate-300 border-slate-600"}`,children:a.condition})]}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide truncate",children:a.card_data.set})]}),(0,aN.jsxs)("div",{onClick:b=>{b.stopPropagation(),a.seller&&d(a.seller)},className:"flex items-center gap-1.5 mt-2 bg-black/20 p-1.5 rounded-lg w-fit cursor-pointer hover:bg-white/10 transition-colors",children:[(0,aN.jsx)("div",{className:"w-4 h-4 rounded-full bg-slate-700 overflow-hidden",children:a.seller?.avatar_url&&(0,aN.jsx)("img",{src:a.seller.avatar_url,className:"w-full h-full object-cover"})}),(0,aN.jsx)("span",{className:"text-[9px] text-slate-400 font-bold max-w-[80px] truncate",children:a.seller?.display_name||"Ghost Seller"}),(0,aN.jsxs)("span",{className:"text-[8px] text-yellow-500",children:["★ ",a.seller?.rating||"5.0"]})]})]}),(0,aN.jsxs)("div",{className:"flex flex-col justify-between items-end border-l border-white/5 pl-3 min-w-[80px]",children:[(0,aN.jsxs)("div",{className:"text-right",children:[(0,aN.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:"Ask Price"}),(0,aN.jsxs)("p",{className:"text-lg font-black text-brand-cyan leading-none",children:[aX[g]||g," ",Math.round(a.price*h).toLocaleString()]})]}),(0,aN.jsx)("button",{onClick:b=>{b.stopPropagation(),e&&e({id:a.id,card:a.card_data,price:a.price,sellerName:a.seller?.display_name||"Unknown",condition:a.condition})},className:"w-10 h-10 rounded-full bg-white/5 hover:bg-brand-green hover:text-brand-darker text-brand-green flex items-center justify-center transition-all shadow-lg shadow-black/20 active:scale-90",children:(0,aN.jsx)("i",{className:"fa-solid fa-cart-plus"})})]})]},a.id)):(0,aN.jsxs)("div",{className:"text-center py-20 px-6",children:[(0,aN.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-white/5 mb-4 animate-pulse",children:(0,aN.jsx)("i",{className:"fa-solid fa-satellite-dish text-2xl text-slate-600"})}),(0,aN.jsx)("h3",{className:"text-white font-bold text-sm uppercase tracking-widest mb-1",children:"Signal Lost"}),(0,aN.jsx)("p",{className:"text-slate-500 text-xs",children:"No active listings found in this sector."}),(0,aN.jsx)("button",{onClick:()=>{j("all"),l("all"),t([0,1e5])},className:"mt-4 text-brand-cyan text-xs font-bold uppercase tracking-widest hover:text-white transition-colors",children:"Reset Filters"})]})})]})},d8=({onScanClick:a,onSelectCard:b})=>{let[c,d]=(0,aO.useState)("options"),[e,f]=(0,aO.useState)(""),[g,h]=(0,aO.useState)([]),[i,j]=(0,aO.useState)(!1),[k,l]=(0,aO.useState)(!1),m=(0,aO.useRef)(null),n=async a=>{a.length>2?(j(!0),(/[\u0E00-\u0E7F]/.test(a)||a.split(" ").length>1)&&l(!0),h(await d5.searchCards(a)),j(!1),l(!1)):h([])};return"options"===c?(0,aN.jsxs)("div",{className:"space-y-8 animate-fadeIn pt-4 pb-12",children:[(0,aN.jsxs)("div",{className:"text-center space-y-3 mb-12 px-4",children:[(0,aN.jsx)("h2",{className:"text-3xl font-black text-white tracking-tight uppercase italic skew-x-[-10deg]",children:"Registry Entry"}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-600 font-black tracking-[0.3em] uppercase",children:"Digitize your physical collection"})]}),(0,aN.jsxs)("div",{className:"grid grid-cols-1 gap-5",children:[(0,aN.jsxs)("button",{onClick:a,className:"glass min-h-[180px] rounded-[2.5rem] border-white/10 flex flex-col items-center justify-center gap-5 active:scale-95 transition-all group relative overflow-hidden",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-brand-cyan/5 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,aN.jsx)("div",{className:"w-20 h-20 rounded-3xl bg-brand-cyan flex items-center justify-center shadow-2xl shadow-brand-cyan/20 transform group-hover:scale-110 group-hover:-rotate-3 transition-transform duration-500 z-10",children:(0,aN.jsx)("i",{className:"fa-solid fa-expand text-brand-darker text-3xl"})}),(0,aN.jsxs)("div",{className:"text-center z-10",children:[(0,aN.jsx)("span",{className:"text-xl font-black text-white uppercase tracking-[0.2em] block",children:"Scan Card"}),(0,aN.jsx)("span",{className:"text-[9px] text-brand-cyan/60 font-black uppercase tracking-[0.4em] mt-1",children:"Real-time Vision AI"})]})]}),(0,aN.jsxs)("button",{onClick:()=>d("manual"),className:"glass min-h-[180px] rounded-[2.5rem] border-white/10 flex flex-col items-center justify-center gap-5 active:scale-95 transition-all group relative",children:[(0,aN.jsx)("div",{className:"w-20 h-20 rounded-3xl glass border-white/10 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-3 transition-transform duration-500 z-10",children:(0,aN.jsx)("i",{className:"fa-solid fa-keyboard text-slate-400 text-2xl"})}),(0,aN.jsxs)("div",{className:"text-center z-10",children:[(0,aN.jsx)("span",{className:"text-xl font-black text-white uppercase tracking-[0.2em] block",children:"Search Registry"}),(0,aN.jsx)("span",{className:"text-[9px] text-slate-600 font-black uppercase tracking-[0.4em] mt-1",children:"Global Product Archives"})]})]})]})]}):(0,aN.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-20",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 pt-2",children:[(0,aN.jsx)("button",{onClick:()=>d("options"),className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,aN.jsx)("div",{children:(0,aN.jsx)("h3",{className:"text-white text-lg font-black tracking-tight uppercase",children:"Registry Search"})})]}),(0,aN.jsxs)("div",{className:"space-y-2",children:[(0,aN.jsxs)("div",{className:"relative group",children:[(0,aN.jsx)("i",{className:"fa-solid fa-magnifying-glass absolute left-5 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-brand-cyan transition-colors"}),(0,aN.jsx)("input",{type:"text",autoFocus:!0,placeholder:"Search name, set, number...",className:"w-full h-14 pl-14 pr-4 bg-white/5 border border-white/10 rounded-2xl focus:border-brand-cyan/50 outline-none text-sm font-medium text-white placeholder:text-slate-600 transition-all",value:e,onChange:a=>(a=>{f(a),m.current&&window.clearTimeout(m.current),a.length>2?m.current=window.setTimeout(()=>{n(a)},350):h([])})(a.target.value)})]}),k&&(0,aN.jsxs)("div",{className:"flex items-center gap-2 px-4 animate-pulse",children:[(0,aN.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-brand-cyan"}),(0,aN.jsx)("span",{className:"text-[8px] text-brand-cyan/80 font-black uppercase tracking-[0.2em]",children:"Syncing Multilingual Database..."})]})]}),(0,aN.jsx)("div",{className:"space-y-3",children:i?(0,aN.jsx)("div",{className:"space-y-4",children:[1,2,3,4].map(a=>(0,aN.jsx)("div",{className:"h-24 glass rounded-[2rem] skeleton opacity-10"},a))}):g.length>0?(0,aN.jsx)("div",{className:"grid grid-cols-1 gap-3",children:g.map(a=>(0,aN.jsxs)("button",{onClick:()=>b(a),className:"glass p-5 rounded-[2.2rem] border-white/5 active:scale-[0.97] transition-all group flex items-center gap-5 text-left relative overflow-hidden",children:[(0,aN.jsx)("div",{className:"w-14 h-20 rounded-xl bg-slate-900 flex items-center justify-center p-1.5 flex-shrink-0 shadow-lg group-hover:scale-105 transition-transform duration-300",children:(0,aN.jsx)("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-contain filter drop-shadow-md"})}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,aN.jsx)("h4",{className:"text-white text-base font-black tracking-tight truncate mb-1 group-hover:text-brand-cyan transition-colors",children:a.name}),(0,aN.jsxs)("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1",children:[(0,aN.jsx)("span",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest",children:a.set}),(0,aN.jsxs)("span",{className:"text-[9px] text-slate-600 font-black",children:["#",a.number]}),(0,aN.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-white/5 text-[8px] text-brand-cyan/80 font-black uppercase border border-white/5",children:a.rarity})]})]}),(0,aN.jsxs)("div",{className:"text-right",children:[(0,aN.jsxs)("p",{className:"text-white text-sm font-black",children:["฿",a.marketPrice.toLocaleString()]}),(0,aN.jsx)("p",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:"Market"})]})]},a.id))}):e.length>2?(0,aN.jsxs)("div",{className:"text-center py-24 glass rounded-[3rem] border-dashed border-white/10 opacity-30",children:[(0,aN.jsx)("i",{className:"fa-solid fa-ghost text-4xl mb-4 text-slate-800"}),(0,aN.jsxs)("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest px-10",children:['No matches in the registry for "',e,'"']})]}):(0,aN.jsxs)("div",{className:"text-center py-20 opacity-10",children:[(0,aN.jsx)("i",{className:"fa-solid fa-keyboard text-5xl mb-6"}),(0,aN.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"Search Live Archives"})]})})]})},d9=({card:a,initialCondition:b,onClose:c,onSuccess:d})=>{let[e,f]=(0,aO.useState)(""),[g,h]=(0,aO.useState)(b||aQ.NM),[i,j]=(0,aO.useState)(!1),[k,l]=(0,aO.useState)("PSA"),[m,n]=(0,aO.useState)("10"),[o,p]=(0,aO.useState)(!1),[q,r]=(0,aO.useState)(null),[s,t]=(0,aO.useState)(0);aP().useEffect(()=>{t((({basePrice:a,condition:b,isGraded:c,gradingCompany:d="PSA",grade:e="10"})=>{if(!a||a<=0)return 0;let f=1;if(!c){switch(b){case aQ.NM:f=1;break;case aQ.LP:f=.85;break;case aQ.MP:f=.7;break;case aQ.HP:f=.5;break;case aQ.DMG:f=.3;break;default:f=1}return Math.round(a*f)}let g=parseFloat(e.toString());return isNaN(g)?a:(10===g?f=3:g>=9.5?f=2:9===g?f=1.1:8===g?f=.85:7===g?f=.7:g<=6&&(f=.5),"BGS"===d&&(10===g&&(f*=1.5),9.5===g&&(f=1.3)),Math.round(a*f))})({basePrice:a.marketPrice,condition:g,isGraded:i,gradingCompany:i?k:void 0,grade:i?m:void 0}))},[a.marketPrice,g,i,k,m]);let u=async b=>{b.preventDefault(),p(!0),r(null);let f=d2(),h="true"===localStorage.getItem("cardstreet-guest");if(!h){let{data:{user:a}}=await f.auth.getUser();if(!a){r("You must be logged in to sell cards."),p(!1);return}}try{if(h)await new Promise(a=>setTimeout(a,800));else{let b=await fetch("/api/listings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({card_id:a.id,card_data:a,price:parseFloat(e),condition:g,is_graded:i,grading_company:i?k:null,grade:i?parseFloat(m):null})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to create listing")}}let b={card_id:a.id,price:parseFloat(e),condition:g,is_graded:i,grading_company:i?k:null,grade:i?parseFloat(m):null};d(b),c()}catch(a){r(a.message)}finally{p(!1)}};return(0,aN.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:c}),(0,aN.jsxs)("div",{className:"relative w-full max-w-md bg-[#0f172a] border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-slideUp",children:[(0,aN.jsxs)("div",{className:"bg-brand-darker/50 p-4 border-b border-white/5 flex justify-between items-center",children:[(0,aN.jsx)("h3",{className:"text-white font-black italic skew-x-[-5deg] text-lg uppercase",children:"List for Sale"}),(0,aN.jsx)("button",{onClick:c,className:"text-slate-400 hover:text-white",children:(0,aN.jsx)("i",{className:"fa-solid fa-xmark text-lg"})})]}),(0,aN.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:[(0,aN.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,aN.jsx)("div",{className:"w-20 h-28 bg-brand-darker rounded-lg border border-white/10 overflow-hidden flex-shrink-0",children:(0,aN.jsx)("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-cover"})}),(0,aN.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,aN.jsx)("h4",{className:"text-white font-bold truncate",children:a.name}),(0,aN.jsxs)("p",{className:"text-xs text-slate-400",children:[a.set," #",a.number]}),(0,aN.jsxs)("div",{className:"mt-2 text-xs text-brand-green font-bold bg-brand-green/10 inline-block px-2 py-1 rounded",children:["Market: ฿",a.marketPrice?.toLocaleString()||"-"]})]})]}),(0,aN.jsxs)("form",{onSubmit:u,className:"space-y-5",children:[(0,aN.jsxs)("div",{children:[(0,aN.jsxs)("div",{className:"flex justify-between items-end mb-1.5",children:[(0,aN.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Asking Price (THB)"}),s>0&&(0,aN.jsxs)("button",{type:"button",onClick:()=>f(s.toString()),className:"text-[10px] text-brand-cyan hover:text-white font-bold uppercase transition-colors",children:["Use Recommended: ฿",s.toLocaleString()]})]}),(0,aN.jsxs)("div",{className:"relative",children:[(0,aN.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 font-bold",children:"฿"}),(0,aN.jsx)("input",{type:"number",required:!0,min:"1",value:e,onChange:a=>f(a.target.value),className:"w-full h-12 bg-white/5 border border-white/10 rounded-xl pl-8 pr-4 text-white font-bold focus:border-brand-cyan outline-none transition-colors placeholder-slate-600",placeholder:s>0?`Recommended: ${s.toLocaleString()}`:"0.00"})]})]}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1.5",children:"Condition"}),(0,aN.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.values(aQ).map(a=>(0,aN.jsx)("button",{type:"button",onClick:()=>h(a),className:`h-10 rounded-lg text-xs font-bold border transition-all ${g===a?"bg-brand-cyan text-brand-darker border-brand-cyan":"bg-white/5 text-slate-400 border-white/5 hover:border-white/20"}`,children:"Near Mint"===a?"NM":"Lightly Played"===a?"LP":a.replace(" ","")},a))})]}),(0,aN.jsxs)("div",{className:"flex items-center gap-3 py-2",children:[(0,aN.jsx)("button",{type:"button",onClick:()=>j(!i),className:`w-12 h-6 rounded-full p-1 transition-colors ${i?"bg-brand-cyan":"bg-slate-700"}`,children:(0,aN.jsx)("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform transition-transform ${i?"translate-x-6":"translate-x-0"}`})}),(0,aN.jsx)("span",{className:"text-sm font-bold text-white",children:"This card is professionally graded"})]}),i&&(0,aN.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-white/5 p-4 rounded-xl border border-white/5 animate-fadeIn",children:[(0,aN.jsxs)("div",{children:[(0,aN.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1.5",children:"Company"}),(0,aN.jsxs)("select",{value:k,onChange:a=>l(a.target.value),className:"w-full h-10 bg-brand-darker border border-white/10 rounded-lg px-2 text-white text-sm",children:[(0,aN.jsx)("option",{value:"PSA",children:"PSA"}),(0,aN.jsx)("option",{value:"BGS",children:"BGS"}),(0,aN.jsx)("option",{value:"CGC",children:"CGC"})]})]}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1.5",children:"Grade"}),(0,aN.jsx)("input",{type:"number",value:m,onChange:a=>n(a.target.value),className:"w-full h-10 bg-brand-darker border border-white/10 rounded-lg px-3 text-white text-sm",max:"10",min:"1",step:"0.5"})]})]}),q&&(0,aN.jsxs)("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-xs font-bold flex items-center gap-2",children:[(0,aN.jsx)("i",{className:"fa-solid fa-circle-exclamation"}),q]}),(0,aN.jsx)("button",{type:"submit",disabled:o,className:"w-full h-14 bg-brand-green hover:bg-brand-green/90 active:scale-[0.98] rounded-xl text-brand-darker font-black uppercase tracking-wider shadow-lg shadow-brand-green/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?(0,aN.jsx)("div",{className:"w-5 h-5 border-2 border-brand-darker border-t-transparent rounded-full animate-spin"}):(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsx)("i",{className:"fa-solid fa-tag"}),"List for Sale"]})})]})]})]})]})},ea=[{id:"pokemon-en",title:"Pok\xe9mon TCG",region:"English",gradient:"from-[#FFCB05] to-[#c79d00]",textColor:"text-[#3c5aa6]",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/9/98/International_Pok%C3%A9mon_logo.svg",flagUrl:"https://flagcdn.com/w80/us.png",accent:"bg-[#3c5aa6]"},{id:"pokemon-jp",title:"Pok\xe9mon TCG",region:"Japanese",gradient:"from-[#e2e8f0] to-[#cbd5e1]",textColor:"text-[#121212]",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/9/98/International_Pok%C3%A9mon_logo.svg",flagUrl:"https://flagcdn.com/w80/jp.png",accent:"bg-[#ef4444]"},{id:"pokemon-th",title:"Pok\xe9mon TCG",region:"Thai",gradient:"from-[#1e293b] to-[#0f172a]",textColor:"text-white",logoUrl:"https://upload.wikimedia.org/wikipedia/commons/9/98/International_Pok%C3%A9mon_logo.svg",flagUrl:"https://flagcdn.com/w80/th.png",accent:"bg-[#06b6d4]"}],eb=({onBack:a,onSelectGame:b})=>(0,aN.jsxs)("div",{className:"space-y-8 animate-fadeIn pb-20",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 pt-4",children:[(0,aN.jsx)("button",{onClick:a,className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,aN.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:"Master Sets"})]}),(0,aN.jsxs)("div",{className:"space-y-2 px-2",children:[(0,aN.jsx)("h2",{className:"text-3xl font-black text-white italic skew-x-[-10deg] uppercase tracking-tighter",children:"Select Region"}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-[0.2em]",children:"Choose your registry database"})]}),(0,aN.jsxs)("div",{className:"grid grid-cols-1 gap-5",children:[ea.map(a=>(0,aN.jsxs)("button",{onClick:()=>b(a.id),className:"relative h-48 rounded-[2.5rem] overflow-hidden group active:scale-95 transition-all shadow-2xl",children:[(0,aN.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${a.gradient}`}),(0,aN.jsx)("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-black via-transparent to-transparent"}),(0,aN.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 z-10",children:[(0,aN.jsx)("div",{className:"h-20 w-full flex items-center justify-center mb-4 drop-shadow-xl transform group-hover:scale-110 transition-transform duration-500",children:(0,aN.jsx)("img",{src:a.logoUrl,alt:a.title,className:"h-full w-auto object-contain"})}),(0,aN.jsxs)("div",{className:"flex items-center gap-3 px-4 py-1.5 rounded-full backdrop-blur-md bg-white/20 border border-white/20 shadow-lg",children:[(0,aN.jsx)("img",{src:a.flagUrl,alt:a.region,className:"w-6 h-4 object-cover rounded shadow-sm"}),(0,aN.jsx)("span",{className:`text-[10px] font-black uppercase tracking-widest ${"pokemon-th"===a.id?"text-white":"text-slate-800"}`,children:a.region})]})]}),(0,aN.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 ease-in-out"})]},a.id)),(0,aN.jsxs)("div",{className:"h-32 rounded-[2.5rem] border-2 border-dashed border-white/10 flex flex-col items-center justify-center gap-2 opacity-30 bg-white/[0.02]",children:[(0,aN.jsx)("i",{className:"fa-solid fa-plus text-2xl text-slate-600"}),(0,aN.jsx)("span",{className:"text-[9px] text-slate-600 font-black uppercase tracking-widest",children:"More Regions Soon"})]})]})]}),ec=({region:a,onBack:b,onSelectSet:c})=>{let[d,e]=(0,aO.useState)([]),[f,g]=(0,aO.useState)(!0),[h,i]=(0,aO.useState)(1),[j,k]=(0,aO.useState)(!0),[l,m]=(0,aO.useState)(0),n=(0,aO.useRef)(null),o=async b=>{g(!0);let c=await d5.fetchSets(a,b,9);c.totalCount>0&&m(c.totalCount),1===b?e(c.data):e(a=>[...a,...c.data]),k((1===b?c.data.length:d.length+c.data.length)<c.totalCount),g(!1)};(0,aO.useEffect)(()=>{e([]),i(1),k(!0),o(1)},[a]);let p=(0,aO.useCallback)(a=>{!f&&(n.current&&n.current.disconnect(),n.current=new IntersectionObserver(a=>{a[0].isIntersecting&&j&&i(a=>{let b=a+1;return o(b),b})}),a&&n.current.observe(a))},[f,j]);return(0,aN.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-24",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 pt-4 sticky top-0 bg-brand-darker/95 backdrop-blur-xl z-20 py-4 border-b border-white/5 shadow-lg",children:[(0,aN.jsx)("button",{onClick:b,className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,aN.jsxs)("div",{className:"flex-1",children:[(0,aN.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:(()=>{switch(a){case"pokemon-jp":return"Japanese Sets";case"pokemon-th":return"Thai Sets";default:return"English Sets"}})()}),(0,aN.jsxs)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:[d.length," Loaded"]})]})]}),(0,aN.jsx)("div",{className:"grid grid-cols-3 gap-3 px-1",children:d.map((a,b)=>{let e=b===d.length-1;return(0,aN.jsxs)("button",{ref:e?p:null,onClick:()=>c(a),className:"group flex flex-col items-center gap-2 active:scale-95 transition-all w-full mb-4",children:[(0,aN.jsxs)("div",{className:"w-full aspect-square glass rounded-3xl p-3 flex items-center justify-center border-white/5 group-hover:border-brand-cyan/30 group-hover:bg-white/[0.03] transition-all relative overflow-hidden",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,aN.jsx)("img",{src:a.images.logo,alt:a.name,className:"w-full h-full object-contain filter drop-shadow-lg group-hover:scale-110 transition-transform duration-300",loading:"lazy"}),(0,aN.jsx)("div",{className:"absolute bottom-1 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-right text-brand-cyan text-xs"})})]}),(0,aN.jsx)("span",{className:"text-[9px] font-bold text-slate-400 text-center leading-tight group-hover:text-white line-clamp-2 uppercase tracking-wide px-1 min-h-[2em] flex items-center justify-center",children:a.name.replace(/\(JP\)|\(TH\)/,"")})]},`${a.id}-${b}`)})}),f&&(0,aN.jsx)("div",{className:"grid grid-cols-3 gap-3 px-1 mt-2",children:[1,2,3,4,5,6].map(a=>(0,aN.jsx)("div",{className:"aspect-square rounded-2xl glass skeleton opacity-20"},a))}),!j&&d.length>0&&(0,aN.jsx)("div",{className:"text-center py-8 opacity-40",children:(0,aN.jsx)("span",{className:"text-[9px] uppercase tracking-widest font-black text-slate-500",children:"End of Registry"})})]})},ed=({set:a,ownedCardIds:b,onBack:c,onCardClick:d})=>{let[e,f]=(0,aO.useState)([]),[g,h]=(0,aO.useState)(!0);(0,aO.useEffect)(()=>{(async()=>{h(!0),f((await d5.fetchCardsBySet(a.id)).sort((a,b)=>{let c=parseInt(a.number.split("/")[0]),d=parseInt(b.number.split("/")[0]);return isNaN(c)||isNaN(d)?a.number.localeCompare(b.number):c-d})),h(!1)})()},[a.id]);let i=(0,aO.useMemo)(()=>0===e.length?0:Math.round(e.filter(a=>b.has(a.id)).length/e.length*100),[e,b]),j=(0,aO.useMemo)(()=>e.filter(a=>b.has(a.id)).length,[e,b]);return(0,aN.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-24 h-full flex flex-col",children:[(0,aN.jsxs)("div",{className:"sticky top-0 bg-brand-darker/95 backdrop-blur-xl z-20 pb-4 border-b border-white/5 pt-4 -mx-6 px-6 shadow-2xl",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,aN.jsx)("button",{onClick:c,className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,aN.jsx)("h3",{className:"text-white text-lg font-black uppercase tracking-tight italic skew-x-[-10deg] truncate",children:a.name}),(0,aN.jsxs)("div",{className:"flex items-center gap-2",children:[(0,aN.jsxs)("span",{className:"text-[9px] text-brand-cyan font-black uppercase tracking-widest",children:[j,"/",e.length," Collected"]}),(0,aN.jsx)("span",{className:"text-[9px] text-slate-600 font-bold",children:"•"}),(0,aN.jsx)("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:a.series})]})]}),a.images?.logo&&(0,aN.jsx)("img",{src:a.images.logo,className:"h-8 object-contain",alt:"logo"})]}),(0,aN.jsx)("div",{className:"h-2 w-full bg-white/5 rounded-full overflow-hidden",children:(0,aN.jsx)("div",{className:"h-full bg-gradient-to-r from-brand-cyan to-brand-green transition-all duration-1000 ease-out",style:{width:`${i}%`}})})]}),g?(0,aN.jsx)("div",{className:"grid grid-cols-3 gap-3 px-1",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(a=>(0,aN.jsx)("div",{className:"aspect-[3/4] rounded-2xl glass skeleton opacity-20"},a))}):(0,aN.jsx)("div",{className:"grid grid-cols-3 gap-3 px-1",children:e.map(a=>{let c=b.has(a.id);return(0,aN.jsxs)("div",{onClick:()=>d?.(a),className:`relative aspect-[3/4] rounded-xl overflow-hidden transition-all duration-500 group ${c?"glass border-brand-cyan/30 shadow-lg shadow-brand-cyan/10":"bg-white/[0.02] border border-white/5"}`,children:[(0,aN.jsx)("img",{src:a.imageUrl,alt:a.name,loading:"lazy",className:`w-full h-full object-cover transition-all duration-500 ${c?"opacity-100":"opacity-20 grayscale blur-[1px]"}`}),!c&&(0,aN.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 p-2",children:[(0,aN.jsx)("span",{className:"text-xl font-black text-white/40 drop-shadow-md",children:a.number.split("/")[0]}),(0,aN.jsx)("span",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest text-center leading-tight mt-1 line-clamp-2",children:a.name})]}),c&&(0,aN.jsx)("div",{className:"absolute top-1 right-1 z-10",children:(0,aN.jsx)("div",{className:"w-5 h-5 rounded-full bg-brand-green flex items-center justify-center shadow-md",children:(0,aN.jsx)("i",{className:"fa-solid fa-check text-[10px] text-brand-darker font-bold"})})}),c&&(0,aN.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 backdrop-blur-sm p-1 text-center",children:(0,aN.jsx)("span",{className:"text-[8px] text-white font-bold tracking-wider",children:a.number})})]},a.id)})})]})};function ee(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}var ef=c(50193),eg=c.n(ef),eh=c(37177),ei=c.n(eh);function ej(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,c=10**b,d=Math.round(a*c)/c;return Object.is(d,-0)?0:d}function ek(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return a.reduce((a,b,d)=>{var e=c[d-1];return"string"==typeof e?a+e+b:void 0!==e?a+ej(e)+b:a+b},"")}var el=a=>0===a?0:a>0?1:-1,em=a=>"number"==typeof a&&a!=+a,en=a=>"string"==typeof a&&a.indexOf("%")===a.length-1,eo=a=>("number"==typeof a||a instanceof Number)&&!em(a),ep=a=>eo(a)||"string"==typeof a,eq=0,er=a=>{var b=++eq;return"".concat(a||"").concat(b)},es=function(a,b){var c,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!eo(a)&&"string"!=typeof a)return d;if(en(a)){if(null==b)return d;var f=a.indexOf("%");c=b*parseFloat(a.slice(0,f))/100}else c=+a;return em(c)&&(c=d),e&&null!=b&&c>b&&(c=b),c},et=a=>{if(!Array.isArray(a))return!1;for(var b=a.length,c={},d=0;d<b;d++)if(c[String(a[d])])return!0;else c[String(a[d])]=!0;return!1};function eu(a,b,c){return eo(a)&&eo(b)?ej(a+c*(b-a)):b}function ev(a,b,c){if(a&&a.length)return a.find(a=>a&&("function"==typeof b?b(a):ei()(a,b))===c)}var ew=a=>null==a?a:"".concat(a.charAt(0).toUpperCase()).concat(a.slice(1));function ex(a){return null!=a}function ey(){}var ez=function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];if("undefined"!=typeof console&&console.warn&&(void 0===b&&console.warn("LogUtils requires an error message argument"),!a))if(void 0===b)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=0;console.warn(b.replace(/%s/g,()=>d[f++]))}},eA={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},eB=(a,b,c)=>{var{width:d=eA.width,height:e=eA.height,aspect:f,maxHeight:g}=c,h=en(d)?a:Number(d),i=en(e)?b:Number(e);return f&&f>0&&(h?i=h/f:i&&(h=i*f),g&&null!=i&&i>g&&(i=g)),{calculatedWidth:h,calculatedHeight:i}},eC={width:0,height:0,overflow:"visible"},eD={width:0,overflowX:"visible"},eE={height:0,overflowY:"visible"},eF={};function eG(a){return Number.isFinite(a)}function eH(a){return"number"==typeof a&&a>0&&Number.isFinite(a)}function eI(){return(eI=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function eJ(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function eK(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?eJ(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):eJ(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var eL=(0,aO.createContext)(eA.initialDimension);function eM(a){var{children:b,width:c,height:d}=a,e=(0,aO.useMemo)(()=>({width:c,height:d}),[c,d]);return eH(e.width)&&eH(e.height)?aO.createElement(eL.Provider,{value:e},b):null}var eN=()=>(0,aO.useContext)(eL),eO=(0,aO.forwardRef)((a,b)=>{var{aspect:c,initialDimension:d=eA.initialDimension,width:e,height:f,minWidth:g=eA.minWidth,minHeight:h,maxHeight:i,children:j,debounce:k=eA.debounce,id:l,className:m,onResize:n,style:o={}}=a,p=(0,aO.useRef)(null),q=(0,aO.useRef)();q.current=n,(0,aO.useImperativeHandle)(b,()=>p.current);var[r,s]=(0,aO.useState)({containerWidth:d.width,containerHeight:d.height}),t=(0,aO.useCallback)((a,b)=>{s(c=>{var d=Math.round(a),e=Math.round(b);return c.containerWidth===d&&c.containerHeight===e?c:{containerWidth:d,containerHeight:e}})},[]);(0,aO.useEffect)(()=>{if(null==p.current||"undefined"==typeof ResizeObserver)return ey;var a=a=>{var b,c=a[0];if(null!=c){var{width:d,height:e}=c.contentRect;t(d,e),null==(b=q.current)||b.call(q,d,e)}};k>0&&(a=eg()(a,k,{trailing:!0,leading:!1}));var b=new ResizeObserver(a),{width:c,height:d}=p.current.getBoundingClientRect();return t(c,d),b.observe(p.current),()=>{b.disconnect()}},[t,k]);var{containerWidth:u,containerHeight:v}=r;ez(!c||c>0,"The aspect(%s) must be greater than zero.",c);var{calculatedWidth:w,calculatedHeight:x}=eB(u,v,{width:e,height:f,aspect:c,maxHeight:i});return ez(null!=w&&w>0||null!=x&&x>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",w,x,e,f,g,h,c),aO.createElement("div",{id:l?"".concat(l):void 0,className:ee("recharts-responsive-container",m),style:eK(eK({},o),{},{width:e,height:f,minWidth:g,minHeight:h,maxHeight:i}),ref:p},aO.createElement("div",{style:(a=>{var{width:b,height:c}=a,d=en(b),e=en(c);return d&&e?eC:d?eD:e?eE:eF})({width:e,height:f})},aO.createElement(eM,{width:w,height:x},j)))}),eP=(0,aO.forwardRef)((a,b)=>{var c=eN();if(eH(c.width)&&eH(c.height))return a.children;var{width:d,height:e}=function(a){var{width:b,height:c,aspect:d}=a,e=b,f=c;return void 0===e&&void 0===f?(e=eA.width,f=eA.height):void 0===e?e=d&&d>0?void 0:eA.width:void 0===f&&(f=d&&d>0?void 0:eA.height),{width:e,height:f}}({width:a.width,height:a.height,aspect:a.aspect}),{calculatedWidth:f,calculatedHeight:g}=eB(void 0,void 0,{width:d,height:e,aspect:a.aspect,maxHeight:a.maxHeight});return eo(f)&&eo(g)?aO.createElement(eM,{width:f,height:g},a.children):aO.createElement(eO,eI({},a,{width:d,height:e,ref:b}))}),eQ=Symbol.for("immer-nothing"),eR=Symbol.for("immer-draftable"),eS=Symbol.for("immer-state");function eT(a){throw Error(`[Immer] minified error nr: ${a}. Full error at: https://bit.ly/3cXEKWf`)}var eU=Object,eV=eU.getPrototypeOf,eW="constructor",eX="prototype",eY="configurable",eZ="enumerable",e$="writable",e_="value",e0=a=>!!a&&!!a[eS];function e1(a){return!!a&&(e4(a)||fa(a)||!!a[eR]||!!a[eW]?.[eR]||fb(a)||fc(a))}var e2=eU[eX][eW].toString(),e3=new WeakMap;function e4(a){if(!a||!fd(a))return!1;let b=eV(a);if(null===b||b===eU[eX])return!0;let c=eU.hasOwnProperty.call(b,eW)&&b[eW];if(c===Object)return!0;if(!fe(c))return!1;let d=e3.get(c);return void 0===d&&(d=Function.toString.call(c),e3.set(c,d)),d===e2}function e5(a,b,c=!0){0===e6(a)?(c?Reflect.ownKeys(a):eU.keys(a)).forEach(c=>{b(c,a[c],a)}):a.forEach((c,d)=>b(d,c,a))}function e6(a){let b=a[eS];return b?b.type_:fa(a)?1:fb(a)?2:3*!!fc(a)}var e7=(a,b,c=e6(a))=>2===c?a.has(b):eU[eX].hasOwnProperty.call(a,b),e8=(a,b,c=e6(a))=>2===c?a.get(b):a[b],e9=(a,b,c,d=e6(a))=>{2===d?a.set(b,c):3===d?a.add(c):a[b]=c},fa=Array.isArray,fb=a=>a instanceof Map,fc=a=>a instanceof Set,fd=a=>"object"==typeof a,fe=a=>"function"==typeof a,ff=a=>a.modified_?a.copy_:a.base_;function fg(a,b){if(fb(a))return new Map(a);if(fc(a))return new Set(a);if(fa(a))return Array[eX].slice.call(a);let c=e4(a);if(!0!==b&&("class_only"!==b||c)){let b=eV(a);if(null!==b&&c)return{...a};let d=eU.create(b);return eU.assign(d,a)}{let b=eU.getOwnPropertyDescriptors(a);delete b[eS];let c=Reflect.ownKeys(b);for(let d=0;d<c.length;d++){let e=c[d],f=b[e];!1===f[e$]&&(f[e$]=!0,f[eY]=!0),(f.get||f.set)&&(b[e]={[eY]:!0,[e$]:!0,[eZ]:f[eZ],[e_]:a[e]})}return eU.create(eV(a),b)}}function fh(a,b=!1){return fj(a)||e0(a)||!e1(a)||(e6(a)>1&&eU.defineProperties(a,{set:fi,add:fi,clear:fi,delete:fi}),eU.freeze(a),b&&e5(a,(a,b)=>{fh(b,!0)},!1)),a}var fi={[e_]:function(){eT(2)}};function fj(a){return!(null!==a&&fd(a))||eU.isFrozen(a)}var fk="MapSet",fl="Patches",fm="ArrayMethods",fn={};function fo(a){let b=fn[a];return b||eT(0,a),b}var fp=a=>!!fn[a];function fq(a,b){b&&(a.patchPlugin_=fo(fl),a.patches_=[],a.inversePatches_=[],a.patchListener_=b)}function fr(a){fs(a),a.drafts_.forEach(fu),a.drafts_=null}function fs(a){a===m$&&(m$=a.parent_)}var ft=a=>m$={drafts_:[],parent_:m$,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:fp(fk)?fo(fk):void 0,arrayMethodsPlugin_:fp(fm)?fo(fm):void 0};function fu(a){let b=a[eS];0===b.type_||1===b.type_?b.revoke_():b.revoked_=!0}function fv(a,b){b.unfinalizedDrafts_=b.drafts_.length;let c=b.drafts_[0];if(void 0!==a&&a!==c){c[eS].modified_&&(fr(b),eT(4)),e1(a)&&(a=fw(b,a));let{patchPlugin_:d}=b;d&&d.generateReplacementPatches_(c[eS].base_,a,b)}else a=fw(b,c);return function(a,b,c=!1){!a.parent_&&a.immer_.autoFreeze_&&a.canAutoFreeze_&&fh(b,c)}(b,a,!0),fr(b),b.patches_&&b.patchListener_(b.patches_,b.inversePatches_),a!==eQ?a:void 0}function fw(a,b){if(fj(b))return b;let c=b[eS];if(!c)return fC(b,a.handledSet_,a);if(!fy(c,a))return b;if(!c.modified_)return c.base_;if(!c.finalized_){let{callbacks_:b}=c;if(b)for(;b.length>0;)b.pop()(a);fB(c,a)}return c.copy_}function fx(a){a.finalized_=!0,a.scope_.unfinalizedDrafts_--}var fy=(a,b)=>a.scope_===b,fz=[];function fA(a,b,c,d){let e=a.copy_||a.base_,f=a.type_;if(void 0!==d&&e8(e,d,f)===b)return void e9(e,d,c,f);if(!a.draftLocations_){let b=a.draftLocations_=new Map;e5(e,(a,c)=>{if(e0(c)){let d=b.get(c)||[];d.push(a),b.set(c,d)}})}for(let d of a.draftLocations_.get(b)??fz)e9(e,d,c,f)}function fB(a,b){if(a.modified_&&!a.finalized_&&(3===a.type_||1===a.type_&&a.allIndicesReassigned_||(a.assigned_?.size??0)>0)){let{patchPlugin_:c}=b;if(c){let d=c.getPath(a);d&&c.generatePatches_(a,d,b)}fx(a)}}function fC(a,b,c){return!c.immer_.autoFreeze_&&c.unfinalizedDrafts_<1||e0(a)||b.has(a)||!e1(a)||fj(a)||(b.add(a),e5(a,(d,e)=>{if(e0(e)){let b=e[eS];fy(b,c)&&(e9(a,d,ff(b),a.type_),fx(b))}else e1(e)&&fC(e,b,c)})),a}var fD={get(a,b){if(b===eS)return a;let c=a.scope_.arrayMethodsPlugin_,d=1===a.type_&&"string"==typeof b;if(d&&c?.isArrayOperationMethod(b))return c.createMethodInterceptor(a,b);let e=a.copy_||a.base_;if(!e7(e,b,a.type_)){var f=a,g=e,h=b;let c=fG(g,h);return c?e_ in c?c[e_]:c.get?.call(f.draft_):void 0}let i=e[b];if(a.finalized_||!e1(i)||d&&a.operationMethod&&c?.isMutatingArrayMethod(a.operationMethod)&&function(a){let b=+a;return Number.isInteger(b)&&String(b)===a}(b))return i;if(i===fF(a.base_,b)){fI(a);let c=1===a.type_?+b:b,d=fJ(a.scope_,i,a,c);return a.copy_[c]=d}return i},has:(a,b)=>b in(a=>a.copy_||a.base_)(a),ownKeys:a=>Reflect.ownKeys((a=>a.copy_||a.base_)(a)),set(a,b,c){let d=fG(a.copy_||a.base_,b);if(d?.set)return d.set.call(a.draft_,c),!0;if(!a.modified_){let d=fF(a.copy_||a.base_,b),e=d?.[eS];if(e&&e.base_===c)return a.copy_[b]=c,a.assigned_.set(b,!1),!0;if((c===d?0!==c||1/c==1/d:c!=c&&d!=d)&&(void 0!==c||e7(a.base_,b,a.type_)))return!0;fI(a),fH(a)}if(a.copy_[b]===c&&(void 0!==c||b in a.copy_)||Number.isNaN(c)&&Number.isNaN(a.copy_[b]))return!0;a.copy_[b]=c,a.assigned_.set(b,!0);let{scope_:e}=a;if(e0(c)){let d=c[eS];fy(d,e)&&d.callbacks_.push(function(){fI(a),fA(a,c,ff(d),b)})}else e1(c)&&a.callbacks_.push(function(){let d=a.copy_||a.base_;3===a.type_?d.has(c)&&fC(c,e.handledSet_,e):e8(d,b,a.type_)===c&&e.drafts_.length>1&&(a.assigned_.get(b)??!1)===!0&&a.copy_&&fC(e8(a.copy_,b,a.type_),e.handledSet_,e)});return!0},deleteProperty:(a,b)=>(fI(a),void 0!==fF(a.base_,b)||b in a.base_?(a.assigned_.set(b,!1),fH(a)):a.assigned_.delete(b),a.copy_&&delete a.copy_[b],!0),getOwnPropertyDescriptor(a,b){let c=a.copy_||a.base_,d=Reflect.getOwnPropertyDescriptor(c,b);return d?{[e$]:!0,[eY]:1!==a.type_||"length"!==b,[eZ]:d[eZ],[e_]:c[b]}:d},defineProperty(){eT(11)},getPrototypeOf:a=>eV(a.base_),setPrototypeOf(){eT(12)}},fE={};for(let a in fD){let b=fD[a];fE[a]=function(){let a=arguments;return a[0]=a[0][0],b.apply(this,a)}}function fF(a,b){let c=a[eS];return(c?c.copy_||c.base_:a)[b]}function fG(a,b){if(!(b in a))return;let c=eV(a);for(;c;){let a=Object.getOwnPropertyDescriptor(c,b);if(a)return a;c=eV(c)}}function fH(a){!a.modified_&&(a.modified_=!0,a.parent_&&fH(a.parent_))}function fI(a){a.copy_||(a.assigned_=new Map,a.copy_=fg(a.base_,a.scope_.immer_.useStrictShallowCopy_))}function fJ(a,b,c,d){let[e,f]=fb(b)?fo(fk).proxyMap_(b,c):fc(b)?fo(fk).proxySet_(b,c):function(a,b){let c=fa(a),d={type_:+!!c,scope_:b?b.scope_:m$,modified_:!1,finalized_:!1,assigned_:void 0,parent_:b,base_:a,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0},e=d,f=fD;c&&(e=[d],f=fE);let{revoke:g,proxy:h}=Proxy.revocable(e,f);return d.draft_=h,d.revoke_=g,[h,d]}(b,c);if((c?.scope_??m$).drafts_.push(e),f.callbacks_=c?.callbacks_??[],f.key_=d,c&&void 0!==d)c.callbacks_.push(function(a){if(!f||!fy(f,a))return;a.mapSetPlugin_?.fixSetContents(f);let b=ff(f);fA(c,f.draft_??f,b,d),fB(f,a)});else f.callbacks_.push(function(a){a.mapSetPlugin_?.fixSetContents(f);let{patchPlugin_:b}=a;f.modified_&&b&&b.generatePatches_(f,[],a)});return e}function fK(a){return e0(a)||eT(10,a),function a(b){let c;if(!e1(b)||fj(b))return b;let d=b[eS],e=!0;if(d){if(!d.modified_)return d.base_;d.finalized_=!0,c=fg(b,d.scope_.immer_.useStrictShallowCopy_),e=d.scope_.immer_.shouldUseStrictIteration()}else c=fg(b,!0);return e5(c,(b,d)=>{e9(c,b,a(d))},e),d&&(d.finalized_=!1),c}(a)}fE.deleteProperty=function(a,b){return fE.set.call(this,a,b,void 0)},fE.set=function(a,b,c){return fD.set.call(this,a[0],b,c,a[0])};var fL=new class{constructor(a){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,b,c)=>{let d;if(fe(a)&&!fe(b)){let c=b;b=a;let d=this;return function(a=c,...e){return d.produce(a,a=>b.call(this,a,...e))}}if(fe(b)||eT(6),void 0===c||fe(c)||eT(7),e1(a)){let e=ft(this),f=fJ(e,a,void 0),g=!0;try{d=b(f),g=!1}finally{g?fr(e):fs(e)}return fq(e,c),fv(d,e)}if(a&&fd(a))eT(1,a);else{if(void 0===(d=b(a))&&(d=a),d===eQ&&(d=void 0),this.autoFreeze_&&fh(d,!0),c){let b=[],e=[];fo(fl).generateReplacementPatches_(a,d,{patches_:b,inversePatches_:e}),c(b,e)}return d}},this.produceWithPatches=(a,b)=>{let c,d;return fe(a)?(b,...c)=>this.produceWithPatches(b,b=>a(b,...c)):[this.produce(a,b,(a,b)=>{c=a,d=b}),c,d]},"boolean"==typeof a?.autoFreeze&&this.setAutoFreeze(a.autoFreeze),"boolean"==typeof a?.useStrictShallowCopy&&this.setUseStrictShallowCopy(a.useStrictShallowCopy),"boolean"==typeof a?.useStrictIteration&&this.setUseStrictIteration(a.useStrictIteration)}createDraft(a){e1(a)||eT(8),e0(a)&&(a=fK(a));let b=ft(this),c=fJ(b,a,void 0);return c[eS].isManual_=!0,fs(b),c}finishDraft(a,b){let c=a&&a[eS];c&&c.isManual_||eT(9);let{scope_:d}=c;return fq(d,b),fv(void 0,d)}setAutoFreeze(a){this.autoFreeze_=a}setUseStrictShallowCopy(a){this.useStrictShallowCopy_=a}setUseStrictIteration(a){this.useStrictIteration_=a}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(a,b){let c;for(c=b.length-1;c>=0;c--){let d=b[c];if(0===d.path.length&&"replace"===d.op){a=d.value;break}}c>-1&&(b=b.slice(c+1));let d=fo(fl).applyPatches_;return e0(a)?d(a,b):this.produce(a,a=>d(a,b))}}().produce;function fM(a){return`Minified Redux error #${a}; visit https://redux.js.org/Errors?code=${a} for the full message or use the non-minified dev environment for full errors. `}var fN="function"==typeof Symbol&&Symbol.observable||"@@observable",fO=()=>Math.random().toString(36).substring(7).split("").join("."),fP={INIT:`@@redux/INIT${fO()}`,REPLACE:`@@redux/REPLACE${fO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fO()}`};function fQ(a){if("object"!=typeof a||null===a)return!1;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b||null===Object.getPrototypeOf(a)}function fR(a){let b,c=Object.keys(a),d={};for(let b=0;b<c.length;b++){let e=c[b];"function"==typeof a[e]&&(d[e]=a[e])}let e=Object.keys(d);try{Object.keys(d).forEach(a=>{let b=d[a];if(void 0===b(void 0,{type:fP.INIT}))throw Error(fM(12));if(void 0===b(void 0,{type:fP.PROBE_UNKNOWN_ACTION()}))throw Error(fM(13))})}catch(a){b=a}return function(a={},c){if(b)throw b;let f=!1,g={};for(let b=0;b<e.length;b++){let h=e[b],i=d[h],j=a[h],k=i(j,c);if(void 0===k)throw c&&c.type,Error(fM(14));g[h]=k,f=f||k!==j}return(f=f||e.length!==Object.keys(a).length)?g:a}}function fS(...a){return 0===a.length?a=>a:1===a.length?a[0]:a.reduce((a,b)=>(...c)=>a(b(...c)))}function fT(a){return fQ(a)&&"type"in a&&"string"==typeof a.type}function fU(a){return({dispatch:b,getState:c})=>d=>e=>"function"==typeof e?e(b,c,a):d(e)}var fV=fU(),fW="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!=arguments.length)return"object"==typeof arguments[0]?fS:fS.apply(null,arguments)};function fX(a,b){function c(...d){if(b){let c=b(...d);if(!c)throw Error(gC(0));return{type:a,payload:c.payload,..."meta"in c&&{meta:c.meta},..."error"in c&&{error:c.error}}}return{type:a,payload:d[0]}}return c.toString=()=>`${a}`,c.type=a,c.match=b=>fT(b)&&b.type===a,c}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var fY=class a extends Array{constructor(...b){super(...b),Object.setPrototypeOf(this,a.prototype)}static get[Symbol.species](){return a}concat(...a){return super.concat.apply(this,a)}prepend(...b){return 1===b.length&&Array.isArray(b[0])?new a(...b[0].concat(this)):new a(...b.concat(this))}};function fZ(a){return e1(a)?fL(a,()=>{}):a}function f$(a,b,c){return a.has(b)?a.get(b):a.set(b,c(b)).get(b)}var f_="RTK_autoBatch",f0=()=>a=>({payload:a,meta:{[f_]:!0}}),f1=a=>b=>{setTimeout(b,a)},f2=(a={type:"raf"})=>b=>(...c)=>{let d=b(...c),e=!0,f=!1,g=!1,h=new Set,i="tick"===a.type?queueMicrotask:"raf"===a.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:f1(10):"callback"===a.type?a.queueNotification:f1(a.timeout),j=()=>{g=!1,f&&(f=!1,h.forEach(a=>a()))};return Object.assign({},d,{subscribe(a){let b=d.subscribe(()=>e&&a());return h.add(a),()=>{b(),h.delete(a)}},dispatch(a){try{return(f=!(e=!a?.meta?.[f_]))&&!g&&(g=!0,i(j)),d.dispatch(a)}finally{e=!0}}})};function f3(a){let b,c={},d=[],e={addCase(a,b){let d="string"==typeof a?a:a.type;if(!d)throw Error(gC(28));if(d in c)throw Error(gC(29));return c[d]=b,e},addAsyncThunk:(a,b)=>(b.pending&&(c[a.pending.type]=b.pending),b.rejected&&(c[a.rejected.type]=b.rejected),b.fulfilled&&(c[a.fulfilled.type]=b.fulfilled),b.settled&&d.push({matcher:a.settled,reducer:b.settled}),e),addMatcher:(a,b)=>(d.push({matcher:a,reducer:b}),e),addDefaultCase:a=>(b=a,e)};return a(e),[c,d,b]}var f4=Symbol.for("rtk-slice-createasyncthunk"),f5=(a=>(a.reducer="reducer",a.reducerWithPrepare="reducerWithPrepare",a.asyncThunk="asyncThunk",a))(f5||{}),f6=function({creators:a}={}){let b=a?.asyncThunk?.[f4];return function(a){let c,{name:d,reducerPath:e=d}=a;if(!d)throw Error(gC(11));let f=("function"==typeof a.reducers?a.reducers(function(){function a(a,b){return{_reducerDefinitionType:"asyncThunk",payloadCreator:a,...b}}return a.withTypes=()=>a,{reducer:a=>Object.assign({[a.name]:(...b)=>a(...b)}[a.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(a,b)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:a,reducer:b}),asyncThunk:a}}()):a.reducers)||{},g=Object.keys(f),h={},i={},j={},k=[],l={addCase(a,b){let c="string"==typeof a?a:a.type;if(!c)throw Error(gC(12));if(c in i)throw Error(gC(13));return i[c]=b,l},addMatcher:(a,b)=>(k.push({matcher:a,reducer:b}),l),exposeAction:(a,b)=>(j[a]=b,l),exposeCaseReducer:(a,b)=>(h[a]=b,l)};function m(){let[b={},c=[],d]="function"==typeof a.extraReducers?f3(a.extraReducers):[a.extraReducers],e={...b,...i};return function(a,b){let c,[d,e,f]=f3(b);if("function"==typeof a)c=()=>fZ(a());else{let b=fZ(a);c=()=>b}function g(a=c(),b){let h=[d[b.type],...e.filter(({matcher:a})=>a(b)).map(({reducer:a})=>a)];return 0===h.filter(a=>!!a).length&&(h=[f]),h.reduce((a,c)=>{if(c)if(e0(a)){let d=c(a,b);return void 0===d?a:d}else{if(e1(a))return fL(a,a=>c(a,b));let d=c(a,b);if(void 0===d){if(null===a)return a;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}return a},a)}return g.getInitialState=c,g}(a.initialState,a=>{for(let b in e)a.addCase(b,e[b]);for(let b of k)a.addMatcher(b.matcher,b.reducer);for(let b of c)a.addMatcher(b.matcher,b.reducer);d&&a.addDefaultCase(d)})}g.forEach(c=>{let e=f[c],g={reducerName:c,type:`${d}/${c}`,createNotation:"function"==typeof a.reducers};"asyncThunk"===e._reducerDefinitionType?function({type:a,reducerName:b},c,d,e){if(!e)throw Error(gC(18));let{payloadCreator:f,fulfilled:g,pending:h,rejected:i,settled:j,options:k}=c,l=e(a,f,k);d.exposeAction(b,l),g&&d.addCase(l.fulfilled,g),h&&d.addCase(l.pending,h),i&&d.addCase(l.rejected,i),j&&d.addMatcher(l.settled,j),d.exposeCaseReducer(b,{fulfilled:g||f7,pending:h||f7,rejected:i||f7,settled:j||f7})}(g,e,l,b):function({type:a,reducerName:b,createNotation:c},d,e){let f,g;if("reducer"in d){if(c&&"reducerWithPrepare"!==d._reducerDefinitionType)throw Error(gC(17));f=d.reducer,g=d.prepare}else f=d;e.addCase(a,f).exposeCaseReducer(b,f).exposeAction(b,g?fX(a,g):fX(a))}(g,e,l)});let n=a=>a,o=new Map,p=new WeakMap;function q(a,b){return c||(c=m()),c(a,b)}function r(){return c||(c=m()),c.getInitialState()}function s(b,c=!1){function d(a){let e=a[b];return void 0===e&&c&&(e=f$(p,d,r)),e}function e(b=n){let d=f$(o,c,()=>new WeakMap);return f$(d,b,()=>{let d={};for(let[e,f]of Object.entries(a.selectors??{}))d[e]=function(a,b,c,d){function e(f,...g){let h=b(f);return void 0===h&&d&&(h=c()),a(h,...g)}return e.unwrapped=a,e}(f,b,()=>f$(p,b,r),c);return d})}return{reducerPath:b,getSelectors:e,get selectors(){return e(d)},selectSlice:d}}let t={name:d,reducer:q,actions:j,caseReducers:h,getInitialState:r,...s(e),injectInto(a,{reducerPath:b,...c}={}){let d=b??e;return a.inject({reducerPath:d,reducer:q},c),{...t,...s(d,!0)}}};return t}}();function f7(){}var f8="listener",f9="completed",ga="cancelled",gb=`task-${ga}`,gc=`task-${f9}`,gd=`${f8}-${ga}`,ge=`${f8}-${f9}`,gf=class{constructor(a){this.code=a,this.message=`task ${ga} (reason: ${a})`}name="TaskAbortError";message},gg=(a,b)=>{if("function"!=typeof a)throw TypeError(gC(32))},gh=()=>{},gi=(a,b=gh)=>(a.catch(b),a),gj=(a,b)=>(a.addEventListener("abort",b,{once:!0}),()=>a.removeEventListener("abort",b)),gk=a=>{if(a.aborted)throw new gf(a.reason)};function gl(a,b){let c=gh;return new Promise((d,e)=>{let f=()=>e(new gf(a.reason));if(a.aborted)return void f();c=gj(a,f),b.finally(()=>c()).then(d,e)}).finally(()=>{c=gh})}var gm=async(a,b)=>{try{await Promise.resolve();let b=await a();return{status:"ok",value:b}}catch(a){return{status:a instanceof gf?"cancelled":"rejected",error:a}}finally{b?.()}},gn=a=>b=>gi(gl(a,b).then(b=>(gk(a),b))),go=a=>{let b=gn(a);return a=>b(new Promise(b=>setTimeout(b,a)))},{assign:gp}=Object,gq={},gr="listenerMiddleware",gs=a=>{let{type:b,actionCreator:c,matcher:d,predicate:e,effect:f}=a;if(b)e=fX(b).match;else if(c)b=c.type,e=c.match;else if(d)e=d;else if(e);else throw Error(gC(21));return gg(f,"options.listener"),{predicate:e,type:b,effect:f}},gt=gp(a=>{let{type:b,predicate:c,effect:d}=gs(a);return{id:((a=21)=>{let b="",c=a;for(;c--;)b+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return b})(),effect:d,type:b,predicate:c,pending:new Set,unsubscribe:()=>{throw Error(gC(22))}}},{withTypes:()=>gt}),gu=(a,b)=>{let{type:c,effect:d,predicate:e}=gs(b);return Array.from(a.values()).find(a=>("string"==typeof c?a.type===c:a.predicate===e)&&a.effect===d)},gv=a=>{a.pending.forEach(a=>{a.abort(gd)})},gw=(a,b,c)=>{try{a(b,c)}catch(a){setTimeout(()=>{throw a},0)}},gx=gp(fX(`${gr}/add`),{withTypes:()=>gx}),gy=fX(`${gr}/removeAll`),gz=gp(fX(`${gr}/remove`),{withTypes:()=>gz}),gA=(...a)=>{console.error(`${gr}/error`,...a)},gB=(a={})=>{let b=new Map,c=new Map,{extra:d,onError:e=gA}=a;gg(e,"onError");let f=a=>(a=>(a.unsubscribe=()=>b.delete(a.id),b.set(a.id,a),b=>{a.unsubscribe(),b?.cancelActive&&gv(a)}))(gu(b,a)??gt(a));gp(f,{withTypes:()=>f});let g=a=>{let c=gu(b,a);return c&&(c.unsubscribe(),a.cancelActive&&gv(c)),!!c};gp(g,{withTypes:()=>g});let h=async(a,g,h,i)=>{let j=new AbortController,k=((a,b)=>{let c=async(c,d)=>{gk(b);let e=()=>{},f=[new Promise((b,d)=>{let f=a({predicate:c,effect:(a,c)=>{c.unsubscribe(),b([a,c.getState(),c.getOriginalState()])}});e=()=>{f(),d()}})];null!=d&&f.push(new Promise(a=>setTimeout(a,d,null)));try{let a=await gl(b,Promise.race(f));return gk(b),a}finally{e()}};return(a,b)=>gi(c(a,b))})(f,j.signal),l=[];try{a.pending.add(j),(a=>{let b=c.get(a)??0;c.set(a,b+1)})(a),await Promise.resolve(a.effect(g,gp({},h,{getOriginalState:i,condition:(a,b)=>k(a,b).then(Boolean),take:k,delay:go(j.signal),pause:gn(j.signal),extra:d,signal:j.signal,fork:((a,b)=>(c,d)=>{gg(c,"taskExecutor");let e=new AbortController;gj(a,()=>e.abort(a.reason));let f=gm(async()=>{gk(a),gk(e.signal);let b=await c({pause:gn(e.signal),delay:go(e.signal),signal:e.signal});return gk(e.signal),b},()=>e.abort(gc));return d?.autoJoin&&b.push(f.catch(gh)),{result:gn(a)(f),cancel(){e.abort(gb)}}})(j.signal,l),unsubscribe:a.unsubscribe,subscribe:()=>{b.set(a.id,a)},cancelActiveListeners:()=>{a.pending.forEach((a,b,c)=>{a!==j&&(a.abort(gd),c.delete(a))})},cancel:()=>{j.abort(gd),a.pending.delete(j)},throwIfCancelled:()=>{gk(j.signal)}})))}catch(a){a instanceof gf||gw(e,a,{raisedBy:"effect"})}finally{await Promise.all(l),j.abort(ge),(a=>{let b=c.get(a)??1;1===b?c.delete(a):c.set(a,b-1)})(a),a.pending.delete(j)}},i=()=>{for(let a of c.keys())gv(a);b.clear()};return{middleware:a=>c=>d=>{let j;if(!fT(d))return c(d);if(gx.match(d))return f(d.payload);if(gy.match(d))return void i();if(gz.match(d))return g(d.payload);let k=a.getState(),l=()=>{if(k===gq)throw Error(gC(23));return k};try{if(j=c(d),b.size>0){let c=a.getState();for(let f of Array.from(b.values())){let b=!1;try{b=f.predicate(d,c,k)}catch(a){b=!1,gw(e,a,{raisedBy:"predicate"})}b&&h(f,d,a,l)}}}finally{k=gq}return j},startListening:f,stopListening:g,clearListeners:i}};function gC(a){return`Minified Redux Toolkit error #${a}; visit https://redux-toolkit.js.org/Errors?code=${a} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original");var gD=(a,b)=>{if(b&&Array.isArray(a)){var c=Number.parseInt(b,10);if(!em(c))return a[c]}},gE=f6({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:()=>void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:a=>{null==a.eventEmitter&&(a.eventEmitter=Symbol("rechartsEventEmitter"))}}}),gF=gE.reducer,{createEventEmitter:gG}=gE.actions;c(90478);var gH={notify(){},get:()=>[]},gI="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,gJ="undefined"!=typeof navigator&&"ReactNative"===navigator.product,gK=gI||gJ?aO.useLayoutEffect:aO.useEffect;function gL(a,b){return a===b?0!==a||0!==b||1/a==1/b:a!=a&&b!=b}Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var gM=Symbol.for("react-redux-context"),gN="undefined"!=typeof globalThis?globalThis:{},gO=function(){if(!aO.createContext)return{};let a=gN[gM]??=new Map,b=a.get(aO.createContext);return b||(b=aO.createContext(null),a.set(aO.createContext,b)),b}(),gP=function(a){let{children:b,context:c,serverState:d,store:e}=a,f=aO.useMemo(()=>{let a=function(a,b){let c,d=gH,e=0,f=!1;function g(){j.onStateChange&&j.onStateChange()}function h(){if(e++,!c){let b,e;c=a.subscribe(g),b=null,e=null,d={clear(){b=null,e=null},notify(){let a=b;for(;a;)a.callback(),a=a.next},get(){let a=[],c=b;for(;c;)a.push(c),c=c.next;return a},subscribe(a){let c=!0,d=e={callback:a,next:null,prev:e};return d.prev?d.prev.next=d:b=d,function(){c&&null!==b&&(c=!1,d.next?d.next.prev=d.prev:e=d.prev,d.prev?d.prev.next=d.next:b=d.next)}}}}}function i(){e--,c&&0===e&&(c(),c=void 0,d.clear(),d=gH)}let j={addNestedSub:function(a){h();let b=d.subscribe(a),c=!1;return()=>{c||(c=!0,b(),i())}},notifyNestedSubs:function(){d.notify()},handleChangeWrapper:g,isSubscribed:function(){return f},trySubscribe:function(){f||(f=!0,h())},tryUnsubscribe:function(){f&&(f=!1,i())},getListeners:()=>d};return j}(e);return{store:e,subscription:a,getServerState:d?()=>d:void 0}},[e,d]),g=aO.useMemo(()=>e.getState(),[e]);return gK(()=>{let{subscription:a}=f;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),g!==e.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[f,g]),aO.createElement((c||gO).Provider,{value:f},b)},gQ=Symbol.for("immer-nothing"),gR=Symbol.for("immer-draftable"),gS=Symbol.for("immer-state");function gT(a){throw Error(`[Immer] minified error nr: ${a}. Full error at: https://bit.ly/3cXEKWf`)}var gU=Object.getPrototypeOf;function gV(a){return!!a&&!!a[gS]}function gW(a){return!!a&&(gZ(a)||Array.isArray(a)||!!a[gR]||!!a.constructor?.[gR]||g2(a)||g3(a))}var gX=Object.prototype.constructor.toString(),gY=new WeakMap;function gZ(a){if(!a||"object"!=typeof a)return!1;let b=Object.getPrototypeOf(a);if(null===b||b===Object.prototype)return!0;let c=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;if(c===Object)return!0;if("function"!=typeof c)return!1;let d=gY.get(c);return void 0===d&&(d=Function.toString.call(c),gY.set(c,d)),d===gX}function g$(a,b,c=!0){0===g_(a)?(c?Reflect.ownKeys(a):Object.keys(a)).forEach(c=>{b(c,a[c],a)}):a.forEach((c,d)=>b(d,c,a))}function g_(a){let b=a[gS];return b?b.type_:Array.isArray(a)?1:g2(a)?2:3*!!g3(a)}function g0(a,b){return 2===g_(a)?a.has(b):Object.prototype.hasOwnProperty.call(a,b)}function g1(a,b,c){let d=g_(a);2===d?a.set(b,c):3===d?a.add(c):a[b]=c}function g2(a){return a instanceof Map}function g3(a){return a instanceof Set}function g4(a){return a.copy_||a.base_}function g5(a,b){if(g2(a))return new Map(a);if(g3(a))return new Set(a);if(Array.isArray(a))return Array.prototype.slice.call(a);let c=gZ(a);if(!0!==b&&("class_only"!==b||c)){let b=gU(a);return null!==b&&c?{...a}:Object.assign(Object.create(b),a)}{let b=Object.getOwnPropertyDescriptors(a);delete b[gS];let c=Reflect.ownKeys(b);for(let d=0;d<c.length;d++){let e=c[d],f=b[e];!1===f.writable&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(b[e]={configurable:!0,writable:!0,enumerable:f.enumerable,value:a[e]})}return Object.create(gU(a),b)}}function g6(a,b=!1){return g8(a)||gV(a)||!gW(a)||(g_(a)>1&&Object.defineProperties(a,{set:g7,add:g7,clear:g7,delete:g7}),Object.freeze(a),b&&Object.values(a).forEach(a=>g6(a,!0))),a}var g7={value:function(){gT(2)}};function g8(a){return null===a||"object"!=typeof a||Object.isFrozen(a)}var g9={};function ha(a){let b=g9[a];return b||gT(0,a),b}function hb(a,b){b&&(ha("Patches"),a.patches_=[],a.inversePatches_=[],a.patchListener_=b)}function hc(a){hd(a),a.drafts_.forEach(hf),a.drafts_=null}function hd(a){a===m_&&(m_=a.parent_)}function he(a){return m_={drafts_:[],parent_:m_,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function hf(a){let b=a[gS];0===b.type_||1===b.type_?b.revoke_():b.revoked_=!0}function hg(a,b){b.unfinalizedDrafts_=b.drafts_.length;let c=b.drafts_[0];return void 0!==a&&a!==c?(c[gS].modified_&&(hc(b),gT(4)),gW(a)&&(a=hh(b,a),b.parent_||hj(b,a)),b.patches_&&ha("Patches").generateReplacementPatches_(c[gS].base_,a,b.patches_,b.inversePatches_)):a=hh(b,c,[]),hc(b),b.patches_&&b.patchListener_(b.patches_,b.inversePatches_),a!==gQ?a:void 0}function hh(a,b,c){if(g8(b))return b;let d=a.immer_.shouldUseStrictIteration(),e=b[gS];if(!e)return g$(b,(d,f)=>hi(a,e,b,d,f,c),d),b;if(e.scope_!==a)return b;if(!e.modified_)return hj(a,e.base_,!0),e.base_;if(!e.finalized_){e.finalized_=!0,e.scope_.unfinalizedDrafts_--;let b=e.copy_,f=b,g=!1;3===e.type_&&(f=new Set(b),b.clear(),g=!0),g$(f,(d,f)=>hi(a,e,b,d,f,c,g),d),hj(a,b,!1),c&&a.patches_&&ha("Patches").generatePatches_(e,c,a.patches_,a.inversePatches_)}return e.copy_}function hi(a,b,c,d,e,f,g){if(null==e||"object"!=typeof e&&!g)return;let h=g8(e);if(!h||g){if(gV(e)){let g=hh(a,e,f&&b&&3!==b.type_&&!g0(b.assigned_,d)?f.concat(d):void 0);if(g1(c,d,g),!gV(g))return;a.canAutoFreeze_=!1}else g&&c.add(e);if(gW(e)&&!h){if(!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||b&&b.base_&&b.base_[d]===e&&h)return;hh(a,e),(!b||!b.scope_.parent_)&&"symbol"!=typeof d&&(g2(c)?c.has(d):Object.prototype.propertyIsEnumerable.call(c,d))&&hj(a,e)}}}function hj(a,b,c=!1){!a.parent_&&a.immer_.autoFreeze_&&a.canAutoFreeze_&&g6(b,c)}var hk={get(a,b){if(b===gS)return a;let c=g4(a);if(!g0(c,b)){var d=a,e=c,f=b;let g=hn(e,f);return g?"value"in g?g.value:g.get?.call(d.draft_):void 0}let g=c[b];return a.finalized_||!gW(g)?g:g===hm(a.base_,b)?(hp(a),a.copy_[b]=hr(g,a)):g},has:(a,b)=>b in g4(a),ownKeys:a=>Reflect.ownKeys(g4(a)),set(a,b,c){let d=hn(g4(a),b);if(d?.set)return d.set.call(a.draft_,c),!0;if(!a.modified_){let d=hm(g4(a),b),e=d?.[gS];if(e&&e.base_===c)return a.copy_[b]=c,a.assigned_[b]=!1,!0;if((c===d?0!==c||1/c==1/d:c!=c&&d!=d)&&(void 0!==c||g0(a.base_,b)))return!0;hp(a),ho(a)}return!!(a.copy_[b]===c&&(void 0!==c||b in a.copy_)||Number.isNaN(c)&&Number.isNaN(a.copy_[b]))||(a.copy_[b]=c,a.assigned_[b]=!0,!0)},deleteProperty:(a,b)=>(void 0!==hm(a.base_,b)||b in a.base_?(a.assigned_[b]=!1,hp(a),ho(a)):delete a.assigned_[b],a.copy_&&delete a.copy_[b],!0),getOwnPropertyDescriptor(a,b){let c=g4(a),d=Reflect.getOwnPropertyDescriptor(c,b);return d?{writable:!0,configurable:1!==a.type_||"length"!==b,enumerable:d.enumerable,value:c[b]}:d},defineProperty(){gT(11)},getPrototypeOf:a=>gU(a.base_),setPrototypeOf(){gT(12)}},hl={};function hm(a,b){let c=a[gS];return(c?g4(c):a)[b]}function hn(a,b){if(!(b in a))return;let c=gU(a);for(;c;){let a=Object.getOwnPropertyDescriptor(c,b);if(a)return a;c=gU(c)}}function ho(a){!a.modified_&&(a.modified_=!0,a.parent_&&ho(a.parent_))}function hp(a){a.copy_||(a.copy_=g5(a.base_,a.scope_.immer_.useStrictShallowCopy_))}g$(hk,(a,b)=>{hl[a]=function(){return arguments[0]=arguments[0][0],b.apply(this,arguments)}}),hl.deleteProperty=function(a,b){return hl.set.call(this,a,b,void 0)},hl.set=function(a,b,c){return hk.set.call(this,a[0],b,c,a[0])};var hq=class{constructor(a){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(a,b,c)=>{let d;if("function"==typeof a&&"function"!=typeof b){let c=b;b=a;let d=this;return function(a=c,...e){return d.produce(a,a=>b.call(this,a,...e))}}if("function"!=typeof b&&gT(6),void 0!==c&&"function"!=typeof c&&gT(7),gW(a)){let e=he(this),f=hr(a,void 0),g=!0;try{d=b(f),g=!1}finally{g?hc(e):hd(e)}return hb(e,c),hg(d,e)}if(a&&"object"==typeof a)gT(1,a);else{if(void 0===(d=b(a))&&(d=a),d===gQ&&(d=void 0),this.autoFreeze_&&g6(d,!0),c){let b=[],e=[];ha("Patches").generateReplacementPatches_(a,d,b,e),c(b,e)}return d}},this.produceWithPatches=(a,b)=>{let c,d;return"function"==typeof a?(b,...c)=>this.produceWithPatches(b,b=>a(b,...c)):[this.produce(a,b,(a,b)=>{c=a,d=b}),c,d]},"boolean"==typeof a?.autoFreeze&&this.setAutoFreeze(a.autoFreeze),"boolean"==typeof a?.useStrictShallowCopy&&this.setUseStrictShallowCopy(a.useStrictShallowCopy),"boolean"==typeof a?.useStrictIteration&&this.setUseStrictIteration(a.useStrictIteration)}createDraft(a){var b;gW(a)||gT(8),gV(a)&&(gV(b=a)||gT(10,b),a=function a(b){let c;if(!gW(b)||g8(b))return b;let d=b[gS],e=!0;if(d){if(!d.modified_)return d.base_;d.finalized_=!0,c=g5(b,d.scope_.immer_.useStrictShallowCopy_),e=d.scope_.immer_.shouldUseStrictIteration()}else c=g5(b,!0);return g$(c,(b,d)=>{g1(c,b,a(d))},e),d&&(d.finalized_=!1),c}(b));let c=he(this),d=hr(a,void 0);return d[gS].isManual_=!0,hd(c),d}finishDraft(a,b){let c=a&&a[gS];c&&c.isManual_||gT(9);let{scope_:d}=c;return hb(d,b),hg(void 0,d)}setAutoFreeze(a){this.autoFreeze_=a}setUseStrictShallowCopy(a){this.useStrictShallowCopy_=a}setUseStrictIteration(a){this.useStrictIteration_=a}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(a,b){let c;for(c=b.length-1;c>=0;c--){let d=b[c];if(0===d.path.length&&"replace"===d.op){a=d.value;break}}c>-1&&(b=b.slice(c+1));let d=ha("Patches").applyPatches_;return gV(a)?d(a,b):this.produce(a,a=>d(a,b))}};function hr(a,b){let c=g2(a)?ha("MapSet").proxyMap_(a,b):g3(a)?ha("MapSet").proxySet_(a,b):function(a,b){let c=Array.isArray(a),d={type_:+!!c,scope_:b?b.scope_:m_,modified_:!1,finalized_:!1,assigned_:{},parent_:b,base_:a,draft_:null,copy_:null,revoke_:null,isManual_:!1},e=d,f=hk;c&&(e=[d],f=hl);let{revoke:g,proxy:h}=Proxy.revocable(e,f);return d.draft_=h,d.revoke_=g,h}(a,b);return(b?b.scope_:m_).drafts_.push(c),c}new hq().produce;var hs={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},ht=f6({name:"tooltip",initialState:{itemInteraction:{click:hs,hover:hs},axisInteraction:{click:hs,hover:hs},keyboardInteraction:hs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(a,b){a.tooltipItemPayloads.push(b.payload)},prepare:f0()},replaceTooltipEntrySettings:{reducer(a,b){var{prev:c,next:d}=b.payload,e=fK(a).tooltipItemPayloads.indexOf(c);e>-1&&(a.tooltipItemPayloads[e]=d)},prepare:f0()},removeTooltipEntrySettings:{reducer(a,b){var c=fK(a).tooltipItemPayloads.indexOf(b.payload);c>-1&&a.tooltipItemPayloads.splice(c,1)},prepare:f0()},setTooltipSettingsState(a,b){a.settings=b.payload},setActiveMouseOverItemIndex(a,b){a.syncInteraction.active=!1,a.keyboardInteraction.active=!1,a.itemInteraction.hover.active=!0,a.itemInteraction.hover.index=b.payload.activeIndex,a.itemInteraction.hover.dataKey=b.payload.activeDataKey,a.itemInteraction.hover.graphicalItemId=b.payload.activeGraphicalItemId,a.itemInteraction.hover.coordinate=b.payload.activeCoordinate},mouseLeaveChart(a){a.itemInteraction.hover.active=!1,a.axisInteraction.hover.active=!1},mouseLeaveItem(a){a.itemInteraction.hover.active=!1},setActiveClickItemIndex(a,b){a.syncInteraction.active=!1,a.itemInteraction.click.active=!0,a.keyboardInteraction.active=!1,a.itemInteraction.click.index=b.payload.activeIndex,a.itemInteraction.click.dataKey=b.payload.activeDataKey,a.itemInteraction.click.graphicalItemId=b.payload.activeGraphicalItemId,a.itemInteraction.click.coordinate=b.payload.activeCoordinate},setMouseOverAxisIndex(a,b){a.syncInteraction.active=!1,a.axisInteraction.hover.active=!0,a.keyboardInteraction.active=!1,a.axisInteraction.hover.index=b.payload.activeIndex,a.axisInteraction.hover.dataKey=b.payload.activeDataKey,a.axisInteraction.hover.coordinate=b.payload.activeCoordinate},setMouseClickAxisIndex(a,b){a.syncInteraction.active=!1,a.keyboardInteraction.active=!1,a.axisInteraction.click.active=!0,a.axisInteraction.click.index=b.payload.activeIndex,a.axisInteraction.click.dataKey=b.payload.activeDataKey,a.axisInteraction.click.coordinate=b.payload.activeCoordinate},setSyncInteraction(a,b){a.syncInteraction=b.payload},setKeyboardInteraction(a,b){a.keyboardInteraction.active=b.payload.active,a.keyboardInteraction.index=b.payload.activeIndex,a.keyboardInteraction.coordinate=b.payload.activeCoordinate}}}),{addTooltipEntrySettings:hu,replaceTooltipEntrySettings:hv,removeTooltipEntrySettings:hw,setTooltipSettingsState:hx,setActiveMouseOverItemIndex:hy,mouseLeaveItem:hz,mouseLeaveChart:hA,setActiveClickItemIndex:hB,setMouseOverAxisIndex:hC,setMouseClickAxisIndex:hD,setSyncInteraction:hE,setKeyboardInteraction:hF}=ht.actions,hG=ht.reducer,hH=f6({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(a,b){if(a.chartData=b.payload,null==b.payload){a.dataStartIndex=0,a.dataEndIndex=0;return}b.payload.length>0&&a.dataEndIndex!==b.payload.length-1&&(a.dataEndIndex=b.payload.length-1)},setComputedData(a,b){a.computedData=b.payload},setDataStartEndIndexes(a,b){var{startIndex:c,endIndex:d}=b.payload;null!=c&&(a.dataStartIndex=c),null!=d&&(a.dataEndIndex=d)}}}),{setChartData:hI,setDataStartEndIndexes:hJ,setComputedData:hK}=hH.actions,hL=hH.reducer,hM=f6({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(a,b){a.layoutType=b.payload},setChartSize(a,b){a.width=b.payload.width,a.height=b.payload.height},setMargin(a,b){var c,d,e,f;a.margin.top=null!=(c=b.payload.top)?c:0,a.margin.right=null!=(d=b.payload.right)?d:0,a.margin.bottom=null!=(e=b.payload.bottom)?e:0,a.margin.left=null!=(f=b.payload.left)?f:0},setScale(a,b){a.scale=b.payload}}}),{setMargin:hN,setLayout:hO,setChartSize:hP,setScale:hQ}=hM.actions,hR=hM.reducer,hS=a=>Array.isArray(a)?a:[a],hT=0,hU=class{revision=hT;_value;_lastValue;_isEqual=hV;constructor(a,b=hV){this._value=this._lastValue=a,this._isEqual=b}get value(){return this._value}set value(a){this.value!==a&&(this._value=a,this.revision=++hT)}};function hV(a,b){return a===b}function hW(a){return a instanceof hU||console.warn("Not a valid cell! ",a),a.value}var hX=(a,b)=>!1;function hY(){return function(a,b=hV){return new hU(null,b)}(0,hX)}var hZ=a=>{let b=a.collectionTag;null===b&&(b=a.collectionTag=hY()),hW(b)};Symbol();var h$=0,h_=Object.getPrototypeOf({}),h0=class{constructor(a){this.value=a,this.value=a,this.tag.value=a}proxy=new Proxy(this,h1);tag=hY();tags={};children={};collectionTag=null;id=h$++},h1={get:(a,b)=>(function(){let{value:c}=a,d=Reflect.get(c,b);if("symbol"==typeof b||b in h_)return d;if("object"==typeof d&&null!==d){var e;let c=a.children[b];return void 0===c&&(c=a.children[b]=Array.isArray(e=d)?new h2(e):new h0(e)),c.tag&&hW(c.tag),c.proxy}{let c=a.tags[b];return void 0===c&&((c=a.tags[b]=hY()).value=d),hW(c),d}})(),ownKeys:a=>(hZ(a),Reflect.ownKeys(a.value)),getOwnPropertyDescriptor:(a,b)=>Reflect.getOwnPropertyDescriptor(a.value,b),has:(a,b)=>Reflect.has(a.value,b)},h2=class{constructor(a){this.value=a,this.value=a,this.tag.value=a}proxy=new Proxy([this],h3);tag=hY();tags={};children={};collectionTag=null;id=h$++},h3={get:([a],b)=>("length"===b&&hZ(a),h1.get(a,b)),ownKeys:([a])=>h1.ownKeys(a),getOwnPropertyDescriptor:([a],b)=>h1.getOwnPropertyDescriptor(a,b),has:([a],b)=>h1.has(a,b)},h4="undefined"!=typeof WeakRef?WeakRef:class{constructor(a){this.value=a}deref(){return this.value}};function h5(){return{s:0,v:void 0,o:null,p:null}}function h6(a,b={}){let c,d=h5(),{resultEqualityCheck:e}=b,f=0;function g(){let b,g=d,{length:h}=arguments;for(let a=0;a<h;a++){let b=arguments[a];if("function"==typeof b||"object"==typeof b&&null!==b){let a=g.o;null===a&&(g.o=a=new WeakMap);let c=a.get(b);void 0===c?(g=h5(),a.set(b,g)):g=c}else{let a=g.p;null===a&&(g.p=a=new Map);let c=a.get(b);void 0===c?(g=h5(),a.set(b,g)):g=c}}let i=g;if(1===g.s)b=g.v;else if(b=a.apply(null,arguments),f++,e){let a=c?.deref?.()??c;null!=a&&e(a,b)&&(b=a,0!==f&&f--),c="object"==typeof b&&null!==b||"function"==typeof b?new h4(b):b}return i.s=1,i.v=b,b}return g.clearCache=()=>{d=h5(),g.resetResultsCount()},g.resultsCount=()=>f,g.resetResultsCount=()=>{f=0},g}var h7=function(a,...b){let c="function"==typeof a?{memoize:a,memoizeOptions:b}:a,d=(...a)=>{let b,d=0,e=0,f={},g=a.pop();"object"==typeof g&&(f=g,g=a.pop()),function(a,b=`expected a function, instead received ${typeof a}`){if("function"!=typeof a)throw TypeError(b)}(g,`createSelector expects an output function after the inputs, but received: [${typeof g}]`);let{memoize:h,memoizeOptions:i=[],argsMemoize:j=h6,argsMemoizeOptions:k=[],devModeChecks:l={}}={...c,...f},m=hS(i),n=hS(k),o=function(a){let b=Array.isArray(a[0])?a[0]:a;return!function(a,b="expected all items to be functions, instead received the following types: "){if(!a.every(a=>"function"==typeof a)){let c=a.map(a=>"function"==typeof a?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw TypeError(`${b}[${c}]`)}}(b,"createSelector expects all input-selectors to be functions, but received the following types: "),b}(a),p=h(function(){return d++,g.apply(null,arguments)},...m);return Object.assign(j(function(){e++;let a=function(a,b){let c=[],{length:d}=a;for(let e=0;e<d;e++)c.push(a[e].apply(null,b));return c}(o,arguments);return b=p.apply(null,a)},...n),{resultFunc:g,memoizedResultFunc:p,dependencies:o,dependencyRecomputations:()=>e,resetDependencyRecomputations:()=>{e=0},lastResult:()=>b,recomputations:()=>d,resetRecomputations:()=>{d=0},memoize:h,argsMemoize:j})};return Object.assign(d,{withTypes:()=>d}),d}(h6),h8=Object.assign((a,b=h7)=>{!function(a,b=`expected an object, instead received ${typeof a}`){if("object"!=typeof a)throw TypeError(b)}(a,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof a}`);let c=Object.keys(a);return b(c.map(b=>a[b]),(...a)=>a.reduce((a,b,d)=>(a[c[d]]=b,a),{}))},{withTypes:()=>h8}),h9=c(93350),ia=(0,aO.createContext)(null),ib=a=>a,ic=()=>{var a=(0,aO.useContext)(ia);return a?a.store.dispatch:ib},id=()=>{},ie=()=>id,ig=(a,b)=>a===b;function ih(a){var b=(0,aO.useContext)(ia),c=(0,aO.useMemo)(()=>b?b=>{if(null!=b)return a(b)}:id,[b,a]);return(0,h9.useSyncExternalStoreWithSelector)(b?b.subscription.addNestedSub:ie,b?b.store.getState:id,b?b.store.getState:id,c,ig)}var ii=c(45608),ij=c.n(ii),ik=a=>a.legend.settings;function il(a,b){if((e=a.length)>1)for(var c,d,e,f=1,g=a[b[0]],h=g.length;f<e;++f)for(d=g,g=a[b[f]],c=0;c<h;++c)g[c][1]+=g[c][0]=isNaN(d[c][1])?d[c][0]:d[c][1]}function im(a){return"object"==typeof a&&"length"in a?a:Array.from(a)}function io(a){return function(){return a}}function ip(a){for(var b=a.length,c=Array(b);--b>=0;)c[b]=b;return c}function iq(a,b){return a[b]}function ir(a){let b=[];return b.key=a,b}function is(a,b,c){return Array.isArray(a)&&a&&b+c!==0?a.slice(b,c+1):a}function it(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function iu(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?it(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):it(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function iv(a,b,c){return null==a||null==b?c:ep(b)?ei()(a,b,c):"function"==typeof b?b(a):c}h7([a=>a.legend.payload,ik],(a,b)=>{var{itemSorter:c}=b,d=a.flat(1);return c?ij()(d,c):d}),Array.prototype.slice;var iw=(a,b)=>"horizontal"===a&&"xAxis"===b||"vertical"===a&&"yAxis"===b||"centric"===a&&"angleAxis"===b||"radial"===a&&"radiusAxis"===b,ix=(a,b,c,d)=>{if(d)return a.map(a=>a.coordinate);var e,f,g=a.map(a=>(a.coordinate===b&&(e=!0),a.coordinate===c&&(f=!0),a.coordinate));return e||g.push(b),f||g.push(c),g},iy=(a,b,c)=>{if(!a)return null;var{duplicateDomain:d,type:e,range:f,scale:g,realScaleType:h,isCategorical:i,categoricalDomain:j,tickCount:k,ticks:l,niceTicks:m,axisType:n}=a;if(!g)return null;var o="scaleBand"===h&&g.bandwidth?g.bandwidth()/2:2,p=(b||c)&&"category"===e&&g.bandwidth?g.bandwidth()/o:0;return(p="angleAxis"===n&&f&&f.length>=2?2*el(f[0]-f[1])*p:p,b&&(l||m))?(l||m||[]).map((a,b)=>{var c=d?d.indexOf(a):a,e=g.map(c);return eG(e)?{coordinate:e+p,value:a,offset:p,index:b}:null}).filter(ex):i&&j?j.map((a,b)=>{var c=g.map(a);return eG(c)?{coordinate:c+p,value:a,index:b,offset:p}:null}).filter(ex):g.ticks&&!c&&null!=k?g.ticks(k).map((a,b)=>{var c=g.map(a);return eG(c)?{coordinate:c+p,value:a,index:b,offset:p}:null}).filter(ex):g.domain().map((a,b)=>{var c=g.map(a);return eG(c)?{coordinate:c+p,value:d?d[a]:a,index:b,offset:p}:null}).filter(ex)},iz={sign:a=>{var b,c=a.length;if(!(c<=0)){var d=null==(b=a[0])?void 0:b.length;if(null!=d&&!(d<=0))for(var e=0;e<d;++e)for(var f=0,g=0,h=0;h<c;++h){var i=a[h],j=null==i?void 0:i[e];if(null!=j){var k=j[1],l=j[0],m=em(k)?l:k;m>=0?(j[0]=f,f+=m,j[1]=f):(j[0]=g,g+=m,j[1]=g)}}}},expand:function(a,b){if((d=a.length)>0){for(var c,d,e,f=0,g=a[0].length;f<g;++f){for(e=c=0;c<d;++c)e+=a[c][f][1]||0;if(e)for(c=0;c<d;++c)a[c][f][1]/=e}il(a,b)}},none:il,silhouette:function(a,b){if((c=a.length)>0){for(var c,d=0,e=a[b[0]],f=e.length;d<f;++d){for(var g=0,h=0;g<c;++g)h+=a[g][d][1]||0;e[d][1]+=e[d][0]=-h/2}il(a,b)}},wiggle:function(a,b){if((e=a.length)>0&&(d=(c=a[b[0]]).length)>0){for(var c,d,e,f=0,g=1;g<d;++g){for(var h=0,i=0,j=0;h<e;++h){for(var k=a[b[h]],l=k[g][1]||0,m=(l-(k[g-1][1]||0))/2,n=0;n<h;++n){var o=a[b[n]];m+=(o[g][1]||0)-(o[g-1][1]||0)}i+=l,j+=m*l}c[g-1][1]+=c[g-1][0]=f,i&&(f-=j/i)}c[g-1][1]+=c[g-1][0]=f,il(a,b)}},positive:a=>{var b,c=a.length;if(!(c<=0)){var d=null==(b=a[0])?void 0:b.length;if(null!=d&&!(d<=0))for(var e=0;e<d;++e)for(var f=0,g=0;g<c;++g){var h=a[g],i=null==h?void 0:h[e];if(null!=i){var j=em(i[1])?i[0]:i[1];j>=0?(i[0]=f,f+=j,i[1]=f):(i[0]=0,i[1]=0)}}}}};function iA(a){var{axis:b,ticks:c,bandSize:d,entry:e,index:f,dataKey:g}=a;if("category"===b.type){if(!b.allowDuplicatedCategory&&b.dataKey&&null!=e[b.dataKey]){var h=ev(c,"value",e[b.dataKey]);if(h)return h.coordinate+d/2}return null!=c&&c[f]?c[f].coordinate+d/2:null}var i=iv(e,null==g?b.dataKey:g),j=b.scale.map(i);return eo(j)?j:null}var iB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iD=(a,b,c)=>{if(a&&a.scale&&a.scale.bandwidth){var d=a.scale.bandwidth();if(!c||d>0)return d}if(a&&b&&b.length>=2){for(var e=ij()(b,a=>a.coordinate),f=1/0,g=1,h=e.length;g<h;g++){var i=e[g],j=e[g-1];f=Math.min(((null==i?void 0:i.coordinate)||0)-((null==j?void 0:j.coordinate)||0),f)}return f===1/0?0:f}return c?void 0:0};function iE(a){var{tooltipEntrySettings:b,dataKey:c,payload:d,value:e,name:f}=a;return iu(iu({},b),{},{dataKey:c,payload:d,value:e,name:f})}function iF(a,b){return a?String(a):"string"==typeof b?b:void 0}var iG=a=>a.layout.width,iH=a=>a.layout.height,iI=a=>a.layout.scale,iJ=a=>a.layout.margin,iK=h7(a=>a.cartesianAxis.xAxis,a=>Object.values(a)),iL=h7(a=>a.cartesianAxis.yAxis,a=>Object.values(a));function iM(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function iN(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?iM(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):iM(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var iO=h7([iG,iH,iJ,a=>a.brush.height,function(a){return iL(a).reduce((a,b)=>"left"!==b.orientation||b.mirror||b.hide?a:a+("number"==typeof b.width?b.width:60),0)},function(a){return iL(a).reduce((a,b)=>"right"!==b.orientation||b.mirror||b.hide?a:a+("number"==typeof b.width?b.width:60),0)},function(a){return iK(a).reduce((a,b)=>"top"!==b.orientation||b.mirror||b.hide?a:a+b.height,0)},function(a){return iK(a).reduce((a,b)=>"bottom"!==b.orientation||b.mirror||b.hide?a:a+b.height,0)},ik,a=>a.legend.size],(a,b,c,d,e,f,g,h,i,j)=>{var k={left:(c.left||0)+e,right:(c.right||0)+f},l=iN(iN({},{top:(c.top||0)+g,bottom:(c.bottom||0)+h}),k),m=l.bottom;l.bottom+=d;var n=a-(l=((a,b,c)=>{if(b&&c){var{width:d,height:e}=c,{align:f,verticalAlign:g,layout:h}=b;if(("vertical"===h||"horizontal"===h&&"middle"===g)&&"center"!==f&&eo(a[f]))return iu(iu({},a),{},{[f]:a[f]+(d||0)});if(("horizontal"===h||"vertical"===h&&"center"===f)&&"middle"!==g&&eo(a[g]))return iu(iu({},a),{},{[g]:a[g]+(e||0)})}return a})(l,i,j)).left-l.right,o=b-l.top-l.bottom;return iN(iN({brushBottom:m},l),{},{width:Math.max(n,0),height:Math.max(o,0)})}),iP=h7(iO,a=>({x:a.left,y:a.top,width:a.width,height:a.height})),iQ=h7(iG,iH,(a,b)=>({x:0,y:0,width:a,height:b})),iR=(0,aO.createContext)(null),iS=()=>null!=(0,aO.useContext)(iR),iT=a=>a.brush,iU=h7([iT,iO,iJ],(a,b,c)=>({height:a.height,x:eo(a.x)?a.x:b.left,y:eo(a.y)?a.y:b.top+b.height+b.brushBottom-((null==c?void 0:c.bottom)||0),width:eo(a.width)?a.width:b.width}));function iV(a){if(a)return{x:a.x,y:a.y,upperWidth:"upperWidth"in a?a.upperWidth:a.width,lowerWidth:"lowerWidth"in a?a.lowerWidth:a.width,width:a.width,height:a.height}}var iW=()=>{var a,b=iS(),c=ih(iP),d=ih(iU),e=null==(a=ih(iT))?void 0:a.padding;return b&&d&&e?{width:d.width-e.left-e.right,height:d.height-e.top-e.bottom,x:e.left,y:e.top}:c},iX={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iY=()=>{var a;return null!=(a=ih(iO))?a:iX},iZ=()=>ih(iG),i$=()=>ih(iH),i_=a=>a.layout.layoutType,i0=()=>ih(i_),i1=()=>{var a=i0();if("horizontal"===a||"vertical"===a)return a},i2=a=>{var b=a.layout.layoutType;if("centric"===b||"radial"===b)return b},i3=a=>{var b=ic(),c=iS(),{width:d,height:e}=a,f=eN(),g=d,h=e;return f&&(g=f.width>0?f.width:d,h=f.height>0?f.height:e),(0,aO.useEffect)(()=>{!c&&eH(g)&&eH(h)&&b(hP({width:g,height:h}))},[b,c,g,h]),null},i4=c(9356),i5=c.n(i4);function i6(a,b){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(b).domain(a)}return this}function i7(a,b){switch(arguments.length){case 0:break;case 1:"function"==typeof a?this.interpolator(a):this.range(a);break;default:this.domain(a),"function"==typeof b?this.interpolator(b):this.range(b)}return this}class i8 extends Map{constructor(a,b=ja){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:b}}),null!=a)for(let[b,c]of a)this.set(b,c)}get(a){return super.get(i9(this,a))}has(a){return super.has(i9(this,a))}set(a,b){return super.set(function({_intern:a,_key:b},c){let d=b(c);return a.has(d)?a.get(d):(a.set(d,c),c)}(this,a),b)}delete(a){return super.delete(function({_intern:a,_key:b},c){let d=b(c);return a.has(d)&&(c=a.get(d),a.delete(d)),c}(this,a))}}function i9({_intern:a,_key:b},c){let d=b(c);return a.has(d)?a.get(d):c}function ja(a){return null!==a&&"object"==typeof a?a.valueOf():a}let jb=Symbol("implicit");function jc(){var a=new i8,b=[],c=[],d=jb;function e(e){let f=a.get(e);if(void 0===f){if(d!==jb)return d;a.set(e,f=b.push(e)-1)}return c[f%c.length]}return e.domain=function(c){if(!arguments.length)return b.slice();for(let d of(b=[],a=new i8,c))a.has(d)||a.set(d,b.push(d)-1);return e},e.range=function(a){return arguments.length?(c=Array.from(a),e):c.slice()},e.unknown=function(a){return arguments.length?(d=a,e):d},e.copy=function(){return jc(b,c).unknown(d)},i6.apply(e,arguments),e}function jd(){var a,b,c=jc().unknown(void 0),d=c.domain,e=c.range,f=0,g=1,h=!1,i=0,j=0,k=.5;function l(){var c=d().length,l=g<f,m=l?g:f,n=l?f:g;a=(n-m)/Math.max(1,c-i+2*j),h&&(a=Math.floor(a)),m+=(n-m-a*(c-i))*k,b=a*(1-i),h&&(m=Math.round(m),b=Math.round(b));var o=(function(a,b,c){a*=1,b*=1,c=(e=arguments.length)<2?(b=a,a=0,1):e<3?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=Array(e);++d<e;)f[d]=a+d*c;return f})(c).map(function(b){return m+a*b});return e(l?o.reverse():o)}return delete c.unknown,c.domain=function(a){return arguments.length?(d(a),l()):d()},c.range=function(a){return arguments.length?([f,g]=a,f*=1,g*=1,l()):[f,g]},c.rangeRound=function(a){return[f,g]=a,f*=1,g*=1,h=!0,l()},c.bandwidth=function(){return b},c.step=function(){return a},c.round=function(a){return arguments.length?(h=!!a,l()):h},c.padding=function(a){return arguments.length?(i=Math.min(1,j=+a),l()):i},c.paddingInner=function(a){return arguments.length?(i=Math.min(1,a),l()):i},c.paddingOuter=function(a){return arguments.length?(j=+a,l()):j},c.align=function(a){return arguments.length?(k=Math.max(0,Math.min(1,a)),l()):k},c.copy=function(){return jd(d(),[f,g]).round(h).paddingInner(i).paddingOuter(j).align(k)},i6.apply(l(),arguments)}function je(){return function a(b){var c=b.copy;return b.padding=b.paddingOuter,delete b.paddingInner,delete b.paddingOuter,b.copy=function(){return a(c())},b}(jd.apply(null,arguments).paddingInner(1))}let jf=Math.sqrt(50),jg=Math.sqrt(10),jh=Math.sqrt(2);function ji(a,b,c){let d,e,f,g=(b-a)/Math.max(0,c),h=Math.floor(Math.log10(g)),i=g/Math.pow(10,h),j=i>=jf?10:i>=jg?5:i>=jh?2:1;return(h<0?(d=Math.round(a*(f=Math.pow(10,-h)/j)),e=Math.round(b*f),d/f<a&&++d,e/f>b&&--e,f=-f):(d=Math.round(a/(f=Math.pow(10,h)*j)),e=Math.round(b/f),d*f<a&&++d,e*f>b&&--e),e<d&&.5<=c&&c<2)?ji(a,b,2*c):[d,e,f]}function jj(a,b,c){if(b*=1,a*=1,!((c*=1)>0))return[];if(a===b)return[a];let d=b<a,[e,f,g]=d?ji(b,a,c):ji(a,b,c);if(!(f>=e))return[];let h=f-e+1,i=Array(h);if(d)if(g<0)for(let a=0;a<h;++a)i[a]=-((f-a)/g);else for(let a=0;a<h;++a)i[a]=(f-a)*g;else if(g<0)for(let a=0;a<h;++a)i[a]=-((e+a)/g);else for(let a=0;a<h;++a)i[a]=(e+a)*g;return i}function jk(a,b,c){return ji(a*=1,b*=1,c*=1)[2]}function jl(a,b,c){b*=1,a*=1,c*=1;let d=b<a,e=d?jk(b,a,c):jk(a,b,c);return(d?-1:1)*(e<0?-(1/e):e)}function jm(a,b){return null==a||null==b?NaN:a<b?-1:a>b?1:a>=b?0:NaN}function jn(a,b){return null==a||null==b?NaN:b<a?-1:b>a?1:b>=a?0:NaN}function jo(a){let b,c,d;function e(a,d,f=0,g=a.length){if(f<g){if(0!==b(d,d))return g;do{let b=f+g>>>1;0>c(a[b],d)?f=b+1:g=b}while(f<g)}return f}return 2!==a.length?(b=jm,c=(b,c)=>jm(a(b),c),d=(b,c)=>a(b)-c):(b=a===jm||a===jn?a:jp,c=a,d=a),{left:e,center:function(a,b,c=0,f=a.length){let g=e(a,b,c,f-1);return g>c&&d(a[g-1],b)>-d(a[g],b)?g-1:g},right:function(a,d,e=0,f=a.length){if(e<f){if(0!==b(d,d))return f;do{let b=e+f>>>1;0>=c(a[b],d)?e=b+1:f=b}while(e<f)}return e}}}function jp(){return 0}function jq(a){return null===a?NaN:+a}let jr=jo(jm),js=jr.right;function jt(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function ju(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function jv(){}jr.left,jo(jq).center;var jw="\\s*([+-]?\\d+)\\s*",jx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jz=/^#([0-9a-f]{3,8})$/,jA=RegExp(`^rgb\\(${jw},${jw},${jw}\\)$`),jB=RegExp(`^rgb\\(${jy},${jy},${jy}\\)$`),jC=RegExp(`^rgba\\(${jw},${jw},${jw},${jx}\\)$`),jD=RegExp(`^rgba\\(${jy},${jy},${jy},${jx}\\)$`),jE=RegExp(`^hsl\\(${jx},${jy},${jy}\\)$`),jF=RegExp(`^hsla\\(${jx},${jy},${jy},${jx}\\)$`),jG={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function jH(){return this.rgb().formatHex()}function jI(){return this.rgb().formatRgb()}function jJ(a){var b,c;return a=(a+"").trim().toLowerCase(),(b=jz.exec(a))?(c=b[1].length,b=parseInt(b[1],16),6===c?jK(b):3===c?new jN(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1):8===c?jL(b>>24&255,b>>16&255,b>>8&255,(255&b)/255):4===c?jL(b>>12&15|b>>8&240,b>>8&15|b>>4&240,b>>4&15|240&b,((15&b)<<4|15&b)/255):null):(b=jA.exec(a))?new jN(b[1],b[2],b[3],1):(b=jB.exec(a))?new jN(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=jC.exec(a))?jL(b[1],b[2],b[3],b[4]):(b=jD.exec(a))?jL(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=jE.exec(a))?jT(b[1],b[2]/100,b[3]/100,1):(b=jF.exec(a))?jT(b[1],b[2]/100,b[3]/100,b[4]):jG.hasOwnProperty(a)?jK(jG[a]):"transparent"===a?new jN(NaN,NaN,NaN,0):null}function jK(a){return new jN(a>>16&255,a>>8&255,255&a,1)}function jL(a,b,c,d){return d<=0&&(a=b=c=NaN),new jN(a,b,c,d)}function jM(a,b,c,d){var e;return 1==arguments.length?((e=a)instanceof jv||(e=jJ(e)),e)?new jN((e=e.rgb()).r,e.g,e.b,e.opacity):new jN:new jN(a,b,c,null==d?1:d)}function jN(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function jO(){return`#${jS(this.r)}${jS(this.g)}${jS(this.b)}`}function jP(){let a=jQ(this.opacity);return`${1===a?"rgb(":"rgba("}${jR(this.r)}, ${jR(this.g)}, ${jR(this.b)}${1===a?")":`, ${a})`}`}function jQ(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function jR(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function jS(a){return((a=jR(a))<16?"0":"")+a.toString(16)}function jT(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new jV(a,b,c,d)}function jU(a){if(a instanceof jV)return new jV(a.h,a.s,a.l,a.opacity);if(a instanceof jv||(a=jJ(a)),!a)return new jV;if(a instanceof jV)return a;var b=(a=a.rgb()).r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;return h?(g=b===f?(c-d)/h+(c<d)*6:c===f?(d-b)/h+2:(b-c)/h+4,h/=i<.5?f+e:2-f-e,g*=60):h=i>0&&i<1?0:g,new jV(g,h,i,a.opacity)}function jV(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function jW(a){return(a=(a||0)%360)<0?a+360:a}function jX(a){return Math.max(0,Math.min(1,a||0))}function jY(a,b,c){return(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)*255}function jZ(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}jt(jv,jJ,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:jH,formatHex:jH,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return jU(this).formatHsl()},formatRgb:jI,toString:jI}),jt(jN,jM,ju(jv,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new jN(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new jN(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new jN(jR(this.r),jR(this.g),jR(this.b),jQ(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jO,formatHex:jO,formatHex8:function(){return`#${jS(this.r)}${jS(this.g)}${jS(this.b)}${jS((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:jP,toString:jP})),jt(jV,function(a,b,c,d){return 1==arguments.length?jU(a):new jV(a,b,c,null==d?1:d)},ju(jv,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new jV(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new jV(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*b,e=2*c-d;return new jN(jY(a>=240?a-240:a+120,e,d),jY(a,e,d),jY(a<120?a+240:a-120,e,d),this.opacity)},clamp(){return new jV(jW(this.h),jX(this.s),jX(this.l),jQ(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let a=jQ(this.opacity);return`${1===a?"hsl(":"hsla("}${jW(this.h)}, ${100*jX(this.s)}%, ${100*jX(this.l)}%${1===a?")":`, ${a})`}`}}));let j$=a=>()=>a;function j_(a,b){var c=b-a;return c?function(b){return a+b*c}:j$(isNaN(a)?b:a)}let j0=function a(b){var c,d=1==(c=+b)?j_:function(a,b){var d,e,f;return b-a?(d=a,e=b,d=Math.pow(d,f=c),e=Math.pow(e,f)-d,f=1/f,function(a){return Math.pow(d+a*e,f)}):j$(isNaN(a)?b:a)};function e(a,b){var c=d((a=jM(a)).r,(b=jM(b)).r),e=d(a.g,b.g),f=d(a.b,b.b),g=j_(a.opacity,b.opacity);return function(b){return a.r=c(b),a.g=e(b),a.b=f(b),a.opacity=g(b),a+""}}return e.gamma=a,e}(1);function j1(a){return function(b){var c,d,e=b.length,f=Array(e),g=Array(e),h=Array(e);for(c=0;c<e;++c)d=jM(b[c]),f[c]=d.r||0,g[c]=d.g||0,h[c]=d.b||0;return f=a(f),g=a(g),h=a(h),d.opacity=1,function(a){return d.r=f(a),d.g=g(a),d.b=h(a),d+""}}}function j2(a,b){return a*=1,b*=1,function(c){return a*(1-c)+b*c}}j1(function(a){var b=a.length-1;return function(c){var d=c<=0?c=0:c>=1?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1],g=d>0?a[d-1]:2*e-f,h=d<b-1?a[d+2]:2*f-e;return jZ((c-d/b)*b,g,e,f,h)}}),j1(function(a){var b=a.length;return function(c){var d=Math.floor(((c%=1)<0?++c:c)*b),e=a[(d+b-1)%b],f=a[d%b],g=a[(d+1)%b],h=a[(d+2)%b];return jZ((c-d/b)*b,e,f,g,h)}});var j3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,j4=RegExp(j3.source,"g");function j5(a,b){var c,d,e=typeof b;return null==b||"boolean"===e?j$(b):("number"===e?j2:"string"===e?(d=jJ(b))?(b=d,j0):function(a,b){var c,d,e,f,g,h=j3.lastIndex=j4.lastIndex=0,i=-1,j=[],k=[];for(a+="",b+="";(e=j3.exec(a))&&(f=j4.exec(b));)(g=f.index)>h&&(g=b.slice(h,g),j[i]?j[i]+=g:j[++i]=g),(e=e[0])===(f=f[0])?j[i]?j[i]+=f:j[++i]=f:(j[++i]=null,k.push({i:i,x:j2(e,f)})),h=j4.lastIndex;return h<b.length&&(g=b.slice(h),j[i]?j[i]+=g:j[++i]=g),j.length<2?k[0]?(c=k[0].x,function(a){return c(a)+""}):(d=b,function(){return d}):(b=k.length,function(a){for(var c,d=0;d<b;++d)j[(c=k[d]).i]=c.x(a);return j.join("")})}:b instanceof jJ?j0:b instanceof Date?function(a,b){var c=new Date;return a*=1,b*=1,function(d){return c.setTime(a*(1-d)+b*d),c}}:!ArrayBuffer.isView(c=b)||c instanceof DataView?Array.isArray(b)?function(a,b){var c,d=b?b.length:0,e=a?Math.min(d,a.length):0,f=Array(e),g=Array(d);for(c=0;c<e;++c)f[c]=j5(a[c],b[c]);for(;c<d;++c)g[c]=b[c];return function(a){for(c=0;c<e;++c)g[c]=f[c](a);return g}}:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?function(a,b){var c,d={},e={};for(c in(null===a||"object"!=typeof a)&&(a={}),(null===b||"object"!=typeof b)&&(b={}),b)c in a?d[c]=j5(a[c],b[c]):e[c]=b[c];return function(a){for(c in d)e[c]=d[c](a);return e}}:j2:function(a,b){b||(b=[]);var c,d=a?Math.min(b.length,a.length):0,e=b.slice();return function(f){for(c=0;c<d;++c)e[c]=a[c]*(1-f)+b[c]*f;return e}})(a,b)}function j6(a,b){return a*=1,b*=1,function(c){return Math.round(a*(1-c)+b*c)}}function j7(a){return+a}var j8=[0,1];function j9(a){return a}function ka(a,b){var c;return(b-=a*=1)?function(c){return(c-a)/b}:(c=isNaN(b)?NaN:.5,function(){return c})}function kb(a,b,c){var d=a[0],e=a[1],f=b[0],g=b[1];return e<d?(d=ka(e,d),f=c(g,f)):(d=ka(d,e),f=c(f,g)),function(a){return f(d(a))}}function kc(a,b,c){var d=Math.min(a.length,b.length)-1,e=Array(d),f=Array(d),g=-1;for(a[d]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<d;)e[g]=ka(a[g],a[g+1]),f[g]=c(b[g],b[g+1]);return function(b){var c=js(a,b,1,d)-1;return f[c](e[c](b))}}function kd(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function ke(){var a,b,c,d,e,f,g=j8,h=j8,i=j5,j=j9;function k(){var a,b,c,i=Math.min(g.length,h.length);return j!==j9&&(a=g[0],b=g[i-1],a>b&&(c=a,a=b,b=c),j=function(c){return Math.max(a,Math.min(b,c))}),d=i>2?kc:kb,e=f=null,l}function l(b){return null==b||isNaN(b*=1)?c:(e||(e=d(g.map(a),h,i)))(a(j(b)))}return l.invert=function(c){return j(b((f||(f=d(h,g.map(a),j2)))(c)))},l.domain=function(a){return arguments.length?(g=Array.from(a,j7),k()):g.slice()},l.range=function(a){return arguments.length?(h=Array.from(a),k()):h.slice()},l.rangeRound=function(a){return h=Array.from(a),i=j6,k()},l.clamp=function(a){return arguments.length?(j=!!a||j9,k()):j!==j9},l.interpolate=function(a){return arguments.length?(i=a,k()):i},l.unknown=function(a){return arguments.length?(c=a,l):c},function(c,d){return a=c,b=d,k()}}function kf(){return ke()(j9,j9)}var kg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kh(a){var b;if(!(b=kg.exec(a)))throw Error("invalid format: "+a);return new ki({fill:b[1],align:b[2],sign:b[3],symbol:b[4],zero:b[5],width:b[6],comma:b[7],precision:b[8]&&b[8].slice(1),trim:b[9],type:b[10]})}function ki(a){this.fill=void 0===a.fill?" ":a.fill+"",this.align=void 0===a.align?">":a.align+"",this.sign=void 0===a.sign?"-":a.sign+"",this.symbol=void 0===a.symbol?"":a.symbol+"",this.zero=!!a.zero,this.width=void 0===a.width?void 0:+a.width,this.comma=!!a.comma,this.precision=void 0===a.precision?void 0:+a.precision,this.trim=!!a.trim,this.type=void 0===a.type?"":a.type+""}function kj(a,b){if(!isFinite(a)||0===a)return null;var c=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e"),d=a.slice(0,c);return[d.length>1?d[0]+d.slice(2):d,+a.slice(c+1)]}function kk(a){return(a=kj(Math.abs(a)))?a[1]:NaN}function kl(a,b){var c=kj(a,b);if(!c)return a+"";var d=c[0],e=c[1];return e<0?"0."+Array(-e).join("0")+d:d.length>e+1?d.slice(0,e+1)+"."+d.slice(e+1):d+Array(e-d.length+2).join("0")}kh.prototype=ki.prototype,ki.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let km={"%":(a,b)=>(100*a).toFixed(b),b:a=>Math.round(a).toString(2),c:a=>a+"",d:function(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)},e:(a,b)=>a.toExponential(b),f:(a,b)=>a.toFixed(b),g:(a,b)=>a.toPrecision(b),o:a=>Math.round(a).toString(8),p:(a,b)=>kl(100*a,b),r:kl,s:function(a,b){var c=kj(a,b);if(!c)return m0=void 0,a.toPrecision(b);var d=c[0],e=c[1],f=e-(m0=3*Math.max(-8,Math.min(8,Math.floor(e/3))))+1,g=d.length;return f===g?d:f>g?d+Array(f-g+1).join("0"):f>0?d.slice(0,f)+"."+d.slice(f):"0."+Array(1-f).join("0")+kj(a,Math.max(0,b+f-1))[0]},X:a=>Math.round(a).toString(16).toUpperCase(),x:a=>Math.round(a).toString(16)};function kn(a){return a}var ko=Array.prototype.map,kp=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function kq(a,b,c,d){var e,f,g=jl(a,b,c);switch((d=kh(null==d?",f":d)).type){case"s":var h=Math.max(Math.abs(a),Math.abs(b));return null!=d.precision||isNaN(f=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(kk(h)/3)))-kk(Math.abs(g))))||(d.precision=f),m3(d,h);case"":case"e":case"g":case"p":case"r":null!=d.precision||isNaN(f=Math.max(0,kk(Math.abs(Math.max(Math.abs(a),Math.abs(b)))-(e=Math.abs(e=g)))-kk(e))+1)||(d.precision=f-("e"===d.type));break;case"f":case"%":null!=d.precision||isNaN(f=Math.max(0,-kk(Math.abs(g))))||(d.precision=f-("%"===d.type)*2)}return m2(d)}function kr(a){var b=a.domain;return a.ticks=function(a){var c=b();return jj(c[0],c[c.length-1],null==a?10:a)},a.tickFormat=function(a,c){var d=b();return kq(d[0],d[d.length-1],null==a?10:a,c)},a.nice=function(c){null==c&&(c=10);var d,e,f=b(),g=0,h=f.length-1,i=f[g],j=f[h],k=10;for(j<i&&(e=i,i=j,j=e,e=g,g=h,h=e);k-- >0;){if((e=jk(i,j,c))===d)return f[g]=i,f[h]=j,b(f);if(e>0)i=Math.floor(i/e)*e,j=Math.ceil(j/e)*e;else if(e<0)i=Math.ceil(i*e)/e,j=Math.floor(j*e)/e;else break;d=e}return a},a}function ks(a,b){a=a.slice();var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function kt(a){return Math.log(a)}function ku(a){return Math.exp(a)}function kv(a){return-Math.log(-a)}function kw(a){return-Math.exp(-a)}function kx(a){return isFinite(a)?+("1e"+a):a<0?0:a}function ky(a){return(b,c)=>-a(-b,c)}function kz(a){let b,c,d=a(kt,ku),e=d.domain,f=10;function g(){var g,h;return b=(g=f)===Math.E?Math.log:10===g&&Math.log10||2===g&&Math.log2||(g=Math.log(g),a=>Math.log(a)/g),c=10===(h=f)?kx:h===Math.E?Math.exp:a=>Math.pow(h,a),e()[0]<0?(b=ky(b),c=ky(c),a(kv,kw)):a(kt,ku),d}return d.base=function(a){return arguments.length?(f=+a,g()):f},d.domain=function(a){return arguments.length?(e(a),g()):e()},d.ticks=a=>{let d,g,h=e(),i=h[0],j=h[h.length-1],k=j<i;k&&([i,j]=[j,i]);let l=b(i),m=b(j),n=null==a?10:+a,o=[];if(!(f%1)&&m-l<n){if(l=Math.floor(l),m=Math.ceil(m),i>0){for(;l<=m;++l)for(d=1;d<f;++d)if(!((g=l<0?d/c(-l):d*c(l))<i)){if(g>j)break;o.push(g)}}else for(;l<=m;++l)for(d=f-1;d>=1;--d)if(!((g=l>0?d/c(-l):d*c(l))<i)){if(g>j)break;o.push(g)}2*o.length<n&&(o=jj(i,j,n))}else o=jj(l,m,Math.min(m-l,n)).map(c);return k?o.reverse():o},d.tickFormat=(a,e)=>{if(null==a&&(a=10),null==e&&(e=10===f?"s":","),"function"!=typeof e&&(f%1||null!=(e=kh(e)).precision||(e.trim=!0),e=m2(e)),a===1/0)return e;let g=Math.max(1,f*a/d.ticks().length);return a=>{let d=a/c(Math.round(b(a)));return d*f<f-.5&&(d*=f),d<=g?e(a):""}},d.nice=()=>e(ks(e(),{floor:a=>c(Math.floor(b(a))),ceil:a=>c(Math.ceil(b(a)))})),d}function kA(a){return function(b){return Math.sign(b)*Math.log1p(Math.abs(b/a))}}function kB(a){return function(b){return Math.sign(b)*Math.expm1(Math.abs(b))*a}}function kC(a){var b=1,c=a(kA(1),kB(b));return c.constant=function(c){return arguments.length?a(kA(b=+c),kB(b)):b},kr(c)}function kD(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function kE(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function kF(a){return a<0?-a*a:a*a}function kG(a){var b=a(j9,j9),c=1;return b.exponent=function(b){return arguments.length?1==(c=+b)?a(j9,j9):.5===c?a(kE,kF):a(kD(c),kD(1/c)):c},kr(b)}function kH(){var a=kG(ke());return a.copy=function(){return kd(a,kH()).exponent(a.exponent())},i6.apply(a,arguments),a}function kI(){return kH.apply(null,arguments).exponent(.5)}function kJ(a){return Math.sign(a)*a*a}function kK(a,b){let c;if(void 0===b)for(let b of a)null!=b&&(c<b||void 0===c&&b>=b)&&(c=b);else{let d=-1;for(let e of a)null!=(e=b(e,++d,a))&&(c<e||void 0===c&&e>=e)&&(c=e)}return c}function kL(a,b){let c;if(void 0===b)for(let b of a)null!=b&&(c>b||void 0===c&&b>=b)&&(c=b);else{let d=-1;for(let e of a)null!=(e=b(e,++d,a))&&(c>e||void 0===c&&e>=e)&&(c=e)}return c}function kM(a,b){return(null==a||!(a>=a))-(null==b||!(b>=b))||(a<b?-1:+(a>b))}function kN(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}m2=(m1=function(a){var b,c,d,e=void 0===a.grouping||void 0===a.thousands?kn:(b=ko.call(a.grouping,Number),c=a.thousands+"",function(a,d){for(var e=a.length,f=[],g=0,h=b[0],i=0;e>0&&h>0&&(i+h+1>d&&(h=Math.max(1,d-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>d));)h=b[g=(g+1)%b.length];return f.reverse().join(c)}),f=void 0===a.currency?"":a.currency[0]+"",g=void 0===a.currency?"":a.currency[1]+"",h=void 0===a.decimal?".":a.decimal+"",i=void 0===a.numerals?kn:(d=ko.call(a.numerals,String),function(a){return a.replace(/[0-9]/g,function(a){return d[+a]})}),j=void 0===a.percent?"%":a.percent+"",k=void 0===a.minus?"−":a.minus+"",l=void 0===a.nan?"NaN":a.nan+"";function m(a,b){var c=(a=kh(a)).fill,d=a.align,m=a.sign,n=a.symbol,o=a.zero,p=a.width,q=a.comma,r=a.precision,s=a.trim,t=a.type;"n"===t?(q=!0,t="g"):km[t]||(void 0===r&&(r=12),s=!0,t="g"),(o||"0"===c&&"="===d)&&(o=!0,c="0",d="=");var u=(b&&void 0!==b.prefix?b.prefix:"")+("$"===n?f:"#"===n&&/[boxX]/.test(t)?"0"+t.toLowerCase():""),v=("$"===n?g:/[%p]/.test(t)?j:"")+(b&&void 0!==b.suffix?b.suffix:""),w=km[t],x=/[defgprs%]/.test(t);function y(a){var b,f,g,j=u,n=v;if("c"===t)n=w(a)+n,a="";else{var y=(a*=1)<0||1/a<0;if(a=isNaN(a)?l:w(Math.abs(a),r),s&&(a=function(a){a:for(var b,c=a.length,d=1,e=-1;d<c;++d)switch(a[d]){case".":e=b=d;break;case"0":0===e&&(e=d),b=d;break;default:if(!+a[d])break a;e>0&&(e=0)}return e>0?a.slice(0,e)+a.slice(b+1):a}(a)),y&&0==+a&&"+"!==m&&(y=!1),j=(y?"("===m?m:k:"-"===m||"("===m?"":m)+j,n=("s"!==t||isNaN(a)||void 0===m0?"":kp[8+m0/3])+n+(y&&"("===m?")":""),x){for(b=-1,f=a.length;++b<f;)if(48>(g=a.charCodeAt(b))||g>57){n=(46===g?h+a.slice(b+1):a.slice(b))+n,a=a.slice(0,b);break}}}q&&!o&&(a=e(a,1/0));var z=j.length+a.length+n.length,A=z<p?Array(p-z+1).join(c):"";switch(q&&o&&(a=e(A+a,A.length?p-n.length:1/0),A=""),d){case"<":a=j+a+n+A;break;case"=":a=j+A+a+n;break;case"^":a=A.slice(0,z=A.length>>1)+j+a+n+A.slice(z);break;default:a=A+j+a+n}return i(a)}return r=void 0===r?6:/[gprs]/.test(t)?Math.max(1,Math.min(21,r)):Math.max(0,Math.min(20,r)),y.toString=function(){return a+""},y}return{format:m,formatPrefix:function(a,b){var c=3*Math.max(-8,Math.min(8,Math.floor(kk(b)/3))),d=Math.pow(10,-c),e=m(((a=kh(a)).type="f",a),{suffix:kp[8+c/3]});return function(a){return e(d*a)}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,m3=m1.formatPrefix;let kO=new Date,kP=new Date;function kQ(a,b,c,d){function e(b){return a(b=0==arguments.length?new Date:new Date(+b)),b}return e.floor=b=>(a(b=new Date(+b)),b),e.ceil=c=>(a(c=new Date(c-1)),b(c,1),a(c),c),e.round=a=>{let b=e(a),c=e.ceil(a);return a-b<c-a?b:c},e.offset=(a,c)=>(b(a=new Date(+a),null==c?1:Math.floor(c)),a),e.range=(c,d,f)=>{let g,h=[];if(c=e.ceil(c),f=null==f?1:Math.floor(f),!(c<d)||!(f>0))return h;do h.push(g=new Date(+c)),b(c,f),a(c);while(g<c&&c<d);return h},e.filter=c=>kQ(b=>{if(b>=b)for(;a(b),!c(b);)b.setTime(b-1)},(a,d)=>{if(a>=a)if(d<0)for(;++d<=0;)for(;b(a,-1),!c(a););else for(;--d>=0;)for(;b(a,1),!c(a););}),c&&(e.count=(b,d)=>(kO.setTime(+b),kP.setTime(+d),a(kO),a(kP),Math.floor(c(kO,kP))),e.every=a=>isFinite(a=Math.floor(a))&&a>0?a>1?e.filter(d?b=>d(b)%a==0:b=>e.count(0,b)%a==0):e:null),e}let kR=kQ(()=>{},(a,b)=>{a.setTime(+a+b)},(a,b)=>b-a);kR.every=a=>isFinite(a=Math.floor(a))&&a>0?a>1?kQ(b=>{b.setTime(Math.floor(b/a)*a)},(b,c)=>{b.setTime(+b+c*a)},(b,c)=>(c-b)/a):kR:null,kR.range;let kS=kQ(a=>{a.setTime(a-a.getMilliseconds())},(a,b)=>{a.setTime(+a+1e3*b)},(a,b)=>(b-a)/1e3,a=>a.getUTCSeconds());kS.range;let kT=kQ(a=>{a.setTime(a-a.getMilliseconds()-1e3*a.getSeconds())},(a,b)=>{a.setTime(+a+6e4*b)},(a,b)=>(b-a)/6e4,a=>a.getMinutes());kT.range;let kU=kQ(a=>{a.setUTCSeconds(0,0)},(a,b)=>{a.setTime(+a+6e4*b)},(a,b)=>(b-a)/6e4,a=>a.getUTCMinutes());kU.range;let kV=kQ(a=>{a.setTime(a-a.getMilliseconds()-1e3*a.getSeconds()-6e4*a.getMinutes())},(a,b)=>{a.setTime(+a+36e5*b)},(a,b)=>(b-a)/36e5,a=>a.getHours());kV.range;let kW=kQ(a=>{a.setUTCMinutes(0,0,0)},(a,b)=>{a.setTime(+a+36e5*b)},(a,b)=>(b-a)/36e5,a=>a.getUTCHours());kW.range;let kX=kQ(a=>a.setHours(0,0,0,0),(a,b)=>a.setDate(a.getDate()+b),(a,b)=>(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*6e4)/864e5,a=>a.getDate()-1);kX.range;let kY=kQ(a=>{a.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCDate(a.getUTCDate()+b)},(a,b)=>(b-a)/864e5,a=>a.getUTCDate()-1);kY.range;let kZ=kQ(a=>{a.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCDate(a.getUTCDate()+b)},(a,b)=>(b-a)/864e5,a=>Math.floor(a/864e5));function k$(a){return kQ(b=>{b.setDate(b.getDate()-(b.getDay()+7-a)%7),b.setHours(0,0,0,0)},(a,b)=>{a.setDate(a.getDate()+7*b)},(a,b)=>(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*6e4)/6048e5)}kZ.range;let k_=k$(0),k0=k$(1),k1=k$(2),k2=k$(3),k3=k$(4),k4=k$(5),k5=k$(6);function k6(a){return kQ(b=>{b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7),b.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCDate(a.getUTCDate()+7*b)},(a,b)=>(b-a)/6048e5)}k_.range,k0.range,k1.range,k2.range,k3.range,k4.range,k5.range;let k7=k6(0),k8=k6(1),k9=k6(2),la=k6(3),lb=k6(4),lc=k6(5),ld=k6(6);k7.range,k8.range,k9.range,la.range,lb.range,lc.range,ld.range;let le=kQ(a=>{a.setDate(1),a.setHours(0,0,0,0)},(a,b)=>{a.setMonth(a.getMonth()+b)},(a,b)=>b.getMonth()-a.getMonth()+(b.getFullYear()-a.getFullYear())*12,a=>a.getMonth());le.range;let lf=kQ(a=>{a.setUTCDate(1),a.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCMonth(a.getUTCMonth()+b)},(a,b)=>b.getUTCMonth()-a.getUTCMonth()+(b.getUTCFullYear()-a.getUTCFullYear())*12,a=>a.getUTCMonth());lf.range;let lg=kQ(a=>{a.setMonth(0,1),a.setHours(0,0,0,0)},(a,b)=>{a.setFullYear(a.getFullYear()+b)},(a,b)=>b.getFullYear()-a.getFullYear(),a=>a.getFullYear());lg.every=a=>isFinite(a=Math.floor(a))&&a>0?kQ(b=>{b.setFullYear(Math.floor(b.getFullYear()/a)*a),b.setMonth(0,1),b.setHours(0,0,0,0)},(b,c)=>{b.setFullYear(b.getFullYear()+c*a)}):null,lg.range;let lh=kQ(a=>{a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCFullYear(a.getUTCFullYear()+b)},(a,b)=>b.getUTCFullYear()-a.getUTCFullYear(),a=>a.getUTCFullYear());function li(a,b,c,d,e,f){let g=[[kS,1,1e3],[kS,5,5e3],[kS,15,15e3],[kS,30,3e4],[f,1,6e4],[f,5,3e5],[f,15,9e5],[f,30,18e5],[e,1,36e5],[e,3,108e5],[e,6,216e5],[e,12,432e5],[d,1,864e5],[d,2,1728e5],[c,1,6048e5],[b,1,2592e6],[b,3,7776e6],[a,1,31536e6]];function h(b,c,d){let e=Math.abs(c-b)/d,f=jo(([,,a])=>a).right(g,e);if(f===g.length)return a.every(jl(b/31536e6,c/31536e6,d));if(0===f)return kR.every(Math.max(jl(b,c,d),1));let[h,i]=g[e/g[f-1][2]<g[f][2]/e?f-1:f];return h.every(i)}return[function(a,b,c){let d=b<a;d&&([a,b]=[b,a]);let e=c&&"function"==typeof c.range?c:h(a,b,c),f=e?e.range(a,+b+1):[];return d?f.reverse():f},h]}lh.every=a=>isFinite(a=Math.floor(a))&&a>0?kQ(b=>{b.setUTCFullYear(Math.floor(b.getUTCFullYear()/a)*a),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},(b,c)=>{b.setUTCFullYear(b.getUTCFullYear()+c*a)}):null,lh.range;let[lj,lk]=li(lh,lf,k7,kZ,kW,kU),[ll,lm]=li(lg,le,k_,kX,kV,kT);function ln(a){if(0<=a.y&&a.y<100){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return b.setFullYear(a.y),b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function lo(a){if(0<=a.y&&a.y<100){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return b.setUTCFullYear(a.y),b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function lp(a,b,c){return{y:a,m:b,d:c,H:0,M:0,S:0,L:0}}var lq={"-":"",_:" ",0:"0"},lr=/^\s*\d+/,ls=/^%/,lt=/[\\^$*+?|[\]().{}]/g;function lu(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?Array(c-f+1).join(b)+e:e)}function lv(a){return a.replace(lt,"\\$&")}function lw(a){return RegExp("^(?:"+a.map(lv).join("|")+")","i")}function lx(a){return new Map(a.map((a,b)=>[a.toLowerCase(),b]))}function ly(a,b,c){var d=lr.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function lz(a,b,c){var d=lr.exec(b.slice(c,c+1));return d?(a.u=+d[0],c+d[0].length):-1}function lA(a,b,c){var d=lr.exec(b.slice(c,c+2));return d?(a.U=+d[0],c+d[0].length):-1}function lB(a,b,c){var d=lr.exec(b.slice(c,c+2));return d?(a.V=+d[0],c+d[0].length):-1}function lC(a,b,c){var d=lr.exec(b.slice(c,c+2));return d?(a.W=+d[0],c+d[0].length):-1}function lD(a,b,c){var d=lr.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function lE(a,b,c){var d=lr.exec(b.slice(c,c+2));return d?(a.y=+d[0]+(+d[0]>68?1900:2e3),c+d[0].length):-1}function lF(a,b,c){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(b.slice(c,c+6));return d?(a.Z=d[1]?0:-(d[2]+(d[3]||"00")),c+d[0].length):-1}function lG(a,b,c){var d=lr.exec(b.slice(c,c+1));return d?(a.q=3*d[0]-3,c+d[0].length):-1}function lH(a,b,c){var d=lr.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function lI(a,b,c){var d=lr.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function lJ(a,b,c){var d=lr.exec(b.slice(c,c+3));return d?(a.m=0,a.d=+d[0],c+d[0].length):-1}function lK(a,b,c){var d=lr.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function lL(a,b,c){var d=lr.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function lM(a,b,c){var d=lr.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function lN(a,b,c){var d=lr.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function lO(a,b,c){var d=lr.exec(b.slice(c,c+6));return d?(a.L=Math.floor(d[0]/1e3),c+d[0].length):-1}function lP(a,b,c){var d=ls.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function lQ(a,b,c){var d=lr.exec(b.slice(c));return d?(a.Q=+d[0],c+d[0].length):-1}function lR(a,b,c){var d=lr.exec(b.slice(c));return d?(a.s=+d[0],c+d[0].length):-1}function lS(a,b){return lu(a.getDate(),b,2)}function lT(a,b){return lu(a.getHours(),b,2)}function lU(a,b){return lu(a.getHours()%12||12,b,2)}function lV(a,b){return lu(1+kX.count(lg(a),a),b,3)}function lW(a,b){return lu(a.getMilliseconds(),b,3)}function lX(a,b){return lW(a,b)+"000"}function lY(a,b){return lu(a.getMonth()+1,b,2)}function lZ(a,b){return lu(a.getMinutes(),b,2)}function l$(a,b){return lu(a.getSeconds(),b,2)}function l_(a){var b=a.getDay();return 0===b?7:b}function l0(a,b){return lu(k_.count(lg(a)-1,a),b,2)}function l1(a){var b=a.getDay();return b>=4||0===b?k3(a):k3.ceil(a)}function l2(a,b){return a=l1(a),lu(k3.count(lg(a),a)+(4===lg(a).getDay()),b,2)}function l3(a){return a.getDay()}function l4(a,b){return lu(k0.count(lg(a)-1,a),b,2)}function l5(a,b){return lu(a.getFullYear()%100,b,2)}function l6(a,b){return lu((a=l1(a)).getFullYear()%100,b,2)}function l7(a,b){return lu(a.getFullYear()%1e4,b,4)}function l8(a,b){var c=a.getDay();return lu((a=c>=4||0===c?k3(a):k3.ceil(a)).getFullYear()%1e4,b,4)}function l9(a){var b=a.getTimezoneOffset();return(b>0?"-":(b*=-1,"+"))+lu(b/60|0,"0",2)+lu(b%60,"0",2)}function ma(a,b){return lu(a.getUTCDate(),b,2)}function mb(a,b){return lu(a.getUTCHours(),b,2)}function mc(a,b){return lu(a.getUTCHours()%12||12,b,2)}function md(a,b){return lu(1+kY.count(lh(a),a),b,3)}function me(a,b){return lu(a.getUTCMilliseconds(),b,3)}function mf(a,b){return me(a,b)+"000"}function mg(a,b){return lu(a.getUTCMonth()+1,b,2)}function mh(a,b){return lu(a.getUTCMinutes(),b,2)}function mi(a,b){return lu(a.getUTCSeconds(),b,2)}function mj(a){var b=a.getUTCDay();return 0===b?7:b}function mk(a,b){return lu(k7.count(lh(a)-1,a),b,2)}function ml(a){var b=a.getUTCDay();return b>=4||0===b?lb(a):lb.ceil(a)}function mm(a,b){return a=ml(a),lu(lb.count(lh(a),a)+(4===lh(a).getUTCDay()),b,2)}function mn(a){return a.getUTCDay()}function mo(a,b){return lu(k8.count(lh(a)-1,a),b,2)}function mp(a,b){return lu(a.getUTCFullYear()%100,b,2)}function mq(a,b){return lu((a=ml(a)).getUTCFullYear()%100,b,2)}function mr(a,b){return lu(a.getUTCFullYear()%1e4,b,4)}function ms(a,b){var c=a.getUTCDay();return lu((a=c>=4||0===c?lb(a):lb.ceil(a)).getUTCFullYear()%1e4,b,4)}function mt(){return"+0000"}function mu(){return"%"}function mv(a){return+a}function mw(a){return Math.floor(a/1e3)}function mx(a){return new Date(a)}function my(a){return a instanceof Date?+a:+new Date(+a)}function mz(a,b,c,d,e,f,g,h,i,j){var k=kf(),l=k.invert,m=k.domain,n=j(".%L"),o=j(":%S"),p=j("%I:%M"),q=j("%I %p"),r=j("%a %d"),s=j("%b %d"),t=j("%B"),u=j("%Y");function v(a){return(i(a)<a?n:h(a)<a?o:g(a)<a?p:f(a)<a?q:d(a)<a?e(a)<a?r:s:c(a)<a?t:u)(a)}return k.invert=function(a){return new Date(l(a))},k.domain=function(a){return arguments.length?m(Array.from(a,my)):m().map(mx)},k.ticks=function(b){var c=m();return a(c[0],c[c.length-1],null==b?10:b)},k.tickFormat=function(a,b){return null==b?v:j(b)},k.nice=function(a){var c=m();return a&&"function"==typeof a.range||(a=b(c[0],c[c.length-1],null==a?10:a)),a?m(ks(c,a)):k},k.copy=function(){return kd(k,mz(a,b,c,d,e,f,g,h,i,j))},k}function mA(){return i6.apply(mz(ll,lm,lg,le,k_,kX,kV,kT,kS,m5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mB(){return i6.apply(mz(lj,lk,lh,lf,k7,kY,kW,kU,kS,m6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mC(){var a,b,c,d,e,f=0,g=1,h=j9,i=!1;function j(b){return null==b||isNaN(b*=1)?e:h(0===c?.5:(b=(d(b)-a)*c,i?Math.max(0,Math.min(1,b)):b))}function k(a){return function(b){var c,d;return arguments.length?([c,d]=b,h=a(c,d),j):[h(0),h(1)]}}return j.domain=function(e){return arguments.length?([f,g]=e,a=d(f*=1),b=d(g*=1),c=a===b?0:1/(b-a),j):[f,g]},j.clamp=function(a){return arguments.length?(i=!!a,j):i},j.interpolator=function(a){return arguments.length?(h=a,j):h},j.range=k(j5),j.rangeRound=k(j6),j.unknown=function(a){return arguments.length?(e=a,j):e},function(e){return d=e,a=e(f),b=e(g),c=a===b?0:1/(b-a),j}}function mD(a,b){return b.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function mE(){var a=kG(mC());return a.copy=function(){return mD(a,mE()).exponent(a.exponent())},i7.apply(a,arguments)}function mF(){return mE.apply(null,arguments).exponent(.5)}function mG(){var a,b,c,d,e,f,g,h=0,i=.5,j=1,k=1,l=j9,m=!1;function n(a){return isNaN(a*=1)?g:(a=.5+((a=+f(a))-b)*(k*a<k*b?d:e),l(m?Math.max(0,Math.min(1,a)):a))}function o(a){return function(b){var c,d,e;return arguments.length?([c,d,e]=b,l=function(a,b){void 0===b&&(b=a,a=j5);for(var c=0,d=b.length-1,e=b[0],f=Array(d<0?0:d);c<d;)f[c]=a(e,e=b[++c]);return function(a){var b=Math.max(0,Math.min(d-1,Math.floor(a*=d)));return f[b](a-b)}}(a,[c,d,e]),n):[l(0),l(.5),l(1)]}}return n.domain=function(g){return arguments.length?([h,i,j]=g,a=f(h*=1),b=f(i*=1),c=f(j*=1),d=a===b?0:.5/(b-a),e=b===c?0:.5/(c-b),k=b<a?-1:1,n):[h,i,j]},n.clamp=function(a){return arguments.length?(m=!!a,n):m},n.interpolator=function(a){return arguments.length?(l=a,n):l},n.range=o(j5),n.rangeRound=o(j6),n.unknown=function(a){return arguments.length?(g=a,n):g},function(g){return f=g,a=g(h),b=g(i),c=g(j),d=a===b?0:.5/(b-a),e=b===c?0:.5/(c-b),k=b<a?-1:1,n}}function mH(){var a=kG(mG());return a.copy=function(){return mD(a,mH()).exponent(a.exponent())},i7.apply(a,arguments)}function mI(){return mH.apply(null,arguments).exponent(.5)}m5=(m4=function(a){var b=a.dateTime,c=a.date,d=a.time,e=a.periods,f=a.days,g=a.shortDays,h=a.months,i=a.shortMonths,j=lw(e),k=lx(e),l=lw(f),m=lx(f),n=lw(g),o=lx(g),p=lw(h),q=lx(h),r=lw(i),s=lx(i),t={a:function(a){return g[a.getDay()]},A:function(a){return f[a.getDay()]},b:function(a){return i[a.getMonth()]},B:function(a){return h[a.getMonth()]},c:null,d:lS,e:lS,f:lX,g:l6,G:l8,H:lT,I:lU,j:lV,L:lW,m:lY,M:lZ,p:function(a){return e[+(a.getHours()>=12)]},q:function(a){return 1+~~(a.getMonth()/3)},Q:mv,s:mw,S:l$,u:l_,U:l0,V:l2,w:l3,W:l4,x:null,X:null,y:l5,Y:l7,Z:l9,"%":mu},u={a:function(a){return g[a.getUTCDay()]},A:function(a){return f[a.getUTCDay()]},b:function(a){return i[a.getUTCMonth()]},B:function(a){return h[a.getUTCMonth()]},c:null,d:ma,e:ma,f:mf,g:mq,G:ms,H:mb,I:mc,j:md,L:me,m:mg,M:mh,p:function(a){return e[+(a.getUTCHours()>=12)]},q:function(a){return 1+~~(a.getUTCMonth()/3)},Q:mv,s:mw,S:mi,u:mj,U:mk,V:mm,w:mn,W:mo,x:null,X:null,y:mp,Y:mr,Z:mt,"%":mu},v={a:function(a,b,c){var d=n.exec(b.slice(c));return d?(a.w=o.get(d[0].toLowerCase()),c+d[0].length):-1},A:function(a,b,c){var d=l.exec(b.slice(c));return d?(a.w=m.get(d[0].toLowerCase()),c+d[0].length):-1},b:function(a,b,c){var d=r.exec(b.slice(c));return d?(a.m=s.get(d[0].toLowerCase()),c+d[0].length):-1},B:function(a,b,c){var d=p.exec(b.slice(c));return d?(a.m=q.get(d[0].toLowerCase()),c+d[0].length):-1},c:function(a,c,d){return y(a,b,c,d)},d:lI,e:lI,f:lO,g:lE,G:lD,H:lK,I:lK,j:lJ,L:lN,m:lH,M:lL,p:function(a,b,c){var d=j.exec(b.slice(c));return d?(a.p=k.get(d[0].toLowerCase()),c+d[0].length):-1},q:lG,Q:lQ,s:lR,S:lM,u:lz,U:lA,V:lB,w:ly,W:lC,x:function(a,b,d){return y(a,c,b,d)},X:function(a,b,c){return y(a,d,b,c)},y:lE,Y:lD,Z:lF,"%":lP};function w(a,b){return function(c){var d,e,f,g=[],h=-1,i=0,j=a.length;for(c instanceof Date||(c=new Date(+c));++h<j;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=lq[d=a.charAt(++h)])?d=a.charAt(++h):e="e"===d?" ":"0",(f=b[d])&&(d=f(c,e)),g.push(d),i=h+1);return g.push(a.slice(i,h)),g.join("")}}function x(a,b){return function(c){var d,e,f=lp(1900,void 0,1);if(y(f,a,c+="",0)!=c.length)return null;if("Q"in f)return new Date(f.Q);if("s"in f)return new Date(1e3*f.s+("L"in f?f.L:0));if(!b||"Z"in f||(f.Z=0),"p"in f&&(f.H=f.H%12+12*f.p),void 0===f.m&&(f.m="q"in f?f.q:0),"V"in f){if(f.V<1||f.V>53)return null;"w"in f||(f.w=1),"Z"in f?(d=(e=(d=lo(lp(f.y,0,1))).getUTCDay())>4||0===e?k8.ceil(d):k8(d),d=kY.offset(d,(f.V-1)*7),f.y=d.getUTCFullYear(),f.m=d.getUTCMonth(),f.d=d.getUTCDate()+(f.w+6)%7):(d=(e=(d=ln(lp(f.y,0,1))).getDay())>4||0===e?k0.ceil(d):k0(d),d=kX.offset(d,(f.V-1)*7),f.y=d.getFullYear(),f.m=d.getMonth(),f.d=d.getDate()+(f.w+6)%7)}else("W"in f||"U"in f)&&("w"in f||(f.w="u"in f?f.u%7:+("W"in f)),e="Z"in f?lo(lp(f.y,0,1)).getUTCDay():ln(lp(f.y,0,1)).getDay(),f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(e+5)%7:f.w+7*f.U-(e+6)%7);return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,lo(f)):ln(f)}}function y(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;g<h;){if(d>=i)return -1;if(37===(e=b.charCodeAt(g++))){if(!(f=v[(e=b.charAt(g++))in lq?b.charAt(g++):e])||(d=f(a,c,d))<0)return -1}else if(e!=c.charCodeAt(d++))return -1}return d}return t.x=w(c,t),t.X=w(d,t),t.c=w(b,t),u.x=w(c,u),u.X=w(d,u),u.c=w(b,u),{format:function(a){var b=w(a+="",t);return b.toString=function(){return a},b},parse:function(a){var b=x(a+="",!1);return b.toString=function(){return a},b},utcFormat:function(a){var b=w(a+="",u);return b.toString=function(){return a},b},utcParse:function(a){var b=x(a+="",!0);return b.toString=function(){return a},b}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,m4.parse,m6=m4.utcFormat,m4.utcParse;var mJ=a=>a.chartData,mK=h7([mJ],a=>{var b=null!=a.chartData?a.chartData.length-1:0;return{chartData:a.chartData,computedData:a.computedData,dataEndIndex:b,dataStartIndex:0}}),mL=(a,b,c,d)=>d?mK(a):mJ(a);function mM(a){if(Array.isArray(a)&&2===a.length){var[b,c]=a;if(eG(b)&&eG(c))return!0}return!1}function mN(a,b,c){return c?a:[Math.min(a[0],b[0]),Math.max(a[1],b[1])]}function mO(a,b){if(b&&"function"!=typeof a&&Array.isArray(a)&&2===a.length){var c,d,[e,f]=a;if(eG(e))c=e;else if("function"==typeof e)return;if(eG(f))d=f;else if("function"==typeof f)return;var g=[c,d];if(mM(g))return g}}var mP,mQ,mR,mS,mT,mU,mV,mW,mX,mY,mZ,m$,m_,m0,m1,m2,m3,m4,m5,m6,m7,m8,m9=!0,na="[DecimalError] ",nb=na+"Invalid argument: ",nc=na+"Exponent out of range: ",nd=Math.floor,ne=Math.pow,nf=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ng=nd(1286742750677284.5),nh={};function ni(a,b){var c,d,e,f,g,h,i,j,k=a.constructor,l=k.precision;if(!a.s||!b.s)return b.s||(b=new k(a)),m9?ns(b,l):b;if(i=a.d,j=b.d,g=a.e,e=b.e,i=i.slice(),f=g-e){for(f<0?(d=i,f=-f,h=j.length):(d=j,e=g,h=i.length),f>(h=(g=Math.ceil(l/7))>h?g+1:h+1)&&(f=h,d.length=1),d.reverse();f--;)d.push(0);d.reverse()}for((h=i.length)-(f=j.length)<0&&(f=h,d=j,j=i,i=d),c=0;f;)c=(i[--f]=i[f]+j[f]+c)/1e7|0,i[f]%=1e7;for(c&&(i.unshift(c),++e),h=i.length;0==i[--h];)i.pop();return b.d=i,b.e=e,m9?ns(b,l):b}function nj(a,b,c){if(a!==~~a||a<b||a>c)throw Error(nb+a)}function nk(a){var b,c,d,e=a.length-1,f="",g=a[0];if(e>0){for(f+=g,b=1;b<e;b++)(c=7-(d=a[b]+"").length)&&(f+=np(c)),f+=d;(c=7-(d=(g=a[b])+"").length)&&(f+=np(c))}else if(0===g)return"0";for(;g%10==0;)g/=10;return f+g}nh.absoluteValue=nh.abs=function(){var a=new this.constructor(this);return a.s&&(a.s=1),a},nh.comparedTo=nh.cmp=function(a){var b,c,d,e;if(a=new this.constructor(a),this.s!==a.s)return this.s||-a.s;if(this.e!==a.e)return this.e>a.e^this.s<0?1:-1;for(b=0,c=(d=this.d.length)<(e=a.d.length)?d:e;b<c;++b)if(this.d[b]!==a.d[b])return this.d[b]>a.d[b]^this.s<0?1:-1;return d===e?0:d>e^this.s<0?1:-1},nh.decimalPlaces=nh.dp=function(){var a=this.d.length-1,b=(a-this.e)*7;if(a=this.d[a])for(;a%10==0;a/=10)b--;return b<0?0:b},nh.dividedBy=nh.div=function(a){return nl(this,new this.constructor(a))},nh.dividedToIntegerBy=nh.idiv=function(a){var b=this.constructor;return ns(nl(this,new b(a),0,1),b.precision)},nh.equals=nh.eq=function(a){return!this.cmp(a)},nh.exponent=function(){return nn(this)},nh.greaterThan=nh.gt=function(a){return this.cmp(a)>0},nh.greaterThanOrEqualTo=nh.gte=function(a){return this.cmp(a)>=0},nh.isInteger=nh.isint=function(){return this.e>this.d.length-2},nh.isNegative=nh.isneg=function(){return this.s<0},nh.isPositive=nh.ispos=function(){return this.s>0},nh.isZero=function(){return 0===this.s},nh.lessThan=nh.lt=function(a){return 0>this.cmp(a)},nh.lessThanOrEqualTo=nh.lte=function(a){return 1>this.cmp(a)},nh.logarithm=nh.log=function(a){var b,c=this.constructor,d=c.precision,e=d+5;if(void 0===a)a=new c(10);else if((a=new c(a)).s<1||a.eq(m8))throw Error(na+"NaN");if(this.s<1)throw Error(na+(this.s?"NaN":"-Infinity"));return this.eq(m8)?new c(0):(m9=!1,b=nl(nq(this,e),nq(a,e),e),m9=!0,ns(b,d))},nh.minus=nh.sub=function(a){return a=new this.constructor(a),this.s==a.s?nt(this,a):ni(this,(a.s=-a.s,a))},nh.modulo=nh.mod=function(a){var b,c=this.constructor,d=c.precision;if(!(a=new c(a)).s)throw Error(na+"NaN");return this.s?(m9=!1,b=nl(this,a,0,1).times(a),m9=!0,this.minus(b)):ns(new c(this),d)},nh.naturalExponential=nh.exp=function(){return nm(this)},nh.naturalLogarithm=nh.ln=function(){return nq(this)},nh.negated=nh.neg=function(){var a=new this.constructor(this);return a.s=-a.s||0,a},nh.plus=nh.add=function(a){return a=new this.constructor(a),this.s==a.s?ni(this,a):nt(this,(a.s=-a.s,a))},nh.precision=nh.sd=function(a){var b,c,d;if(void 0!==a&&!!a!==a&&1!==a&&0!==a)throw Error(nb+a);if(b=nn(this)+1,c=7*(d=this.d.length-1)+1,d=this.d[d]){for(;d%10==0;d/=10)c--;for(d=this.d[0];d>=10;d/=10)c++}return a&&b>c?b:c},nh.squareRoot=nh.sqrt=function(){var a,b,c,d,e,f,g,h=this.constructor;if(this.s<1){if(!this.s)return new h(0);throw Error(na+"NaN")}for(a=nn(this),m9=!1,0==(e=Math.sqrt(+this))||e==1/0?(((b=nk(this.d)).length+a)%2==0&&(b+="0"),e=Math.sqrt(b),a=nd((a+1)/2)-(a<0||a%2),d=new h(b=e==1/0?"5e"+a:(b=e.toExponential()).slice(0,b.indexOf("e")+1)+a)):d=new h(e.toString()),e=g=(c=h.precision)+3;;)if(d=(f=d).plus(nl(this,f,g+2)).times(.5),nk(f.d).slice(0,g)===(b=nk(d.d)).slice(0,g)){if(b=b.slice(g-3,g+1),e==g&&"4999"==b){if(ns(f,c+1,0),f.times(f).eq(this)){d=f;break}}else if("9999"!=b)break;g+=4}return m9=!0,ns(d,c)},nh.times=nh.mul=function(a){var b,c,d,e,f,g,h,i,j,k=this.constructor,l=this.d,m=(a=new k(a)).d;if(!this.s||!a.s)return new k(0);for(a.s*=this.s,c=this.e+a.e,(i=l.length)<(j=m.length)&&(f=l,l=m,m=f,g=i,i=j,j=g),f=[],d=g=i+j;d--;)f.push(0);for(d=j;--d>=0;){for(b=0,e=i+d;e>d;)h=f[e]+m[d]*l[e-d-1]+b,f[e--]=h%1e7|0,b=h/1e7|0;f[e]=(f[e]+b)%1e7|0}for(;!f[--g];)f.pop();return b?++c:f.shift(),a.d=f,a.e=c,m9?ns(a,k.precision):a},nh.toDecimalPlaces=nh.todp=function(a,b){var c=this,d=c.constructor;return(c=new d(c),void 0===a)?c:(nj(a,0,1e9),void 0===b?b=d.rounding:nj(b,0,8),ns(c,a+nn(c)+1,b))},nh.toExponential=function(a,b){var c,d=this,e=d.constructor;return void 0===a?c=nu(d,!0):(nj(a,0,1e9),void 0===b?b=e.rounding:nj(b,0,8),c=nu(d=ns(new e(d),a+1,b),!0,a+1)),c},nh.toFixed=function(a,b){var c,d,e=this.constructor;return void 0===a?nu(this):(nj(a,0,1e9),void 0===b?b=e.rounding:nj(b,0,8),c=nu((d=ns(new e(this),a+nn(this)+1,b)).abs(),!1,a+nn(d)+1),this.isneg()&&!this.isZero()?"-"+c:c)},nh.toInteger=nh.toint=function(){var a=this.constructor;return ns(new a(this),nn(this)+1,a.rounding)},nh.toNumber=function(){return+this},nh.toPower=nh.pow=function(a){var b,c,d,e,f,g,h=this,i=h.constructor,j=+(a=new i(a));if(!a.s)return new i(m8);if(!(h=new i(h)).s){if(a.s<1)throw Error(na+"Infinity");return h}if(h.eq(m8))return h;if(d=i.precision,a.eq(m8))return ns(h,d);if(g=(b=a.e)>=(c=a.d.length-1),f=h.s,g){if((c=j<0?-j:j)<=0x1fffffffffffff){for(e=new i(m8),b=Math.ceil(d/7+4),m9=!1;c%2&&nv((e=e.times(h)).d,b),0!==(c=nd(c/2));)nv((h=h.times(h)).d,b);return m9=!0,a.s<0?new i(m8).div(e):ns(e,d)}}else if(f<0)throw Error(na+"NaN");return f=f<0&&1&a.d[Math.max(b,c)]?-1:1,h.s=1,m9=!1,e=a.times(nq(h,d+12)),m9=!0,(e=nm(e)).s=f,e},nh.toPrecision=function(a,b){var c,d,e=this,f=e.constructor;return void 0===a?(c=nn(e),d=nu(e,c<=f.toExpNeg||c>=f.toExpPos)):(nj(a,1,1e9),void 0===b?b=f.rounding:nj(b,0,8),c=nn(e=ns(new f(e),a,b)),d=nu(e,a<=c||c<=f.toExpNeg,a)),d},nh.toSignificantDigits=nh.tosd=function(a,b){var c=this.constructor;return void 0===a?(a=c.precision,b=c.rounding):(nj(a,1,1e9),void 0===b?b=c.rounding:nj(b,0,8)),ns(new c(this),a,b)},nh.toString=nh.valueOf=nh.val=nh.toJSON=nh[Symbol.for("nodejs.util.inspect.custom")]=function(){var a=nn(this),b=this.constructor;return nu(this,a<=b.toExpNeg||a>=b.toExpPos)};var nl=function(){function a(a,b){var c,d=0,e=a.length;for(a=a.slice();e--;)c=a[e]*b+d,a[e]=c%1e7|0,d=c/1e7|0;return d&&a.unshift(d),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c){for(var d=0;c--;)a[c]-=d,d=+(a[c]<b[c]),a[c]=1e7*d+a[c]-b[c];for(;!a[0]&&a.length>1;)a.shift()}return function(d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=d.constructor,A=d.s==e.s?1:-1,B=d.d,C=e.d;if(!d.s)return new z(d);if(!e.s)throw Error(na+"Division by zero");for(j=0,i=d.e-e.e,x=C.length,v=B.length,o=(n=new z(A)).d=[];C[j]==(B[j]||0);)++j;if(C[j]>(B[j]||0)&&--i,(s=null==f?f=z.precision:g?f+(nn(d)-nn(e))+1:f)<0)return new z(0);if(s=s/7+2|0,j=0,1==x)for(k=0,C=C[0],s++;(j<v||k)&&s--;j++)t=1e7*k+(B[j]||0),o[j]=t/C|0,k=t%C|0;else{for((k=1e7/(C[0]+1)|0)>1&&(C=a(C,k),B=a(B,k),x=C.length,v=B.length),u=x,q=(p=B.slice(0,x)).length;q<x;)p[q++]=0;(y=C.slice()).unshift(0),w=C[0],C[1]>=1e7/2&&++w;do k=0,(h=b(C,p,x,q))<0?(r=p[0],x!=q&&(r=1e7*r+(p[1]||0)),(k=r/w|0)>1?(k>=1e7&&(k=1e7-1),m=(l=a(C,k)).length,q=p.length,1==(h=b(l,p,m,q))&&(k--,c(l,x<m?y:C,m))):(0==k&&(h=k=1),l=C.slice()),(m=l.length)<q&&l.unshift(0),c(p,l,q),-1==h&&(q=p.length,(h=b(C,p,x,q))<1&&(k++,c(p,x<q?y:C,q))),q=p.length):0===h&&(k++,p=[0]),o[j++]=k,h&&p[0]?p[q++]=B[u]||0:(p=[B[u]],q=1);while((u++<v||void 0!==p[0])&&s--)}return o[0]||o.shift(),n.e=i,ns(n,g?f+nn(n)+1:f)}}();function nm(a,b){var c,d,e,f,g,h=0,i=0,j=a.constructor,k=j.precision;if(nn(a)>16)throw Error(nc+nn(a));if(!a.s)return new j(m8);for(null==b?(m9=!1,g=k):g=b,f=new j(.03125);a.abs().gte(.1);)a=a.times(f),i+=5;for(g+=Math.log(ne(2,i))/Math.LN10*2+5|0,c=d=e=new j(m8),j.precision=g;;){if(d=ns(d.times(a),g),c=c.times(++h),nk((f=e.plus(nl(d,c,g))).d).slice(0,g)===nk(e.d).slice(0,g)){for(;i--;)e=ns(e.times(e),g);return j.precision=k,null==b?(m9=!0,ns(e,k)):e}e=f}}function nn(a){for(var b=7*a.e,c=a.d[0];c>=10;c/=10)b++;return b}function no(a,b,c){if(b>a.LN10.sd())throw m9=!0,c&&(a.precision=c),Error(na+"LN10 precision limit exceeded");return ns(new a(a.LN10),b)}function np(a){for(var b="";a--;)b+="0";return b}function nq(a,b){var c,d,e,f,g,h,i,j,k,l=1,m=a,n=m.d,o=m.constructor,p=o.precision;if(m.s<1)throw Error(na+(m.s?"NaN":"-Infinity"));if(m.eq(m8))return new o(0);if(null==b?(m9=!1,j=p):j=b,m.eq(10))return null==b&&(m9=!0),no(o,j);if(o.precision=j+=10,d=(c=nk(n)).charAt(0),!(15e14>Math.abs(f=nn(m))))return i=no(o,j+2,p).times(f+""),m=nq(new o(d+"."+c.slice(1)),j-10).plus(i),o.precision=p,null==b?(m9=!0,ns(m,p)):m;for(;d<7&&1!=d||1==d&&c.charAt(1)>3;)d=(c=nk((m=m.times(a)).d)).charAt(0),l++;for(f=nn(m),d>1?(m=new o("0."+c),f++):m=new o(d+"."+c.slice(1)),h=g=m=nl(m.minus(m8),m.plus(m8),j),k=ns(m.times(m),j),e=3;;){if(g=ns(g.times(k),j),nk((i=h.plus(nl(g,new o(e),j))).d).slice(0,j)===nk(h.d).slice(0,j))return h=h.times(2),0!==f&&(h=h.plus(no(o,j+2,p).times(f+""))),h=nl(h,new o(l),j),o.precision=p,null==b?(m9=!0,ns(h,p)):h;h=i,e+=2}}function nr(a,b){var c,d,e;for((c=b.indexOf("."))>-1&&(b=b.replace(".","")),(d=b.search(/e/i))>0?(c<0&&(c=d),c+=+b.slice(d+1),b=b.substring(0,d)):c<0&&(c=b.length),d=0;48===b.charCodeAt(d);)++d;for(e=b.length;48===b.charCodeAt(e-1);)--e;if(b=b.slice(d,e)){if(e-=d,a.e=nd((c=c-d-1)/7),a.d=[],d=(c+1)%7,c<0&&(d+=7),d<e){for(d&&a.d.push(+b.slice(0,d)),e-=7;d<e;)a.d.push(+b.slice(d,d+=7));d=7-(b=b.slice(d)).length}else d-=e;for(;d--;)b+="0";if(a.d.push(+b),m9&&(a.e>ng||a.e<-ng))throw Error(nc+c)}else a.s=0,a.e=0,a.d=[0];return a}function ns(a,b,c){var d,e,f,g,h,i,j,k,l=a.d;for(g=1,f=l[0];f>=10;f/=10)g++;if((d=b-g)<0)d+=7,e=b,j=l[k=0];else{if((k=Math.ceil((d+1)/7))>=(f=l.length))return a;for(g=1,j=f=l[k];f>=10;f/=10)g++;d%=7,e=d-7+g}if(void 0!==c&&(h=j/(f=ne(10,g-e-1))%10|0,i=b<0||void 0!==l[k+1]||j%f,i=c<4?(h||i)&&(0==c||c==(a.s<0?3:2)):h>5||5==h&&(4==c||i||6==c&&(d>0?e>0?j/ne(10,g-e):0:l[k-1])%10&1||c==(a.s<0?8:7))),b<1||!l[0])return i?(f=nn(a),l.length=1,b=b-f-1,l[0]=ne(10,(7-b%7)%7),a.e=nd(-b/7)||0):(l.length=1,l[0]=a.e=a.s=0),a;if(0==d?(l.length=k,f=1,k--):(l.length=k+1,f=ne(10,7-d),l[k]=e>0?(j/ne(10,g-e)%ne(10,e)|0)*f:0),i)for(;;)if(0==k){1e7==(l[0]+=f)&&(l[0]=1,++a.e);break}else{if(l[k]+=f,1e7!=l[k])break;l[k--]=0,f=1}for(d=l.length;0===l[--d];)l.pop();if(m9&&(a.e>ng||a.e<-ng))throw Error(nc+nn(a));return a}function nt(a,b){var c,d,e,f,g,h,i,j,k,l,m=a.constructor,n=m.precision;if(!a.s||!b.s)return b.s?b.s=-b.s:b=new m(a),m9?ns(b,n):b;if(i=a.d,l=b.d,d=b.e,j=a.e,i=i.slice(),g=j-d){for((k=g<0)?(c=i,g=-g,h=l.length):(c=l,d=j,h=i.length),g>(e=Math.max(Math.ceil(n/7),h)+2)&&(g=e,c.length=1),c.reverse(),e=g;e--;)c.push(0);c.reverse()}else{for((k=(e=i.length)<(h=l.length))&&(h=e),e=0;e<h;e++)if(i[e]!=l[e]){k=i[e]<l[e];break}g=0}for(k&&(c=i,i=l,l=c,b.s=-b.s),h=i.length,e=l.length-h;e>0;--e)i[h++]=0;for(e=l.length;e>g;){if(i[--e]<l[e]){for(f=e;f&&0===i[--f];)i[f]=1e7-1;--i[f],i[e]+=1e7}i[e]-=l[e]}for(;0===i[--h];)i.pop();for(;0===i[0];i.shift())--d;return i[0]?(b.d=i,b.e=d,m9?ns(b,n):b):new m(0)}function nu(a,b,c){var d,e=nn(a),f=nk(a.d),g=f.length;return b?(c&&(d=c-g)>0?f=f.charAt(0)+"."+f.slice(1)+np(d):g>1&&(f=f.charAt(0)+"."+f.slice(1)),f=f+(e<0?"e":"e+")+e):e<0?(f="0."+np(-e-1)+f,c&&(d=c-g)>0&&(f+=np(d))):e>=g?(f+=np(e+1-g),c&&(d=c-e-1)>0&&(f=f+"."+np(d))):((d=e+1)<g&&(f=f.slice(0,d)+"."+f.slice(d)),c&&(d=c-g)>0&&(e+1===g&&(f+="."),f+=np(d))),a.s<0?"-"+f:f}function nv(a,b){if(a.length>b)return a.length=b,!0}function nw(a){if(!a||"object"!=typeof a)throw Error(na+"Object expected");var b,c,d,e=["precision",1,1e9,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(b=0;b<e.length;b+=3)if(void 0!==(d=a[c=e[b]]))if(nd(d)===d&&d>=e[b+1]&&d<=e[b+2])this[c]=d;else throw Error(nb+c+": "+d);if(void 0!==(d=a[c="LN10"]))if(d==Math.LN10)this[c]=new this(d);else throw Error(nb+c+": "+d);return this}var m7=function a(b){var c,d,e;function f(a){if(!(this instanceof f))return new f(a);if(this.constructor=f,a instanceof f){this.s=a.s,this.e=a.e,this.d=(a=a.d)?a.slice():a;return}if("number"==typeof a){if(0*a!=0)throw Error(nb+a);if(a>0)this.s=1;else if(a<0)a=-a,this.s=-1;else{this.s=0,this.e=0,this.d=[0];return}if(a===~~a&&a<1e7){this.e=0,this.d=[a];return}return nr(this,a.toString())}if("string"!=typeof a)throw Error(nb+a);if(45===a.charCodeAt(0)?(a=a.slice(1),this.s=-1):this.s=1,nf.test(a))nr(this,a);else throw Error(nb+a)}if(f.prototype=nh,f.ROUND_UP=0,f.ROUND_DOWN=1,f.ROUND_CEIL=2,f.ROUND_FLOOR=3,f.ROUND_HALF_UP=4,f.ROUND_HALF_DOWN=5,f.ROUND_HALF_EVEN=6,f.ROUND_HALF_CEIL=7,f.ROUND_HALF_FLOOR=8,f.clone=a,f.config=f.set=nw,void 0===b&&(b={}),b)for(c=0,e=["precision","rounding","toExpNeg","toExpPos","LN10"];c<e.length;)b.hasOwnProperty(d=e[c++])||(b[d]=this[d]);return f.config(b),f}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});m8=new m7(1);let nx=m7;function ny(a){return 0===a?1:Math.floor(new nx(a).abs().log(10).toNumber())+1}function nz(a,b,c){for(var d=new nx(a),e=0,f=[];d.lt(b)&&e<1e5;)f.push(d.toNumber()),d=d.add(c),e++;return f}var nA=a=>{var[b,c]=a,[d,e]=[b,c];return b>c&&([d,e]=[c,b]),[d,e]},nB=(a,b,c)=>{if(a.lte(0))return new nx(0);var d=ny(a.toNumber()),e=new nx(10).pow(d),f=a.div(e),g=1!==d?.05:.1,h=new nx(Math.ceil(f.div(g).toNumber())).add(c).mul(g).mul(e);return new nx(b?h.toNumber():Math.ceil(h.toNumber()))},nC=function(a,b,c,d){var e,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((b-a)/(c-1)))return{step:new nx(0),tickMin:new nx(0),tickMax:new nx(0)};var g=nB(new nx(b).sub(a).div(c-1),d,f),h=Math.ceil((e=a<=0&&b>=0?new nx(0):(e=new nx(a).add(b).div(2)).sub(new nx(e).mod(g))).sub(a).div(g).toNumber()),i=Math.ceil(new nx(b).sub(e).div(g).toNumber()),j=h+i+1;return j>c?nC(a,b,c,d,f+1):(j<c&&(i=b>0?i+(c-j):i,h=b>0?h:h+(c-j)),{step:g,tickMin:e.sub(new nx(h).mul(g)),tickMax:e.add(new nx(i).mul(g))})},nD=function(a){var[b,c]=a,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,e=!(arguments.length>2)||void 0===arguments[2]||arguments[2],f=Math.max(d,2),[g,h]=nA([b,c]);if(g===-1/0||h===1/0){var i=h===1/0?[g,...Array(d-1).fill(1/0)]:[...Array(d-1).fill(-1/0),h];return b>c?i.reverse():i}if(g===h)return((a,b,c)=>{var d=new nx(1),e=new nx(a);if(!e.isint()&&c){var f=Math.abs(a);f<1?(d=new nx(10).pow(ny(a)-1),e=new nx(Math.floor(e.div(d).toNumber())).mul(d)):f>1&&(e=new nx(Math.floor(a)))}else 0===a?e=new nx(Math.floor((b-1)/2)):c||(e=new nx(Math.floor(a)));for(var g=Math.floor((b-1)/2),h=[],i=0;i<b;i++)h.push(e.add(new nx(i-g).mul(d)).toNumber());return h})(g,d,e);var{step:j,tickMin:k,tickMax:l}=nC(g,h,f,e,0),m=nz(k,l.add(new nx(.1).mul(j)),j);return b>c?m.reverse():m},nE=function(a,b){var[c,d]=a,e=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[f,g]=nA([c,d]);if(f===-1/0||g===1/0)return[c,d];if(f===g)return[f];var h=Math.max(b,2),i=nB(new nx(g).sub(f).div(h-1),e,0),j=[...nz(new nx(f),new nx(g),i),g];return!1===e&&(j=j.map(a=>Math.round(a))),c>d?j.reverse():j},nF=a=>a.rootProps.stackOffset,nG=a=>a.rootProps.reverseStackOrder,nH=a=>a.options.chartName,nI=a=>a.rootProps.syncId,nJ=a=>a.rootProps.syncMethod,nK=a=>a.options.eventEmitter;function nL(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function nM(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?nL(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):nL(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var nN=Math.PI/180,nO=(a,b,c,d)=>({x:a+Math.cos(-nN*d)*c,y:b+Math.sin(-nN*d)*c}),nP={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},nQ={allowDecimals:!1,allowDuplicatedCategory:!0,allowDataOverflow:!1,angle:0,angleAxisId:0,axisLine:!0,axisLineType:"polygon",cx:0,cy:0,hide:!1,includeHidden:!1,label:!1,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"auto",zIndex:nP.axis},nR={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,includeHidden:!1,hide:!1,label:!1,orientation:"right",radiusAxisId:0,reversed:!1,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,tickLine:!0,type:"auto",zIndex:nP.axis},nS=(a,b)=>{if(a&&b)return null!=a&&a.reversed?[b[1],b[0]]:b};function nT(a,b,c){return"auto"!==c?c:null!=a?iw(a,b)?"category":"number":void 0}function nU(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function nV(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?nU(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):nU(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var nW={allowDataOverflow:nQ.allowDataOverflow,allowDecimals:nQ.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:nQ.angleAxisId,includeHidden:!1,name:void 0,reversed:nQ.reversed,scale:nQ.scale,tick:nQ.tick,tickCount:void 0,ticks:void 0,type:nQ.type,unit:void 0},nX={allowDataOverflow:nR.allowDataOverflow,allowDecimals:nR.allowDecimals,allowDuplicatedCategory:nR.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:nR.radiusAxisId,includeHidden:nR.includeHidden,name:void 0,reversed:nR.reversed,scale:nR.scale,tick:nR.tick,tickCount:nR.tickCount,ticks:void 0,type:nR.type,unit:void 0},nY=h7([(a,b)=>{if(null!=b)return a.polarAxis.angleAxis[b]},i2],(a,b)=>{if(null!=a)return a;var c,d=null!=(c=nT(b,"angleAxis",nW.type))?c:"category";return nV(nV({},nW),{},{type:d})}),nZ=h7([(a,b)=>a.polarAxis.radiusAxis[b],i2],(a,b)=>{if(null!=a)return a;var c,d=null!=(c=nT(b,"radiusAxis",nX.type))?c:"category";return nV(nV({},nX),{},{type:d})}),n$=a=>a.polarOptions,n_=h7([iG,iH,iO],function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(a-(c.left||0)-(c.right||0)),Math.abs(b-(c.top||0)-(c.bottom||0)))/2}),n0=h7([n$,n_],(a,b)=>{if(null!=a)return es(a.innerRadius,b,0)}),n1=h7([n$,n_],(a,b)=>{if(null!=a)return es(a.outerRadius,b,.8*b)}),n2=h7([n$],a=>{if(null==a)return[0,0];var{startAngle:b,endAngle:c}=a;return[b,c]});h7([nY,n2],nS);var n3=h7([n_,n0,n1],(a,b,c)=>{if(null!=a&&null!=b&&null!=c)return[b,c]});h7([nZ,n3],nS);var n4=h7([i_,n$,n0,n1,iG,iH],(a,b,c,d,e,f)=>{if(("centric"===a||"radial"===a)&&null!=b&&null!=c&&null!=d){var{cx:g,cy:h,startAngle:i,endAngle:j}=b;return{cx:es(g,e,e/2),cy:es(h,f,f/2),innerRadius:c,outerRadius:d,startAngle:i,endAngle:j,clockWise:!1}}}),n5=(a,b)=>b,n6=(a,b,c)=>c;function n7(a){return null==a?void 0:a.id}function n8(a,b,c){var{chartData:d=[]}=b,{allowDuplicatedCategory:e,dataKey:f}=c,g=new Map;return a.forEach(a=>{var b,c=null!=(b=a.data)?b:d;if(null!=c&&0!==c.length){var h=n7(a);c.forEach((b,c)=>{var d,i=null==f||e?c:String(iv(b,f,null)),j=iv(b,a.dataKey,0);Object.assign(d=g.has(i)?g.get(i):{},{[h]:j}),g.set(i,d)})}}),Array.from(g.values())}function n9(a){return"stackId"in a&&null!=a.stackId&&null!=a.dataKey}var oa=(a,b)=>a===b||null!=a&&null!=b&&a[0]===b[0]&&a[1]===b[1];function ob(a,b){return!!(Array.isArray(a)&&Array.isArray(b))&&0===a.length&&0===b.length||a===b}var oc=a=>{var b=i_(a);return"horizontal"===b?"xAxis":"vertical"===b?"yAxis":"centric"===b?"angleAxis":"radiusAxis"},od=a=>a.tooltip.settings.axisId;function oe(a){var b=a.ticks,c=a.bandwidth,d=a.range(),e=[Math.min(...d),Math.max(...d)];return{domain:()=>a.domain(),range:function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(()=>e),rangeMin:()=>e[0],rangeMax:()=>e[1],isInRange(a){var b=e[0],c=e[1];return b<=c?a>=b&&a<=c:a>=c&&a<=b},bandwidth:c?()=>c.call(a):void 0,ticks:b?c=>b.call(a,c):void 0,map:(b,c)=>{var d=a(b);if(null!=d){if(a.bandwidth&&null!=c&&c.position){var e=a.bandwidth();switch(c.position){case"middle":d+=e/2;break;case"end":d+=e}}return d}}}}function of(a,b,c){if("function"==typeof a)return oe(a.copy().domain(b).range(c));if(null!=a){var d=function(a){if(a in aM)return aM[a]();var b="scale".concat(ew(a));if(b in aM)return aM[b]()}(a);if(null!=d)return d.domain(b).range(c),oe(d)}}function og(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function oh(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?og(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):og(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var oi=[0,"auto"],oj={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ok=(a,b)=>a.cartesianAxis.xAxis[b],ol=(a,b)=>{var c=ok(a,b);return null==c?oj:c},om={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:oi,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},on=(a,b)=>a.cartesianAxis.yAxis[b],oo=(a,b)=>{var c=on(a,b);return null==c?om:c},op={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},oq=(a,b)=>{var c=a.cartesianAxis.zAxis[b];return null==c?op:c},or=(a,b,c)=>{switch(b){case"xAxis":return ol(a,c);case"yAxis":return oo(a,c);case"zAxis":return oq(a,c);case"angleAxis":return nY(a,c);case"radiusAxis":return nZ(a,c);default:throw Error("Unexpected axis type: ".concat(b))}},os=(a,b,c)=>{switch(b){case"xAxis":return ol(a,c);case"yAxis":return oo(a,c);case"angleAxis":return nY(a,c);case"radiusAxis":return nZ(a,c);default:throw Error("Unexpected axis type: ".concat(b))}},ot=a=>a.graphicalItems.cartesianItems.some(a=>"bar"===a.type)||a.graphicalItems.polarItems.some(a=>"radialBar"===a.type);function ou(a,b){return c=>{switch(a){case"xAxis":return"xAxisId"in c&&c.xAxisId===b;case"yAxis":return"yAxisId"in c&&c.yAxisId===b;case"zAxis":return"zAxisId"in c&&c.zAxisId===b;case"angleAxis":return"angleAxisId"in c&&c.angleAxisId===b;case"radiusAxis":return"radiusAxisId"in c&&c.radiusAxisId===b;default:return!1}}}var ov=a=>a.graphicalItems.cartesianItems,ow=h7([n5,n6],ou),ox=(a,b,c)=>a.filter(c).filter(a=>(null==b?void 0:b.includeHidden)===!0||!a.hide),oy=h7([ov,or,ow],ox,{memoizeOptions:{resultEqualityCheck:ob}}),oz=h7([oy],a=>a.filter(a=>"area"===a.type||"bar"===a.type).filter(n9)),oA=a=>a.filter(a=>!("stackId"in a)||void 0===a.stackId),oB=h7([oy],oA),oC=a=>a.map(a=>a.data).filter(Boolean).flat(1),oD=h7([oy],oC,{memoizeOptions:{resultEqualityCheck:ob}}),oE=(a,b)=>{var{chartData:c=[],dataStartIndex:d,dataEndIndex:e}=b;return a.length>0?a:c.slice(d,e+1)},oF=h7([oD,mL],oE),oG=(a,b,c)=>(null==b?void 0:b.dataKey)!=null?a.map(a=>({value:iv(a,b.dataKey)})):c.length>0?c.map(a=>a.dataKey).flatMap(b=>a.map(a=>({value:iv(a,b)}))):a.map(a=>({value:a})),oH=h7([oF,or,oy],oG);function oI(a,b){switch(a){case"xAxis":return"x"===b.direction;case"yAxis":return"y"===b.direction;default:return!1}}function oJ(a){if(ep(a)||a instanceof Date){var b=Number(a);if(eG(b))return b}}function oK(a){if(Array.isArray(a)){var b=[oJ(a[0]),oJ(a[1])];return mM(b)?b:void 0}var c=oJ(a);if(null!=c)return[c,c]}function oL(a){return a.map(oJ).filter(ex)}var oM=a=>{var b=oc(a),c=od(a);return os(a,b,c)},oN=h7([oM],a=>null==a?void 0:a.dataKey),oO=h7([oz,mL,oM],n8),oP=(a,b,c,d)=>Object.fromEntries(Object.entries(b.reduce((a,b)=>{if(null==b.stackId)return a;var c=a[b.stackId];return null==c&&(c=[]),c.push(b),a[b.stackId]=c,a},{})).map(b=>{var[e,f]=b,g=d?[...f].reverse():f;return[e,{stackedData:((a,b,c)=>{var d,e=null!=(d=iz[c])?d:il,f=(function(){var a=io([]),b=ip,c=il,d=iq;function e(e){var f,g,h=Array.from(a.apply(this,arguments),ir),i=h.length,j=-1;for(let a of e)for(f=0,++j;f<i;++f)(h[f][j]=[0,+d(a,h[f].key,j,e)]).data=a;for(f=0,g=im(b(h));f<i;++f)h[g[f]].index=f;return c(h,g),h}return e.keys=function(b){return arguments.length?(a="function"==typeof b?b:io(Array.from(b)),e):a},e.value=function(a){return arguments.length?(d="function"==typeof a?a:io(+a),e):d},e.order=function(a){return arguments.length?(b=null==a?ip:"function"==typeof a?a:io(Array.from(a)),e):b},e.offset=function(a){return arguments.length?(c=null==a?il:a,e):c},e})().keys(b).value((a,b)=>Number(iv(a,b,0))).order(ip).offset(e)(a);return f.forEach((c,d)=>{c.forEach((c,e)=>{var f=iv(a[e],b[d],0);Array.isArray(f)&&2===f.length&&eo(f[0])&&eo(f[1])&&(c[0]=f[0],c[1]=f[1])})}),f})(a,g.map(n7),c),graphicalItems:g}]})),oQ=h7([oO,oz,nF,nG],oP),oR=(a,b,c,d)=>{var{dataStartIndex:e,dataEndIndex:f}=b;if(null==d&&"zAxis"!==c){var g=((a,b,c)=>{if(null!=a)return(a=>[a[0]===1/0?0:a[0],a[1]===-1/0?0:a[1]])(Object.keys(a).reduce((d,e)=>{var f=a[e];if(!f)return d;var{stackedData:g}=f,h=g.reduce((a,d)=>{var e=(a=>{var b=a.flat(2).filter(eo);return[Math.min(...b),Math.max(...b)]})(is(d,b,c));return eG(e[0])&&eG(e[1])?[Math.min(a[0],e[0]),Math.max(a[1],e[1])]:a},[1/0,-1/0]);return[Math.min(h[0],d[0]),Math.max(h[1],d[1])]},[1/0,-1/0]))})(a,e,f);if(null==g||0!==g[0]||0!==g[1])return g}},oS=h7([or],a=>a.allowDataOverflow),oT=a=>{var b;if(null==a||!("domain"in a))return oi;if(null!=a.domain)return a.domain;if("ticks"in a&&null!=a.ticks){if("number"===a.type){var c=oL(a.ticks);return[Math.min(...c),Math.max(...c)]}if("category"===a.type)return a.ticks.map(String)}return null!=(b=null==a?void 0:a.domain)?b:oi},oU=h7([or],oT),oV=h7([oU,oS],mO),oW=h7([oQ,mJ,n5,oV],oR,{memoizeOptions:{resultEqualityCheck:oa}}),oX=a=>a.errorBars,oY=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.filter(Boolean);if(0!==d.length){var e=d.flat();return[Math.min(...e),Math.max(...e)]}},oZ=(a,b,c,d,e)=>{var f,g;if(c.length>0&&a.forEach(a=>{c.forEach(c=>{var h,i,j=null==(h=d[c.id])?void 0:h.filter(a=>oI(e,a)),k=iv(a,null!=(i=b.dataKey)?i:c.dataKey),l=function(a,b,c){return!c||"number"!=typeof b||em(b)||!c.length?[]:oL(c.flatMap(c=>{var d,e,f=iv(a,c.dataKey);if(Array.isArray(f)?[d,e]=f:d=e=f,eG(d)&&eG(e))return[b-d,b+e]}))}(a,k,j);if(l.length>=2){var m=Math.min(...l),n=Math.max(...l);(null==f||m<f)&&(f=m),(null==g||n>g)&&(g=n)}var o=oK(k);null!=o&&(f=null==f?o[0]:Math.min(f,o[0]),g=null==g?o[1]:Math.max(g,o[1]))})}),(null==b?void 0:b.dataKey)!=null&&a.forEach(a=>{var c=oK(iv(a,b.dataKey));null!=c&&(f=null==f?c[0]:Math.min(f,c[0]),g=null==g?c[1]:Math.max(g,c[1]))}),eG(f)&&eG(g))return[f,g]},o$=h7([oF,or,oB,oX,n5],oZ,{memoizeOptions:{resultEqualityCheck:oa}});function o_(a){var{value:b}=a;if(ep(b)||b instanceof Date)return b}var o0=a=>a.referenceElements.dots,o1=(a,b,c)=>a.filter(a=>"extendDomain"===a.ifOverflow).filter(a=>"xAxis"===b?a.xAxisId===c:a.yAxisId===c),o2=h7([o0,n5,n6],o1),o3=a=>a.referenceElements.areas,o4=h7([o3,n5,n6],o1),o5=a=>a.referenceElements.lines,o6=h7([o5,n5,n6],o1),o7=(a,b)=>{if(null!=a){var c=oL(a.map(a=>"xAxis"===b?a.x:a.y));if(0!==c.length)return[Math.min(...c),Math.max(...c)]}},o8=h7(o2,n5,o7),o9=(a,b)=>{if(null!=a){var c=oL(a.flatMap(a=>["xAxis"===b?a.x1:a.y1,"xAxis"===b?a.x2:a.y2]));if(0!==c.length)return[Math.min(...c),Math.max(...c)]}},pa=h7([o4,n5],o9),pb=(a,b)=>{if(null!=a){var c=a.flatMap(a=>"xAxis"===b?function(a){if(null!=a.x)return oL([a.x]);var b,c=null==(b=a.segment)?void 0:b.map(a=>a.x);return null==c||0===c.length?[]:oL(c)}(a):function(a){if(null!=a.y)return oL([a.y]);var b,c=null==(b=a.segment)?void 0:b.map(a=>a.y);return null==c||0===c.length?[]:oL(c)}(a));if(0!==c.length)return[Math.min(...c),Math.max(...c)]}},pc=h7([o6,n5],pb),pd=h7(o8,pc,pa,(a,b,c)=>oY(a,c,b)),pe=(a,b,c,d,e,f,g,h)=>null!=c?c:function(a,b,c){if(c||null!=b){if("function"==typeof a&&null!=b)try{var d=a(b,c);if(mM(d))return mN(d,b,c)}catch(a){}if(Array.isArray(a)&&2===a.length){var e,f,[g,h]=a;if("auto"===g)null!=b&&(e=Math.min(...b));else if(eo(g))e=g;else if("function"==typeof g)try{null!=b&&(e=g(null==b?void 0:b[0]))}catch(a){}else if("string"==typeof g&&iB.test(g)){var i=iB.exec(g);if(null==i||null==i[1]||null==b)e=void 0;else{var j=+i[1];e=b[0]-j}}else e=null==b?void 0:b[0];if("auto"===h)null!=b&&(f=Math.max(...b));else if(eo(h))f=h;else if("function"==typeof h)try{null!=b&&(f=h(null==b?void 0:b[1]))}catch(a){}else if("string"==typeof h&&iC.test(h)){var k=iC.exec(h);if(null==k||null==k[1]||null==b)f=void 0;else{var l=+k[1];f=b[1]+l}}else f=null==b?void 0:b[1];var m=[e,f];if(mM(m))return null==b?m:mN(m,b,c)}}}(b,"vertical"===g&&"xAxis"===h||"horizontal"===g&&"yAxis"===h?oY(d,f,e):oY(f,e),a.allowDataOverflow),pf=h7([or,oU,oV,oW,o$,pd,i_,n5],pe,{memoizeOptions:{resultEqualityCheck:oa}}),pg=[0,1],ph=(a,b,c,d,e,f,g)=>{if(null!=a&&null!=c&&0!==c.length||void 0!==g){var h,{dataKey:i,type:j}=a,k=iw(b,f);return k&&null==i?i5()(0,null!=(h=null==c?void 0:c.length)?h:0):"category"===j?((a,b,c)=>{var d=a.map(o_).filter(a=>null!=a);return c&&(null==b.dataKey||b.allowDuplicatedCategory&&et(d))?i5()(0,a.length):b.allowDuplicatedCategory?d:Array.from(new Set(d))})(d,a,k):"expand"===e?pg:g}},pi=h7([or,i_,oF,oH,nF,n5,pf],ph),pj=(a,b,c)=>{if(null!=a){var{scale:d,type:e}=a;if("auto"===d)return"category"===e&&c&&(c.indexOf("LineChart")>=0||c.indexOf("AreaChart")>=0||c.indexOf("ComposedChart")>=0&&!b)?"point":"category"===e?"band":"linear";if("string"==typeof d){var f="scale".concat(ew(d));return f in aM?f:"point"}}},pk=h7([or,ot,nH],pj);function pl(a,b,c,d){if(null!=c&&null!=d)return"function"==typeof a.scale?of(a.scale,c,d):of(b,c,d)}var pm=(a,b,c)=>{var d=oT(b);if("auto"===c||"linear"===c){if(null!=b&&b.tickCount&&Array.isArray(d)&&("auto"===d[0]||"auto"===d[1])&&mM(a))return nD(a,b.tickCount,b.allowDecimals);if(null!=b&&b.tickCount&&"number"===b.type&&mM(a))return nE(a,b.tickCount,b.allowDecimals)}},pn=h7([pi,os,pk],pm),po=(a,b,c,d)=>{if("angleAxis"!==d&&(null==a?void 0:a.type)==="number"&&mM(b)&&Array.isArray(c)&&c.length>0){var e,f;return[Math.min(b[0],null!=(e=c[0])?e:0),Math.max(b[1],null!=(f=c[c.length-1])?f:0)]}return b},pp=h7([or,pi,pn,n5],po),pq=h7(oH,or,(a,b)=>{if(b&&"number"===b.type){var c=1/0,d=Array.from(oL(a.map(a=>a.value))).sort((a,b)=>a-b),e=d[0],f=d[d.length-1];if(null==e||null==f)return 1/0;var g=f-e;if(0===g)return 1/0;for(var h=0;h<d.length-1;h++){var i=d[h],j=d[h+1];null!=i&&null!=j&&(c=Math.min(c,j-i))}return c/g}}),pr=h7(pq,i_,a=>a.rootProps.barCategoryGap,iO,(a,b,c,d,e)=>e,(a,b,c,d,e)=>{if(!eG(a))return 0;var f="vertical"===b?d.height:d.width;if("gap"===e)return a*f/2;if("no-gap"===e){var g=es(c,a*f),h=a*f/2;return h-g-(h-g)/f*g}return 0}),ps=h7(ol,(a,b,c)=>{var d=ol(a,b);return null==d||"string"!=typeof d.padding?0:pr(a,"xAxis",b,c,d.padding)},(a,b)=>{if(null==a)return{left:0,right:0};var c,d,{padding:e}=a;return"string"==typeof e?{left:b,right:b}:{left:(null!=(c=e.left)?c:0)+b,right:(null!=(d=e.right)?d:0)+b}}),pt=h7(oo,(a,b,c)=>{var d=oo(a,b);return null==d||"string"!=typeof d.padding?0:pr(a,"yAxis",b,c,d.padding)},(a,b)=>{if(null==a)return{top:0,bottom:0};var c,d,{padding:e}=a;return"string"==typeof e?{top:b,bottom:b}:{top:(null!=(c=e.top)?c:0)+b,bottom:(null!=(d=e.bottom)?d:0)+b}}),pu=h7([iO,ps,iU,iT,(a,b,c)=>c],(a,b,c,d,e)=>{var{padding:f}=d;return e?[f.left,c.width-f.right]:[a.left+b.left,a.left+a.width-b.right]}),pv=h7([iO,i_,pt,iU,iT,(a,b,c)=>c],(a,b,c,d,e,f)=>{var{padding:g}=e;return f?[d.height-g.bottom,g.top]:"horizontal"===b?[a.top+a.height-c.bottom,a.top+c.top]:[a.top+c.top,a.top+a.height-c.bottom]}),pw=(a,b,c,d)=>{var e;switch(b){case"xAxis":return pu(a,c,d);case"yAxis":return pv(a,c,d);case"zAxis":return null==(e=oq(a,c))?void 0:e.range;case"angleAxis":return n2(a);case"radiusAxis":return n3(a,c);default:return}},px=h7([or,pw],nS),py=h7([pk,pp],(a,b)=>{if(null!=b)if("linear"!==a)return b;else{if(!mM(b)){for(var c,d,e=0;e<b.length;e++){var f=b[e];eG(f)&&((void 0===c||f<c)&&(c=f),(void 0===d||f>d)&&(d=f))}return void 0!==c&&void 0!==d?[c,d]:void 0}return b}}),pz=h7([or,pk,py,px],pl);function pA(a,b){return a.id<b.id?-1:+(a.id>b.id)}h7([oy,oX,n5],(a,b,c)=>a.flatMap(a=>b[a.id]).filter(Boolean).filter(a=>oI(c,a)));var pB=(a,b)=>b,pC=(a,b,c)=>c,pD=h7(iK,pB,pC,(a,b,c)=>a.filter(a=>a.orientation===b).filter(a=>a.mirror===c).sort(pA)),pE=h7(iL,pB,pC,(a,b,c)=>a.filter(a=>a.orientation===b).filter(a=>a.mirror===c).sort(pA)),pF=(a,b)=>({width:a.width,height:b.height}),pG=h7(iO,ol,pF),pH=h7(iH,iO,pD,pB,pC,(a,b,c,d,e)=>{var f,g={};return c.forEach(c=>{var h=pF(b,c);null==f&&(f=((a,b,c)=>{switch(b){case"top":return a.top;case"bottom":return c-a.bottom;default:return 0}})(b,d,a));var i="top"===d&&!e||"bottom"===d&&e;g[c.id]=f-Number(i)*h.height,f+=(i?-1:1)*h.height}),g}),pI=h7(iG,iO,pE,pB,pC,(a,b,c,d,e)=>{var f,g={};return c.forEach(c=>{var h=((a,b)=>({width:"number"==typeof b.width?b.width:60,height:a.height}))(b,c);null==f&&(f=((a,b,c)=>{switch(b){case"left":return a.left;case"right":return c-a.right;default:return 0}})(b,d,a));var i="left"===d&&!e||"right"===d&&e;g[c.id]=f-Number(i)*h.width,f+=(i?-1:1)*h.width}),g}),pJ=h7([iO,ol,(a,b)=>{var c=ol(a,b);if(null!=c)return pH(a,c.orientation,c.mirror)},(a,b)=>b],(a,b,c,d)=>{if(null!=b){var e=null==c?void 0:c[d];return null==e?{x:a.left,y:0}:{x:a.left,y:e}}}),pK=h7([iO,oo,(a,b)=>{var c=oo(a,b);if(null!=c)return pI(a,c.orientation,c.mirror)},(a,b)=>b],(a,b,c,d)=>{if(null!=b){var e=null==c?void 0:c[d];return null==e?{x:0,y:a.top}:{x:e,y:a.top}}}),pL=h7(iO,oo,(a,b)=>({width:"number"==typeof b.width?b.width:60,height:a.height})),pM=(a,b,c,d)=>{if(null!=c){var{allowDuplicatedCategory:e,type:f,dataKey:g}=c,h=iw(a,d),i=b.map(a=>a.value);if(g&&h&&"category"===f&&e&&et(i))return i}},pN=h7([i_,oH,or,n5],pM),pO=(a,b,c,d)=>{if(null!=c&&null!=c.dataKey){var{type:e,scale:f}=c;if(iw(a,d)&&("number"===e||"auto"!==f))return b.map(a=>a.value)}},pP=h7([i_,oH,os,n5],pO),pQ=h7([i_,(a,b,c)=>{switch(b){case"xAxis":return ol(a,c);case"yAxis":return oo(a,c);default:throw Error("Unexpected axis type: ".concat(b))}},pk,pz,pN,pP,pw,pn,n5],(a,b,c,d,e,f,g,h,i)=>{if(null!=b){var j=iw(a,i);return{angle:b.angle,interval:b.interval,minTickGap:b.minTickGap,orientation:b.orientation,tick:b.tick,tickCount:b.tickCount,tickFormatter:b.tickFormatter,ticks:b.ticks,type:b.type,unit:b.unit,axisType:i,categoricalDomain:f,duplicateDomain:e,isCategorical:j,niceTicks:h,range:g,realScaleType:c,scale:d}}}),pR=h7([i_,os,pk,pz,pn,pw,pN,pP,n5],(a,b,c,d,e,f,g,h,i)=>{if(null!=b&&null!=d){var j=iw(a,i),{type:k,ticks:l,tickCount:m}=b,n="scaleBand"===c&&"function"==typeof d.bandwidth?d.bandwidth()/2:2,o="category"===k&&d.bandwidth?d.bandwidth()/n:0;o="angleAxis"===i&&null!=f&&f.length>=2?2*el(f[0]-f[1])*o:o;var p=l||e;return p?p.map((a,b)=>{var c=g?g.indexOf(a):a,e=d.map(c);return eG(e)?{index:b,coordinate:e+o,value:a,offset:o}:null}).filter(ex):j&&h?h.map((a,b)=>{var c=d.map(a);return eG(c)?{coordinate:c+o,value:a,index:b,offset:o}:null}).filter(ex):d.ticks?d.ticks(m).map((a,b)=>{var c=d.map(a);return eG(c)?{coordinate:c+o,value:a,index:b,offset:o}:null}).filter(ex):d.domain().map((a,b)=>{var c=d.map(a);return eG(c)?{coordinate:c+o,value:g?g[a]:a,index:b,offset:o}:null}).filter(ex)}}),pS=h7([i_,os,pz,pw,pN,pP,n5],(a,b,c,d,e,f,g)=>{if(null!=b&&null!=c&&null!=d&&d[0]!==d[1]){var h=iw(a,g),{tickCount:i}=b,j=0;return(j="angleAxis"===g&&(null==d?void 0:d.length)>=2?2*el(d[0]-d[1])*j:j,h&&f)?f.map((a,b)=>{var d=c.map(a);return eG(d)?{coordinate:d+j,value:a,index:b,offset:j}:null}).filter(ex):c.ticks?c.ticks(i).map((a,b)=>{var d=c.map(a);return eG(d)?{coordinate:d+j,value:a,index:b,offset:j}:null}).filter(ex):c.domain().map((a,b)=>{var d=c.map(a);return eG(d)?{coordinate:d+j,value:e?e[a]:a,index:b,offset:j}:null}).filter(ex)}}),pT=h7(or,pz,(a,b)=>{if(null!=a&&null!=b)return oh(oh({},a),{},{scale:b})}),pU=h7([or,pk,pi,px],pl);h7((a,b,c)=>oq(a,c),pU,(a,b)=>{if(null!=a&&null!=b)return oh(oh({},a),{},{scale:b})});var pV=h7([i_,iK,iL],(a,b,c)=>{switch(a){case"horizontal":return b.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return c.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),pW=a=>a.options.defaultTooltipEventType,pX=a=>a.options.validateTooltipEventTypes;function pY(a,b,c){if(null==a)return b;var d=a?"axis":"item";return null==c?b:c.includes(d)?d:b}function pZ(a,b){return pY(b,pW(a),pX(a))}var p$=(a,b)=>{var c,d=Number(b);if(!em(d)&&null!=b)return d>=0?null==a||null==(c=a[d])?void 0:c.value:void 0};function p_(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function p0(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?p_(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):p_(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var p1=(a,b,c,d)=>{if(null==b)return hs;var e=function(a,b,c){return"axis"===b?"click"===c?a.axisInteraction.click:a.axisInteraction.hover:"click"===c?a.itemInteraction.click:a.itemInteraction.hover}(a,b,c);if(null==e)return hs;if(e.active)return e;if(a.keyboardInteraction.active)return a.keyboardInteraction;if(a.syncInteraction.active&&null!=a.syncInteraction.index)return a.syncInteraction;var f=!0===a.settings.active;if(null!=e.index){if(f)return p0(p0({},e),{},{active:!0})}else if(null!=d)return{active:!0,coordinate:void 0,dataKey:void 0,index:d,graphicalItemId:void 0};return p0(p0({},hs),{},{coordinate:e.coordinate})},p2=(a,b,c,d)=>{var e=null==a?void 0:a.index;if(null==e)return null;var f=Number(e);if(!eG(f))return e;var g=Infinity;b.length>0&&(g=b.length-1);var h=Math.max(0,Math.min(f,g)),i=b[h];return null==i?String(h):!function(a,b,c){if(null==c||null==b)return!0;var d=iv(a,b);return!(null!=d&&mM(c))||function(a,b){var c=function(a){if("number"==typeof a)return Number.isFinite(a)?a:void 0;if(a instanceof Date){var b=a.valueOf();return Number.isFinite(b)?b:void 0}var c=Number(a);return Number.isFinite(c)?c:void 0}(a),d=b[0],e=b[1];if(void 0===c)return!1;var f=Math.min(d,e),g=Math.max(d,e);return c>=f&&c<=g}(d,c)}(i,c,d)?null:String(h)},p3=(a,b,c,d,e,f,g)=>{if(null!=f){var h=g[0],i=null==h?void 0:h.getPosition(f);if(null!=i)return i;var j=null==e?void 0:e[Number(f)];if(j)if("horizontal"===c)return{x:j.coordinate,y:(d.top+b)/2};else return{x:(d.left+a)/2,y:j.coordinate}}},p4=(a,b,c,d)=>{if("axis"===b)return a.tooltipItemPayloads;if(0===a.tooltipItemPayloads.length)return[];if(null==(e="hover"===c?a.itemInteraction.hover.graphicalItemId:a.itemInteraction.click.graphicalItemId)&&null!=d){var e,f=a.tooltipItemPayloads[0];return null!=f?[f]:[]}return a.tooltipItemPayloads.filter(a=>{var b;return(null==(b=a.settings)?void 0:b.graphicalItemId)===e})},p5=a=>a.options.tooltipPayloadSearcher,p6=a=>a.tooltip;function p7(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function p8(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?p7(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):p7(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var p9=(a,b,c,d,e,f,g)=>{if(null!=b&&null!=f){var{chartData:h,computedData:i,dataStartIndex:j,dataEndIndex:k}=c;return a.reduce((a,c)=>{var l,m,n,o,p,{dataDefinedOnItem:q,settings:r}=c,s=(l=q,m=h,null!=l?l:m),t=Array.isArray(s)?is(s,j,k):s,u=null!=(n=null==r?void 0:r.dataKey)?n:d,v=null==r?void 0:r.nameKey;return Array.isArray(o=d&&Array.isArray(t)&&!Array.isArray(t[0])&&"axis"===g?ev(t,d,e):f(t,b,i,v))?o.forEach(b=>{var c=p8(p8({},r),{},{name:b.name,unit:b.unit,color:void 0,fill:void 0});a.push(iE({tooltipEntrySettings:c,dataKey:b.dataKey,payload:b.payload,value:iv(b.payload,b.dataKey),name:b.name}))}):a.push(iE({tooltipEntrySettings:r,dataKey:u,payload:o,value:iv(o,u),name:null!=(p=iv(o,v))?p:null==r?void 0:r.name})),a},[])}},qa=h7([oM,ot,nH],pj),qb=h7([a=>a.graphicalItems.cartesianItems,a=>a.graphicalItems.polarItems],(a,b)=>[...a,...b]),qc=h7([oc,od],ou),qd=h7([qb,oM,qc],ox,{memoizeOptions:{resultEqualityCheck:ob}}),qe=h7([qd],a=>a.filter(n9)),qf=h7([qd],oC,{memoizeOptions:{resultEqualityCheck:ob}}),qg=h7([qf,mJ],oE),qh=h7([qe,mJ,oM],n8),qi=h7([qg,oM,qd],oG),qj=h7([oM],oT),qk=h7([oM],a=>a.allowDataOverflow),ql=h7([qj,qk],mO),qm=h7([qd],a=>a.filter(n9)),qn=h7([qh,qm,nF,nG],oP),qo=h7([qn,mJ,oc,ql],oR),qp=h7([qd],oA),qq=h7([qg,oM,qp,oX,oc],oZ,{memoizeOptions:{resultEqualityCheck:oa}}),qr=h7([o0,oc,od],o1),qs=h7([qr,oc],o7),qt=h7([o3,oc,od],o1),qu=h7([qt,oc],o9),qv=h7([o5,oc,od],o1),qw=h7([qv,oc],pb),qx=h7([qs,qw,qu],oY),qy=h7([oM,qj,ql,qo,qq,qx,i_,oc],pe),qz=h7([oM,i_,qg,qi,nF,oc,qy],ph),qA=h7([qz,oM,qa],pm),qB=h7([oM,qz,qA,oc],po),qC=a=>{var b=oc(a),c=od(a);return pw(a,b,c,!1)},qD=h7([oM,qC],nS),qE=h7([oM,qa,qB,qD],pl),qF=h7([i_,qi,oM,oc],pM),qG=h7([i_,qi,oM,oc],pO),qH=h7([i_,oM,qa,qE,qC,qF,qG,oc],(a,b,c,d,e,f,g,h)=>{if(b){var{type:i}=b,j=iw(a,h);if(d){var k="scaleBand"===c&&d.bandwidth?d.bandwidth()/2:2,l="category"===i&&d.bandwidth?d.bandwidth()/k:0;return(l="angleAxis"===h&&null!=e&&(null==e?void 0:e.length)>=2?2*el(e[0]-e[1])*l:l,j&&g)?g.map((a,b)=>{var c=d.map(a);return eG(c)?{coordinate:c+l,value:a,index:b,offset:l}:null}).filter(ex):d.domain().map((a,b)=>{var c=d.map(a);return eG(c)?{coordinate:c+l,value:f?f[a]:a,index:b,offset:l}:null}).filter(ex)}}}),qI=h7([pW,pX,a=>a.tooltip.settings],(a,b,c)=>pY(c.shared,a,b)),qJ=a=>a.tooltip.settings.trigger,qK=a=>a.tooltip.settings.defaultIndex,qL=h7([p6,qI,qJ,qK],p1),qM=h7([qL,qg,oN,qz],p2),qN=h7([qH,qM],p$),qO=h7([qL],a=>{if(a)return a.dataKey});h7([qL],a=>{if(a)return a.graphicalItemId});var qP=h7([p6,qI,qJ,qK],p4),qQ=h7([iG,iH,i_,iO,qH,qK,qP],p3),qR=h7([qL,qQ],(a,b)=>null!=a&&a.coordinate?a.coordinate:b),qS=h7([qL],a=>{var b;return null!=(b=null==a?void 0:a.active)&&b}),qT=h7([qP,qM,mJ,oN,qN,p5,qI],p9),qU=h7([qT],a=>{if(null!=a)return Array.from(new Set(a.map(a=>a.payload).filter(a=>null!=a)))});function qV(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function qW(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?qV(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):qV(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var qX=(a,b,c,d,e)=>{var f=null!=(l=null==b?void 0:b.length)?l:0;if(f<=1||null==a)return 0;if("angleAxis"===d&&null!=e&&1e-6>=Math.abs(Math.abs(e[1]-e[0])-360))for(var g=0;g<f;g++){var h=g>0?null==(m=c[g-1])?void 0:m.coordinate:null==(n=c[f-1])?void 0:n.coordinate,i=null==(o=c[g])?void 0:o.coordinate,j=g>=f-1?null==(p=c[0])?void 0:p.coordinate:null==(q=c[g+1])?void 0:q.coordinate,k=void 0;if(null!=h&&null!=i&&null!=j)if(el(i-h)!==el(j-i)){var l,m,n,o,p,q,r,s=[];if(el(j-i)===el(e[1]-e[0])){k=j;var t=i+e[1]-e[0];s[0]=Math.min(t,(t+h)/2),s[1]=Math.max(t,(t+h)/2)}else{k=h;var u=j+e[1]-e[0];s[0]=Math.min(i,(u+i)/2),s[1]=Math.max(i,(u+i)/2)}var v=[Math.min(i,(k+i)/2),Math.max(i,(k+i)/2)];if(a>v[0]&&a<=v[1]||a>=s[0]&&a<=s[1])return null==(r=c[g])?void 0:r.index}else{var w,x=Math.min(h,j),y=Math.max(h,j);if(a>(x+i)/2&&a<=(y+i)/2)return null==(w=c[g])?void 0:w.index}}else if(b)for(var z=0;z<f;z++){var A=b[z];if(null!=A){var B=b[z+1],C=b[z-1];if(0===z&&null!=B&&a<=(A.coordinate+B.coordinate)/2||z===f-1&&null!=C&&a>(A.coordinate+C.coordinate)/2||z>0&&z<f-1&&null!=C&&null!=B&&a>(A.coordinate+C.coordinate)/2&&a<=(A.coordinate+B.coordinate)/2)return A.index}}return -1},qY=(a,b)=>b,qZ=(a,b,c)=>c,q$=(a,b,c,d)=>d,q_=h7(qH,a=>ij()(a,a=>a.coordinate)),q0=h7([p6,qY,qZ,q$],p1),q1=h7([q0,qg,oN,qz],p2),q2=h7([p6,qY,qZ,q$],p4),q3=h7([iG,iH,i_,iO,qH,q$,q2],p3),q4=h7([q0,q3],(a,b)=>{var c;return null!=(c=a.coordinate)?c:b}),q5=h7([qH,q1],p$),q6=h7([q2,q1,mJ,oN,q5,p5,qY],p9),q7=h7([q0,q1],(a,b)=>({isActive:a.active&&null!=b,activeIndex:b})),q8=h7([(a,b)=>b,i_,n4,oc,qD,qH,q_,iO],(a,b,c,d,e,f,g,h)=>{if(a&&b&&d&&e&&f)return"horizontal"===b||"vertical"===b?((a,b,c,d,e,f,g)=>{if(a&&c&&d&&e&&function(a,b){var{chartX:c,chartY:d}=a;return c>=b.left&&c<=b.left+b.width&&d>=b.top&&d<=b.top+b.height}(a,g)){var h=qX(((a,b)=>"horizontal"===b?a.chartX:"vertical"===b?a.chartY:void 0)(a,b),f,e,c,d),i=((a,b,c,d)=>{var e=b.find(a=>a&&a.index===c);if(e){if("horizontal"===a)return{x:e.coordinate,y:d.chartY};if("vertical"===a)return{x:d.chartX,y:e.coordinate}}return{x:0,y:0}})(b,e,h,a);return{activeIndex:String(h),activeCoordinate:i}}})(a,b,d,e,f,g,h):((a,b,c,d,e,f,g)=>{if(a&&d&&e&&f&&c){var h=((a,b)=>{var c,{chartX:d,chartY:e}=a,{radius:f,angle:g}=((a,b)=>{var{x:c,y:d}=a,{cx:e,cy:f}=b,g=((a,b)=>{var{x:c,y:d}=a,{x:e,y:f}=b;return Math.sqrt((c-e)**2+(d-f)**2)})({x:c,y:d},{x:e,y:f});if(g<=0)return{radius:g,angle:0};var h=Math.acos((c-e)/g);return d>f&&(h=2*Math.PI-h),{radius:g,angle:180*h/Math.PI,angleInRadian:h}})({x:d,y:e},b),{innerRadius:h,outerRadius:i}=b;if(f<h||f>i||0===f)return null;var{startAngle:j,endAngle:k}=(a=>{var{startAngle:b,endAngle:c}=a,d=Math.min(Math.floor(b/360),Math.floor(c/360));return{startAngle:b-360*d,endAngle:c-360*d}})(b),l=g;if(j<=k){for(;l>k;)l-=360;for(;l<j;)l+=360;c=l>=j&&l<=k}else{for(;l>j;)l-=360;for(;l<k;)l+=360;c=l>=k&&l<=j}return c?nM(nM({},b),{},{radius:f,angle:((a,b)=>{var{startAngle:c,endAngle:d}=b;return a+360*Math.min(Math.floor(c/360),Math.floor(d/360))})(l,b)}):null})(a,c);if(h){var i=qX(((a,b)=>"centric"===b?a.angle:a.radius)(h,b),g,f,d,e),j=((a,b,c,d)=>{var e=b.find(a=>a&&a.index===c);if(e){if("centric"===a){var f=e.coordinate,{radius:g}=d;return qW(qW(qW({},d),nO(d.cx,d.cy,g,f)),{},{angle:f,radius:g})}var h=e.coordinate,{angle:i}=d;return qW(qW(qW({},d),nO(d.cx,d.cy,h,i)),{},{angle:i,radius:h})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(b,f,i,h);return{activeIndex:String(i),activeCoordinate:j}}}})(a,b,c,d,e,f,g)}),q9=a=>{var b=a.currentTarget.getBoundingClientRect(),c=b.width/a.currentTarget.offsetWidth,d=b.height/a.currentTarget.offsetHeight;return{chartX:Math.round((a.clientX-b.left)/c),chartY:Math.round((a.clientY-b.top)/d)}},ra=fX("mouseClick"),rb=gB();rb.startListening({actionCreator:ra,effect:(a,b)=>{var c=a.payload,d=q8(b.getState(),q9(c));(null==d?void 0:d.activeIndex)!=null&&b.dispatch(hD({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate}))}});var rc=fX("mouseMove"),rd=gB(),re=null;function rf(a,b){return b instanceof HTMLElement?"HTMLElement <".concat(b.tagName,' class="').concat(b.className,'">'):b===window?"global.window":"children"===a&&"object"==typeof b&&null!==b?"<<CHILDREN>>":b}function rg(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function rh(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?rg(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):rg(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}rd.startListening({actionCreator:rc,effect:(a,b)=>{var c=a.payload;null!==re&&cancelAnimationFrame(re);var d=q9(c);re=requestAnimationFrame(()=>{var a=b.getState();if("axis"===pZ(a,a.tooltip.settings.shared)){var c=q8(a,d);(null==c?void 0:c.activeIndex)!=null?b.dispatch(hC({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):b.dispatch(hA())}re=null})}});var ri=f6({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(a,b){a.xAxis[b.payload.id]=b.payload},prepare:f0()},replaceXAxis:{reducer(a,b){var{prev:c,next:d}=b.payload;void 0!==a.xAxis[c.id]&&(c.id!==d.id&&delete a.xAxis[c.id],a.xAxis[d.id]=d)},prepare:f0()},removeXAxis:{reducer(a,b){delete a.xAxis[b.payload.id]},prepare:f0()},addYAxis:{reducer(a,b){a.yAxis[b.payload.id]=b.payload},prepare:f0()},replaceYAxis:{reducer(a,b){var{prev:c,next:d}=b.payload;void 0!==a.yAxis[c.id]&&(c.id!==d.id&&delete a.yAxis[c.id],a.yAxis[d.id]=d)},prepare:f0()},removeYAxis:{reducer(a,b){delete a.yAxis[b.payload.id]},prepare:f0()},addZAxis:{reducer(a,b){a.zAxis[b.payload.id]=b.payload},prepare:f0()},replaceZAxis:{reducer(a,b){var{prev:c,next:d}=b.payload;void 0!==a.zAxis[c.id]&&(c.id!==d.id&&delete a.zAxis[c.id],a.zAxis[d.id]=d)},prepare:f0()},removeZAxis:{reducer(a,b){delete a.zAxis[b.payload.id]},prepare:f0()},updateYAxisWidth(a,b){var{id:c,width:d}=b.payload,e=a.yAxis[c];if(e){var f,g=e.widthHistory||[];if(3===g.length&&g[0]===g[2]&&d===g[1]&&d!==e.width&&1>=Math.abs(d-(null!=(f=g[0])?f:0)))return;var h=[...g,d].slice(-3);a.yAxis[c]=rh(rh({},e),{},{width:d,widthHistory:h})}}}}),{addXAxis:rj,replaceXAxis:rk,removeXAxis:rl,addYAxis:rm,replaceYAxis:rn,removeYAxis:ro,addZAxis:rp,replaceZAxis:rq,removeZAxis:rr,updateYAxisWidth:rs}=ri.actions,rt=ri.reducer,ru=f6({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(a,b){a.cartesianItems.push(b.payload)},prepare:f0()},replaceCartesianGraphicalItem:{reducer(a,b){var{prev:c,next:d}=b.payload,e=fK(a).cartesianItems.indexOf(c);e>-1&&(a.cartesianItems[e]=d)},prepare:f0()},removeCartesianGraphicalItem:{reducer(a,b){var c=fK(a).cartesianItems.indexOf(b.payload);c>-1&&a.cartesianItems.splice(c,1)},prepare:f0()},addPolarGraphicalItem:{reducer(a,b){a.polarItems.push(b.payload)},prepare:f0()},removePolarGraphicalItem:{reducer(a,b){var c=fK(a).polarItems.indexOf(b.payload);c>-1&&a.polarItems.splice(c,1)},prepare:f0()}}}),{addCartesianGraphicalItem:rv,replaceCartesianGraphicalItem:rw,removeCartesianGraphicalItem:rx,addPolarGraphicalItem:ry,removePolarGraphicalItem:rz}=ru.actions,rA=ru.reducer,rB=f6({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(a,b)=>{a.dots.push(b.payload)},removeDot:(a,b)=>{var c=fK(a).dots.findIndex(a=>a===b.payload);-1!==c&&a.dots.splice(c,1)},addArea:(a,b)=>{a.areas.push(b.payload)},removeArea:(a,b)=>{var c=fK(a).areas.findIndex(a=>a===b.payload);-1!==c&&a.areas.splice(c,1)},addLine:(a,b)=>{a.lines.push(b.payload)},removeLine:(a,b)=>{var c=fK(a).lines.findIndex(a=>a===b.payload);-1!==c&&a.lines.splice(c,1)}}}),{addDot:rC,removeDot:rD,addArea:rE,removeArea:rF,addLine:rG,removeLine:rH}=rB.actions,rI=rB.reducer,rJ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},rK=f6({name:"brush",initialState:rJ,reducers:{setBrushSettings:(a,b)=>null==b.payload?rJ:b.payload}}),{setBrushSettings:rL}=rK.actions,rM=rK.reducer,rN=f6({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(a,b){a.size.width=b.payload.width,a.size.height=b.payload.height},setLegendSettings(a,b){a.settings.align=b.payload.align,a.settings.layout=b.payload.layout,a.settings.verticalAlign=b.payload.verticalAlign,a.settings.itemSorter=b.payload.itemSorter},addLegendPayload:{reducer(a,b){a.payload.push(b.payload)},prepare:f0()},replaceLegendPayload:{reducer(a,b){var{prev:c,next:d}=b.payload,e=fK(a).payload.indexOf(c);e>-1&&(a.payload[e]=d)},prepare:f0()},removeLegendPayload:{reducer(a,b){var c=fK(a).payload.indexOf(b.payload);c>-1&&a.payload.splice(c,1)},prepare:f0()}}}),{setLegendSize:rO,setLegendSettings:rP,addLegendPayload:rQ,replaceLegendPayload:rR,removeLegendPayload:rS}=rN.actions,rT=rN.reducer,rU={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},rV=f6({name:"rootProps",initialState:rU,reducers:{updateOptions:(a,b)=>{var c;a.accessibilityLayer=b.payload.accessibilityLayer,a.barCategoryGap=b.payload.barCategoryGap,a.barGap=null!=(c=b.payload.barGap)?c:rU.barGap,a.barSize=b.payload.barSize,a.maxBarSize=b.payload.maxBarSize,a.stackOffset=b.payload.stackOffset,a.syncId=b.payload.syncId,a.syncMethod=b.payload.syncMethod,a.className=b.payload.className,a.baseValue=b.payload.baseValue,a.reverseStackOrder=b.payload.reverseStackOrder}}}),rW=rV.reducer,{updateOptions:rX}=rV.actions,rY=f6({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(a,b){a.radiusAxis[b.payload.id]=b.payload},removeRadiusAxis(a,b){delete a.radiusAxis[b.payload.id]},addAngleAxis(a,b){a.angleAxis[b.payload.id]=b.payload},removeAngleAxis(a,b){delete a.angleAxis[b.payload.id]}}}),{addRadiusAxis:rZ,removeRadiusAxis:r$,addAngleAxis:r_,removeAngleAxis:r0}=rY.actions,r1=rY.reducer,r2=f6({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(a,b)=>b.payload}}),{updatePolarOptions:r3}=r2.actions,r4=r2.reducer,r5=fX("keyDown"),r6=fX("focus"),r7=gB();r7.startListening({actionCreator:r5,effect:(a,b)=>{var c=b.getState();if(!1===c.rootProps.accessibilityLayer)return;var{keyboardInteraction:d}=c.tooltip,e=a.payload;if("ArrowRight"===e||"ArrowLeft"===e||"Enter"===e){var f=p2(d,qg(c),oN(c),qz(c)),g=null==f?-1:Number(f);if(Number.isFinite(g)&&!(g<0)){var h=qH(c);if("Enter"===e){var i=q3(c,"axis","hover",String(d.index));b.dispatch(hF({active:!d.active,activeIndex:d.index,activeCoordinate:i}));return}var j=g+("ArrowRight"===e?1:-1)*("left-to-right"===pV(c)?1:-1);if(null!=h&&!(j>=h.length)&&!(j<0)){var k=q3(c,"axis","hover",String(j));b.dispatch(hF({active:!0,activeIndex:j.toString(),activeCoordinate:k}))}}}}}),r7.startListening({actionCreator:r6,effect:(a,b)=>{var c=b.getState();if(!1!==c.rootProps.accessibilityLayer){var{keyboardInteraction:d}=c.tooltip;if(!d.active&&null==d.index){var e=q3(c,"axis","hover",String("0"));b.dispatch(hF({active:!0,activeIndex:"0",activeCoordinate:e}))}}}});var r8=fX("externalEvent"),r9=gB(),sa=new Map;r9.startListening({actionCreator:r8,effect:(a,b)=>{var{handler:c,reactEvent:d}=a.payload;if(null!=c){d.persist();var e=d.type,f=sa.get(e);void 0!==f&&cancelAnimationFrame(f);var g=requestAnimationFrame(()=>{try{var a=b.getState(),f={activeCoordinate:qR(a),activeDataKey:qO(a),activeIndex:qM(a),activeLabel:qN(a),activeTooltipIndex:qM(a),isTooltipActive:qS(a)};c(f,d)}finally{sa.delete(e)}});sa.set(e,g)}}});var sb=h7([p6],a=>a.tooltipItemPayloads),sc=h7([sb,(a,b)=>b,(a,b,c)=>c],(a,b,c)=>{if(null!=b){var d=a.find(a=>a.settings.graphicalItemId===c);if(null!=d){var{getPosition:e}=d;if(null!=e)return e(b)}}}),sd=fX("touchMove"),se=gB();se.startListening({actionCreator:sd,effect:(a,b)=>{var c=a.payload;if(null!=c.touches&&0!==c.touches.length){var d=b.getState(),e=pZ(d,d.tooltip.settings.shared);if("axis"===e){var f=c.touches[0];if(null==f)return;var g=q8(d,q9({clientX:f.clientX,clientY:f.clientY,currentTarget:c.currentTarget}));(null==g?void 0:g.activeIndex)!=null&&b.dispatch(hC({activeIndex:g.activeIndex,activeDataKey:void 0,activeCoordinate:g.activeCoordinate}))}else if("item"===e){var h,i=c.touches[0];if(null==document.elementFromPoint||null==i)return;var j=document.elementFromPoint(i.clientX,i.clientY);if(!j||!j.getAttribute)return;var k=j.getAttribute("data-recharts-item-index"),l=null!=(h=j.getAttribute("data-recharts-item-id"))?h:void 0,m=qd(d).find(a=>a.id===l);if(null==k||null==m||null==l)return;var{dataKey:n}=m,o=sc(d,k,l);b.dispatch(hy({activeDataKey:n,activeIndex:k,activeCoordinate:o,activeGraphicalItemId:l}))}}}});var sf=f6({name:"errorBars",initialState:{},reducers:{addErrorBar:(a,b)=>{var{itemId:c,errorBar:d}=b.payload;a[c]||(a[c]=[]),a[c].push(d)},replaceErrorBar:(a,b)=>{var{itemId:c,prev:d,next:e}=b.payload;a[c]&&(a[c]=a[c].map(a=>a.dataKey===d.dataKey&&a.direction===d.direction?e:a))},removeErrorBar:(a,b)=>{var{itemId:c,errorBar:d}=b.payload;a[c]&&(a[c]=a[c].filter(a=>a.dataKey!==d.dataKey||a.direction!==d.direction))}}}),{addErrorBar:sg,replaceErrorBar:sh,removeErrorBar:si}=sf.actions,sj=sf.reducer,sk={devToolsEnabled:!0,isSsr:!0};function sl(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function sm(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?sl(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):sl(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var sn={zIndexMap:Object.values(nP).reduce((a,b)=>sm(sm({},a),{},{[b]:{element:void 0,panoramaElement:void 0,consumers:0}}),{})},so=new Set(Object.values(nP)),sp=f6({name:"zIndex",initialState:sn,reducers:{registerZIndexPortal:{reducer:(a,b)=>{var{zIndex:c}=b.payload;a.zIndexMap[c]?a.zIndexMap[c].consumers+=1:a.zIndexMap[c]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:f0()},unregisterZIndexPortal:{reducer:(a,b)=>{var{zIndex:c}=b.payload;a.zIndexMap[c]&&(a.zIndexMap[c].consumers-=1,a.zIndexMap[c].consumers<=0&&!so.has(c)&&delete a.zIndexMap[c])},prepare:f0()},registerZIndexPortalElement:{reducer:(a,b)=>{var{zIndex:c,element:d,isPanorama:e}=b.payload;a.zIndexMap[c]?e?a.zIndexMap[c].panoramaElement=d:a.zIndexMap[c].element=d:a.zIndexMap[c]={consumers:0,element:e?void 0:d,panoramaElement:e?d:void 0}},prepare:f0()},unregisterZIndexPortalElement:{reducer:(a,b)=>{var{zIndex:c}=b.payload;a.zIndexMap[c]&&(b.payload.isPanorama?a.zIndexMap[c].panoramaElement=void 0:a.zIndexMap[c].element=void 0)},prepare:f0()}}}),{registerZIndexPortal:sq,unregisterZIndexPortal:sr,registerZIndexPortalElement:ss,unregisterZIndexPortalElement:st}=sp.actions,su=fR({brush:rM,cartesianAxis:rt,chartData:hL,errorBars:sj,graphicalItems:rA,layout:hR,legend:rT,options:gF,polarAxis:r1,polarOptions:r4,referenceElements:rI,rootProps:rW,tooltip:hG,zIndex:sp.reducer}),sv=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart";return function(a){let b,c,d,e=function(a){let{thunk:b=!0,immutableCheck:c=!0,serializableCheck:d=!0,actionCreatorCheck:e=!0}=a??{},f=new fY;return b&&("boolean"==typeof b?f.push(fV):f.push(fU(b.extraArgument))),f},{reducer:f,middleware:g,devTools:h=!0,duplicateMiddlewareCheck:i=!0,preloadedState:j,enhancers:k}=a||{};if("function"==typeof f)b=f;else if(fQ(f))b=fR(f);else throw Error(gC(1));c="function"==typeof g?g(e):e();let l=fS;h&&(l=fW({trace:!1,..."object"==typeof h&&h}));let m=(d=function(...a){return b=>(c,d)=>{let e=b(c,d),f=()=>{throw Error(fM(15))},g={getState:e.getState,dispatch:(a,...b)=>f(a,...b)};return f=fS(...a.map(a=>a(g)))(e.dispatch),{...e,dispatch:f}}}(...c),function(a){let{autoBatch:b=!0}=a??{},c=new fY(d);return b&&c.push(f2("object"==typeof b?b:void 0)),c});return function a(b,c,d){if("function"!=typeof b)throw Error(fM(2));if("function"==typeof c&&"function"==typeof d||"function"==typeof d&&"function"==typeof arguments[3])throw Error(fM(0));if("function"==typeof c&&void 0===d&&(d=c,c=void 0),void 0!==d){if("function"!=typeof d)throw Error(fM(1));return d(a)(b,c)}let e=b,f=c,g=new Map,h=g,i=0,j=!1;function k(){h===g&&(h=new Map,g.forEach((a,b)=>{h.set(b,a)}))}function l(){if(j)throw Error(fM(3));return f}function m(a){if("function"!=typeof a)throw Error(fM(4));if(j)throw Error(fM(5));let b=!0;k();let c=i++;return h.set(c,a),function(){if(b){if(j)throw Error(fM(6));b=!1,k(),h.delete(c),g=null}}}function n(a){if(!fQ(a))throw Error(fM(7));if(void 0===a.type)throw Error(fM(8));if("string"!=typeof a.type)throw Error(fM(17));if(j)throw Error(fM(9));try{j=!0,f=e(f,a)}finally{j=!1}return(g=h).forEach(a=>{a()}),a}return n({type:fP.INIT}),{dispatch:n,subscribe:m,getState:l,replaceReducer:function(a){if("function"!=typeof a)throw Error(fM(10));e=a,n({type:fP.REPLACE})},[fN]:function(){return{subscribe(a){if("object"!=typeof a||null===a)throw Error(fM(11));function b(){a.next&&a.next(l())}return b(),{unsubscribe:m(b)}},[fN](){return this}}}}}(b,j,l(..."function"==typeof k?k(m):m()))}({reducer:su,preloadedState:a,middleware:a=>a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([rb.middleware,rd.middleware,r7.middleware,r9.middleware,se.middleware]),enhancers:a=>{var b=a;return"function"==typeof a&&(b=a()),b.concat(f2({type:"raf"}))},devTools:sk.devToolsEnabled&&{serialize:{replacer:rf},name:"recharts-".concat(b)}})};function sw(a){var{preloadedState:b,children:c,reduxStoreName:d}=a,e=iS(),f=(0,aO.useRef)(null);return e?c:(null==f.current&&(f.current=sv(b,d)),aO.createElement(gP,{context:ia,store:f.current},c))}var sx=a=>{var{chartData:b}=a,c=ic(),d=iS();return(0,aO.useEffect)(()=>d?()=>{}:(c(hI(b)),()=>{c(hI(void 0))}),[b,c,d]),null},sy=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function sz(a,b){for(var c of new Set([...Object.keys(a),...Object.keys(b)]))if(sy.has(c)){if(null==a[c]&&null==b[c])continue;if(!function(a,b){if(gL(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let d=0;d<c.length;d++)if(!Object.prototype.hasOwnProperty.call(b,c[d])||!gL(a[c[d]],b[c[d]]))return!1;return!0}(a[c],b[c]))return!1}else{var d,e;if(d=a[c],e=b[c],(null!=d||null!=e)&&("number"==typeof d&&"number"==typeof e?d!==e&&(d==d||e==e):d!==e))return!1}return!0}var sA=(0,aO.memo)(function(a){var{layout:b,margin:c}=a;return ic(),iS(),null},sz);function sB(a){return ic(),null}var sC=()=>{var a;return null==(a=ih(a=>a.rootProps.accessibilityLayer))||a},sD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function sE(a){return"string"==typeof a&&sD.includes(a)}var sF=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function sG(a){return"string"==typeof a&&sF.has(a)}function sH(a){return"string"==typeof a&&a.startsWith("data-")}function sI(a){if("object"!=typeof a||null===a)return{};var b={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(sG(c)||sH(c))&&(b[c]=a[c]);return b}function sJ(a){return null==a?null:(0,aO.isValidElement)(a)&&"object"==typeof a.props&&null!==a.props?sI(a.props):"object"!=typeof a||Array.isArray(a)?null:sI(a)}function sK(a){var b={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(sG(c)||sH(c)||sE(c))&&(b[c]=a[c]);return b}var sL=["children","width","height","viewBox","className","style","title","desc"];function sM(){return(sM=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}var sN=(0,aO.forwardRef)((a,b)=>{var{children:c,width:d,height:e,viewBox:f,className:g,style:h,title:i,desc:j}=a,k=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,sL),l=f||{width:d,height:e,x:0,y:0},m=ee("recharts-surface",g);return aO.createElement("svg",sM({},sK(k),{className:m,width:d,height:e,style:h,viewBox:"".concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height),ref:b}),aO.createElement("title",null,i),aO.createElement("desc",null,j),c)}),sO=h7(a=>a.zIndex.zIndexMap,(a,b)=>b,(a,b,c)=>c,(a,b,c)=>{if(null!=b){var d=a[b];if(null!=d)return c?d.panoramaElement:d.element}}),sP=h7(a=>a.zIndex.zIndexMap,a=>Array.from(new Set(Object.keys(a).map(a=>parseInt(a,10)).concat(Object.values(nP)))).sort((a,b)=>a-b),{memoizeOptions:{resultEqualityCheck:function(a,b){if(a.length===b.length){for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return!1}}});function sQ(a){var{zIndex:b,isPanorama:c}=a,d=(0,aO.useRef)(null);return ic(),aO.createElement("g",{tabIndex:-1,ref:d})}function sR(a){var{children:b,isPanorama:c}=a,d=ih(sP);if(!d||0===d.length)return b;var e=d.filter(a=>a<0),f=d.filter(a=>a>0);return aO.createElement(aO.Fragment,null,e.map(a=>aO.createElement(sQ,{key:a,zIndex:a,isPanorama:c})),b,f.map(a=>aO.createElement(sQ,{key:a,zIndex:a,isPanorama:c})))}var sS=["children"];function sT(){return(sT=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}var sU={width:"100%",height:"100%",display:"block"},sV=(0,aO.forwardRef)((a,b)=>{var c,d,e=iZ(),f=i$(),g=sC();if(!eH(e)||!eH(f))return null;var{children:h,otherAttributes:i,title:j,desc:k}=a;return null!=i&&(c="number"==typeof i.tabIndex?i.tabIndex:g?0:void 0,d="string"==typeof i.role?i.role:g?"application":void 0),aO.createElement(sN,sT({},i,{title:j,desc:k,role:d,tabIndex:c,width:e,height:f,style:sU,ref:b}),h)}),sW=a=>{var{children:b}=a,c=ih(iU);if(!c)return null;var{width:d,height:e,y:f,x:g}=c;return aO.createElement(sN,{width:d,height:e,x:g,y:f},b)},sX=(0,aO.forwardRef)((a,b)=>{var{children:c}=a,d=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,sS);return iS()?aO.createElement(sW,null,aO.createElement(sR,{isPanorama:!0},c)):aO.createElement(sV,sT({ref:b},d),aO.createElement(sR,{isPanorama:!1},c))});function sY(a){return a.tooltip.syncInteraction}new(c(85964));var sZ=(0,aO.createContext)(null),s$=(0,aO.createContext)(null);function s_(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function s0(){return(s0=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}var s1=()=>(ic(),ih(nI),ih(nK),ic(),ih(nJ),ih(qH),i0(),iW(),ih(a=>a.rootProps.className),ih(nI),ih(nK),ic(),null);function s2(a){if("number"==typeof a)return a;if("string"==typeof a){var b=parseFloat(a);if(!Number.isNaN(b))return b}return 0}var s3=(0,aO.forwardRef)((a,b)=>{var c,d,e=(0,aO.useRef)(null),[f,g]=(0,aO.useState)({containerWidth:s2(null==(c=a.style)?void 0:c.width),containerHeight:s2(null==(d=a.style)?void 0:d.height)}),h=(0,aO.useCallback)((a,b)=>{g(c=>{var d=Math.round(a),e=Math.round(b);return c.containerWidth===d&&c.containerHeight===e?c:{containerWidth:d,containerHeight:e}})},[]),i=(0,aO.useCallback)(a=>{if("function"==typeof b&&b(a),null!=a&&"undefined"!=typeof ResizeObserver){var{width:c,height:d}=a.getBoundingClientRect();h(c,d);var f=new ResizeObserver(a=>{var b=a[0];if(null!=b){var{width:c,height:d}=b.contentRect;h(c,d)}});f.observe(a),e.current=f}},[b,h]);return(0,aO.useEffect)(()=>()=>{var a=e.current;null!=a&&a.disconnect()},[h]),aO.createElement(aO.Fragment,null,aO.createElement(i3,{width:f.containerWidth,height:f.containerHeight}),aO.createElement("div",s0({ref:i},a)))}),s4=(0,aO.forwardRef)((a,b)=>{var{width:c,height:d}=a,[e,f]=(0,aO.useState)({containerWidth:s2(c),containerHeight:s2(d)}),g=(0,aO.useCallback)((a,b)=>{f(c=>{var d=Math.round(a),e=Math.round(b);return c.containerWidth===d&&c.containerHeight===e?c:{containerWidth:d,containerHeight:e}})},[]),h=(0,aO.useCallback)(a=>{if("function"==typeof b&&b(a),null!=a){var{width:c,height:d}=a.getBoundingClientRect();g(c,d)}},[b,g]);return aO.createElement(aO.Fragment,null,aO.createElement(i3,{width:e.containerWidth,height:e.containerHeight}),aO.createElement("div",s0({ref:h},a)))}),s5=(0,aO.forwardRef)((a,b)=>{var{width:c,height:d}=a;return aO.createElement(aO.Fragment,null,aO.createElement(i3,{width:c,height:d}),aO.createElement("div",s0({ref:b},a)))}),s6=(0,aO.forwardRef)((a,b)=>{var{width:c,height:d}=a;return"string"==typeof c||"string"==typeof d?aO.createElement(s4,s0({},a,{ref:b})):"number"==typeof c&&"number"==typeof d?aO.createElement(s5,s0({},a,{width:c,height:d,ref:b})):aO.createElement(aO.Fragment,null,aO.createElement(i3,{width:c,height:d}),aO.createElement("div",s0({ref:b},a)))}),s7=(0,aO.forwardRef)((a,b)=>{var{children:c,className:d,height:e,onClick:f,onContextMenu:g,onDoubleClick:h,onMouseDown:i,onMouseEnter:j,onMouseLeave:k,onMouseMove:l,onMouseUp:m,onTouchEnd:n,onTouchMove:o,onTouchStart:p,style:q,width:r,responsive:s,dispatchTouchEvents:t=!0}=a,u=(0,aO.useRef)(null),v=ic(),[w,x]=(0,aO.useState)(null),[y,z]=(0,aO.useState)(null),A=function(){ic();var[a,b]=(0,aO.useState)(null);return ih(iI),b}(),B=eN(),C=(null==B?void 0:B.width)>0?B.width:r,D=(null==B?void 0:B.height)>0?B.height:e,E=(0,aO.useCallback)(a=>{A(a),"function"==typeof b&&b(a),x(a),z(a),null!=a&&(u.current=a)},[A,b,x,z]),F=(0,aO.useCallback)(a=>{v(ra(a)),v(r8({handler:f,reactEvent:a}))},[v,f]),G=(0,aO.useCallback)(a=>{v(rc(a)),v(r8({handler:j,reactEvent:a}))},[v,j]),H=(0,aO.useCallback)(a=>{v(hA()),v(r8({handler:k,reactEvent:a}))},[v,k]),I=(0,aO.useCallback)(a=>{v(rc(a)),v(r8({handler:l,reactEvent:a}))},[v,l]),J=(0,aO.useCallback)(()=>{v(r6())},[v]),K=(0,aO.useCallback)(a=>{v(r5(a.key))},[v]),L=(0,aO.useCallback)(a=>{v(r8({handler:g,reactEvent:a}))},[v,g]),M=(0,aO.useCallback)(a=>{v(r8({handler:h,reactEvent:a}))},[v,h]),N=(0,aO.useCallback)(a=>{v(r8({handler:i,reactEvent:a}))},[v,i]),O=(0,aO.useCallback)(a=>{v(r8({handler:m,reactEvent:a}))},[v,m]),P=(0,aO.useCallback)(a=>{v(r8({handler:p,reactEvent:a}))},[v,p]),Q=(0,aO.useCallback)(a=>{t&&v(sd(a)),v(r8({handler:o,reactEvent:a}))},[v,t,o]),R=(0,aO.useCallback)(a=>{v(r8({handler:n,reactEvent:a}))},[v,n]);return aO.createElement(sZ.Provider,{value:w},aO.createElement(s$.Provider,{value:y},aO.createElement(s?s3:s6,{width:null!=C?C:null==q?void 0:q.width,height:null!=D?D:null==q?void 0:q.height,className:ee("recharts-wrapper",d),style:function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?s_(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):s_(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({position:"relative",cursor:"default",width:C,height:D},q),onClick:F,onContextMenu:L,onDoubleClick:M,onFocus:J,onKeyDown:K,onMouseDown:N,onMouseEnter:G,onMouseLeave:H,onMouseMove:I,onMouseUp:O,onTouchEnd:R,onTouchMove:Q,onTouchStart:P,ref:E},aO.createElement(s1,null),c)))}),s8=h7([iO],a=>({top:a.top,bottom:a.bottom,left:a.left,right:a.right})),s9=h7([s8,iG,iH],(a,b,c)=>{if(a&&null!=b&&null!=c)return{x:a.left,y:a.top,width:Math.max(0,b-a.left-a.right),height:Math.max(0,c-a.top-a.bottom)}}),ta=()=>ih(s9),tb=(0,aO.createContext)(void 0),tc=a=>{var{children:b}=a,[c]=(0,aO.useState)("".concat(er("recharts"),"-clip")),d=ta();if(null==d)return null;var{x:e,y:f,width:g,height:h}=d;return aO.createElement(tb.Provider,{value:c},aO.createElement("defs",null,aO.createElement("clipPath",{id:c},aO.createElement("rect",{x:e,y:f,height:h,width:g}))),b)},td=["width","height","responsive","children","className","style","compact","title","desc"],te=(0,aO.forwardRef)((a,b)=>{var{width:c,height:d,responsive:e,children:f,className:g,style:h,compact:i,title:j,desc:k}=a,l=sI(function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,td));return i?aO.createElement(aO.Fragment,null,aO.createElement(i3,{width:c,height:d}),aO.createElement(sX,{otherAttributes:l,title:j,desc:k},f)):aO.createElement(s7,{className:g,style:h,width:c,height:d,responsive:null!=e&&e,onClick:a.onClick,onMouseLeave:a.onMouseLeave,onMouseEnter:a.onMouseEnter,onMouseMove:a.onMouseMove,onMouseDown:a.onMouseDown,onMouseUp:a.onMouseUp,onContextMenu:a.onContextMenu,onDoubleClick:a.onDoubleClick,onTouchStart:a.onTouchStart,onTouchMove:a.onTouchMove,onTouchEnd:a.onTouchEnd},aO.createElement(sX,{otherAttributes:l,title:j,desc:k,ref:b},aO.createElement(tc,null,f)))});function tf(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function tg(a,b){var c=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?tf(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):tf(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},a);return Object.keys(b).reduce((a,c)=>(void 0===a[c]&&void 0!==b[c]&&(a[c]=b[c]),a),c)}function th(){return(th=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}var ti={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},tj=(0,aO.forwardRef)(function(a,b){var c,d=tg(a.categoricalChartProps,ti),{chartName:e,defaultTooltipEventType:f,validateTooltipEventTypes:g,tooltipPayloadSearcher:h,categoricalChartProps:i}=a;return aO.createElement(sw,{preloadedState:{options:{chartName:e,defaultTooltipEventType:f,validateTooltipEventTypes:g,tooltipPayloadSearcher:h,eventEmitter:void 0}},reduxStoreName:null!=(c=i.id)?c:e},aO.createElement(sx,{chartData:i.data}),aO.createElement(sA,{layout:d.layout,margin:d.margin}),aO.createElement(sB,{baseValue:d.baseValue,accessibilityLayer:d.accessibilityLayer,barCategoryGap:d.barCategoryGap,maxBarSize:d.maxBarSize,stackOffset:d.stackOffset,barGap:d.barGap,barSize:d.barSize,syncId:d.syncId,syncMethod:d.syncMethod,className:d.className,reverseStackOrder:d.reverseStackOrder}),aO.createElement(te,th({},d,{ref:b})))}),tk=["axis"],tl=(0,aO.forwardRef)((a,b)=>aO.createElement(tj,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tk,tooltipPayloadSearcher:gD,categoricalChartProps:a,ref:b}));class tm{constructor(a){!function(a,b,c){var d;(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c}(this,"cache",new Map),this.maxSize=a}get(a){var b=this.cache.get(a);return void 0!==b&&(this.cache.delete(a),this.cache.set(a,b)),b}set(a,b){if(this.cache.has(a))this.cache.delete(a);else if(this.cache.size>=this.maxSize){var c=this.cache.keys().next().value;null!=c&&this.cache.delete(c)}this.cache.set(a,b)}clear(){this.cache.clear()}size(){return this.cache.size}}function tn(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}var to=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?tn(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):tn(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},{cacheSize:2e3,enableCache:!0}),tp=new tm(to.cacheSize),tq={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tr="recharts_measurement_span",ts=(a,b)=>{try{var c=document.getElementById(tr);c||((c=document.createElement("span")).setAttribute("id",tr),c.setAttribute("aria-hidden","true"),document.body.appendChild(c)),Object.assign(c.style,tq,b),c.textContent="".concat(a);var d=c.getBoundingClientRect();return{width:d.width,height:d.height}}catch(a){return{width:0,height:0}}},tt=function(a){var b,c,d,e,f,g,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==a||sk.isSsr)return{width:0,height:0};if(!to.enableCache)return ts(a,h);var i=(b=h.fontSize||"",c=h.fontFamily||"",d=h.fontWeight||"",e=h.fontStyle||"",f=h.letterSpacing||"",g=h.textTransform||"","".concat(a,"|").concat(b,"|").concat(c,"|").concat(d,"|").concat(e,"|").concat(f,"|").concat(g)),j=tp.get(i);if(j)return j;var k=ts(a,h);return tp.set(i,k),k},tu=function(a){var{width:b,height:c}=a,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(d%180+180)%180*Math.PI/180,f=Math.atan(c/b);return Math.abs(e>f&&e<Math.PI-f?c/Math.sin(e):b/Math.cos(e))};function tv(a,b){if(b<1)return[];if(1===b)return a;for(var c=[],d=0;d<a.length;d+=b){var e=a[d];void 0!==e&&c.push(e)}return c}function tw(a,b,c,d,e){if(a*b<a*d||a*b>a*e)return!1;var f=c();return a*(b-a*f/2-d)>=0&&a*(b+a*f/2-e)<=0}function tx(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function ty(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?tx(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):tx(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function tz(a,b,c){var d,{tick:e,ticks:f,viewBox:g,minTickGap:h,orientation:i,interval:j,tickFormatter:k,unit:l,angle:m}=a;if(!f||!f.length||!e)return[];if(eo(j)||sk.isSsr)return null!=(d=tv(f,(eo(j)?j:0)+1))?d:[];var n="top"===i||"bottom"===i?"width":"height",o=l&&"width"===n?tt(l,{fontSize:b,letterSpacing:c}):{width:0,height:0},p=(a,d)=>{var e,f="function"==typeof k?k(a.value,d):a.value;return"width"===n?(e=tt(f,{fontSize:b,letterSpacing:c}),tu({width:e.width+o.width,height:e.height+o.height},m)):tt(f,{fontSize:b,letterSpacing:c})[n]},q=f[0],r=f[1],s=f.length>=2&&null!=q&&null!=r?el(r.coordinate-q.coordinate):1,t=function(a,b,c){var d="width"===c,{x:e,y:f,width:g,height:h}=a;return 1===b?{start:d?e:f,end:d?e+g:f+h}:{start:d?e+g:f+h,end:d?e:f}}(g,s,n);return"equidistantPreserveStart"===j?function(a,b,c,d,e){for(var f,g=(d||[]).slice(),{start:h,end:i}=b,j=0,k=1,l=h;k<=g.length;)if(f=function(){var b,f=null==d?void 0:d[j];if(void 0===f)return{v:tv(d,k)};var g=j,m=()=>(void 0===b&&(b=c(f,g)),b),n=f.coordinate,o=0===j||tw(a,n,m,l,i);o||(j=0,l=h,k+=1),o&&(l=n+a*(m()/2+e),j+=k)}())return f.v;return[]}(s,t,p,f,h):"equidistantPreserveEnd"===j?function(a,b,c,d,e){var f=(d||[]).slice().length;if(0===f)return[];for(var{start:g,end:h}=b,i=1;i<=f;i++){for(var j,k=(f-1)%i,l=g,m=!0,n=k;n<f&&(0===(j=function(){var b,f=d[n];if(null==f)return 0;var g=n,i=()=>(void 0===b&&(b=c(f,g)),b),j=f.coordinate,o=n===k||tw(a,j,i,l,h);if(!o)return m=!1,1;o&&(l=j+a*(i()/2+e))}())||1!==j);n+=i);if(m){for(var o=[],p=k;p<f;p+=i){var q=d[p];null!=q&&o.push(q)}return o}}return[]}(s,t,p,f,h):("preserveStart"===j||"preserveStartEnd"===j?function(a,b,c,d,e,f){var g=(d||[]).slice(),h=g.length,{start:i,end:j}=b;if(f){var k=d[h-1];if(null!=k){var l=c(k,h-1),m=a*(k.coordinate+a*l/2-j);g[h-1]=k=ty(ty({},k),{},{tickCoord:m>0?k.coordinate-m*a:k.coordinate}),null!=k.tickCoord&&tw(a,k.tickCoord,()=>l,i,j)&&(j=k.tickCoord-a*(l/2+e),g[h-1]=ty(ty({},k),{},{isShow:!0}))}}for(var n=f?h-1:h,o=function(b){var d,f=g[b];if(null==f)return 1;var h=f,k=()=>(void 0===d&&(d=c(f,b)),d);if(0===b){var l=a*(h.coordinate-a*k()/2-i);g[b]=h=ty(ty({},h),{},{tickCoord:l<0?h.coordinate-l*a:h.coordinate})}else g[b]=h=ty(ty({},h),{},{tickCoord:h.coordinate});null!=h.tickCoord&&tw(a,h.tickCoord,k,i,j)&&(i=h.tickCoord+a*(k()/2+e),g[b]=ty(ty({},h),{},{isShow:!0}))},p=0;p<n;p++)if(o(p))continue;return g}(s,t,p,f,h,"preserveStartEnd"===j):function(a,b,c,d,e){for(var f=(d||[]).slice(),g=f.length,{start:h}=b,{end:i}=b,j=function(b){var d,j=f[b];if(null==j)return 1;var k=j,l=()=>(void 0===d&&(d=c(j,b)),d);if(b===g-1){var m=a*(k.coordinate+a*l()/2-i);f[b]=k=ty(ty({},k),{},{tickCoord:m>0?k.coordinate-m*a:k.coordinate})}else f[b]=k=ty(ty({},k),{},{tickCoord:k.coordinate});null!=k.tickCoord&&tw(a,k.tickCoord,l,h,i)&&(i=k.tickCoord-a*(l()/2+e),f[b]=ty(ty({},k),{},{isShow:!0}))},k=g-1;k>=0;k--)if(j(k))continue;return f}(s,t,p,f,h)).filter(a=>a.isShow)}var tA=["children","className"];function tB(){return(tB=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}var tC=aO.forwardRef((a,b)=>{var{children:c,className:d}=a,e=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,tA),f=ee("recharts-layer",d);return aO.createElement("g",tB({className:f},sK(e),{ref:b}),c)}),tD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},tI=["cm","mm","pt","pc","in","Q","px"];class tJ{static parse(a){var b,[,c,d]=null!=(b=tG.exec(a))?b:[];return null==c?tJ.NaN:new tJ(parseFloat(c),null!=d?d:"")}constructor(a,b){this.num=a,this.unit=b,this.num=a,this.unit=b,em(a)&&(this.unit=""),""===b||tF.test(b)||(this.num=NaN,this.unit=""),tI.includes(b)&&(this.num=a*tH[b],this.unit="px")}add(a){return this.unit!==a.unit?new tJ(NaN,""):new tJ(this.num+a.num,this.unit)}subtract(a){return this.unit!==a.unit?new tJ(NaN,""):new tJ(this.num-a.num,this.unit)}multiply(a){return""!==this.unit&&""!==a.unit&&this.unit!==a.unit?new tJ(NaN,""):new tJ(this.num*a.num,this.unit||a.unit)}divide(a){return""!==this.unit&&""!==a.unit&&this.unit!==a.unit?new tJ(NaN,""):new tJ(this.num/a.num,this.unit||a.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return em(this.num)}}function tK(a){if(null==a||a.includes("NaN"))return"NaN";for(var b=a;b.includes("*")||b.includes("/");){var c,[,d,e,f]=null!=(c=tD.exec(b))?c:[],g=tJ.parse(null!=d?d:""),h=tJ.parse(null!=f?f:""),i="*"===e?g.multiply(h):g.divide(h);if(i.isNaN())return"NaN";b=b.replace(tD,i.toString())}for(;b.includes("+")||/.-\d+(?:\.\d+)?/.test(b);){var j,[,k,l,m]=null!=(j=tE.exec(b))?j:[],n=tJ.parse(null!=k?k:""),o=tJ.parse(null!=m?m:""),p="+"===l?n.add(o):n.subtract(o);if(p.isNaN())return"NaN";b=b.replace(tE,p.toString())}return b}!function(a,b,c){var d;(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c}(tJ,"NaN",new tJ(NaN,""));var tL=/\(([^()]*)\)/;function tM(a){var b=function(a){try{var b;return b=a.replace(/\s+/g,""),b=function(a){for(var b,c=a;null!=(b=tL.exec(c));){var[,d]=b;c=c.replace(tL,tK(d))}return c}(b),b=tK(b)}catch(a){return"NaN"}}(a.slice(5,-1));return"NaN"===b?"":b}var tN=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],tO=["dx","dy","angle","className","breakAll"];function tP(){return(tP=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function tQ(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var tR=/[ \f\n\r\t\v\u2028\u2029]+/,tS=a=>{var{children:b,breakAll:c,style:d}=a;try{let a;var e=[];a=b,null==a||(e=c?b.toString().split(""):b.toString().split(tR));var f=e.map(a=>({word:a,width:tt(a,d).width})),g=c?0:tt("\xa0",d).width;return{wordsWithComputedWidth:f,spaceWidth:g}}catch(a){return null}},tT=(a,b,c,d)=>a.reduce((a,e)=>{var{word:f,width:g}=e,h=a[a.length-1];return h&&null!=g&&(null==b||d||h.width+g+c<Number(b))?(h.words.push(f),h.width+=g+c):a.push({words:[f],width:g}),a},[]),tU=a=>a.reduce((a,b)=>a.width>b.width?a:b),tV=(a,b,c,d,e,f,g,h)=>{var i=tS({breakAll:c,style:d,children:a.slice(0,b)+"…"});if(!i)return[!1,[]];var j=tT(i.wordsWithComputedWidth,f,g,h);return[j.length>e||tU(j).width>Number(f),j]},tW=a=>[{words:null==a?[]:a.toString().split(tR),width:void 0}],tX="#808080",tY={angle:0,breakAll:!1,capHeight:"0.71em",fill:tX,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},tZ=(0,aO.forwardRef)((a,b)=>{var c,d=tg(a,tY),{x:e,y:f,lineHeight:g,capHeight:h,fill:i,scaleToFit:j,textAnchor:k,verticalAnchor:l}=d,m=tQ(d,tN),n=(0,aO.useMemo)(()=>(a=>{var{width:b,scaleToFit:c,children:d,style:e,breakAll:f,maxLines:g}=a;if((b||c)&&!sk.isSsr){var h=tS({breakAll:f,children:d,style:e});if(!h)return tW(d);var{wordsWithComputedWidth:i,spaceWidth:j}=h;return((a,b,c,d,e)=>{var f,{maxLines:g,children:h,style:i,breakAll:j}=a,k=eo(g),l=String(h),m=tT(b,d,c,e);if(!k||e||!(m.length>g||tU(m).width>Number(d)))return m;for(var n=0,o=l.length-1,p=0;n<=o&&p<=l.length-1;){var q=Math.floor((n+o)/2),[r,s]=tV(l,q-1,j,i,g,d,c,e),[t]=tV(l,q,j,i,g,d,c,e);if(r||t||(n=q+1),r&&t&&(o=q-1),!r&&t){f=s;break}p++}return f||m})({breakAll:f,children:d,maxLines:g,style:e},i,j,b,!!c)}return tW(d)})({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:j,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,j,m.style,m.width]),{dx:o,dy:p,angle:q,className:r,breakAll:s}=m,t=tQ(m,tO);if(!ep(e)||!ep(f)||0===n.length)return null;var u=Number(e)+(eo(o)?o:0),v=Number(f)+(eo(p)?p:0);if(!eG(u)||!eG(v))return null;switch(l){case"start":c=tM("calc(".concat(h,")"));break;case"middle":c=tM("calc(".concat((n.length-1)/2," * -").concat(g," + (").concat(h," / 2))"));break;default:c=tM("calc(".concat(n.length-1," * -").concat(g,")"))}var w=[],x=n[0];if(j&&null!=x){var y=x.width,{width:z}=m;w.push("scale(".concat(eo(z)&&eo(y)?z/y:1,")"))}return q&&w.push("rotate(".concat(q,", ").concat(u,", ").concat(v,")")),w.length&&(t.transform=w.join(" ")),aO.createElement("text",tP({},sK(t),{ref:b,x:u,y:v,className:ee("recharts-text",r),textAnchor:k,fill:i.includes("url")?tX:i}),n.map((a,b)=>{var d=a.words.join(s?"":" ");return aO.createElement("tspan",{x:u,dy:0===b?c:g,key:"".concat(d,"-").concat(b)},d)}))});tZ.displayName="Text";var t$=c(23312);function t_(a){var{zIndex:b,children:c}=a,d=void 0!==i0()&&void 0!==b&&0!==b,e=iS();ic();var f=ih(a=>sO(a,b,e));return d?f?(0,t$.createPortal)(c,f):null:c}function t0(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function t1(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?t0(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):t0(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var t2=["labelRef"],t3=["content"];function t4(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function t5(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function t6(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?t5(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):t5(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function t7(){return(t7=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}var t8=(0,aO.createContext)(null),t9=a=>{var{x:b,y:c,upperWidth:d,lowerWidth:e,width:f,height:g,children:h}=a,i=(0,aO.useMemo)(()=>({x:b,y:c,upperWidth:d,lowerWidth:e,width:f,height:g}),[b,c,d,e,f,g]);return aO.createElement(t8.Provider,{value:i},h)},ua=()=>{var a=(0,aO.useContext)(t8),b=iW();return a||(b?iV(b):void 0)},ub=(0,aO.createContext)(null),uc=a=>null!=a&&"function"==typeof a,ud=a=>null!=a&&"cx"in a&&eo(a.cx),ue={angle:0,offset:5,zIndex:nP.label,position:"middle",textBreakAll:!1};function uf(a){var b,c,d,e,f,g,h=tg(a,ue),{viewBox:i,parentViewBox:j,position:k,value:l,children:m,content:n,className:o="",textBreakAll:p,labelRef:q}=h,r=(b=(0,aO.useContext)(ub),c=ih(n4),b||c),s=ua(),t=function(a){if(!ud(a))return a;var{cx:b,cy:c,outerRadius:d}=a,e=2*d;return{x:b-d,y:c-d,width:e,upperWidth:e,lowerWidth:e,height:e}}(e=null==i?"center"===k?s:null!=r?r:s:ud(i)?i:iV(i));if(!e||null==l&&null==m&&!(0,aO.isValidElement)(n)&&"function"!=typeof n)return null;var u=t6(t6({},h),{},{viewBox:e});if((0,aO.isValidElement)(n)){var{labelRef:v}=u,w=t4(u,t2);return(0,aO.cloneElement)(n,w)}if("function"==typeof n){var{content:x}=u,y=t4(u,t3);if(f=(0,aO.createElement)(n,y),(0,aO.isValidElement)(f))return f}else f=(a=>{var{value:b,formatter:c}=a,d=null==a.children?b:a.children;return"function"==typeof c?c(d):d})(h);var z=sK(h);if(ud(e)){if("insideStart"===k||"insideEnd"===k||"end"===k)return((a,b,c,d,e)=>{let f,g;var h,i,{offset:j,className:k}=a,{cx:l,cy:m,innerRadius:n,outerRadius:o,startAngle:p,endAngle:q,clockWise:r}=e,s=(n+o)/2,t=(f=p,el((g=q)-f)*Math.min(Math.abs(g-f),360)),u=t>=0?1:-1;switch(b){case"insideStart":h=p+u*j,i=r;break;case"insideEnd":h=q-u*j,i=!r;break;case"end":h=q+u*j,i=r;break;default:throw Error("Unsupported position ".concat(b))}i=t<=0?i:!i;var v=nO(l,m,s,h),w=nO(l,m,s,h+(i?1:-1)*359),x="M".concat(v.x,",").concat(v.y,"\n    A").concat(s,",").concat(s,",0,1,").concat(+!i,",\n    ").concat(w.x,",").concat(w.y),y=null==a.id?er("recharts-radial-line-"):a.id;return aO.createElement("text",t7({},d,{dominantBaseline:"central",className:ee("recharts-radial-bar-label",k)}),aO.createElement("defs",null,aO.createElement("path",{id:y,d:x})),aO.createElement("textPath",{xlinkHref:"#".concat(y)},c))})(h,k,f,z,e);g=((a,b,c)=>{var{cx:d,cy:e,innerRadius:f,outerRadius:g,startAngle:h,endAngle:i}=a,j=(h+i)/2;if("outside"===c){var{x:k,y:l}=nO(d,e,g+b,j);return{x:k,y:l,textAnchor:k>=d?"start":"end",verticalAnchor:"middle"}}if("center"===c)return{x:d,y:e,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===c)return{x:d,y:e,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===c)return{x:d,y:e,textAnchor:"middle",verticalAnchor:"end"};var{x:m,y:n}=nO(d,e,(f+g)/2,j);return{x:m,y:n,textAnchor:"middle",verticalAnchor:"middle"}})(e,h.offset,h.position)}else{if(!t)return null;var A=(a=>{var{viewBox:b,position:c,offset:d=0,parentViewBox:e,clamp:f}=a,{x:g,y:h,height:i,upperWidth:j,lowerWidth:k}=iV(b),l=g+(j-k)/2,m=(g+l)/2,n=(j+k)/2,o=i>=0?1:-1,p=o*d,q=o>0?"end":"start",r=o>0?"start":"end",s=j>=0?1:-1,t=s*d,u=s>0?"end":"start",v=s>0?"start":"end";if("top"===c){var w={x:g+j/2,y:h-p,horizontalAnchor:"middle",verticalAnchor:q};return f&&e&&(w.height=Math.max(h-e.y,0),w.width=j),w}if("bottom"===c){var x={x:l+k/2,y:h+i+p,horizontalAnchor:"middle",verticalAnchor:r};return f&&e&&(x.height=Math.max(e.y+e.height-(h+i),0),x.width=k),x}if("left"===c){var y={x:m-t,y:h+i/2,horizontalAnchor:u,verticalAnchor:"middle"};return f&&e&&(y.width=Math.max(y.x-e.x,0),y.height=i),y}if("right"===c){var z={x:m+n+t,y:h+i/2,horizontalAnchor:v,verticalAnchor:"middle"};return f&&e&&(z.width=Math.max(e.x+e.width-z.x,0),z.height=i),z}var A=f&&e?{width:n,height:i}:{};return"insideLeft"===c?t1({x:m+t,y:h+i/2,horizontalAnchor:v,verticalAnchor:"middle"},A):"insideRight"===c?t1({x:m+n-t,y:h+i/2,horizontalAnchor:u,verticalAnchor:"middle"},A):"insideTop"===c?t1({x:g+j/2,y:h+p,horizontalAnchor:"middle",verticalAnchor:r},A):"insideBottom"===c?t1({x:l+k/2,y:h+i-p,horizontalAnchor:"middle",verticalAnchor:q},A):"insideTopLeft"===c?t1({x:g+t,y:h+p,horizontalAnchor:v,verticalAnchor:r},A):"insideTopRight"===c?t1({x:g+j-t,y:h+p,horizontalAnchor:u,verticalAnchor:r},A):"insideBottomLeft"===c?t1({x:l+t,y:h+i-p,horizontalAnchor:v,verticalAnchor:q},A):"insideBottomRight"===c?t1({x:l+k-t,y:h+i-p,horizontalAnchor:u,verticalAnchor:q},A):c&&"object"==typeof c&&(eo(c.x)||en(c.x))&&(eo(c.y)||en(c.y))?t1({x:g+es(c.x,n),y:h+es(c.y,i),horizontalAnchor:"end",verticalAnchor:"end"},A):t1({x:g+j/2,y:h+i/2,horizontalAnchor:"middle",verticalAnchor:"middle"},A)})({viewBox:t,position:k,offset:h.offset,parentViewBox:ud(j)?void 0:j,clamp:!0});g=t6(t6({x:A.x,y:A.y,textAnchor:A.horizontalAnchor,verticalAnchor:A.verticalAnchor},void 0!==A.width?{width:A.width}:{}),void 0!==A.height?{height:A.height}:{})}return aO.createElement(t_,{zIndex:h.zIndex},aO.createElement(tZ,t7({ref:q,className:ee("recharts-label",o)},z,g,{textAnchor:"start"===(d=z.textAnchor)||"middle"===d||"end"===d||"inherit"===d?z.textAnchor:g.textAnchor,breakAll:p}),f))}function ug(a){var{label:b,labelRef:c}=a;return((a,b,c)=>{if(!a)return null;var d={viewBox:b,labelRef:c};return!0===a?aO.createElement(uf,t7({key:"label-implicit"},d)):ep(a)?aO.createElement(uf,t7({key:"label-implicit",value:a},d)):(0,aO.isValidElement)(a)?a.type===uf?(0,aO.cloneElement)(a,t6({key:"label-implicit"},d)):aO.createElement(uf,t7({key:"label-implicit",content:a},d)):uc(a)?aO.createElement(uf,t7({key:"label-implicit",content:a},d)):a&&"object"==typeof a?aO.createElement(uf,t7({},a,{key:"label-implicit"},d)):null})(b,ua(),c)||null}uf.displayName="Label";var uh=a=>"radius"in a&&"startAngle"in a&&"endAngle"in a,ui=(a,b)=>{if(!a||"function"==typeof a||"boolean"==typeof a)return null;var c=a;if((0,aO.isValidElement)(a)&&(c=a.props),"object"!=typeof c&&"function"!=typeof c)return null;var d={};return Object.keys(c).forEach(a=>{sE(a)&&(d[a]=b||(b=>c[a](c,b)))}),d},uj=["axisLine","width","height","className","hide","ticks","axisType"];function uk(){return(uk=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function ul(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function um(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ul(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ul(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var un={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:nP.axis};function uo(a){var{x:b,y:c,width:d,height:e,orientation:f,mirror:g,axisLine:h,otherSvgProps:i}=a;if(!h)return null;var j=um(um(um({},i),sI(h)),{},{fill:"none"});if("top"===f||"bottom"===f){var k=+("top"===f&&!g||"bottom"===f&&g);j=um(um({},j),{},{x1:b,y1:c+k*e,x2:b+d,y2:c+k*e})}else{var l=+("left"===f&&!g||"right"===f&&g);j=um(um({},j),{},{x1:b+l*d,y1:c,x2:b+l*d,y2:c+e})}return aO.createElement("line",uk({},j,{className:ee("recharts-cartesian-axis-line",ei()(h,"className"))}))}function up(a){var b,{option:c,tickProps:d,value:e}=a,f=ee(d.className,"recharts-cartesian-axis-tick-value");if(aO.isValidElement(c))b=aO.cloneElement(c,um(um({},d),{},{className:f}));else if("function"==typeof c)b=c(um(um({},d),{},{className:f}));else{var g="recharts-cartesian-axis-tick-value";"boolean"!=typeof c&&(g=ee(g,c&&"object"==typeof c&&"className"in c&&"string"==typeof c.className?c.className:"")),b=aO.createElement(tZ,uk({},d,{className:g}),e)}return b}var uq=(0,aO.forwardRef)((a,b)=>{var{ticks:c=[],tick:d,tickLine:e,stroke:f,tickFormatter:g,unit:h,padding:i,tickTextProps:j,orientation:k,mirror:l,x:m,y:n,width:o,height:p,tickSize:q,tickMargin:r,fontSize:s,letterSpacing:t,getTicksConfig:u,events:v,axisType:w}=a,x=tz(um(um({},u),{},{ticks:c}),s,t),y=function(a,b){switch(a){case"left":return b?"start":"end";case"right":return b?"end":"start";default:return"middle"}}(k,l),z=function(a,b){switch(a){case"left":case"right":return"middle";case"top":return b?"start":"end";default:return b?"end":"start"}}(k,l),A=sI(u),B=sJ(d),C={};"object"==typeof e&&(C=e);var D=um(um({},A),{},{fill:"none"},C),E=x.map(a=>um({entry:a},function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p=h?-1:1,q=a.tickSize||g,r=eo(a.tickCoord)?a.tickCoord:a.coordinate;switch(f){case"top":j=k=a.coordinate,o=(l=(m=c+!h*e)-p*q)-p*i,n=r;break;case"left":l=m=a.coordinate,n=(j=(k=b+!h*d)-p*q)-p*i,o=r;break;case"right":l=m=a.coordinate,n=(j=(k=b+h*d)+p*q)+p*i,o=r;break;default:j=k=a.coordinate,o=(l=(m=c+h*e)+p*q)+p*i,n=r}return{line:{x1:j,y1:l,x2:k,y2:m},tick:{x:n,y:o}}}(a,m,n,o,p,k,q,l,r))),F=E.map(a=>{var{entry:b,line:c}=a;return aO.createElement(tC,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},e&&aO.createElement("line",uk({},D,c,{className:ee("recharts-cartesian-axis-tick-line",ei()(e,"className"))})))}),G=E.map((a,b)=>{var c,e,{entry:k,tick:l}=a,m=um(um(um(um({verticalAnchor:z},A),{},{textAnchor:y,stroke:"none",fill:f},l),{},{index:b,payload:k,visibleTicksCount:x.length,tickFormatter:g,padding:i},j),{},{angle:null!=(c=null!=(e=null==j?void 0:j.angle)?e:A.angle)?c:0}),n=um(um({},m),B);return aO.createElement(tC,uk({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(k.value,"-").concat(k.coordinate,"-").concat(k.tickCoord)},((a,b,c)=>{if(null===a||"object"!=typeof a&&"function"!=typeof a)return null;var d=null;return Object.keys(a).forEach(e=>{var f=a[e];sE(e)&&"function"==typeof f&&(d||(d={}),d[e]=a=>(f(b,c,a),null))}),d})(v,k,b)),d&&aO.createElement(up,{option:d,tickProps:n,value:"".concat("function"==typeof g?g(k.value,b):k.value).concat(h||"")}))});return aO.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(w,"-ticks")},G.length>0&&aO.createElement(t_,{zIndex:nP.label},aO.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(w,"-tick-labels"),ref:b},G)),F.length>0&&aO.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(w,"-tick-lines")},F))}),ur=(0,aO.forwardRef)((a,b)=>{var{axisLine:c,width:d,height:e,className:f,hide:g,ticks:h,axisType:i}=a,j=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,uj),[k,l]=(0,aO.useState)(""),[m,n]=(0,aO.useState)(""),o=(0,aO.useRef)(null);(0,aO.useImperativeHandle)(b,()=>({getCalculatedWidth:()=>{var b;return(a=>{var{ticks:b,label:c,labelGapWithTick:d=5,tickSize:e=0,tickMargin:f=0}=a,g=0;if(b){Array.from(b).forEach(a=>{if(a){var b=a.getBoundingClientRect();b.width>g&&(g=b.width)}});var h=c?c.getBoundingClientRect().width:0;return Math.round(g+(e+f)+h+(c?d:0))}return 0})({ticks:o.current,label:null==(b=a.labelRef)?void 0:b.current,labelGapWithTick:5,tickSize:a.tickSize,tickMargin:a.tickMargin})}}));var p=(0,aO.useCallback)(a=>{if(a){var b=a.getElementsByClassName("recharts-cartesian-axis-tick-value");o.current=b;var c=b[0];if(c){var d=window.getComputedStyle(c),e=d.fontSize,f=d.letterSpacing;(e!==k||f!==m)&&(l(e),n(f))}}},[k,m]);return g||null!=d&&d<=0||null!=e&&e<=0?null:aO.createElement(t_,{zIndex:a.zIndex},aO.createElement(tC,{className:ee("recharts-cartesian-axis",f)},aO.createElement(uo,{x:a.x,y:a.y,width:d,height:e,orientation:a.orientation,mirror:a.mirror,axisLine:c,otherSvgProps:sI(a)}),aO.createElement(uq,{ref:p,axisType:i,events:j,fontSize:k,getTicksConfig:a,height:a.height,letterSpacing:m,mirror:a.mirror,orientation:a.orientation,padding:a.padding,stroke:a.stroke,tick:a.tick,tickFormatter:a.tickFormatter,tickLine:a.tickLine,tickMargin:a.tickMargin,tickSize:a.tickSize,tickTextProps:a.tickTextProps,ticks:h,unit:a.unit,width:a.width,x:a.x,y:a.y}),aO.createElement(t9,{x:a.x,y:a.y,width:a.width,height:a.height,lowerWidth:a.width,upperWidth:a.width},aO.createElement(ug,{label:a.label,labelRef:a.labelRef}),a.children)))}),us=aO.forwardRef((a,b)=>{var c=tg(a,un);return aO.createElement(ur,uk({},c,{ref:b}))});us.displayName="CartesianAxis";var ut=["x1","y1","x2","y2","key"],uu=["offset"],uv=["xAxisId","yAxisId"],uw=["xAxisId","yAxisId"];function ux(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function uy(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ux(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ux(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function uz(){return(uz=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function uA(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var uB=a=>{var{fill:b}=a;if(!b||"none"===b)return null;var{fillOpacity:c,x:d,y:e,width:f,height:g,ry:h}=a;return aO.createElement("rect",{x:d,y:e,ry:h,width:f,height:g,stroke:"none",fill:b,fillOpacity:c,className:"recharts-cartesian-grid-bg"})};function uC(a){var{option:b,lineItemProps:c}=a;if(aO.isValidElement(b))d=aO.cloneElement(b,c);else if("function"==typeof b)d=b(c);else{var d,e,{x1:f,y1:g,x2:h,y2:i,key:j}=c,k=null!=(e=sI(uA(c,ut)))?e:{},{offset:l}=k,m=uA(k,uu);d=aO.createElement("line",uz({},m,{x1:f,y1:g,x2:h,y2:i,fill:"none",key:j}))}return d}function uD(a){var{x:b,width:c,horizontal:d=!0,horizontalPoints:e}=a;if(!d||!e||!e.length)return null;var{xAxisId:f,yAxisId:g}=a,h=uA(a,uv),i=e.map((a,e)=>{var f=uy(uy({},h),{},{x1:b,y1:a,x2:b+c,y2:a,key:"line-".concat(e),index:e});return aO.createElement(uC,{key:"line-".concat(e),option:d,lineItemProps:f})});return aO.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function uE(a){var{y:b,height:c,vertical:d=!0,verticalPoints:e}=a;if(!d||!e||!e.length)return null;var{xAxisId:f,yAxisId:g}=a,h=uA(a,uw),i=e.map((a,e)=>{var f=uy(uy({},h),{},{x1:a,y1:b,x2:a,y2:b+c,key:"line-".concat(e),index:e});return aO.createElement(uC,{option:d,lineItemProps:f,key:"line-".concat(e)})});return aO.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function uF(a){var{horizontalFill:b,fillOpacity:c,x:d,y:e,width:f,height:g,horizontalPoints:h,horizontal:i=!0}=a;if(!i||!b||!b.length||null==h)return null;var j=h.map(a=>Math.round(a+e-e)).sort((a,b)=>a-b);e!==j[0]&&j.unshift(0);var k=j.map((a,h)=>{var i=j[h+1],k=null==i?e+g-a:i-a;if(k<=0)return null;var l=h%b.length;return aO.createElement("rect",{key:"react-".concat(h),y:a,x:d,height:k,width:f,stroke:"none",fill:b[l],fillOpacity:c,className:"recharts-cartesian-grid-bg"})});return aO.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},k)}function uG(a){var{vertical:b=!0,verticalFill:c,fillOpacity:d,x:e,y:f,width:g,height:h,verticalPoints:i}=a;if(!b||!c||!c.length)return null;var j=i.map(a=>Math.round(a+e-e)).sort((a,b)=>a-b);e!==j[0]&&j.unshift(0);var k=j.map((a,b)=>{var i=j[b+1],k=null==i?e+g-a:i-a;if(k<=0)return null;var l=b%c.length;return aO.createElement("rect",{key:"react-".concat(b),x:a,y:f,width:k,height:h,stroke:"none",fill:c[l],fillOpacity:d,className:"recharts-cartesian-grid-bg"})});return aO.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},k)}var uH=(a,b)=>{var{xAxis:c,width:d,height:e,offset:f}=a;return ix(tz(uy(uy(uy({},un),c),{},{ticks:iy(c,!0),viewBox:{x:0,y:0,width:d,height:e}})),f.left,f.left+f.width,b)},uI=(a,b)=>{var{yAxis:c,width:d,height:e,offset:f}=a;return ix(tz(uy(uy(uy({},un),c),{},{ticks:iy(c,!0),viewBox:{x:0,y:0,width:d,height:e}})),f.top,f.top+f.height,b)},uJ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:nP.grid};function uK(a){var b=iZ(),c=i$(),d=iY(),e=uy(uy({},tg(a,uJ)),{},{x:eo(a.x)?a.x:d.left,y:eo(a.y)?a.y:d.top,width:eo(a.width)?a.width:d.width,height:eo(a.height)?a.height:d.height}),{xAxisId:f,yAxisId:g,x:h,y:i,width:j,height:k,syncWithTicks:l,horizontalValues:m,verticalValues:n}=e,o=iS(),p=ih(a=>pQ(a,"xAxis",f,o)),q=ih(a=>pQ(a,"yAxis",g,o));if(!eH(j)||!eH(k)||!eo(h)||!eo(i))return null;var r=e.verticalCoordinatesGenerator||uH,s=e.horizontalCoordinatesGenerator||uI,{horizontalPoints:t,verticalPoints:u}=e;if((!t||!t.length)&&"function"==typeof s){var v=m&&m.length,w=s({yAxis:q?uy(uy({},q),{},{ticks:v?m:q.ticks}):void 0,width:null!=b?b:j,height:null!=c?c:k,offset:d},!!v||l);ez(Array.isArray(w),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof w,"]")),Array.isArray(w)&&(t=w)}if((!u||!u.length)&&"function"==typeof r){var x=n&&n.length,y=r({xAxis:p?uy(uy({},p),{},{ticks:x?n:p.ticks}):void 0,width:null!=b?b:j,height:null!=c?c:k,offset:d},!!x||l);ez(Array.isArray(y),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof y,"]")),Array.isArray(y)&&(u=y)}return aO.createElement(t_,{zIndex:e.zIndex},aO.createElement("g",{className:"recharts-cartesian-grid"},aO.createElement(uB,{fill:e.fill,fillOpacity:e.fillOpacity,x:e.x,y:e.y,width:e.width,height:e.height,ry:e.ry}),aO.createElement(uF,uz({},e,{horizontalPoints:t})),aO.createElement(uG,uz({},e,{verticalPoints:u})),aO.createElement(uD,uz({},e,{offset:d,horizontalPoints:t,xAxis:p,yAxis:q})),aO.createElement(uE,uz({},e,{offset:d,verticalPoints:u,xAxis:p,yAxis:q}))))}uK.displayName="CartesianGrid";var uL=["domain","range"],uM=["domain","range"];function uN(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function uO(a,b){return a===b||!!(Array.isArray(a)&&2===a.length&&Array.isArray(b))&&2===b.length&&a[0]===b[0]&&a[1]===b[1]}function uP(a,b){if(a===b)return!0;var{domain:c,range:d}=a,e=uN(a,uL),{domain:f,range:g}=b,h=uN(b,uM);return!!uO(c,f)&&!!uO(d,g)&&sz(e,h)}var uQ=["type"],uR=["dangerouslySetInnerHTML","ticks","scale"],uS=["id","scale"];function uT(){return(uT=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function uU(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function uV(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?uU(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):uU(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function uW(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function uX(a){ic(),(0,aO.useRef)(null);var b=i1(),{type:c}=a,d=uW(a,uQ),e=nT(b,"xAxis",c);return(0,aO.useMemo)(()=>{if(null!=e)return uV(uV({},d),{},{type:e})},[d,e]),null}var uY=a=>{var{xAxisId:b,className:c}=a,d=ih(iQ),e=iS(),f="xAxis",g=ih(a=>pR(a,f,b,e)),h=ih(a=>pG(a,b)),i=ih(a=>pJ(a,b)),j=ih(a=>ok(a,b));if(null==h||null==i||null==j)return null;var{dangerouslySetInnerHTML:k,ticks:l,scale:m}=a,n=uW(a,uR),{id:o,scale:p}=j,q=uW(j,uS);return aO.createElement(us,uT({},n,q,{x:i.x,y:i.y,width:h.width,height:h.height,className:ee("recharts-".concat(f," ").concat(f),c),viewBox:d,ticks:g,axisType:f}))},uZ={allowDataOverflow:oj.allowDataOverflow,allowDecimals:oj.allowDecimals,allowDuplicatedCategory:oj.allowDuplicatedCategory,angle:oj.angle,axisLine:un.axisLine,height:oj.height,hide:!1,includeHidden:oj.includeHidden,interval:oj.interval,label:!1,minTickGap:oj.minTickGap,mirror:oj.mirror,orientation:oj.orientation,padding:oj.padding,reversed:oj.reversed,scale:oj.scale,tick:oj.tick,tickCount:oj.tickCount,tickLine:un.tickLine,tickSize:un.tickSize,type:oj.type,xAxisId:0},u$=aO.memo(a=>{var b=tg(a,uZ);return aO.createElement(aO.Fragment,null,aO.createElement(uX,{allowDataOverflow:b.allowDataOverflow,allowDecimals:b.allowDecimals,allowDuplicatedCategory:b.allowDuplicatedCategory,angle:b.angle,dataKey:b.dataKey,domain:b.domain,height:b.height,hide:b.hide,id:b.xAxisId,includeHidden:b.includeHidden,interval:b.interval,minTickGap:b.minTickGap,mirror:b.mirror,name:b.name,orientation:b.orientation,padding:b.padding,reversed:b.reversed,scale:b.scale,tick:b.tick,tickCount:b.tickCount,tickFormatter:b.tickFormatter,ticks:b.ticks,type:b.type,unit:b.unit}),aO.createElement(uY,b))},uP);u$.displayName="XAxis";var u_=["type"],u0=["dangerouslySetInnerHTML","ticks","scale"],u1=["id","scale"];function u2(){return(u2=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function u3(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function u4(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?u3(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):u3(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function u5(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function u6(a){ic(),(0,aO.useRef)(null);var b=i1(),{type:c}=a,d=u5(a,u_),e=nT(b,"yAxis",c);return(0,aO.useMemo)(()=>{if(null!=e)return u4(u4({},d),{},{type:e})},[e,d]),null}function u7(a){var{yAxisId:b,className:c,width:d,label:e}=a,f=(0,aO.useRef)(null),g=(0,aO.useRef)(null),h=ih(iQ),i=iS();ic();var j="yAxis",k=ih(a=>pL(a,b)),l=ih(a=>pK(a,b)),m=ih(a=>pR(a,j,b,i)),n=ih(a=>on(a,b));if(null==k||null==l||null==n)return null;var{dangerouslySetInnerHTML:o,ticks:p,scale:q}=a,r=u5(a,u0),{id:s,scale:t}=n,u=u5(n,u1);return aO.createElement(us,u2({},r,u,{ref:f,labelRef:g,x:l.x,y:l.y,tickTextProps:"auto"===d?{width:void 0}:{width:d},width:k.width,height:k.height,className:ee("recharts-".concat(j," ").concat(j),c),viewBox:h,ticks:m,axisType:j}))}var u8={allowDataOverflow:om.allowDataOverflow,allowDecimals:om.allowDecimals,allowDuplicatedCategory:om.allowDuplicatedCategory,angle:om.angle,axisLine:un.axisLine,hide:!1,includeHidden:om.includeHidden,interval:om.interval,label:!1,minTickGap:om.minTickGap,mirror:om.mirror,orientation:om.orientation,padding:om.padding,reversed:om.reversed,scale:om.scale,tick:om.tick,tickCount:om.tickCount,tickLine:un.tickLine,tickSize:un.tickSize,type:om.type,width:om.width,yAxisId:0},u9=aO.memo(a=>{var b=tg(a,u8);return aO.createElement(aO.Fragment,null,aO.createElement(u6,{interval:b.interval,id:b.yAxisId,scale:b.scale,type:b.type,domain:b.domain,allowDataOverflow:b.allowDataOverflow,dataKey:b.dataKey,allowDuplicatedCategory:b.allowDuplicatedCategory,allowDecimals:b.allowDecimals,tickCount:b.tickCount,padding:b.padding,includeHidden:b.includeHidden,reversed:b.reversed,ticks:b.ticks,width:b.width,orientation:b.orientation,mirror:b.mirror,hide:b.hide,unit:b.unit,name:b.name,angle:b.angle,minTickGap:b.minTickGap,tick:b.tick,tickFormatter:b.tickFormatter}),aO.createElement(u7,b))},uP);function va(){return(va=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function vb(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function vc(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?vb(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):vb(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function vd(a){return Array.isArray(a)&&ep(a[0])&&ep(a[1])?a.join(" ~ "):a}u9.displayName="YAxis";var ve={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},vf=a=>{var{separator:b=ve.separator,contentStyle:c,itemStyle:d,labelStyle:e=ve.labelStyle,payload:f,formatter:g,itemSorter:h,wrapperClassName:i,labelClassName:j,label:k,labelFormatter:l,accessibilityLayer:m=ve.accessibilityLayer}=a,n=vc(vc({},ve.contentStyle),c),o=vc({margin:0},e),p=null!=k,q=p?k:"",r=ee("recharts-default-tooltip",i),s=ee("recharts-tooltip-label",j);return p&&l&&null!=f&&(q=l(k,f)),aO.createElement("div",va({className:r,style:n},m?{role:"status","aria-live":"assertive"}:{}),aO.createElement("p",{className:s,style:o},aO.isValidElement(q)?q:"".concat(q)),(()=>{if(f&&f.length){var a=(h?ij()(f,h):f).map((a,c)=>{if("none"===a.type)return null;var e=a.formatter||g||vd,{value:h,name:i}=a,j=h,k=i;if(e){var l=e(h,i,a,c,f);if(Array.isArray(l))[j,k]=l;else{if(null==l)return null;j=l}}var m=vc(vc({},ve.itemStyle),{},{color:a.color||ve.itemStyle.color},d);return aO.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(c),style:m},ep(k)?aO.createElement("span",{className:"recharts-tooltip-item-name"},k):null,ep(k)?aO.createElement("span",{className:"recharts-tooltip-item-separator"},b):null,aO.createElement("span",{className:"recharts-tooltip-item-value"},j),aO.createElement("span",{className:"recharts-tooltip-item-unit"},a.unit||""))});return aO.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},a)}return null})())},vg="recharts-tooltip-wrapper",vh={visibility:"hidden"};function vi(a){var{allowEscapeViewBox:b,coordinate:c,key:d,offset:e,position:f,reverseDirection:g,tooltipDimension:h,viewBox:i,viewBoxDimension:j}=a;if(f&&eo(f[d]))return f[d];var k=c[d]-h-(e>0?e:0),l=c[d]+e;if(b[d])return g[d]?k:l;var m=i[d];return null==m?0:g[d]?k<m?Math.max(l,m):Math.max(k,m):null==j?0:l+h>m+j?Math.max(k,m):Math.max(l,m)}function vj(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function vk(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?vj(Object(c),!0).forEach(function(b){vl(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):vj(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function vl(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class vm extends aO.PureComponent{constructor(){super(...arguments),vl(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),vl(this,"handleKeyDown",a=>{if("Escape"===a.key){var b,c,d,e;this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!=(b=null==(c=this.props.coordinate)?void 0:c.x)?b:0,y:null!=(d=null==(e=this.props.coordinate)?void 0:e.y)?d:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var a,b;this.state.dismissed&&((null==(a=this.props.coordinate)?void 0:a.x)!==this.state.dismissedAtCoordinate.x||(null==(b=this.props.coordinate)?void 0:b.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:a,allowEscapeViewBox:b,animationDuration:c,animationEasing:d,children:e,coordinate:f,hasPayload:g,isAnimationActive:h,offset:i,position:j,reverseDirection:k,useTranslate3d:l,viewBox:m,wrapperStyle:n,lastBoundingBox:o,innerRef:p,hasPortalFromProps:q}=this.props,{cssClasses:r,cssProperties:s}=function(a){var b,c,d,{allowEscapeViewBox:e,coordinate:f,offsetTop:g,offsetLeft:h,position:i,reverseDirection:j,tooltipBox:k,useTranslate3d:l,viewBox:m}=a;return{cssProperties:b=k.height>0&&k.width>0&&f?function(a){var{translateX:b,translateY:c,useTranslate3d:d}=a;return{transform:d?"translate3d(".concat(b,"px, ").concat(c,"px, 0)"):"translate(".concat(b,"px, ").concat(c,"px)")}}({translateX:c=vi({allowEscapeViewBox:e,coordinate:f,key:"x",offset:h,position:i,reverseDirection:j,tooltipDimension:k.width,viewBox:m,viewBoxDimension:m.width}),translateY:d=vi({allowEscapeViewBox:e,coordinate:f,key:"y",offset:g,position:i,reverseDirection:j,tooltipDimension:k.height,viewBox:m,viewBoxDimension:m.height}),useTranslate3d:l}):vh,cssClasses:function(a){var{coordinate:b,translateX:c,translateY:d}=a;return ee(vg,{["".concat(vg,"-right")]:eo(c)&&b&&eo(b.x)&&c>=b.x,["".concat(vg,"-left")]:eo(c)&&b&&eo(b.x)&&c<b.x,["".concat(vg,"-bottom")]:eo(d)&&b&&eo(b.y)&&d>=b.y,["".concat(vg,"-top")]:eo(d)&&b&&eo(b.y)&&d<b.y})}({translateX:c,translateY:d,coordinate:f})}}({allowEscapeViewBox:b,coordinate:f,offsetLeft:"number"==typeof i?i:i.x,offsetTop:"number"==typeof i?i:i.y,position:j,reverseDirection:k,tooltipBox:{height:o.height,width:o.width},useTranslate3d:l,viewBox:m}),t=q?{}:vk(vk({transition:h&&a?"transform ".concat(c,"ms ").concat(d):void 0},s),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&g?"visible":"hidden",position:"absolute",top:0,left:0}),u=vk(vk({},t),{},{visibility:!this.state.dismissed&&a&&g?"visible":"hidden"},n);return aO.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:r,style:u,ref:p},e)}}var vn=c(61649),vo=c.n(vn);function vp(){}function vq(a,b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function vr(a){this._context=a}function vs(a){this._context=a}function vt(a){this._context=a}vr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vq(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vq(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},vs.prototype={areaStart:vp,areaEnd:vp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._x2=a,this._y2=b;break;case 1:this._point=2,this._x3=a,this._y3=b;break;case 2:this._point=3,this._x4=a,this._y4=b,this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+b)/6);break;default:vq(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+a)/6,d=(this._y0+4*this._y1+b)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);break;case 3:this._point=4;default:vq(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}};class vu{constructor(a,b){this._context=a,this._x=b}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+a)/2,this._y0,this._x0,b,a,b):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+b)/2,a,this._y0,a,b)}this._x0=a,this._y0=b}}function vv(a){this._context=a}function vw(a){this._context=a}function vx(a){return new vw(a)}vv.prototype={areaStart:vp,areaEnd:vp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(a,b){a*=1,b*=1,this._point?this._context.lineTo(a,b):(this._point=1,this._context.moveTo(a,b))}};function vy(a,b,c){var d=a._x1-a._x0,e=b-a._x1,f=(a._y1-a._y0)/(d||e<0&&-0),g=(c-a._y1)/(e||d<0&&-0);return((f<0?-1:1)+(g<0?-1:1))*Math.min(Math.abs(f),Math.abs(g),.5*Math.abs((f*e+g*d)/(d+e)))||0}function vz(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function vA(a,b,c){var d=a._x0,e=a._y0,f=a._x1,g=a._y1,h=(f-d)/3;a._context.bezierCurveTo(d+h,e+h*b,f-h,g-h*c,f,g)}function vB(a){this._context=a}function vC(a){this._context=new vD(a)}function vD(a){this._context=a}function vE(a){this._context=a}function vF(a){var b,c,d=a.length-1,e=Array(d),f=Array(d),g=Array(d);for(e[0]=0,f[0]=2,g[0]=a[0]+2*a[1],b=1;b<d-1;++b)e[b]=1,f[b]=4,g[b]=4*a[b]+2*a[b+1];for(e[d-1]=2,f[d-1]=7,g[d-1]=8*a[d-1]+a[d],b=1;b<d;++b)c=e[b]/f[b-1],f[b]-=c,g[b]-=c*g[b-1];for(e[d-1]=g[d-1]/f[d-1],b=d-2;b>=0;--b)e[b]=(g[b]-e[b+1])/f[b];for(b=0,f[d-1]=(a[d]+e[d-1])/2;b<d-1;++b)f[b]=2*a[b+1]-e[b+1];return[e,f]}function vG(a,b){this._context=a,this._t=b}vw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._context.lineTo(a,b)}}},vB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vA(this,this._t0,vz(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){var c=NaN;if(b*=1,(a*=1)!==this._x1||b!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,vA(this,vz(this,c=vy(this,a,b)),c);break;default:vA(this,this._t0,c=vy(this,a,b))}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b,this._t0=c}}},(vC.prototype=Object.create(vB.prototype)).point=function(a,b){vB.prototype.point.call(this,b,a)},vD.prototype={moveTo:function(a,b){this._context.moveTo(b,a)},closePath:function(){this._context.closePath()},lineTo:function(a,b){this._context.lineTo(b,a)},bezierCurveTo:function(a,b,c,d,e,f){this._context.bezierCurveTo(b,a,d,c,f,e)}},vE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var a=this._x,b=this._y,c=a.length;if(c)if(this._line?this._context.lineTo(a[0],b[0]):this._context.moveTo(a[0],b[0]),2===c)this._context.lineTo(a[1],b[1]);else for(var d=vF(a),e=vF(b),f=0,g=1;g<c;++f,++g)this._context.bezierCurveTo(d[0][f],e[0][f],d[1][f],e[1][f],a[g],b[g]);(this._line||0!==this._line&&1===c)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(a,b){this._x.push(+a),this._y.push(+b)}},vG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,b),this._context.lineTo(a,b);else{var c=this._x*(1-this._t)+a*this._t;this._context.lineTo(c,this._y),this._context.lineTo(c,b)}}this._x=a,this._y=b}};let vH=Math.PI,vI=2*vH,vJ=vI-1e-6;function vK(a){this._+=a[0];for(let b=1,c=a.length;b<c;++b)this._+=arguments[b]+a[b]}class vL{constructor(a){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==a?vK:function(a){let b=Math.floor(a);if(!(b>=0))throw Error(`invalid digits: ${a}`);if(b>15)return vK;let c=10**b;return function(a){this._+=a[0];for(let b=1,d=a.length;b<d;++b)this._+=Math.round(arguments[b]*c)/c+a[b]}}(a)}moveTo(a,b){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+b}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(a,b){this._append`L${this._x1=+a},${this._y1=+b}`}quadraticCurveTo(a,b,c,d){this._append`Q${+a},${+b},${this._x1=+c},${this._y1=+d}`}bezierCurveTo(a,b,c,d,e,f){this._append`C${+a},${+b},${+c},${+d},${this._x1=+e},${this._y1=+f}`}arcTo(a,b,c,d,e){if(a*=1,b*=1,c*=1,d*=1,(e*=1)<0)throw Error(`negative radius: ${e}`);let f=this._x1,g=this._y1,h=c-a,i=d-b,j=f-a,k=g-b,l=j*j+k*k;if(null===this._x1)this._append`M${this._x1=a},${this._y1=b}`;else if(l>1e-6)if(Math.abs(k*h-i*j)>1e-6&&e){let m=c-f,n=d-g,o=h*h+i*i,p=Math.sqrt(o),q=Math.sqrt(l),r=e*Math.tan((vH-Math.acos((o+l-(m*m+n*n))/(2*p*q)))/2),s=r/q,t=r/p;Math.abs(s-1)>1e-6&&this._append`L${a+s*j},${b+s*k}`,this._append`A${e},${e},0,0,${+(k*m>j*n)},${this._x1=a+t*h},${this._y1=b+t*i}`}else this._append`L${this._x1=a},${this._y1=b}`}arc(a,b,c,d,e,f){if(a*=1,b*=1,c*=1,f=!!f,c<0)throw Error(`negative radius: ${c}`);let g=c*Math.cos(d),h=c*Math.sin(d),i=a+g,j=b+h,k=1^f,l=f?d-e:e-d;null===this._x1?this._append`M${i},${j}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-j)>1e-6)&&this._append`L${i},${j}`,c&&(l<0&&(l=l%vI+vI),l>vJ?this._append`A${c},${c},0,1,${k},${a-g},${b-h}A${c},${c},0,1,${k},${this._x1=i},${this._y1=j}`:l>1e-6&&this._append`A${c},${c},0,${+(l>=vH)},${k},${this._x1=a+c*Math.cos(e)},${this._y1=b+c*Math.sin(e)}`)}rect(a,b,c,d){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+b}h${c*=1}v${+d}h${-c}Z`}toString(){return this._}}function vM(a){let b=3;return a.digits=function(c){if(!arguments.length)return b;if(null==c)b=null;else{let a=Math.floor(c);if(!(a>=0))throw RangeError(`invalid digits: ${c}`);b=a}return a},()=>new vL(b)}function vN(a){return a[0]}function vO(a){return a[1]}function vP(a,b){var c=io(!0),d=null,e=vx,f=null,g=vM(h);function h(h){var i,j,k,l=(h=im(h)).length,m=!1;for(null==d&&(f=e(k=g())),i=0;i<=l;++i)!(i<l&&c(j=h[i],i,h))===m&&((m=!m)?f.lineStart():f.lineEnd()),m&&f.point(+a(j,i,h),+b(j,i,h));if(k)return f=null,k+""||null}return a="function"==typeof a?a:void 0===a?vN:io(a),b="function"==typeof b?b:void 0===b?vO:io(b),h.x=function(b){return arguments.length?(a="function"==typeof b?b:io(+b),h):a},h.y=function(a){return arguments.length?(b="function"==typeof a?a:io(+a),h):b},h.defined=function(a){return arguments.length?(c="function"==typeof a?a:io(!!a),h):c},h.curve=function(a){return arguments.length?(e=a,null!=d&&(f=e(d)),h):e},h.context=function(a){return arguments.length?(null==a?d=f=null:f=e(d=a),h):d},h}function vQ(a,b,c){var d=null,e=io(!0),f=null,g=vx,h=null,i=vM(j);function j(j){var k,l,m,n,o,p=(j=im(j)).length,q=!1,r=Array(p),s=Array(p);for(null==f&&(h=g(o=i())),k=0;k<=p;++k){if(!(k<p&&e(n=j[k],k,j))===q)if(q=!q)l=k,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),m=k-1;m>=l;--m)h.point(r[m],s[m]);h.lineEnd(),h.areaEnd()}q&&(r[k]=+a(n,k,j),s[k]=+b(n,k,j),h.point(d?+d(n,k,j):r[k],c?+c(n,k,j):s[k]))}if(o)return h=null,o+""||null}function k(){return vP().defined(e).curve(g).context(f)}return a="function"==typeof a?a:void 0===a?vN:io(+a),b="function"==typeof b?b:void 0===b?io(0):io(+b),c="function"==typeof c?c:void 0===c?vO:io(+c),j.x=function(b){return arguments.length?(a="function"==typeof b?b:io(+b),d=null,j):a},j.x0=function(b){return arguments.length?(a="function"==typeof b?b:io(+b),j):a},j.x1=function(a){return arguments.length?(d=null==a?null:"function"==typeof a?a:io(+a),j):d},j.y=function(a){return arguments.length?(b="function"==typeof a?a:io(+a),c=null,j):b},j.y0=function(a){return arguments.length?(b="function"==typeof a?a:io(+a),j):b},j.y1=function(a){return arguments.length?(c=null==a?null:"function"==typeof a?a:io(+a),j):c},j.lineX0=j.lineY0=function(){return k().x(a).y(b)},j.lineY1=function(){return k().x(a).y(c)},j.lineX1=function(){return k().x(d).y(b)},j.defined=function(a){return arguments.length?(e="function"==typeof a?a:io(!!a),j):e},j.curve=function(a){return arguments.length?(g=a,null!=f&&(h=g(f)),j):g},j.context=function(a){return arguments.length?(null==a?f=h=null:h=g(f=a),j):f},j}function vR(){return(vR=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function vS(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function vT(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?vS(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):vS(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}vL.prototype;var vU={curveBasisClosed:function(a){return new vs(a)},curveBasisOpen:function(a){return new vt(a)},curveBasis:function(a){return new vr(a)},curveBumpX:function(a){return new vu(a,!0)},curveBumpY:function(a){return new vu(a,!1)},curveLinearClosed:function(a){return new vv(a)},curveLinear:vx,curveMonotoneX:function(a){return new vB(a)},curveMonotoneY:function(a){return new vC(a)},curveNatural:function(a){return new vE(a)},curveStep:function(a){return new vG(a,.5)},curveStepAfter:function(a){return new vG(a,1)},curveStepBefore:function(a){return new vG(a,0)}},vV=a=>eG(a.x)&&eG(a.y),vW=a=>null!=a.base&&vV(a.base)&&vV(a),vX=a=>a.x,vY=a=>a.y,vZ={connectNulls:!1,type:"linear"},v$=a=>{var{className:b,points:c,path:d,pathRef:e}=a,f=i0();if((!c||!c.length)&&!d)return null;var g={type:a.type,points:a.points,baseLine:a.baseLine,layout:a.layout||f,connectNulls:a.connectNulls},h=c&&c.length?(a=>{var{type:b=vZ.type,points:c=[],baseLine:d,layout:e,connectNulls:f=vZ.connectNulls}=a,g=((a,b)=>{if("function"==typeof a)return a;var c="curve".concat(ew(a));if(("curveMonotone"===c||"curveBump"===c)&&b){var d=vU["".concat(c).concat("vertical"===b?"Y":"X")];if(d)return d}return vU[c]||vx})(b,e),h=f?c.filter(vV):c;if(Array.isArray(d)){var i=c.map((a,b)=>vT(vT({},a),{},{base:d[b]}));return("vertical"===e?vQ().y(vY).x1(vX).x0(a=>a.base.x):vQ().x(vX).y1(vY).y0(a=>a.base.y)).defined(vW).curve(g)(f?i.filter(vW):i)}return("vertical"===e&&eo(d)?vQ().y(vY).x1(vX).x0(d):eo(d)?vQ().x(vX).y1(vY).y0(d):vP().x(vX).y(vY)).defined(vV).curve(g)(h)})(g):d;return aO.createElement("path",vR({},sI(a),ui(a),{className:ee("recharts-curve",b),d:null===h?void 0:h,ref:e}))},v_=["x","y","top","left","width","height","className"];function v0(){return(v0=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function v1(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}var v2=a=>{var{x:b=0,y:c=0,top:d=0,left:e=0,width:f=0,height:g=0,className:h}=a,i=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?v1(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):v1(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({x:b,y:c,top:d,left:e,width:f,height:g},function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,v_));return eo(b)&&eo(c)&&eo(f)&&eo(g)&&eo(d)&&eo(e)?aO.createElement("path",v0({},sK(i),{className:ee("recharts-cross",h),d:"M".concat(b,",").concat(d,"v").concat(g,"M").concat(e,",").concat(c,"h").concat(f)})):null},v3=(a,b,c)=>a.map(a=>"".concat(a.replace(/([A-Z])/g,a=>"-".concat(a.toLowerCase()))," ").concat(b,"ms ").concat(c)).join(",");class v4{setTimeout(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=performance.now(),d=null,e=f=>{f-c>=b?a(f):"function"==typeof requestAnimationFrame&&(d=requestAnimationFrame(e))};return d=requestAnimationFrame(e),()=>{null!=d&&cancelAnimationFrame(d)}}}var v5=(0,aO.createContext)(function(){var a,b,c,d,e;return a=new v4,b=()=>null,c=!1,d=null,e=f=>{if(!c){if(Array.isArray(f)){if(!f.length)return;var[g,...h]=f;if("number"==typeof g){d=a.setTimeout(e.bind(null,h),g);return}e(g),d=a.setTimeout(e.bind(null,h));return}"string"==typeof f&&b(f),"object"==typeof f&&b(f),"function"==typeof f&&f()}},{stop:()=>{c=!0},start:a=>{c=!1,d&&(d(),d=null),e(a)},subscribe:a=>(b=a,()=>{b=()=>null}),getTimeoutController:()=>a}}),v6={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},v7={t:0},v8={t:1};function v9(a){var b,c,d,e=tg(a,v6),{isActive:f,canBegin:g,duration:h,easing:i,begin:j,onAnimationEnd:k,onAnimationStart:l,children:m}=e,n="auto"===f?!sk.isSsr:f;b=e.animationId,c=e.animationManager,d=(0,aO.useContext)(v5),(0,aO.useMemo)(()=>null!=c?c:d(b),[b,c,d]);var[o,p]=(0,aO.useState)(n?v7:v8);return(0,aO.useRef)(null),m(o.t)}function wa(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",c=(0,aO.useRef)(er(b)),d=(0,aO.useRef)(a);return d.current!==a&&(c.current=er(b),d.current=a),c.current}var wb=["radius"],wc=["radius"];function wd(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function we(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?wd(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):wd(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function wf(){return(wf=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function wg(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function wh(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}var wi=(a,b,c,d,e)=>{var f=ej(c),g=ej(d),h=Math.min(Math.abs(f)/2,Math.abs(g)/2),i=g>=0?1:-1,j=f>=0?1:-1,k=+(g>=0&&f>=0||g<0&&f<0);if(h>0&&Array.isArray(e)){for(var v=[0,0,0,0],w=0;w<4;w++){var x,y,z=null!=(y=e[w])?y:0;v[w]=z>h?h:z}x=ek(l||(l=wh(["M",",",""])),a,b+i*v[0]),v[0]>0&&(x+=ek(m||(m=wh(["A ",",",",0,0,",",",",",""])),v[0],v[0],k,a+j*v[0],b)),x+=ek(n||(n=wh(["L ",",",""])),a+c-j*v[1],b),v[1]>0&&(x+=ek(o||(o=wh(["A ",",",",0,0,",",\n        ",",",""])),v[1],v[1],k,a+c,b+i*v[1])),x+=ek(p||(p=wh(["L ",",",""])),a+c,b+d-i*v[2]),v[2]>0&&(x+=ek(q||(q=wh(["A ",",",",0,0,",",\n        ",",",""])),v[2],v[2],k,a+c-j*v[2],b+d)),x+=ek(r||(r=wh(["L ",",",""])),a+j*v[3],b+d),v[3]>0&&(x+=ek(s||(s=wh(["A ",",",",0,0,",",\n        ",",",""])),v[3],v[3],k,a,b+d-i*v[3])),x+="Z"}else if(h>0&&e===+e&&e>0){var A=Math.min(h,e);x=ek(t||(t=wh(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),a,b+i*A,A,A,k,a+j*A,b,a+c-j*A,b,A,A,k,a+c,b+i*A,a+c,b+d-i*A,A,A,k,a+c-j*A,b+d,a+j*A,b+d,A,A,k,a,b+d-i*A)}else x=ek(u||(u=wh(["M ",","," h "," v "," h "," Z"])),a,b,c,d,-c);return x},wj={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wk=a=>{var b=tg(a,wj),c=(0,aO.useRef)(null),[d,e]=(0,aO.useState)(-1);(0,aO.useEffect)(()=>{if(c.current&&c.current.getTotalLength)try{var a=c.current.getTotalLength();a&&e(a)}catch(a){}},[]);var{x:f,y:g,width:h,height:i,radius:j,className:k}=b,{animationEasing:l,animationDuration:m,animationBegin:n,isAnimationActive:o,isUpdateAnimationActive:p}=b,q=(0,aO.useRef)(h),r=(0,aO.useRef)(i),s=(0,aO.useRef)(f),t=(0,aO.useRef)(g),u=wa((0,aO.useMemo)(()=>({x:f,y:g,width:h,height:i,radius:j}),[f,g,h,i,j]),"rectangle-");if(f!==+f||g!==+g||h!==+h||i!==+i||0===h||0===i)return null;var v=ee("recharts-rectangle",k);if(!p){var w=sK(b),{radius:x}=w,y=wg(w,wb);return aO.createElement("path",wf({},y,{x:ej(f),y:ej(g),width:ej(h),height:ej(i),radius:"number"==typeof j?j:void 0,className:v,d:wi(f,g,h,i,j)}))}var z=q.current,A=r.current,B=s.current,C=t.current,D="0px ".concat(-1===d?1:d,"px"),E="".concat(d,"px 0px"),F=v3(["strokeDasharray"],m,"string"==typeof l?l:wj.animationEasing);return aO.createElement(v9,{animationId:u,key:u,canBegin:d>0,duration:m,easing:l,isActive:p,begin:n},a=>{var d,e=eu(z,h,a),k=eu(A,i,a),l=eu(B,f,a),m=eu(C,g,a);c.current&&(q.current=e,r.current=k,s.current=l,t.current=m),d=o?a>0?{transition:F,strokeDasharray:E}:{strokeDasharray:D}:{strokeDasharray:E};var n=sK(b),{radius:p}=n,u=wg(n,wc);return aO.createElement("path",wf({},u,{radius:"number"==typeof j?j:void 0,className:v,d:wi(l,m,e,k,j),ref:c,style:we(we({},d),b.style)}))})};function wl(a){var{cx:b,cy:c,radius:d,startAngle:e,endAngle:f}=a;return{points:[nO(b,c,d,e),nO(b,c,d,f)],cx:b,cy:c,radius:d,startAngle:e,endAngle:f}}function wm(){return(wm=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function wn(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}var wo=a=>{var{cx:b,cy:c,radius:d,angle:e,sign:f,isExternal:g,cornerRadius:h,cornerIsExternal:i}=a,j=h*(g?1:-1)+d,k=Math.asin(h/j)/nN,l=i?e:e+f*k,m=nO(b,c,j,l);return{center:m,circleTangency:nO(b,c,d,l),lineTangency:nO(b,c,j*Math.cos(k*nN),i?e-f*k:e),theta:k}},wp=a=>{var{cx:b,cy:c,innerRadius:d,outerRadius:e,startAngle:f,endAngle:g}=a,h=((a,b)=>el(b-a)*Math.min(Math.abs(b-a),359.999))(f,g),i=f+h,j=nO(b,c,e,f),k=nO(b,c,e,i),l=ek(v||(v=wn(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),j.x,j.y,e,e,+(Math.abs(h)>180),+(f>i),k.x,k.y);if(d>0){var m=nO(b,c,d,f),n=nO(b,c,d,i);l+=ek(w||(w=wn(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),n.x,n.y,d,d,+(Math.abs(h)>180),+(f<=i),m.x,m.y)}else l+=ek(x||(x=wn(["L ",","," Z"])),b,c);return l},wq={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},wr=a=>{var b,c=tg(a,wq),{cx:d,cy:e,innerRadius:f,outerRadius:g,cornerRadius:h,forceCornerRadius:i,cornerIsExternal:j,startAngle:k,endAngle:l,className:m}=c;if(g<f||k===l)return null;var n=ee("recharts-sector",m),o=g-f,p=es(h,o,0,!0);return b=p>0&&360>Math.abs(k-l)?(a=>{var{cx:b,cy:c,innerRadius:d,outerRadius:e,cornerRadius:f,forceCornerRadius:g,cornerIsExternal:h,startAngle:i,endAngle:j}=a,k=el(j-i),{circleTangency:l,lineTangency:m,theta:n}=wo({cx:b,cy:c,radius:e,angle:i,sign:k,cornerRadius:f,cornerIsExternal:h}),{circleTangency:o,lineTangency:p,theta:q}=wo({cx:b,cy:c,radius:e,angle:j,sign:-k,cornerRadius:f,cornerIsExternal:h}),r=h?Math.abs(i-j):Math.abs(i-j)-n-q;if(r<0)return g?ek(y||(y=wn(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),m.x,m.y,f,f,2*f,f,f,-(2*f)):wp({cx:b,cy:c,innerRadius:d,outerRadius:e,startAngle:i,endAngle:j});var s=ek(z||(z=wn(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),m.x,m.y,f,f,+(k<0),l.x,l.y,e,e,+(r>180),+(k<0),o.x,o.y,f,f,+(k<0),p.x,p.y);if(d>0){var{circleTangency:t,lineTangency:u,theta:v}=wo({cx:b,cy:c,radius:d,angle:i,sign:k,isExternal:!0,cornerRadius:f,cornerIsExternal:h}),{circleTangency:w,lineTangency:x,theta:C}=wo({cx:b,cy:c,radius:d,angle:j,sign:-k,isExternal:!0,cornerRadius:f,cornerIsExternal:h}),D=h?Math.abs(i-j):Math.abs(i-j)-v-C;if(D<0&&0===f)return"".concat(s,"L").concat(b,",").concat(c,"Z");s+=ek(A||(A=wn(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),x.x,x.y,f,f,+(k<0),w.x,w.y,d,d,+(D>180),+(k>0),t.x,t.y,f,f,+(k<0),u.x,u.y)}else s+=ek(B||(B=wn(["L",",","Z"])),b,c);return s})({cx:d,cy:e,innerRadius:f,outerRadius:g,cornerRadius:Math.min(p,o/2),forceCornerRadius:i,cornerIsExternal:j,startAngle:k,endAngle:l}):wp({cx:d,cy:e,innerRadius:f,outerRadius:g,startAngle:k,endAngle:l}),aO.createElement("path",wm({},sK(c),{className:n,d:b}))};function ws(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function wt(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ws(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ws(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function wu(){return(wu=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function wv(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function ww(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?wv(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):wv(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function wx(a){var{cursor:b,cursorComp:c,cursorProps:d}=a;return(0,aO.isValidElement)(b)?(0,aO.cloneElement)(b,d):(0,aO.createElement)(c,d)}function wy(a){var b,c,d,e,f,{coordinate:g,payload:h,index:i,offset:j,tooltipAxisBandSize:k,layout:l,cursor:m,tooltipEventType:n,chartName:o}=a;if(!m||!g||"ScatterChart"!==o&&"axis"!==n)return null;if("ScatterChart"===o)d=g,e=v2,f=nP.cursorLine;else if("BarChart"===o)b=k/2,d={stroke:"none",fill:"#ccc",x:"horizontal"===l?g.x-b:j.left+.5,y:"horizontal"===l?j.top+.5:g.y-b,width:"horizontal"===l?k:j.width-1,height:"horizontal"===l?j.height-1:k},e=wk,f=nP.cursorRectangle;else if("radial"===l&&uh(g)){var{cx:p,cy:q,radius:r,startAngle:s,endAngle:t}=wl(g);d={cx:p,cy:q,startAngle:s,endAngle:t,innerRadius:r,outerRadius:r},e=wr,f=nP.cursorLine}else d={points:function(a,b,c){if("horizontal"===a)return[{x:b.x,y:c.top},{x:b.x,y:c.top+c.height}];if("vertical"===a)return[{x:c.left,y:b.y},{x:c.left+c.width,y:b.y}];if(uh(b)){if("centric"===a){var{cx:d,cy:e,innerRadius:f,outerRadius:g,angle:h}=b,i=nO(d,e,f,h),j=nO(d,e,g,h);return[{x:i.x,y:i.y},{x:j.x,y:j.y}]}return wl(b)}}(l,g,j)},e=v$,f=nP.cursorLine;var u="object"==typeof m&&"className"in m?m.className:void 0,v=ww(ww(ww(ww({stroke:"#ccc",pointerEvents:"none"},j),d),sJ(m)),{},{payload:h,payloadIndex:i,className:ee("recharts-tooltip-cursor",u)});return aO.createElement(t_,{zIndex:null!=(c=a.zIndex)?c:f},aO.createElement(wx,{cursor:m,cursorComp:e,cursorProps:v}))}function wz(a){var b,c,d,e=(b=ih(oM),c=ih(qH),d=ih(qE),b&&d?iD(wt(wt({},b),{},{scale:d}),c):iD(void 0,c)),f=iY(),g=i0(),h=ih(nH);return null==e||null==f||null==g||null==h?null:aO.createElement(wy,wu({},a,{offset:f,layout:g,tooltipAxisBandSize:e,chartName:h}))}function wA(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function wB(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?wA(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):wA(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function wC(a){return a.dataKey}var wD=[],wE={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function wF(a){var b,c,d,e,f,g=tg(a,wE),{active:h,allowEscapeViewBox:i,animationDuration:j,animationEasing:k,content:l,filterNull:m,isAnimationActive:n,offset:o,payloadUniqBy:p,position:q,reverseDirection:r,useTranslate3d:s,wrapperStyle:t,cursor:u,shared:v,trigger:w,defaultIndex:x,portal:y,axisId:z}=g;ic();var A="number"==typeof x?String(x):x,B=iW(),C=sC(),D=ih(a=>pZ(a,v)),{activeIndex:E,isActive:F}=null!=(e=ih(a=>q7(a,D,w,A)))?e:{},G=ih(a=>q6(a,D,w,A)),H=ih(a=>q5(a,D,w,A)),I=ih(a=>q4(a,D,w,A)),J=(0,aO.useContext)(sZ),K=null!=(f=null!=h?h:F)&&f,[L,M]=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[b,c]=(0,aO.useState)({height:0,left:0,top:0,width:0}),d=(0,aO.useCallback)(a=>{if(null!=a){var d=a.getBoundingClientRect(),e={height:d.height,left:d.left,top:d.top,width:d.width};(Math.abs(e.height-b.height)>1||Math.abs(e.left-b.left)>1||Math.abs(e.top-b.top)>1||Math.abs(e.width-b.width)>1)&&c({height:e.height,left:e.left,top:e.top,width:e.width})}},[b.width,b.height,b.top,b.left,...a]);return[b,d]}([G,K]),N="axis"===D?H:void 0;ih(a=>((a,b,c)=>{if(null!=b){var d=p6(a);return"axis"===b?"hover"===c?d.axisInteraction.hover.dataKey:d.axisInteraction.click.dataKey:"hover"===c?d.itemInteraction.hover.dataKey:d.itemInteraction.click.dataKey}})(a,D,w)),ih(nK),ih(nI),ih(nJ),null==(b=ih(sY))||b.active,iW();var O=null!=y?y:J;if(null==O||null==B||null==D)return null;var P=null!=G?G:wD;K||(P=wD),m&&P.length&&(c=P.filter(a=>null!=a.value&&(!0!==a.hide||g.includeHidden)),P=!0===p?vo()(c,wC):"function"==typeof p?vo()(c,p):c);var Q=P.length>0,R=aO.createElement(vm,{allowEscapeViewBox:i,animationDuration:j,animationEasing:k,isAnimationActive:n,active:K,coordinate:I,hasPayload:Q,offset:o,position:q,reverseDirection:r,useTranslate3d:s,viewBox:B,wrapperStyle:t,lastBoundingBox:L,innerRef:M,hasPortalFromProps:!!y},(d=wB(wB({},g),{},{payload:P,label:N,active:K,activeIndex:E,coordinate:I,accessibilityLayer:C}),aO.isValidElement(l)?aO.cloneElement(l,d):"function"==typeof l?aO.createElement(l,d):aO.createElement(vf,d)));return aO.createElement(aO.Fragment,null,(0,t$.createPortal)(R,O),K&&aO.createElement(wz,{cursor:u,tooltipEventType:D,coordinate:I,payload:P,index:E}))}var wG=c(18769),wH=c.n(wG),wI=["valueAccessor"],wJ=["dataKey","clockWise","id","textBreakAll","zIndex"];function wK(){return(wK=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function wL(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var wM=a=>Array.isArray(a.value)?wH()(a.value):a.value,wN=(0,aO.createContext)(void 0),wO=wN.Provider,wP=(0,aO.createContext)(void 0);function wQ(a){var{valueAccessor:b=wM}=a,c=wL(a,wI),{dataKey:d,clockWise:e,id:f,textBreakAll:g,zIndex:h}=c,i=wL(c,wJ),j=(0,aO.useContext)(wN),k=(0,aO.useContext)(wP),l=j||k;return l&&l.length?aO.createElement(t_,{zIndex:null!=h?h:nP.label},aO.createElement(tC,{className:"recharts-label-list"},l.map((a,e)=>{var h,j=null==d?b(a,e):iv(a.payload,d),k=null==f?{}:{id:"".concat(f,"-").concat(e)};return aO.createElement(uf,wK({key:"label-".concat(e)},sK(a),i,k,{fill:null!=(h=c.fill)?h:a.fill,parentViewBox:a.parentViewBox,value:j,textBreakAll:g,viewBox:a.viewBox,index:e,zIndex:0}))}))):null}function wR(a){var{label:b}=a;return b?!0===b?aO.createElement(wQ,{key:"labelList-implicit"}):aO.isValidElement(b)||uc(b)?aO.createElement(wQ,{key:"labelList-implicit",content:b}):"object"==typeof b?aO.createElement(wQ,wK({key:"labelList-implicit"},b,{type:String(b.type)})):null:null}function wS(){return(wS=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}wP.Provider,wQ.displayName="LabelList";var wT=a=>{var{cx:b,cy:c,r:d,className:e}=a,f=ee("recharts-dot",e);return eo(b)&&eo(c)&&eo(d)?aO.createElement("circle",wS({},sI(a),ui(a),{className:f,cx:b,cy:c,r:d})):null},wU=a=>!a||"object"!=typeof a||!("clipDot"in a)||!!a.clipDot,wV=["points"];function wW(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function wX(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?wW(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):wW(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function wY(){return(wY=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function wZ(a){var{option:b,dotProps:c,className:d}=a;if((0,aO.isValidElement)(b))return(0,aO.cloneElement)(b,c);if("function"==typeof b)return b(c);var e=ee(d,"boolean"!=typeof b?b.className:""),f=null!=c?c:{},{points:g}=f,h=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(f,wV);return aO.createElement(wT,wY({},h,{className:e}))}function w$(a){var{points:b,dot:c,className:d,dotClassName:e,dataKey:f,baseProps:g,needClip:h,clipPathId:i,zIndex:j=nP.scatter}=a;if(null==b||!c&&1!==b.length)return null;var k=wU(c),l=null==c?null:(0,aO.isValidElement)(c)?sK(c.props):"object"!=typeof c||Array.isArray(c)?null:sK(c),m=b.map((a,d)=>{var h,i,j=wX(wX(wX({r:3},g),l),{},{index:d,cx:null!=(h=a.x)?h:void 0,cy:null!=(i=a.y)?i:void 0,dataKey:f,value:a.value,payload:a.payload,points:b});return aO.createElement(wZ,{key:"dot-".concat(d),option:c,dotProps:j,className:e})}),n={};return h&&null!=i&&(n.clipPath="url(#clipPath-".concat(k?"":"dots-").concat(i,")")),aO.createElement(t_,{zIndex:j},aO.createElement(tC,wY({className:d},n),m))}function w_(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function w0(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?w_(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):w_(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var w1=a=>{var b,{point:c,childIndex:d,mainColor:e,activeDot:f,dataKey:g,clipPath:h}=a;if(!1===f||null==c.x||null==c.y)return null;var i=w0(w0(w0({},{index:d,dataKey:g,cx:c.x,cy:c.y,r:4,fill:null!=e?e:"none",strokeWidth:2,stroke:"#fff",payload:c.payload,value:c.value}),sJ(f)),ui(f));return b=(0,aO.isValidElement)(f)?(0,aO.cloneElement)(f,i):"function"==typeof f?f(i):aO.createElement(wT,i),aO.createElement(tC,{className:"recharts-active-dot",clipPath:h},b)};function w2(a){var{points:b,mainColor:c,activeDot:d,itemDataKey:e,clipPath:f,zIndex:g=nP.activeDot}=a,h=ih(qM),i=ih(qU);if(null==b||null==i)return null;var j=b.find(a=>i.includes(a.payload));return null==j?null:aO.createElement(t_,{zIndex:g},aO.createElement(w1,{point:j,childIndex:Number(h),mainColor:c,dataKey:e,activeDot:d,clipPath:f}))}function w3(a){var{tooltipEntrySettings:b}=a;return ic(),iS(),(0,aO.useRef)(null),null}var w4=["children"],w5=(0,aO.createContext)({data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0});function w6(a){var{children:b}=a,c=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,w4);return aO.createElement(w5.Provider,{value:c},b)}function w7(a,b){var c,d,e=ih(b=>ol(b,a)),f=ih(a=>oo(a,b)),g=null!=(c=null==e?void 0:e.allowDataOverflow)?c:oj.allowDataOverflow,h=null!=(d=null==f?void 0:f.allowDataOverflow)?d:om.allowDataOverflow;return{needClip:g||h,needClipX:g,needClipY:h}}function w8(a){var{xAxisId:b,yAxisId:c,clipPathId:d}=a,e=ta(),{needClipX:f,needClipY:g,needClip:h}=w7(b,c);if(!h||!e)return null;var{x:i,y:j,width:k,height:l}=e;return aO.createElement("clipPath",{id:"clipPath-".concat(d)},aO.createElement("rect",{x:f?i:i-k/2,y:g?j:j-l/2,width:f?k:2*k,height:g?l:2*l}))}var w9=(a,b,c,d)=>pT(a,"xAxis",b,d),xa=(a,b,c,d)=>pS(a,"xAxis",b,d),xb=(a,b,c,d)=>pT(a,"yAxis",c,d),xc=(a,b,c,d)=>pS(a,"yAxis",c,d),xd=h7([i_,w9,xb,xa,xc],(a,b,c,d,e)=>iw(a,"xAxis")?iD(b,d,!1):iD(c,e,!1));function xe(a){return"line"===a.type}var xf=h7([ov,(a,b,c,d,e)=>e],(a,b)=>a.filter(xe).find(a=>a.id===b)),xg=h7([i_,w9,xb,xa,xc,xf,xd,mL],(a,b,c,d,e,f,g,h)=>{var i,{chartData:j,dataStartIndex:k,dataEndIndex:l}=h;if(null!=f&&null!=b&&null!=c&&null!=d&&null!=e&&0!==d.length&&0!==e.length&&null!=g&&("horizontal"===a||"vertical"===a)){var{dataKey:m,data:n}=f;if(null!=(i=null!=n&&n.length>0?n:null==j?void 0:j.slice(k,l+1)))return function(a){var{layout:b,xAxis:c,yAxis:d,xAxisTicks:e,yAxisTicks:f,dataKey:g,bandSize:h,displayedData:i}=a;return i.map((a,i)=>{var j=iv(a,g);if("horizontal"===b){var k=iA({axis:c,ticks:e,bandSize:h,entry:a,index:i}),l=null==j?null:d.scale.map(j);return{x:k,y:null!=l?l:null,value:j,payload:a}}var m=null==j?null:c.scale.map(j),n=iA({axis:d,ticks:f,bandSize:h,entry:a,index:i});return null==m||null==n?null:{x:m,y:n,value:j,payload:a}}).filter(Boolean)}({layout:a,xAxis:b,yAxis:c,xAxisTicks:d,yAxisTicks:e,dataKey:m,bandSize:g,displayedData:i})}});function xh(a){var{legendPayload:b}=a;return ic(),iS(),(0,aO.useRef)(null),null}var xi=null!=(C=aO["useId".toString()])?C:()=>{var[a]=aO.useState(()=>er("uid-"));return a},xj=(0,aO.createContext)(void 0),xk=a=>{var{id:b,type:c,children:d}=a,e=function(a,b){var c=xi();return b||(a?"".concat(a,"-").concat(c):c)}("recharts-".concat(c),b);return aO.createElement(xj.Provider,{value:e},d(e))},xl=(0,aO.memo)(a=>{var b=ic(),c=(0,aO.useRef)(null);return(0,aO.useLayoutEffect)(()=>{null===c.current?b(rv(a)):c.current!==a&&b(rw({prev:c.current,next:a})),c.current=a},[b,a]),(0,aO.useLayoutEffect)(()=>()=>{c.current&&(b(rx(c.current)),c.current=null)},[b]),null}),xm=c(61526),xn=c.n(xm);function xo(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xp(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xo(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xo(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function xq(){return(xq=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function xr(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}var xs=(a,b,c,d,e)=>{var f=c-d;return ek(D||(D=xr(["M ",",",""])),a,b)+ek(E||(E=xr(["L ",",",""])),a+c,b)+ek(F||(F=xr(["L ",",",""])),a+c-f/2,b+e)+ek(G||(G=xr(["L ",",",""])),a+c-f/2-d,b+e)+ek(H||(H=xr(["L ",","," Z"])),a,b)},xt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xu=a=>{var b=tg(a,xt),{x:c,y:d,upperWidth:e,lowerWidth:f,height:g,className:h}=b,{animationEasing:i,animationDuration:j,animationBegin:k,isUpdateAnimationActive:l}=b,m=(0,aO.useRef)(null),[n,o]=(0,aO.useState)(-1),p=(0,aO.useRef)(e),q=(0,aO.useRef)(f),r=(0,aO.useRef)(g),s=(0,aO.useRef)(c),t=(0,aO.useRef)(d),u=wa(a,"trapezoid-");if((0,aO.useEffect)(()=>{if(m.current&&m.current.getTotalLength)try{var a=m.current.getTotalLength();a&&o(a)}catch(a){}},[]),c!==+c||d!==+d||e!==+e||f!==+f||g!==+g||0===e&&0===f||0===g)return null;var v=ee("recharts-trapezoid",h);if(!l)return aO.createElement("g",null,aO.createElement("path",xq({},sK(b),{className:v,d:xs(c,d,e,f,g)})));var w=p.current,x=q.current,y=r.current,z=s.current,A=t.current,B="0px ".concat(-1===n?1:n,"px"),C="".concat(n,"px 0px"),D=v3(["strokeDasharray"],j,i);return aO.createElement(v9,{animationId:u,key:u,canBegin:n>0,duration:j,easing:i,isActive:l,begin:k},a=>{var h=eu(w,e,a),i=eu(x,f,a),j=eu(y,g,a),k=eu(z,c,a),l=eu(A,d,a);m.current&&(p.current=h,q.current=i,r.current=j,s.current=k,t.current=l);var n=a>0?{transition:D,strokeDasharray:C}:{strokeDasharray:B};return aO.createElement("path",xq({},sK(b),{className:v,d:xs(k,l,h,i,j),ref:m,style:xp(xp({},n),b.style)}))})};let xv=Math.cos,xw=Math.sin,xx=Math.sqrt,xy=Math.PI,xz=2*xy,xA={draw(a,b){let c=xx(b/xy);a.moveTo(c,0),a.arc(0,0,c,0,xz)}},xB=xx(1/3),xC=2*xB,xD=xw(xy/10)/xw(7*xy/10),xE=xw(xz/10)*xD,xF=-xv(xz/10)*xD,xG=xx(3),xH=xx(3)/2,xI=1/xx(12),xJ=(xI/2+1)*3;xx(3),xx(3);var xK=["type","size","sizeType"];function xL(){return(xL=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function xM(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xN(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xM(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xM(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var xO={symbolCircle:xA,symbolCross:{draw(a,b){let c=xx(b/5)/2;a.moveTo(-3*c,-c),a.lineTo(-c,-c),a.lineTo(-c,-3*c),a.lineTo(c,-3*c),a.lineTo(c,-c),a.lineTo(3*c,-c),a.lineTo(3*c,c),a.lineTo(c,c),a.lineTo(c,3*c),a.lineTo(-c,3*c),a.lineTo(-c,c),a.lineTo(-3*c,c),a.closePath()}},symbolDiamond:{draw(a,b){let c=xx(b/xC),d=c*xB;a.moveTo(0,-c),a.lineTo(d,0),a.lineTo(0,c),a.lineTo(-d,0),a.closePath()}},symbolSquare:{draw(a,b){let c=xx(b),d=-c/2;a.rect(d,d,c,c)}},symbolStar:{draw(a,b){let c=xx(.8908130915292852*b),d=xE*c,e=xF*c;a.moveTo(0,-c),a.lineTo(d,e);for(let b=1;b<5;++b){let f=xz*b/5,g=xv(f),h=xw(f);a.lineTo(h*c,-g*c),a.lineTo(g*d-h*e,h*d+g*e)}a.closePath()}},symbolTriangle:{draw(a,b){let c=-xx(b/(3*xG));a.moveTo(0,2*c),a.lineTo(-xG*c,-c),a.lineTo(xG*c,-c),a.closePath()}},symbolWye:{draw(a,b){let c=xx(b/xJ),d=c/2,e=c*xI,f=c*xI+c,g=-d;a.moveTo(d,e),a.lineTo(d,f),a.lineTo(g,f),a.lineTo(-.5*d-xH*e,xH*d+-.5*e),a.lineTo(-.5*d-xH*f,xH*d+-.5*f),a.lineTo(-.5*g-xH*f,xH*g+-.5*f),a.lineTo(-.5*d+xH*e,-.5*e-xH*d),a.lineTo(-.5*d+xH*f,-.5*f-xH*d),a.lineTo(-.5*g+xH*f,-.5*f-xH*g),a.closePath()}}},xP=Math.PI/180,xQ=a=>{var{type:b="circle",size:c=64,sizeType:d="area"}=a,e=xN(xN({},function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,xK)),{},{type:b,size:c,sizeType:d}),f="circle";"string"==typeof b&&(f=b);var{className:g,cx:h,cy:i}=e,j=sK(e);return eo(h)&&eo(i)&&eo(c)?aO.createElement("path",xL({},j,{className:ee("recharts-symbols",g),transform:"translate(".concat(h,", ").concat(i,")"),d:(()=>{var a,b=(a=f,xO["symbol".concat(ew(a))]||xA),e=(function(a,b){let c=null,d=vM(e);function e(){let e;if(c||(c=e=d()),a.apply(this,arguments).draw(c,+b.apply(this,arguments)),e)return c=null,e+""||null}return a="function"==typeof a?a:io(a||xA),b="function"==typeof b?b:io(void 0===b?64:+b),e.type=function(b){return arguments.length?(a="function"==typeof b?b:io(b),e):a},e.size=function(a){return arguments.length?(b="function"==typeof a?a:io(+a),e):b},e.context=function(a){return arguments.length?(c=null==a?null:a,e):c},e})().type(b).size(((a,b,c)=>{if("area"===b)return a;switch(c){case"cross":return 5*a*a/9;case"diamond":return .5*a*a/Math.sqrt(3);case"square":return a*a;case"star":var d=18*xP;return 1.25*a*a*(Math.tan(d)-Math.tan(2*d)*Math.tan(d)**2);case"triangle":return Math.sqrt(3)*a*a/4;case"wye":return(21-10*Math.sqrt(3))*a*a/8;default:return Math.PI*a*a/4}})(c,d,f))();if(null!==e)return e})()})):null};xQ.registerSymbol=(a,b)=>{xO["symbol".concat(ew(a))]=b};var xR=["option","shapeType","activeClassName"];function xS(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xT(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xS(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xS(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function xU(a){var{shapeType:b,elementProps:c}=a;switch(b){case"rectangle":return aO.createElement(wk,c);case"trapezoid":return aO.createElement(xu,c);case"sector":return aO.createElement(wr,c);case"symbols":if("symbols"===b)return aO.createElement(xQ,c);break;case"curve":return aO.createElement(v$,c);default:return null}}function xV(a){var b,{option:c,shapeType:d,activeClassName:e="recharts-active-shape"}=a,f=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,xR);if((0,aO.isValidElement)(c))b=(0,aO.cloneElement)(c,xT(xT({},f),(0,aO.isValidElement)(c)?c.props:c));else if("function"==typeof c)b=c(f,f.index);else if(xn()(c)&&"boolean"!=typeof c){var g=xT(xT({},f),c);b=aO.createElement(xU,{shapeType:d,elementProps:g})}else b=aO.createElement(xU,{shapeType:d,elementProps:f});return f.isActive?aO.createElement(tC,{className:e},b):b}var xW=["id"],xX=["type","layout","connectNulls","needClip","shape"],xY=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function xZ(){return(xZ=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(null,arguments)}function x$(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function x_(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?x$(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):x$(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function x0(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var x1=aO.memo(a=>{var{dataKey:b,data:c,stroke:d,strokeWidth:e,fill:f,name:g,hide:h,unit:i,tooltipType:j,id:k}=a,l={dataDefinedOnItem:c,getPosition:ey,settings:{stroke:d,strokeWidth:e,fill:f,dataKey:b,nameKey:void 0,name:iF(g,b),hide:h,type:j,color:d,unit:i,graphicalItemId:k}};return aO.createElement(w3,{tooltipEntrySettings:l})}),x2=(a,b)=>"".concat(b,"px ").concat(a-b,"px");function x3(a){var{clipPathId:b,points:c,props:d}=a,{dot:e,dataKey:f,needClip:g}=d,{id:h}=d,i=sI(x0(d,xW));return aO.createElement(w$,{points:c,dot:e,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:f,baseProps:i,needClip:g,clipPathId:b})}function x4(a){var{showLabels:b,children:c,points:d}=a,e=(0,aO.useMemo)(()=>null==d?void 0:d.map(a=>{var b,c,d={x:null!=(b=a.x)?b:0,y:null!=(c=a.y)?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return x_(x_({},d),{},{value:a.value,payload:a.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[d]);return aO.createElement(wO,{value:b?e:void 0},c)}function x5(a){var{clipPathId:b,pathRef:c,points:d,strokeDasharray:e,props:f}=a,{type:g,layout:h,connectNulls:i,needClip:j,shape:k}=f,l=x_(x_({},sK(x0(f,xX))),{},{fill:"none",className:"recharts-line-curve",clipPath:j?"url(#clipPath-".concat(b,")"):void 0,points:d,type:g,layout:h,connectNulls:i,strokeDasharray:null!=e?e:f.strokeDasharray});return aO.createElement(aO.Fragment,null,(null==d?void 0:d.length)>1&&aO.createElement(xV,xZ({shapeType:"curve",option:k},l,{pathRef:c})),aO.createElement(x3,{points:d,clipPathId:b,props:f}))}function x6(a){var{clipPathId:b,props:c,pathRef:d,previousPointsRef:e,longestAnimatedLengthRef:f}=a,{points:g,strokeDasharray:h,isAnimationActive:i,animationBegin:j,animationDuration:k,animationEasing:l,animateNewValues:m,width:n,height:o,onAnimationEnd:p,onAnimationStart:q}=c,r=e.current,s=wa(g,"recharts-line-"),t=(0,aO.useRef)(s),[u,v]=(0,aO.useState)(!1),w=(0,aO.useCallback)(()=>{"function"==typeof p&&p(),v(!1)},[p]),x=(0,aO.useCallback)(()=>{"function"==typeof q&&q(),v(!0)},[q]),y=function(a){try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch(a){return 0}}(d.current),z=(0,aO.useRef)(0);t.current!==s&&(z.current=f.current,t.current=s);var A=z.current;return aO.createElement(x4,{points:g,showLabels:!u},c.children,aO.createElement(v9,{animationId:s,begin:j,duration:k,isActive:i,easing:l,onAnimationEnd:w,onAnimationStart:x,key:s},a=>{var j,k=Math.min(eu(A,y+A,a),y);if(j=i?h?((a,b,c)=>{var d=c.reduce((a,b)=>a+b);if(!d)return x2(b,a);for(var e=Math.floor(a/d),f=a%d,g=b-a,h=[],i=0,j=0;i<c.length;j+=null!=(k=c[i])?k:0,++i){var k,l=c[i];if(null!=l&&j+l>f){h=[...c.slice(0,i),f-j];break}}var m=h.length%2==0?[0,g]:[g];return[...function(a,b){for(var c=a.length%2!=0?[...a,0]:a,d=[],e=0;e<b;++e)d=[...d,...c];return d}(c,e),...h,...m].map(a=>"".concat(a,"px")).join(", ")})(k,y,"".concat(h).split(/[,\s]+/gim).map(a=>parseFloat(a))):x2(y,k):null==h?void 0:String(h),a>0&&y>0&&(e.current=g,f.current=Math.max(f.current,k)),r){var l=r.length/g.length,p=1===a?g:g.map((b,c)=>{var d=Math.floor(c*l);if(r[d]){var e=r[d];return x_(x_({},b),{},{x:eu(e.x,b.x,a),y:eu(e.y,b.y,a)})}return m?x_(x_({},b),{},{x:eu(2*n,b.x,a),y:eu(o/2,b.y,a)}):x_(x_({},b),{},{x:b.x,y:b.y})});return e.current=p,aO.createElement(x5,{props:c,points:p,clipPathId:b,pathRef:d,strokeDasharray:j})}return aO.createElement(x5,{props:c,points:g,clipPathId:b,pathRef:d,strokeDasharray:j})}),aO.createElement(wR,{label:c.label}))}function x7(a){var{clipPathId:b,props:c}=a,d=(0,aO.useRef)(null),e=(0,aO.useRef)(0),f=(0,aO.useRef)(null);return aO.createElement(x6,{props:c,clipPathId:b,previousPointsRef:d,longestAnimatedLengthRef:e,pathRef:f})}var x8=(a,b)=>{var c,d;return{x:null!=(c=a.x)?c:void 0,y:null!=(d=a.y)?d:void 0,value:a.value,errorVal:iv(a.payload,b)}};class x9 extends aO.Component{render(){var{hide:a,dot:b,points:c,className:d,xAxisId:e,yAxisId:f,top:g,left:h,width:i,height:j,id:k,needClip:l,zIndex:m}=this.props;if(a)return null;var n=ee("recharts-line",d),{r:o,strokeWidth:p}=function(a){var b=sJ(a);if(null!=b){var{r:c,strokeWidth:d}=b,e=Number(c),f=Number(d);return(Number.isNaN(e)||e<0)&&(e=3),(Number.isNaN(f)||f<0)&&(f=2),{r:e,strokeWidth:f}}return{r:3,strokeWidth:2}}(b),q=wU(b),r=2*o+p,s=l?"url(#clipPath-".concat(q?"":"dots-").concat(k,")"):void 0;return aO.createElement(t_,{zIndex:m},aO.createElement(tC,{className:n},l&&aO.createElement("defs",null,aO.createElement(w8,{clipPathId:k,xAxisId:e,yAxisId:f}),!q&&aO.createElement("clipPath",{id:"clipPath-dots-".concat(k)},aO.createElement("rect",{x:h-r/2,y:g-r/2,width:i+r,height:j+r}))),aO.createElement(w6,{xAxisId:e,yAxisId:f,data:c,dataPointFormatter:x8,errorBarOffset:0},aO.createElement(x7,{props:this.props,clipPathId:k}))),aO.createElement(w2,{activeDot:this.props.activeDot,points:c,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:s}))}}var ya={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:nP.line,type:"linear"};function yb(a){var b=tg(a,ya),{activeDot:c,animateNewValues:d,animationBegin:e,animationDuration:f,animationEasing:g,connectNulls:h,dot:i,hide:j,isAnimationActive:k,label:l,legendType:m,xAxisId:n,yAxisId:o,id:p}=b,q=x0(b,xY),{needClip:r}=w7(n,o),s=ta(),t=i0(),u=iS(),v=ih(a=>xg(a,n,o,u,p));if("horizontal"!==t&&"vertical"!==t||null==v||null==s)return null;var{height:w,width:x,x:y,y:z}=s;return aO.createElement(x9,xZ({},q,{id:p,connectNulls:h,dot:i,activeDot:c,animateNewValues:d,animationBegin:e,animationDuration:f,animationEasing:g,isAnimationActive:k,hide:j,label:l,legendType:m,xAxisId:n,yAxisId:o,points:v,layout:t,height:w,width:x,left:y,top:z,needClip:r}))}var yc=aO.memo(function(a){var b=tg(a,ya),c=iS();return aO.createElement(xk,{id:b.id,type:"line"},a=>aO.createElement(aO.Fragment,null,aO.createElement(xh,{legendPayload:(a=>{var{dataKey:b,name:c,stroke:d,legendType:e,hide:f}=a;return[{inactive:f,dataKey:b,type:e,color:d,value:iF(c,b),payload:a}]})(b)}),aO.createElement(x1,{dataKey:b.dataKey,data:b.data,stroke:b.stroke,strokeWidth:b.strokeWidth,fill:b.fill,name:b.name,hide:b.hide,unit:b.unit,tooltipType:b.tooltipType,id:a}),aO.createElement(xl,{type:"line",id:a,data:b.data,xAxisId:b.xAxisId,yAxisId:b.yAxisId,zAxisId:0,dataKey:b.dataKey,hide:b.hide,isPanorama:c}),aO.createElement(yb,xZ({},b,{id:a}))))},sz);yc.displayName="Line";let yd=({data:a})=>(0,aN.jsx)("div",{className:"h-48 w-full",children:(0,aN.jsx)(eP,{width:"100%",height:"100%",children:(0,aN.jsxs)(tl,{data:a,children:[(0,aN.jsx)(uK,{strokeDasharray:"3 3",vertical:!1,stroke:"rgba(255,255,255,0.05)"}),(0,aN.jsx)(u$,{dataKey:"date",tick:{fontSize:9,fill:"#64748b"},axisLine:!1,tickLine:!1,dy:10}),(0,aN.jsx)(u9,{tick:{fontSize:9,fill:"#64748b"},axisLine:!1,tickLine:!1,tickFormatter:a=>`฿${a/1e3}k`}),(0,aN.jsx)(wF,{cursor:{stroke:"#06b6d4",strokeWidth:1,strokeDasharray:"4 4"},contentStyle:{backgroundColor:"#020617",borderRadius:"8px",border:"1px solid #06b6d4",boxShadow:"0 10px 30px -10px rgba(6, 182, 212, 0.3)",padding:"8px 12px"},itemStyle:{color:"#fff",fontWeight:"800",fontSize:"12px"},labelStyle:{color:"#94a3b8",marginBottom:"4px",fontSize:"10px",textTransform:"uppercase",fontWeight:"700"},formatter:a=>[`฿${a.toLocaleString()}`,"Valuation"]}),(0,aN.jsx)(yc,{type:"monotone",dataKey:"price",stroke:"#06b6d4",strokeWidth:3,dot:!1,activeDot:{r:6,fill:"#06b6d4",stroke:"#fff",strokeWidth:2}})]})})}),ye=({card:a,isWishlisted:b,onClose:c,onAddToCollection:d,onToggleWishlist:e,onShopNow:f,listings:g=[],actionButtons:h,onAddToCart:i,currency:j="THB",exchangeRate:k=1})=>{let[l,m]=(0,aO.useState)(!1),n=k*(aS.some(b=>a.set.includes(b)||b.includes(a.set))?.55:1),o=a=>a?Math.round(a*n).toLocaleString():"---",p=aX[j]||j,q=a.imageUrl;return(0,aN.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-brand-darker animate-slideUp",children:[(0,aN.jsxs)("div",{className:"px-6 py-6 flex justify-between items-center sticky top-0 z-10 bg-brand-darker/80 backdrop-blur-lg border-b border-white/5",children:[(0,aN.jsx)("button",{onClick:c,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-white/5 active:bg-brand-cyan active:text-brand-darker transition-all border border-white/5",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-left text-sm"})}),(0,aN.jsxs)("div",{className:"text-center",children:[(0,aN.jsx)("span",{className:"font-black italic skew-x-[-10deg] uppercase tracking-wider text-xs text-brand-cyan block",children:"Asset Details"}),(0,aN.jsx)("span",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:a.number})]}),(0,aN.jsx)("button",{onClick:()=>e(a),className:"w-10 h-10 flex items-center justify-center rounded-xl bg-white/5 border border-white/5 active:scale-90 transition-all group",children:(0,aN.jsx)("i",{className:`fa-solid fa-heart transition-colors ${b?"text-brand-red":"text-slate-500 group-hover:text-brand-red"}`})})]}),(0,aN.jsxs)("div",{className:"flex-1 overflow-y-auto pb-40 scrollbar-hide bg-dots",children:[(0,aN.jsxs)("div",{className:"p-8 flex justify-center relative min-h-[380px]",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-brand-cyan/5 to-transparent pointer-events-none"}),!l&&(0,aN.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-0",children:(0,aN.jsxs)("div",{className:"w-[280px] aspect-[3/4] glass rounded-xl animate-pulse flex items-center justify-center border border-white/10 relative overflow-hidden",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 via-white/10 to-transparent"}),(0,aN.jsx)("i",{className:"fa-solid fa-image text-white/10 text-4xl"})]})}),(0,aN.jsx)("img",{src:q,alt:a.name,loading:"lazy",decoding:"async",onLoad:()=>m(!0),className:`w-full max-w-[280px] drop-shadow-[0_25px_50px_rgba(0,0,0,0.8)] transition-all duration-700 ease-out z-10 ${l?"opacity-100 scale-100 blur-0":"opacity-0 scale-95 blur-sm"}`})]}),(0,aN.jsxs)("div",{className:"px-6 space-y-8",children:[(0,aN.jsxs)("div",{className:"space-y-1",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,aN.jsx)("span",{className:"bg-brand-cyan text-brand-darker px-2 py-0.5 rounded text-[9px] font-black uppercase italic skew-x-[-10deg] shadow-lg shadow-brand-cyan/20",children:a.rarity}),(0,aN.jsx)("span",{className:"text-slate-400 text-[10px] font-bold tracking-widest uppercase",children:a.set})]}),(0,aN.jsx)("h1",{className:"text-3xl font-black text-white leading-none tracking-tight",children:a.name}),(0,aN.jsx)("h2",{className:"text-lg font-bold text-slate-500 tracking-wide",children:a.thaiName})]}),(0,aN.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,aN.jsxs)("div",{className:"bg-[#1e293b]/50 backdrop-blur-sm p-4 rounded-2xl border border-white/5 relative overflow-hidden",children:[(0,aN.jsx)("div",{className:"absolute top-0 right-0 w-12 h-12 bg-brand-cyan/10 rounded-bl-3xl"}),(0,aN.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Spot Price"}),(0,aN.jsxs)("p",{className:"text-2xl font-black text-white",children:[p," ",o(a.prices?.market||a.marketPrice)]}),(0,aN.jsxs)("div",{className:"mt-2 text-[8px] text-brand-green font-bold uppercase tracking-widest flex items-center gap-1",children:[(0,aN.jsx)("i",{className:"fa-solid fa-arrow-trend-up"})," +3.2%"]})]}),(0,aN.jsxs)("div",{className:"bg-[#1e293b]/50 backdrop-blur-sm p-4 rounded-2xl border border-white/5",children:[(0,aN.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Market High"}),(0,aN.jsxs)("p",{className:"text-2xl font-black text-brand-red",children:[p," ",o(a.prices?.high||45e3)]}),(0,aN.jsx)("div",{className:"mt-2 text-[8px] text-slate-500 font-bold uppercase tracking-widest",children:"Peak"})]})]}),(0,aN.jsx)("div",{className:"bg-[#1e293b]/50 rounded-2xl border border-white/5 p-4",children:(0,aN.jsx)(yd,{data:a.priceHistory})}),(0,aN.jsxs)("div",{className:"space-y-4",children:[(0,aN.jsx)("h3",{className:"font-black italic skew-x-[-10deg] text-white text-sm uppercase tracking-wider px-1 border-l-4 border-brand-green pl-3",children:"Marketplace Availability"}),(0,aN.jsx)("div",{className:"space-y-2",children:g.filter(b=>b.card_data.id===a.id||b.card_data.name===a.name&&b.card_data.set===a.set).length>0?g.filter(b=>b.card_data.id===a.id||b.card_data.name===a.name&&b.card_data.set===a.set).map((a,b)=>(0,aN.jsxs)("div",{className:"bg-white/[0.03] p-4 rounded-xl border border-white/5 flex justify-between items-center group hover:border-brand-green/30 transition-all",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-3",children:[(0,aN.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-800 overflow-hidden border border-white/10 flex-shrink-0",children:a.seller.avatar_url?(0,aN.jsx)("img",{src:a.seller.avatar_url,className:"w-full h-full object-cover"}):(0,aN.jsx)("div",{className:"w-full h-full flex items-center justify-center text-[10px] font-bold text-slate-500",children:"?"})}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("p",{className:"text-white text-xs font-bold",children:a.seller.display_name}),(0,aN.jsxs)("div",{className:"flex items-center gap-2",children:[(0,aN.jsx)("span",{className:"text-[9px] text-brand-green font-black uppercase tracking-widest",children:a.condition}),(0,aN.jsx)("span",{className:"w-1 h-1 rounded-full bg-slate-700"}),(0,aN.jsxs)("span",{className:"text-[8px] text-slate-500 font-bold uppercase",children:[a.seller.rating||5," ★"]})]})]})]}),(0,aN.jsxs)("div",{className:"text-right flex items-center gap-4",children:[(0,aN.jsxs)("div",{children:[(0,aN.jsxs)("p",{className:"text-white text-base font-black italic",children:[p," ",Math.round(a.price*k).toLocaleString()]}),(0,aN.jsx)("p",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:"+ Free Ship"})]}),(0,aN.jsx)("button",{onClick:()=>i&&i({id:a.id||Math.random().toString(),card:a.card_data,price:a.price,sellerName:a.seller.display_name,condition:a.condition}),className:"bg-brand-green text-brand-darker text-[9px] font-black px-4 py-2 rounded-lg hover:bg-white transition-colors active:scale-95 shadow-lg shadow-brand-green/10",children:"BUY"})]})]},b)):(0,aN.jsxs)("div",{className:"py-8 border border-dashed border-white/5 rounded-xl text-center",children:[(0,aN.jsx)("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:"No listings available for this item"}),(0,aN.jsx)("button",{className:"mt-2 text-[9px] text-brand-cyan font-black uppercase tracking-widest hover:text-white transition-colors",children:"Notify me on drop"})]})})]}),(0,aN.jsxs)("div",{className:"space-y-4",children:[(0,aN.jsx)("h3",{className:"font-black italic skew-x-[-10deg] text-white text-sm uppercase tracking-wider px-1 border-l-4 border-brand-cyan pl-3",children:"Graded Dashboard"}),(0,aN.jsx)("div",{className:"space-y-2",children:[{label:"PSA 10",grade:"Gem Mint",multiplier:3.5,color:"text-brand-cyan"},{label:"BGS 9.5",grade:"Gem Mint",multiplier:3.2,color:"text-brand-green"},{label:"CGC 10",grade:"Pristine",multiplier:3.4,color:"text-brand-red"}].map((b,c)=>(0,aN.jsxs)("div",{className:"flex justify-between items-center bg-white/[0.03] p-4 rounded-xl border border-white/5 hover:border-brand-cyan/30 transition-all cursor-default",children:[(0,aN.jsxs)("div",{children:[(0,aN.jsx)("p",{className:"font-black text-white text-sm tracking-tight",children:b.label}),(0,aN.jsx)("p",{className:"text-[9px] text-slate-500 uppercase font-bold tracking-widest",children:b.grade})]}),(0,aN.jsxs)("div",{className:"text-right",children:[(0,aN.jsxs)("p",{className:`font-black text-base ${b.color}`,children:[p," ",Math.round((a.prices?.market||a.marketPrice)*b.multiplier*n).toLocaleString()]}),(0,aN.jsxs)("p",{className:"text-[8px] text-slate-600 font-bold tracking-widest",children:[b.multiplier,"x Prem."]})]})]},c))})]})]})]}),h||(0,aN.jsxs)("div",{className:"fixed bottom-0 left-0 w-full p-6 bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 flex gap-3 z-20",children:[(0,aN.jsxs)("button",{onClick:()=>d(a),className:"flex-1 h-14 bg-white/5 border border-white/10 text-white hover:bg-white/10 font-black text-[10px] tracking-[0.2em] rounded-xl active:scale-95 transition-all uppercase flex items-center justify-center gap-2 group",children:[(0,aN.jsx)("i",{className:"fa-solid fa-vault text-brand-cyan group-hover:scale-110 transition-transform"}),"ADD TO VAULT"]}),(0,aN.jsxs)("button",{onClick:f,className:"flex-1 h-14 bg-gradient-to-r from-brand-cyan to-brand-green text-brand-darker font-black text-[10px] tracking-[0.2em] rounded-xl shadow-lg shadow-brand-cyan/20 active:scale-95 transition-all uppercase flex items-center justify-center gap-2",children:[(0,aN.jsx)("i",{className:"fa-solid fa-store"}),"SHOP NOW"]})]})]})},yf=({customCollections:a,wishlist:b,onUpdateCollections:c,onAddToCollection:d,onToggleWishlist:e,onListCard:f,listingTarget:g,onCancelListing:h,onPublishListing:i,activeListings:j=[],totalValue:k,currencySymbol:l})=>{let[m,n]=(0,aO.useState)("folders"),[o,p]=(0,aO.useState)(""),[q,r]=(0,aO.useState)(null),[s,t]=(0,aO.useState)(!1),[u,v]=(0,aO.useState)("1M"),w=(0,aO.useMemo)(()=>{let a=.05*k;return Array.from({length:"1D"===u?24:"1W"===u?7:30}).map((b,c)=>({date:c.toString(),price:k-a*Math.cos(c/5)}))},[k,u]),[x,y]=(0,aO.useState)(null),[z,A]=(0,aO.useState)(null),[B,C]=(0,aO.useState)(""),[D,E]=(0,aO.useState)("date_desc"),[F,G]=(0,aO.useState)(!1),H=(0,aO.useRef)(null);(0,aO.useEffect)(()=>{let a=a=>{H.current&&!H.current.contains(a.target)&&G(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let I=(0,aO.useMemo)(()=>{let b=new Set;return a.forEach(a=>{a.items.forEach(a=>{a.quantity>0&&b.add(a.cardId)})}),b},[a]),J=(0,aO.useMemo)(()=>{let b=[];return a.forEach(a=>{a.items.forEach(c=>{if(c.isListing){let d=c.card||aY.find(a=>a.id===c.cardId);d&&b.push({colId:a.id,item:c,card:d})}})}),b},[a]),K=(0,aO.useMemo)(()=>{let b=[];return a.forEach(a=>{a.items.forEach(c=>{let d=c.card||aY.find(a=>a.id===c.cardId);d&&b.push({colId:a.id,item:c,card:d})})}),b},[a]),L=(0,aO.useMemo)(()=>{let a=B.toLowerCase();return K.filter(({card:b})=>b.name.toLowerCase().includes(a)||b.set.toLowerCase().includes(a)||b.number.includes(a)).sort((a,b)=>{switch(D){case"name_asc":return a.card.name.localeCompare(b.card.name);case"price_desc":return b.card.marketPrice-a.card.marketPrice;case"price_asc":return a.card.marketPrice-b.card.marketPrice;case"date_asc":return new Date(a.item.addedAt).getTime()-new Date(b.item.addedAt).getTime();default:return new Date(b.item.addedAt).getTime()-new Date(a.item.addedAt).getTime()}})},[K,B,D]);return"wishlist"===m?(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-20",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 pt-4",children:[(0,aN.jsx)("button",{onClick:()=>n("folders"),className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,aN.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:"Wishlist"})]}),(0,aN.jsx)("div",{className:"space-y-3",children:0===b.length?(0,aN.jsxs)("div",{className:"text-center py-20 opacity-20",children:[(0,aN.jsx)("i",{className:"fa-solid fa-heart text-4xl mb-4"}),(0,aN.jsx)("p",{className:"text-xs font-black uppercase tracking-widest",children:"Wishlist is Empty"})]}):b.map(a=>(0,aN.jsxs)("div",{onClick:()=>{y(a),A(null)},className:"glass p-4 rounded-3xl flex items-center gap-4 border-white/5 active:bg-white/[0.05] transition-colors cursor-pointer",children:[(0,aN.jsx)("img",{src:a.imageUrl,className:"w-12 h-16 object-contain"}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,aN.jsx)("h4",{className:"text-white text-sm font-bold truncate",children:a.name}),(0,aN.jsxs)("p",{className:"text-[9px] text-slate-500 uppercase font-bold",children:[a.set," • ",a.rarity]})]}),(0,aN.jsx)("div",{className:"text-right",children:(0,aN.jsxs)("p",{className:"text-white text-xs font-black",children:["฿",a.marketPrice.toLocaleString()]})})]},a.id))})]}),x&&(0,aN.jsx)(ye,{card:x,isWishlisted:!0,onClose:()=>{y(null),A(null)},onToggleWishlist:e,onAddToCollection:d,listings:j})]}):"collections"===m?(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-20",children:[(0,aN.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4",children:[(0,aN.jsx)("button",{onClick:()=>n("folders"),className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,aN.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:"My Collection"})]}),(0,aN.jsx)("div",{className:"bg-white/5 px-3 py-1.5 rounded-lg border border-white/5",children:(0,aN.jsxs)("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:[K.length," Cards"]})})]}),(0,aN.jsxs)("div",{className:"flex gap-2",children:[(0,aN.jsxs)("div",{className:"relative group flex-1",children:[(0,aN.jsx)("i",{className:"fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-brand-green transition-colors"}),(0,aN.jsx)("input",{type:"text",placeholder:"Search your cards...",className:"w-full h-12 pl-10 pr-4 bg-[#1e293b] border border-white/10 rounded-xl focus:border-brand-green outline-none text-sm font-medium text-white placeholder:text-slate-500 transition-all shadow-inner",value:B,onChange:a=>C(a.target.value)})]}),(0,aN.jsxs)("div",{className:"relative",ref:H,children:[(0,aN.jsx)("button",{onClick:()=>G(!F),className:"h-12 w-12 bg-[#1e293b] border border-white/10 rounded-xl flex items-center justify-center text-slate-400 hover:text-white hover:border-brand-green transition-all shadow-inner active:scale-95",children:(0,aN.jsx)("i",{className:"fa-solid fa-arrow-up-wide-short text-sm"})}),F&&(0,aN.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-[#0f172a] border border-white/10 rounded-2xl shadow-2xl z-50 overflow-hidden animate-fadeIn",children:[(0,aN.jsx)("div",{className:"p-2 border-b border-white/5 bg-white/[0.02]",children:(0,aN.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 pl-2",children:"Sort By"})}),(0,aN.jsx)("div",{className:"p-1",children:[{id:"date_desc",label:"Recently Added"},{id:"name_asc",label:"Name (A-Z)"},{id:"price_desc",label:"Price (High-Low)"},{id:"price_asc",label:"Price (Low-High)"}].map(a=>(0,aN.jsx)("button",{onClick:()=>{E(a.id),G(!1)},className:`w-full text-left px-3 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-wider mb-1 last:mb-0 transition-colors ${D===a.id?"bg-brand-green/10 text-brand-green":"text-slate-400 hover:bg-white/5 hover:text-white"}`,children:a.label},a.id))})]})]})]}),(0,aN.jsx)("div",{className:"flex justify-end -mt-2",children:(0,aN.jsxs)("span",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:["Sorted by: ",(()=>{switch(D){case"price_desc":return"Price: High to Low";case"price_asc":return"Price: Low to High";case"name_asc":return"Name: A-Z";default:return"Recently Added"}})()]})}),(0,aN.jsx)("div",{className:"space-y-3",children:0===L.length?(0,aN.jsxs)("div",{className:"text-center py-20 opacity-20",children:[(0,aN.jsx)("i",{className:"fa-solid fa-layer-group text-4xl mb-4"}),(0,aN.jsx)("p",{className:"text-xs font-black uppercase tracking-widest",children:B?"No matches found":"Collection is Empty"})]}):L.map(({item:b,card:d,colId:e})=>(0,aN.jsxs)("div",{onClick:()=>{y(d),A({colId:e,item:b})},className:"glass p-4 rounded-3xl flex items-center gap-4 border-white/5 group relative overflow-hidden active:bg-white/[0.05] transition-colors cursor-pointer",children:[(0,aN.jsx)("div",{className:"w-14 h-20 bg-slate-900 rounded-xl overflow-hidden flex-shrink-0 p-1 border border-white/5",children:(0,aN.jsx)("img",{src:d.imageUrl,className:"w-full h-full object-contain filter drop-shadow-md",alt:d.name})}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0 space-y-1",children:[(0,aN.jsxs)("div",{className:"flex justify-between items-start",children:[(0,aN.jsx)("h4",{className:"text-white text-sm font-bold truncate pr-2",children:d.name}),b.isListing&&(0,aN.jsx)("span",{className:"text-[7px] bg-brand-cyan/20 text-brand-cyan px-1.5 py-0.5 rounded font-black uppercase tracking-widest border border-brand-cyan/20",children:"Listed"})]}),(0,aN.jsxs)("p",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest truncate",children:[d.set," • #",d.number]}),(0,aN.jsxs)("div",{className:"flex items-center gap-3 pt-1",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-1.5 bg-white/5 px-2 py-0.5 rounded-md border border-white/5",children:[(0,aN.jsx)("i",{className:"fa-regular fa-clock text-[8px] text-slate-500"}),(0,aN.jsx)("span",{className:"text-[8px] text-slate-400 font-bold",children:new Date(b.addedAt).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),(0,aN.jsx)("span",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-widest",children:b.condition})]})]}),(0,aN.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,aN.jsxs)("p",{className:"text-white text-xs font-black",children:["฿",d.marketPrice.toLocaleString()]}),(0,aN.jsx)("button",{onClick:b=>{b.stopPropagation(),confirm("Are you sure you want to delete this collection and all items inside it?")&&c(a.filter(a=>a.id!==e))},className:"w-8 h-8 rounded-xl flex items-center justify-center bg-white/5 hover:bg-brand-red/20 hover:text-brand-red text-slate-600 transition-colors",children:(0,aN.jsx)("i",{className:"fa-solid fa-trash-can text-[10px]"})})]})]},b.id))})]}),x&&z&&(0,aN.jsx)(ye,{card:x,isWishlisted:b.some(a=>a.id===x.id),onClose:()=>{y(null),A(null)},onToggleWishlist:e,onAddToCollection:d,actionButtons:z.item.isListing?(0,aN.jsx)("div",{className:"fixed bottom-0 left-0 w-full p-6 bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 z-20 text-center",children:(0,aN.jsxs)("div",{className:"flex items-center justify-center gap-2 text-brand-cyan font-black uppercase tracking-widest text-xs",children:[(0,aN.jsx)("span",{className:"w-2 h-2 rounded-full bg-brand-cyan animate-pulse"}),"Currently Listed on Market"]})}):(0,aN.jsx)("div",{className:"fixed bottom-0 left-0 w-full p-6 bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 z-[60]",children:(0,aN.jsxs)("button",{onClick:()=>{f(z.colId,z.item,x),y(null),A(null),t(!1),n("listings")},className:"w-full h-14 bg-brand-cyan text-brand-darker font-black text-[10px] tracking-[0.2em] rounded-xl shadow-lg shadow-brand-cyan/20 active:scale-95 transition-all uppercase flex items-center justify-center gap-2",children:[(0,aN.jsx)("i",{className:"fa-solid fa-tag"}),"Sell Asset"]})}),listings:j})]}):"listings"===m?(0,aN.jsxs)("div",{className:"space-y-6 animate-fadeIn pb-20",children:[(0,aN.jsxs)("div",{className:"flex justify-between items-center pt-4 gap-4",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4",children:[(0,aN.jsx)("button",{onClick:()=>n("folders"),className:"w-10 h-10 rounded-xl glass border-white/10 flex items-center justify-center active:scale-90 transition-all",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-left text-slate-500 text-xs"})}),(0,aN.jsx)("h3",{className:"text-white text-xl font-black uppercase tracking-tight italic skew-x-[-10deg]",children:"Active Listings"})]}),(0,aN.jsx)("button",{onClick:()=>t(!0),className:"px-6 h-10 bg-brand-cyan text-brand-darker rounded-xl text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all shadow-lg shadow-brand-cyan/10 whitespace-nowrap",children:"New Listing"})]}),s?(0,aN.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[(0,aN.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,aN.jsx)("p",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest",children:"Select an Asset from your Vault"}),(0,aN.jsx)("button",{onClick:()=>t(!1),className:"text-[9px] text-brand-red font-black uppercase tracking-widest",children:"Cancel"})]}),(0,aN.jsx)("div",{className:"space-y-3",children:0===K.filter(({item:a})=>!a.isListing).length?(0,aN.jsx)("div",{className:"py-20 text-center glass rounded-[2.5rem] border-dashed border-white/5",children:(0,aN.jsx)("p",{className:"text-[10px] text-slate-600 font-black uppercase tracking-widest",children:"No unlisted assets available"})}):K.filter(({item:a})=>!a.isListing).map(({colId:a,item:b,card:c})=>(0,aN.jsxs)("button",{onClick:()=>f(a,b,c),className:"w-full glass p-4 rounded-3xl flex items-center gap-4 border-white/5 active:scale-[0.98] transition-all text-left group",children:[(0,aN.jsx)("div",{className:"w-12 h-16 rounded-xl overflow-hidden bg-white/5 p-1 flex-shrink-0",children:(0,aN.jsx)("img",{src:c.imageUrl,className:"w-full h-full object-contain"})}),(0,aN.jsxs)("div",{className:"flex-1",children:[(0,aN.jsx)("h4",{className:"text-white text-sm font-bold group-hover:text-brand-cyan transition-colors",children:c.name}),(0,aN.jsxs)("p",{className:"text-[9px] text-slate-500 uppercase font-black",children:[b.condition," • ",c.set]})]}),(0,aN.jsx)("div",{className:"text-right",children:(0,aN.jsxs)("p",{className:"text-white text-xs font-black",children:["฿",c.marketPrice.toLocaleString()]})})]},b.id))})]}):0===J.length?(0,aN.jsxs)("div",{className:"text-center py-32 glass rounded-[2.5rem] border-dashed border-white/5",children:[(0,aN.jsx)("i",{className:"fa-solid fa-tag text-4xl text-slate-800 mb-6"}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-[0.2em] px-12 leading-relaxed",children:"You currently have no active sales listings in the CardStreet market."}),(0,aN.jsx)("button",{onClick:()=>t(!0),className:"mt-8 px-8 h-12 bg-white/5 border border-white/10 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-300 hover:bg-white/10 transition-colors",children:"Start Selling"})]}):(0,aN.jsx)("div",{className:"space-y-4",children:J.map(({colId:b,item:d,card:e})=>(0,aN.jsxs)("div",{className:"glass p-5 rounded-[2rem] border-white/5 space-y-4",children:[(0,aN.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,aN.jsx)("div",{className:"w-16 aspect-[3/4] glass rounded-xl overflow-hidden p-1 flex-shrink-0",children:(0,aN.jsx)("img",{src:e.imageUrl,className:"w-full h-full object-contain"})}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,aN.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-brand-green animate-pulse"}),(0,aN.jsx)("span",{className:"text-[8px] text-brand-green font-black uppercase tracking-widest",children:"Live on Market"})]}),(0,aN.jsx)("h4",{className:"text-white text-base font-black truncate",children:e.name}),(0,aN.jsxs)("p",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest",children:[d.condition," • ",d.quantity," Unit(s)"]})]}),(0,aN.jsxs)("div",{className:"text-right",children:[(0,aN.jsxs)("p",{className:"text-xl font-black text-brand-cyan",children:["฿",d.listingPrice?.toLocaleString()]}),(0,aN.jsx)("p",{className:"text-[8px] text-slate-600 font-black uppercase tracking-widest",children:"Asking Price"})]})]}),(0,aN.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,aN.jsx)("button",{onClick:()=>{f(b,d,e),t(!1)},className:"flex-1 h-10 glass border-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-400 hover:text-white transition-colors",children:"Edit Listing"}),(0,aN.jsx)("button",{onClick:()=>{c(a.map(a=>a.id===b?{...a,items:a.items.map(a=>a.id===d.id?{...a,isListing:!1,listingPrice:void 0}:a)}:a))},className:"flex-1 h-10 glass border-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest text-brand-red/60 hover:text-brand-red transition-colors",children:"Remove"})]})]},d.id))}),g&&(0,aN.jsx)(d9,{card:g.card,initialCondition:g.item.condition,onClose:h,onSuccess:a=>{a&&i(a),t(!1),n("listings")}})]}):"master"===m?(0,aN.jsx)(eb,{onBack:()=>n("folders"),onSelectGame:a=>{p(a),n("sets")}}):"sets"===m?(0,aN.jsx)(ec,{region:o,onBack:()=>n("master"),onSelectSet:a=>{r(a),n("set-detail")}}):"set-detail"===m&&q?(0,aN.jsx)(ed,{set:q,ownedCardIds:I,onBack:()=>n("sets")}):(0,aN.jsx)("div",{className:"space-y-6 animate-fadeIn pb-32",children:(0,aN.jsxs)("div",{className:"pt-6 relative",children:[(0,aN.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-brand-cyan to-brand-green opacity-20 blur-3xl rounded-full"}),(0,aN.jsxs)("div",{className:"flex justify-between items-end mb-1 px-2",children:[(0,aN.jsx)("p",{className:"text-brand-cyan text-[10px] font-black uppercase tracking-[0.2em] italic skew-x-[-10deg]",children:"My Portfolio"}),(0,aN.jsxs)("div",{className:"flex items-center gap-1.5 bg-brand-green/10 px-2 py-1 rounded-md border border-brand-green/20",children:[(0,aN.jsx)("i",{className:"fa-solid fa-arrow-trend-up text-brand-green text-[10px]"}),(0,aN.jsx)("span",{className:"text-brand-green text-[10px] font-black",children:"+4.2%"})]})]}),(0,aN.jsxs)("h2",{className:"px-2 text-6xl font-black text-white tracking-tighter leading-none italic skew-x-[-6deg] drop-shadow-lg mb-6",children:[l,k.toLocaleString(void 0,{maximumFractionDigits:0})]}),(0,aN.jsx)("div",{className:"glass-panel rounded-2xl p-0.5 border-brand-cyan/20 overflow-hidden shadow-2xl mb-8 mx-1",children:(0,aN.jsxs)("div",{className:"bg-[#0f172a] rounded-2xl p-4",children:[(0,aN.jsx)("div",{className:"flex justify-start items-center mb-4 gap-2",children:["1D","1W","1M","1Y"].map(a=>(0,aN.jsx)("button",{onClick:()=>v(a),className:`px-3 py-1 rounded-md text-[10px] font-black tracking-widest transition-all skew-x-[-10deg] ${u===a?"bg-brand-cyan text-brand-darker":"text-slate-600 hover:text-slate-300 bg-white/5"}`,children:a},a))}),(0,aN.jsx)("div",{className:"h-40",children:(0,aN.jsx)(yd,{data:w})})]})}),(0,aN.jsx)("div",{className:"grid grid-cols-2 gap-4",children:aT.map(a=>{let c=0,d="text-slate-500";"wishlist"===a.id?(c=b.length,d="text-brand-red"):"listings"===a.id?(c=J.length,d="text-brand-cyan"):"collections"===a.id?(c=K.length,d="text-brand-green"):c=a.count;let e="collections"===a.id?"collections":a.id;return(0,aN.jsxs)("div",{onClick:()=>n(e),className:"glass p-6 rounded-[2.5rem] border-white/5 active:scale-95 transition-all group cursor-pointer hover:border-brand-cyan/20",children:[(0,aN.jsx)("div",{className:"w-12 h-12 rounded-2xl glass border-white/10 flex items-center justify-center mb-4 group-hover:border-white/20 transition-colors",children:(0,aN.jsx)("i",{className:`fa-solid ${a.icon} ${d} group-hover:scale-110 transition-transform`})}),(0,aN.jsx)("h4",{className:"text-white text-sm font-bold tracking-tight mb-1",children:a.name}),(0,aN.jsxs)("p",{className:"text-[9px] text-slate-600 font-black uppercase tracking-widest",children:[c," Items"]})]},a.id)})})]})})},yg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yh=new Set(yg),yi=(a,b,c)=>c>b?b:c<a?a:c,yj={test:a=>"number"==typeof a,parse:parseFloat,transform:a=>a},yk={...yj,transform:a=>yi(0,1,a)},yl={...yj,default:1},ym=a=>Math.round(1e5*a)/1e5,yn=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,yo=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yp=(a,b)=>c=>!!("string"==typeof c&&yo.test(c)&&c.startsWith(a)||b&&null!=c&&Object.prototype.hasOwnProperty.call(c,b)),yq=(a,b,c)=>d=>{if("string"!=typeof d)return d;let[e,f,g,h]=d.match(yn);return{[a]:parseFloat(e),[b]:parseFloat(f),[c]:parseFloat(g),alpha:void 0!==h?parseFloat(h):1}},yr={...yj,transform:a=>Math.round(yi(0,255,a))},ys={test:yp("rgb","red"),parse:yq("red","green","blue"),transform:({red:a,green:b,blue:c,alpha:d=1})=>"rgba("+yr.transform(a)+", "+yr.transform(b)+", "+yr.transform(c)+", "+ym(yk.transform(d))+")"},yt={test:yp("#"),parse:function(a){let b="",c="",d="",e="";return a.length>5?(b=a.substring(1,3),c=a.substring(3,5),d=a.substring(5,7),e=a.substring(7,9)):(b=a.substring(1,2),c=a.substring(2,3),d=a.substring(3,4),e=a.substring(4,5),b+=b,c+=c,d+=d,e+=e),{red:parseInt(b,16),green:parseInt(c,16),blue:parseInt(d,16),alpha:e?parseInt(e,16)/255:1}},transform:ys.transform},yu=a=>({test:b=>"string"==typeof b&&b.endsWith(a)&&1===b.split(" ").length,parse:parseFloat,transform:b=>`${b}${a}`}),yv=yu("deg"),yw=yu("%"),yx=yu("px"),yy=yu("vh"),yz=yu("vw"),yA={...yw,parse:a=>yw.parse(a)/100,transform:a=>yw.transform(100*a)},yB={test:yp("hsl","hue"),parse:yq("hue","saturation","lightness"),transform:({hue:a,saturation:b,lightness:c,alpha:d=1})=>"hsla("+Math.round(a)+", "+yw.transform(ym(b))+", "+yw.transform(ym(c))+", "+ym(yk.transform(d))+")"},yC={test:a=>ys.test(a)||yt.test(a)||yB.test(a),parse:a=>ys.test(a)?ys.parse(a):yB.test(a)?yB.parse(a):yt.parse(a),transform:a=>"string"==typeof a?a:a.hasOwnProperty("red")?ys.transform(a):yB.transform(a),getAnimatableNone:a=>{let b=yC.parse(a);return b.alpha=0,yC.transform(b)}},yD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,yE="number",yF="color",yG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yH(a){let b=a.toString(),c=[],d={color:[],number:[],var:[]},e=[],f=0,g=b.replace(yG,a=>(yC.test(a)?(d.color.push(f),e.push(yF),c.push(yC.parse(a))):a.startsWith("var(")?(d.var.push(f),e.push("var"),c.push(a)):(d.number.push(f),e.push(yE),c.push(parseFloat(a))),++f,"${}")).split("${}");return{values:c,split:g,indexes:d,types:e}}function yI(a){return yH(a).values}function yJ(a){let{split:b,types:c}=yH(a),d=b.length;return a=>{let e="";for(let f=0;f<d;f++)if(e+=b[f],void 0!==a[f]){let b=c[f];b===yE?e+=ym(a[f]):b===yF?e+=yC.transform(a[f]):e+=a[f]}return e}}let yK=a=>"number"==typeof a?0:yC.test(a)?yC.getAnimatableNone(a):a,yL={test:function(a){return isNaN(a)&&"string"==typeof a&&(a.match(yn)?.length||0)+(a.match(yD)?.length||0)>0},parse:yI,createTransformer:yJ,getAnimatableNone:function(a){let b=yI(a);return yJ(a)(b.map(yK))}},yM=new Set(["brightness","contrast","saturate","opacity"]);function yN(a){let[b,c]=a.slice(0,-1).split("(");if("drop-shadow"===b)return a;let[d]=c.match(yn)||[];if(!d)return a;let e=c.replace(d,""),f=+!!yM.has(b);return d!==c&&(f*=100),b+"("+f+e+")"}let yO=/\b([a-z-]*)\(.*?\)/gu,yP={...yL,getAnimatableNone:a=>{let b=a.match(yO);return b?b.map(yN).join(" "):a}},yQ={...yj,transform:Math.round},yR={borderWidth:yx,borderTopWidth:yx,borderRightWidth:yx,borderBottomWidth:yx,borderLeftWidth:yx,borderRadius:yx,borderTopLeftRadius:yx,borderTopRightRadius:yx,borderBottomRightRadius:yx,borderBottomLeftRadius:yx,width:yx,maxWidth:yx,height:yx,maxHeight:yx,top:yx,right:yx,bottom:yx,left:yx,inset:yx,insetBlock:yx,insetBlockStart:yx,insetBlockEnd:yx,insetInline:yx,insetInlineStart:yx,insetInlineEnd:yx,padding:yx,paddingTop:yx,paddingRight:yx,paddingBottom:yx,paddingLeft:yx,paddingBlock:yx,paddingBlockStart:yx,paddingBlockEnd:yx,paddingInline:yx,paddingInlineStart:yx,paddingInlineEnd:yx,margin:yx,marginTop:yx,marginRight:yx,marginBottom:yx,marginLeft:yx,marginBlock:yx,marginBlockStart:yx,marginBlockEnd:yx,marginInline:yx,marginInlineStart:yx,marginInlineEnd:yx,fontSize:yx,backgroundPositionX:yx,backgroundPositionY:yx,rotate:yv,rotateX:yv,rotateY:yv,rotateZ:yv,scale:yl,scaleX:yl,scaleY:yl,scaleZ:yl,skew:yv,skewX:yv,skewY:yv,distance:yx,translateX:yx,translateY:yx,translateZ:yx,x:yx,y:yx,z:yx,perspective:yx,transformPerspective:yx,opacity:yk,originX:yA,originY:yA,originZ:yx,zIndex:yQ,fillOpacity:yk,strokeOpacity:yk,numOctaves:yQ},yS={...yR,color:yC,backgroundColor:yC,outlineColor:yC,fill:yC,stroke:yC,borderColor:yC,borderTopColor:yC,borderRightColor:yC,borderBottomColor:yC,borderLeftColor:yC,filter:yP,WebkitFilter:yP},yT=a=>yS[a],yU=()=>({translate:0,scale:1,origin:0,originPoint:0}),yV=()=>({x:yU(),y:yU()}),yW=()=>({min:0,max:0}),yX=()=>({x:yW(),y:yW()}),yY=a=>!!(a&&a.getVelocity),yZ=new Set(["width","height","top","left","right","bottom",...yg]),y$=a=>b=>b.test(a),y_=[yj,yx,yw,yv,yz,yy,{test:a=>"auto"===a,parse:a=>a}],y0=a=>y_.find(y$(a)),y1=()=>{},y2=()=>{},y3=a=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(a),y4=a=>b=>"string"==typeof b&&b.startsWith(a),y5=y4("--"),y6=y4("var(--"),y7=a=>!!y6(a)&&y8.test(a.split("/*")[0].trim()),y8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function y9(a){return"string"==typeof a&&a.split("/*")[0].includes("var(--")}let za=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,zb=a=>180*a/Math.PI,zc=a=>ze(zb(Math.atan2(a[1],a[0]))),zd={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:a=>(Math.abs(a[0])+Math.abs(a[3]))/2,rotate:zc,rotateZ:zc,skewX:a=>zb(Math.atan(a[1])),skewY:a=>zb(Math.atan(a[2])),skew:a=>(Math.abs(a[1])+Math.abs(a[2]))/2},ze=a=>((a%=360)<0&&(a+=360),a),zf=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]),zg=a=>Math.sqrt(a[4]*a[4]+a[5]*a[5]),zh={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zf,scaleY:zg,scale:a=>(zf(a)+zg(a))/2,rotateX:a=>ze(zb(Math.atan2(a[6],a[5]))),rotateY:a=>ze(zb(Math.atan2(-a[2],a[0]))),rotateZ:zc,rotate:zc,skewX:a=>zb(Math.atan(a[4])),skewY:a=>zb(Math.atan(a[1])),skew:a=>(Math.abs(a[1])+Math.abs(a[4]))/2};function zi(a){return+!!a.includes("scale")}function zj(a,b){let c,d;if(!a||"none"===a)return zi(b);let e=a.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(e)c=zh,d=e;else{let b=a.match(/^matrix\(([-\d.e\s,]+)\)$/u);c=zd,d=b}if(!d)return zi(b);let f=c[b],g=d[1].split(",").map(zk);return"function"==typeof f?f(g):g[f]}function zk(a){return parseFloat(a.trim())}let zl=a=>a===yj||a===yx,zm=new Set(["x","y","z"]),zn=yg.filter(a=>!zm.has(a)),zo={width:({x:a},{paddingLeft:b="0",paddingRight:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),height:({y:a},{paddingTop:b="0",paddingBottom:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),top:(a,{top:b})=>parseFloat(b),left:(a,{left:b})=>parseFloat(b),bottom:({y:a},{top:b})=>parseFloat(b)+(a.max-a.min),right:({x:a},{left:b})=>parseFloat(b)+(a.max-a.min),x:(a,{transform:b})=>zj(b,"x"),y:(a,{transform:b})=>zj(b,"y")};zo.translateX=zo.x,zo.translateY=zo.y;let zp=a=>a,zq={},zr=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],zs={value:null,addProjectionMetrics:null};function zt(a,b){let c=!1,d=!0,e={delta:0,timestamp:0,isProcessing:!1},f=()=>c=!0,g=zr.reduce((a,c)=>(a[c]=function(a,b){let c=new Set,d=new Set,e=!1,f=!1,g=new WeakSet,h={delta:0,timestamp:0,isProcessing:!1},i=0;function j(b){g.has(b)&&(k.schedule(b),a()),i++,b(h)}let k={schedule:(a,b=!1,f=!1)=>{let h=f&&e?c:d;return b&&g.add(a),h.has(a)||h.add(a),a},cancel:a=>{d.delete(a),g.delete(a)},process:a=>{if(h=a,e){f=!0;return}e=!0,[c,d]=[d,c],c.forEach(j),b&&zs.value&&zs.value.frameloop[b].push(i),i=0,c.clear(),e=!1,f&&(f=!1,k.process(a))}};return k}(f,b?c:void 0),a),{}),{setup:h,read:i,resolveKeyframes:j,preUpdate:k,update:l,preRender:m,render:n,postRender:o}=g,p=()=>{let f=zq.useManualTiming?e.timestamp:performance.now();c=!1,zq.useManualTiming||(e.delta=d?1e3/60:Math.max(Math.min(f-e.timestamp,40),1)),e.timestamp=f,e.isProcessing=!0,h.process(e),i.process(e),j.process(e),k.process(e),l.process(e),m.process(e),n.process(e),o.process(e),e.isProcessing=!1,c&&b&&(d=!1,a(p))};return{schedule:zr.reduce((b,f)=>{let h=g[f];return b[f]=(b,f=!1,g=!1)=>(!c&&(c=!0,d=!0,e.isProcessing||a(p)),h.schedule(b,f,g)),b},{}),cancel:a=>{for(let b=0;b<zr.length;b++)g[zr[b]].cancel(a)},state:e,steps:g}}let{schedule:zu,cancel:zv,state:zw,steps:zx}=zt("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:zp,!0),zy=new Set,zz=!1,zA=!1,zB=!1;function zC(){if(zA){let a=Array.from(zy).filter(a=>a.needsMeasurement),b=new Set(a.map(a=>a.element)),c=new Map;b.forEach(a=>{let b=function(a){let b=[];return zn.forEach(c=>{let d=a.getValue(c);void 0!==d&&(b.push([c,d.get()]),d.set(+!!c.startsWith("scale")))}),b}(a);b.length&&(c.set(a,b),a.render())}),a.forEach(a=>a.measureInitialState()),b.forEach(a=>{a.render();let b=c.get(a);b&&b.forEach(([b,c])=>{a.getValue(b)?.set(c)})}),a.forEach(a=>a.measureEndState()),a.forEach(a=>{void 0!==a.suspendedScrollY&&window.scrollTo(0,a.suspendedScrollY)})}zA=!1,zz=!1,zy.forEach(a=>a.complete(zB)),zy.clear()}function zD(){zy.forEach(a=>{a.readKeyframes(),a.needsMeasurement&&(zA=!0)})}class zE{constructor(a,b,c,d,e,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...a],this.onComplete=b,this.name=c,this.motionValue=d,this.element=e,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(zy.add(this),zz||(zz=!0,zu.read(zD),zu.resolveKeyframes(zC))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:a,name:b,element:c,motionValue:d}=this;if(null===a[0]){let e=d?.get(),f=a[a.length-1];if(void 0!==e)a[0]=e;else if(c&&b){let d=c.readValue(b,f);null!=d&&(a[0]=d)}void 0===a[0]&&(a[0]=f),d&&void 0===e&&d.set(a[0])}for(let b=1;b<a.length;b++)a[b]??(a[b]=a[b-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(a=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,a),zy.delete(this)}cancel(){"scheduled"===this.state&&(zy.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}let zF=a=>/^0[^.\s]+$/u.test(a);function zG(a,b){let c=yT(a);return c!==yP&&(c=yL),c.getAnimatableNone?c.getAnimatableNone(b):void 0}let zH=new Set(["auto","none","0"]);class zI extends zE{constructor(a,b,c,d,e){super(a,b,c,d,e,!0)}readKeyframes(){let{unresolvedKeyframes:a,element:b,name:c}=this;if(!b||!b.current)return;super.readKeyframes();for(let c=0;c<a.length;c++){let d=a[c];if("string"==typeof d&&y7(d=d.trim())){let e=function a(b,c,d=1){y2(d<=4,`Max CSS variable fallback depth detected in property "${b}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[e,f]=function(a){let b=za.exec(a);if(!b)return[,];let[,c,d,e]=b;return[`--${c??d}`,e]}(b);if(!e)return;let g=window.getComputedStyle(c).getPropertyValue(e);if(g){let a=g.trim();return y3(a)?parseFloat(a):a}return y7(f)?a(f,c,d+1):f}(d,b.current);void 0!==e&&(a[c]=e),c===a.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!yZ.has(c)||2!==a.length)return;let[d,e]=a,f=y0(d),g=y0(e);if(y9(d)!==y9(e)&&zo[c]){this.needsMeasurement=!0;return}if(f!==g)if(zl(f)&&zl(g))for(let b=0;b<a.length;b++){let c=a[b];"string"==typeof c&&(a[b]=parseFloat(c))}else zo[c]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:a,name:b}=this,c=[];for(let b=0;b<a.length;b++){var d;(null===a[b]||("number"==typeof(d=a[b])?0===d:null===d||"none"===d||"0"===d||zF(d)))&&c.push(b)}c.length&&function(a,b,c){let d,e=0;for(;e<a.length&&!d;){let b=a[e];"string"==typeof b&&!zH.has(b)&&yH(b).values.length&&(d=a[e]),e++}if(d&&c)for(let e of b)a[e]=zG(c,d)}(a,c,b)}measureInitialState(){let{element:a,unresolvedKeyframes:b,name:c}=this;if(!a||!a.current)return;"height"===c&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zo[c](a.measureViewportBox(),window.getComputedStyle(a.current)),b[0]=this.measuredOrigin;let d=b[b.length-1];void 0!==d&&a.getValue(c,d).jump(d,!1)}measureEndState(){let{element:a,name:b,unresolvedKeyframes:c}=this;if(!a||!a.current)return;let d=a.getValue(b);d&&d.jump(this.measuredOrigin,!1);let e=c.length-1,f=c[e];c[e]=zo[b](a.measureViewportBox(),window.getComputedStyle(a.current)),null!==f&&void 0===this.finalKeyframe&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([b,c])=>{a.getValue(b).set(c)}),this.resolveNoneKeyframes()}}function zJ(a,b){-1===a.indexOf(b)&&a.push(b)}function zK(a,b){let c=a.indexOf(b);c>-1&&a.splice(c,1)}class zL{constructor(){this.subscriptions=[]}add(a){return zJ(this.subscriptions,a),()=>zK(this.subscriptions,a)}notify(a,b,c){let d=this.subscriptions.length;if(d)if(1===d)this.subscriptions[0](a,b,c);else for(let e=0;e<d;e++){let d=this.subscriptions[e];d&&d(a,b,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let{schedule:zM}=zt(queueMicrotask,!1);function zN(){f=void 0}let zO={now:()=>(void 0===f&&zO.set(zw.isProcessing||zq.useManualTiming?zw.timestamp:performance.now()),f),set:a=>{f=a,queueMicrotask(zN)}},zP={current:void 0};class zQ{constructor(a,b={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{let b=zO.now();if(this.updatedAt!==b&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(a),this.owner=b.owner}setCurrent(a){this.current=a,this.updatedAt=zO.now(),null===this.canTrackVelocity&&void 0!==a&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(a=this.current){this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt}onChange(a){return this.on("change",a)}on(a,b){this.events[a]||(this.events[a]=new zL);let c=this.events[a].add(b);return"change"===a?()=>{c(),zu.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(let a in this.events)this.events[a].clear()}attach(a,b){this.passiveEffect=a,this.stopPassiveEffect=b}set(a){this.passiveEffect?this.passiveEffect(a,this.updateAndNotify):this.updateAndNotify(a)}setWithVelocity(a,b,c){this.set(b),this.prev=void 0,this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt-c}jump(a,b=!0){this.updateAndNotify(a),this.prev=a,this.prevUpdatedAt=this.prevFrameValue=void 0,b&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(a){this.dependents||(this.dependents=new Set),this.dependents.add(a)}removeDependent(a){this.dependents&&this.dependents.delete(a)}get(){return zP.current&&zP.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var a;let b=zO.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||b-this.updatedAt>30)return 0;let c=Math.min(this.updatedAt-this.prevUpdatedAt,30);return a=parseFloat(this.current)-parseFloat(this.prevFrameValue),c?1e3/c*a:0}start(a){return this.stop(),new Promise(b=>{this.hasAnimated=!0,this.animation=a(b),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zR(a,b){return new zQ(a,b)}let zS=[...y_,yC,yL],zT={current:null},zU={current:!1},zV="undefined"!=typeof window,zW=new WeakMap;function zX(a){return null!==a&&"object"==typeof a&&"function"==typeof a.start}function zY(a){return"string"==typeof a||Array.isArray(a)}let zZ=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],z$=["initial",...zZ];function z_(a){return zX(a.animate)||z$.some(b=>zY(a[b]))}function z0(a){return!!(z_(a)||a.variants)}function z1(a){let b=[{},{}];return a?.values.forEach((a,c)=>{b[0][c]=a.get(),b[1][c]=a.getVelocity()}),b}function z2(a,b,c,d){if("function"==typeof b){let[e,f]=z1(d);b=b(void 0!==c?c:a.custom,e,f)}if("string"==typeof b&&(b=a.variants&&a.variants[b]),"function"==typeof b){let[e,f]=z1(d);b=b(void 0!==c?c:a.custom,e,f)}return b}let z3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],z4={};class z5{scrapeMotionValuesFromProps(a,b,c){return{}}constructor({parent:a,props:b,presenceContext:c,reducedMotionConfig:d,blockInitialAnimation:e,visualState:f},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let a=zO.now();this.renderScheduledAt<a&&(this.renderScheduledAt=a,zu.render(this.render,!1,!0))};let{latestValues:h,renderState:i}=f;this.latestValues=h,this.baseTarget={...h},this.initialValues=b.initial?{...h}:{},this.renderState=i,this.parent=a,this.props=b,this.presenceContext=c,this.depth=a?a.depth+1:0,this.reducedMotionConfig=d,this.options=g,this.blockInitialAnimation=!!e,this.isControllingVariants=z_(b),this.isVariantNode=z0(b),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);let{willChange:j,...k}=this.scrapeMotionValuesFromProps(b,{},this);for(let a in k){let b=k[a];void 0!==h[a]&&yY(b)&&b.set(h[a])}}mount(a){this.current=a,zW.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,b)=>this.bindToMotionValue(b,a)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(zU.current||function(){if(zU.current=!0,zV)if(window.matchMedia){let a=window.matchMedia("(prefers-reduced-motion)"),b=()=>zT.current=a.matches;a.addEventListener("change",b),b()}else zT.current=!1}(),this.shouldReduceMotion=zT.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let a in this.projection&&this.projection.unmount(),zv(this.notifyUpdate),zv(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[a].clear();for(let a in this.features){let b=this.features[a];b&&(b.unmount(),b.isMounted=!1)}this.current=null}addChild(a){this.children.add(a),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(a)}removeChild(a){this.children.delete(a),this.enteringChildren&&this.enteringChildren.delete(a)}bindToMotionValue(a,b){let c;this.valueSubscriptions.has(a)&&this.valueSubscriptions.get(a)();let d=yh.has(a);d&&this.onBindTransform&&this.onBindTransform();let e=b.on("change",b=>{this.latestValues[a]=b,this.props.onUpdate&&zu.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});"undefined"!=typeof window&&window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,a,b)),this.valueSubscriptions.set(a,()=>{e(),c&&c(),b.owner&&b.stop()})}sortNodePosition(a){return this.current&&this.sortInstanceNodePosition&&this.type===a.type?this.sortInstanceNodePosition(this.current,a.current):0}updateFeatures(){let a="animation";for(a in z4){let b=z4[a];if(!b)continue;let{isEnabled:c,Feature:d}=b;if(!this.features[a]&&d&&c(this.props)&&(this.features[a]=new d(this)),this.features[a]){let b=this.features[a];b.isMounted?b.update():(b.mount(),b.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yX()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,b){this.latestValues[a]=b}update(a,b){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=b;for(let b=0;b<z3.length;b++){let c=z3[b];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);let d=a["on"+c];d&&(this.propEventSubscriptions[c]=this.on(c,d))}this.prevMotionValues=function(a,b,c){for(let d in b){let e=b[d],f=c[d];if(yY(e))a.addValue(d,e);else if(yY(f))a.addValue(d,zR(e,{owner:a}));else if(f!==e)if(a.hasValue(d)){let b=a.getValue(d);!0===b.liveStyle?b.jump(e):b.hasAnimated||b.set(e)}else{let b=a.getStaticValue(d);a.addValue(d,zR(void 0!==b?b:e,{owner:a}))}}for(let d in c)void 0===b[d]&&a.removeValue(d);return b}(this,this.scrapeMotionValuesFromProps(a,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(a){let b=this.getClosestVariantNode();if(b)return b.variantChildren&&b.variantChildren.add(a),()=>b.variantChildren.delete(a)}addValue(a,b){let c=this.values.get(a);b!==c&&(c&&this.removeValue(a),this.bindToMotionValue(a,b),this.values.set(a,b),this.latestValues[a]=b.get())}removeValue(a){this.values.delete(a);let b=this.valueSubscriptions.get(a);b&&(b(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,b){if(this.props.values&&this.props.values[a])return this.props.values[a];let c=this.values.get(a);return void 0===c&&void 0!==b&&(c=zR(null===b?void 0:b,{owner:this}),this.addValue(a,c)),c}readValue(a,b){let c=void 0===this.latestValues[a]&&this.current?this.getBaseTargetFromProps(this.props,a)??this.readValueFromInstance(this.current,a,this.options):this.latestValues[a];if(null!=c){if("string"==typeof c&&(y3(c)||zF(c)))c=parseFloat(c);else{let d;d=c,!zS.find(y$(d))&&yL.test(b)&&(c=zG(a,b))}this.setBaseTarget(a,yY(c)?c.get():c)}return yY(c)?c.get():c}setBaseTarget(a,b){this.baseTarget[a]=b}getBaseTarget(a){let b,{initial:c}=this.props;if("string"==typeof c||"object"==typeof c){let d=z2(this.props,c,this.presenceContext?.custom);d&&(b=d[a])}if(c&&void 0!==b)return b;let d=this.getBaseTargetFromProps(this.props,a);return void 0===d||yY(d)?void 0!==this.initialValues[a]&&void 0===b?void 0:this.baseTarget[a]:d}on(a,b){return this.events[a]||(this.events[a]=new zL),this.events[a].add(b)}notify(a,...b){this.events[a]&&this.events[a].notify(...b)}scheduleRenderMicrotask(){zM.render(this.render)}}class z6 extends z5{constructor(){super(...arguments),this.KeyframeResolver=zI}sortInstanceNodePosition(a,b){return 2&a.compareDocumentPosition(b)?1:-1}getBaseTargetFromProps(a,b){let c=a.style;return c?c[b]:void 0}removeValueFromRenderState(a,{vars:b,style:c}){delete b[a],delete c[a]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:a}=this.props;yY(a)&&(this.childSubscription=a.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function z7(a){return a.replace(/([A-Z])/g,a=>`-${a.toLowerCase()}`)}let z8=(a,b)=>b&&"number"==typeof a?b.transform(a):a,z9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Aa=yg.length;function Ab(a,b,c){let{style:d,vars:e,transformOrigin:f}=a,g=!1,h=!1;for(let a in b){let c=b[a];if(yh.has(a)){g=!0;continue}if(y5(a)){e[a]=c;continue}{let b=z8(c,yR[a]);a.startsWith("origin")?(h=!0,f[a]=b):d[a]=b}}if(!b.transform&&(g||c?d.transform=function(a,b,c){let d="",e=!0;for(let f=0;f<Aa;f++){let g=yg[f],h=a[g];if(void 0===h)continue;let i=!0;if("number"==typeof h)i=h===+!!g.startsWith("scale");else{let a=parseFloat(h);i=g.startsWith("scale")?1===a:0===a}if(!i||c){let a=z8(h,yR[g]);if(!i){e=!1;let b=z9[g]||g;d+=`${b}(${a}) `}c&&(b[g]=a)}}return d=d.trim(),c?d=c(b,e?"":d):e&&(d="none"),d}(b,a.transform,c):d.transform&&(d.transform="none")),h){let{originX:a="50%",originY:b="50%",originZ:c=0}=f;d.transformOrigin=`${a} ${b} ${c}`}}let Ac={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ad={offset:"strokeDashoffset",array:"strokeDasharray"},Ae=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Af(a,{attrX:b,attrY:c,attrScale:d,pathLength:e,pathSpacing:f=1,pathOffset:g=0,...h},i,j,k){if(Ab(a,h,j),i){a.style.viewBox&&(a.attrs.viewBox=a.style.viewBox);return}a.attrs=a.style,a.style={};let{attrs:l,style:m}=a;for(let a of(l.transform&&(m.transform=l.transform,delete l.transform),(m.transform||l.transformOrigin)&&(m.transformOrigin=l.transformOrigin??"50% 50%",delete l.transformOrigin),m.transform&&(m.transformBox=k?.transformBox??"fill-box",delete l.transformBox),Ae))void 0!==l[a]&&(m[a]=l[a],delete l[a]);void 0!==b&&(l.x=b),void 0!==c&&(l.y=c),void 0!==d&&(l.scale=d),void 0!==e&&function(a,b,c=1,d=0,e=!0){a.pathLength=1;let f=e?Ac:Ad;a[f.offset]=`${-d}`,a[f.array]=`${b} ${c}`}(l,e,f,g,!1)}let Ag=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Ah=a=>"string"==typeof a&&"svg"===a.toLowerCase();function Ai(a,{style:b,vars:c},d,e){let f,g=a.style;for(f in b)g[f]=b[f];for(f in e?.applyProjectionStyles(g,d),c)g.setProperty(f,c[f])}function Aj(a,b){return b.max===b.min?0:a/(b.max-b.min)*100}let Ak={correct:(a,b)=>{if(!b.target)return a;if("string"==typeof a)if(!yx.test(a))return a;else a=parseFloat(a);let c=Aj(a,b.target.x),d=Aj(a,b.target.y);return`${c}% ${d}%`}},Al=(a,b,c)=>a+(b-a)*c,Am={borderRadius:{...Ak,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ak,borderTopRightRadius:Ak,borderBottomLeftRadius:Ak,borderBottomRightRadius:Ak,boxShadow:{correct:(a,{treeScale:b,projectionDelta:c})=>{let d=yL.parse(a);if(d.length>5)return a;let e=yL.createTransformer(a),f=+("number"!=typeof d[0]),g=c.x.scale*b.x,h=c.y.scale*b.y;d[0+f]/=g,d[1+f]/=h;let i=Al(g,h,.5);return"number"==typeof d[2+f]&&(d[2+f]/=i),"number"==typeof d[3+f]&&(d[3+f]/=i),e(d)}}};function An(a,{layout:b,layoutId:c}){return yh.has(a)||a.startsWith("origin")||(b||void 0!==c)&&(!!Am[a]||"opacity"===a)}function Ao(a,b,c){let d=a.style,e=b?.style,f={};if(!d)return f;for(let b in d)(yY(d[b])||e&&yY(e[b])||An(b,a)||c?.getValue(b)?.liveStyle!==void 0)&&(f[b]=d[b]);return f}function Ap(a,b,c){let d=Ao(a,b,c);for(let c in a)(yY(a[c])||yY(b[c]))&&(d[-1!==yg.indexOf(c)?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c]=a[c]);return d}class Aq extends z6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=yX}getBaseTargetFromProps(a,b){return a[b]}readValueFromInstance(a,b){if(yh.has(b)){let a=yT(b);return a&&a.default||0}return b=Ag.has(b)?b:z7(b),a.getAttribute(b)}scrapeMotionValuesFromProps(a,b,c){return Ap(a,b,c)}build(a,b,c){Af(a,b,this.isSVGTag,c.transformTemplate,c.style)}renderInstance(a,b,c,d){for(let c in Ai(a,b,void 0,d),b.attrs)a.setAttribute(Ag.has(c)?c:z7(c),b.attrs[c])}mount(a){this.isSVGTag=Ah(a.tagName),super.mount(a)}}function Ar({top:a,left:b,right:c,bottom:d}){return{x:{min:b,max:c},y:{min:a,max:d}}}function As(a){return void 0===a||1===a}function At({scale:a,scaleX:b,scaleY:c}){return!As(a)||!As(b)||!As(c)}function Au(a){return At(a)||Av(a)||a.z||a.rotate||a.rotateX||a.rotateY||a.skewX||a.skewY}function Av(a){var b,c;return(b=a.x)&&"0%"!==b||(c=a.y)&&"0%"!==c}function Aw(a,b,c,d,e){return void 0!==e&&(a=d+e*(a-d)),d+c*(a-d)+b}function Ax(a,b=0,c=1,d,e){a.min=Aw(a.min,b,c,d,e),a.max=Aw(a.max,b,c,d,e)}function Ay(a,{x:b,y:c}){Ax(a.x,b.translate,b.scale,b.originPoint),Ax(a.y,c.translate,c.scale,c.originPoint)}function Az(a,b){a.min=a.min+b,a.max=a.max+b}function AA(a,b,c,d,e=.5){let f=Al(a.min,a.max,e);Ax(a,b,c,f,d)}function AB(a,b){AA(a.x,b.x,b.scaleX,b.scale,b.originX),AA(a.y,b.y,b.scaleY,b.scale,b.originY)}function AC(a,b){return Ar(function(a,b){if(!b)return a;let c=b({x:a.left,y:a.top}),d=b({x:a.right,y:a.bottom});return{top:c.y,left:c.x,bottom:d.y,right:d.x}}(a.getBoundingClientRect(),b))}class AD extends z6{constructor(){super(...arguments),this.type="html",this.renderInstance=Ai}readValueFromInstance(a,b){if(yh.has(b))return this.projection?.isProjecting?zi(b):((a,b)=>{let{transform:c="none"}=getComputedStyle(a);return zj(c,b)})(a,b);{let c=window.getComputedStyle(a),d=(y5(b)?c.getPropertyValue(b):c[b])||0;return"string"==typeof d?d.trim():d}}measureInstanceViewportBox(a,{transformPagePoint:b}){return AC(a,b)}build(a,b,c){Ab(a,b,c.transformTemplate)}scrapeMotionValuesFromProps(a,b,c){return Ao(a,b,c)}}let AE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function AF(a){if("string"!=typeof a||a.includes("-"));else if(AE.indexOf(a)>-1||/[A-Z]/u.test(a))return!0;return!1}let AG=(0,aO.createContext)({}),AH=(0,aO.createContext)({strict:!1}),AI=(0,aO.createContext)({transformPagePoint:a=>a,isStatic:!1,reducedMotion:"never"}),AJ=(0,aO.createContext)({});function AK(a){return Array.isArray(a)?a.join(" "):a}let AL=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function AM(a,b,c){for(let d in b)yY(b[d])||An(d,c)||(a[d]=b[d])}let AN=()=>({...AL(),attrs:{}}),AO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function AP(a){return a.startsWith("while")||a.startsWith("drag")&&"draggable"!==a||a.startsWith("layout")||a.startsWith("onTap")||a.startsWith("onPan")||a.startsWith("onLayout")||AO.has(a)}let AQ=a=>!AP(a);try{!function(a){"function"==typeof a&&(AQ=b=>b.startsWith("on")?!AP(b):a(b))}(require("@emotion/is-prop-valid").default)}catch{}function AR(a){return yY(a)?a.get():a}let AS=(0,aO.createContext)(null);function AT(a){let b=(0,aO.useRef)(null);return null===b.current&&(b.current=a()),b.current}let AU=a=>(b,c)=>{let d=(0,aO.useContext)(AJ),e=(0,aO.useContext)(AS),f=()=>(function({scrapeMotionValuesFromProps:a,createRenderState:b},c,d,e){return{latestValues:function(a,b,c,d){let e={},f=d(a,{});for(let a in f)e[a]=AR(f[a]);let{initial:g,animate:h}=a,i=z_(a),j=z0(a);b&&j&&!i&&!1!==a.inherit&&(void 0===g&&(g=b.initial),void 0===h&&(h=b.animate));let k=!!c&&!1===c.initial,l=(k=k||!1===g)?h:g;if(l&&"boolean"!=typeof l&&!zX(l)){let b=Array.isArray(l)?l:[l];for(let c=0;c<b.length;c++){let d=z2(a,b[c]);if(d){let{transitionEnd:a,transition:b,...c}=d;for(let a in c){let b=c[a];if(Array.isArray(b)){let a=k?b.length-1:0;b=b[a]}null!==b&&(e[a]=b)}for(let b in a)e[b]=a[b]}}}return e}(c,d,e,a),renderState:b()}})(a,b,d,e);return c?f():AT(f)},AV=AU({scrapeMotionValuesFromProps:Ao,createRenderState:AL}),AW=AU({scrapeMotionValuesFromProps:Ap,createRenderState:AN}),AX="undefined"!=typeof window,AY={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},AZ=!1;function A$(){return!function(){if(AZ)return;let a={};for(let b in AY)a[b]={isEnabled:a=>AY[b].some(b=>!!a[b])};z4=a,AZ=!0}(),z4}let A_=Symbol.for("motionComponentSymbol"),A0="data-"+z7("framerAppearId"),A1=(0,aO.createContext)({});function A2(a){return a&&"object"==typeof a&&Object.prototype.hasOwnProperty.call(a,"current")}let A3=AX?aO.useLayoutEffect:aO.useEffect;function A4(a,{forwardMotionProps:b=!1,type:c}={},d,e){d&&function(a){let b=A$();for(let c in a)b[c]={...b[c],...a[c]};z4=b}(d);let f=c?"svg"===c:AF(a),g=f?AW:AV;function h(c,d){let h,i={...(0,aO.useContext)(AI),...c,layoutId:function({layoutId:a}){let b=(0,aO.useContext)(AG).id;return b&&void 0!==a?b+"-"+a:a}(c)},{isStatic:j}=i,k=function(a){let{initial:b,animate:c}=function(a,b){if(z_(a)){let{initial:b,animate:c}=a;return{initial:!1===b||zY(b)?b:void 0,animate:zY(c)?c:void 0}}return!1!==a.inherit?b:{}}(a,(0,aO.useContext)(AJ));return(0,aO.useMemo)(()=>({initial:b,animate:c}),[AK(b),AK(c)])}(c),l=g(c,j);if(!j&&AX){(0,aO.useContext)(AH).strict;let b=function(a){let{drag:b,layout:c}=A$();if(!b&&!c)return{};let d={...b,...c};return{MeasureLayout:b?.isEnabled(a)||c?.isEnabled(a)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}(i);h=b.MeasureLayout,k.visualElement=function(a,b,c,d,e,f){let{visualElement:g}=(0,aO.useContext)(AJ),h=(0,aO.useContext)(AH),i=(0,aO.useContext)(AS),j=(0,aO.useContext)(AI).reducedMotion,k=(0,aO.useRef)(null),l=(0,aO.useRef)(!1);d=d||h.renderer,!k.current&&d&&(k.current=d(a,{visualState:b,parent:g,props:c,presenceContext:i,blockInitialAnimation:!!i&&!1===i.initial,reducedMotionConfig:j,isSVG:f}),l.current&&k.current&&(k.current.manuallyAnimateOnMount=!0));let m=k.current,n=(0,aO.useContext)(A1);m&&!m.projection&&e&&("html"===m.type||"svg"===m.type)&&function(a,b,c,d){let{layoutId:e,layout:f,drag:g,dragConstraints:h,layoutScroll:i,layoutRoot:j,layoutCrossfade:k}=b;a.projection=new c(a.latestValues,b["data-framer-portal-id"]?void 0:function a(b){if(b)return!1!==b.options.allowProjection?b.projection:a(b.parent)}(a.parent)),a.projection.setOptions({layoutId:e,layout:f,alwaysMeasureLayout:!!g||h&&A2(h),visualElement:a,animationType:"string"==typeof f?f:"both",initialPromotionConfig:d,crossfade:k,layoutScroll:i,layoutRoot:j})}(k.current,c,e,n);let o=(0,aO.useRef)(!1);(0,aO.useInsertionEffect)(()=>{m&&o.current&&m.update(c,i)});let p=c[A0],q=(0,aO.useRef)(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return A3(()=>{l.current=!0,m&&(o.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),q.current&&m.animationState&&m.animationState.animateChanges())}),m}(a,l,i,e,b.ProjectionNode,f)}return(0,aN.jsxs)(AJ.Provider,{value:k,children:[h&&k.visualElement?(0,aN.jsx)(h,{visualElement:k.visualElement,...i}):null,function(a,b,c,{latestValues:d},e,f=!1,g){let h=(g??AF(a)?function(a,b,c,d){let e=(0,aO.useMemo)(()=>{let c=AN();return Af(c,b,Ah(d),a.transformTemplate,a.style),{...c.attrs,style:{...c.style}}},[b]);if(a.style){let b={};AM(b,a.style,a),e.style={...b,...e.style}}return e}:function(a,b){let c={},d=function(a,b){let c=a.style||{},d={};return AM(d,c,a),Object.assign(d,function({transformTemplate:a},b){return(0,aO.useMemo)(()=>{let c=AL();return Ab(c,b,a),Object.assign({},c.vars,c.style)},[b])}(a,b)),d}(a,b);return a.drag&&!1!==a.dragListener&&(c.draggable=!1,d.userSelect=d.WebkitUserSelect=d.WebkitTouchCallout="none",d.touchAction=!0===a.drag?"none":`pan-${"x"===a.drag?"y":"x"}`),void 0===a.tabIndex&&(a.onTap||a.onTapStart||a.whileTap)&&(c.tabIndex=0),c.style=d,c})(b,d,e,a),i=function(a,b,c){let d={};for(let e in a)("values"!==e||"object"!=typeof a.values)&&(AQ(e)||!0===c&&AP(e)||!b&&!AP(e)||a.draggable&&e.startsWith("onDrag"))&&(d[e]=a[e]);return d}(b,"string"==typeof a,f),j=a!==aO.Fragment?{...i,...h,ref:c}:{},{children:k}=b,l=(0,aO.useMemo)(()=>yY(k)?k.get():k,[k]);return(0,aO.createElement)(a,{...j,children:l})}(a,c,function(a,b,c){let d=(0,aO.useRef)(c);(0,aO.useInsertionEffect)(()=>{d.current=c});let e=(0,aO.useRef)(null);return(0,aO.useCallback)(c=>{c&&a.onMount?.(c),b&&(c?b.mount(c):b.unmount());let f=d.current;if("function"==typeof f)if(c){let a=f(c);"function"==typeof a&&(e.current=a)}else e.current?(e.current(),e.current=null):f(c);else f&&(f.current=c)},[b])}(l,k.visualElement,d),l,j,b,f)]})}h.displayName=`motion.${"string"==typeof a?a:`create(${a.displayName??a.name??""})`}`;let i=(0,aO.forwardRef)(h);return i[A_]=a,i}class A5{constructor(a){this.isMounted=!1,this.node=a}update(){}}function A6(a,b,c){let d=a.getProps();return z2(d,b,void 0!==c?c:d.custom,a)}function A7(a,b){return a?.[b]??a?.default??a}let A8=a=>Array.isArray(a);function A9(a,b){let c=a.getValue("willChange");if(yY(c)&&c.add)return c.add(b);if(!c&&zq.WillChange){let c=new zq.WillChange("auto");a.addValue("willChange",c),c.add(b)}}let Ba=a=>1e3*a,Bb=(a,b)=>c=>b(a(c)),Bc=(...a)=>a.reduce(Bb),Bd={layout:0,mainThread:0,waapi:0};function Be(a,b,c){return(c<0&&(c+=1),c>1&&(c-=1),c<1/6)?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}function Bf(a,b){return c=>c>0?b:a}let Bg=(a,b,c)=>{let d=a*a,e=c*(b*b-d)+d;return e<0?0:Math.sqrt(e)},Bh=[yt,ys,yB];function Bi(a){let b=Bh.find(b=>b.test(a));if(y1(!!b,`'${a}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!b)return!1;let c=b.parse(a);return b===yB&&(c=function({hue:a,saturation:b,lightness:c,alpha:d}){a/=360,c/=100;let e=0,f=0,g=0;if(b/=100){let d=c<.5?c*(1+b):c+b-c*b,h=2*c-d;e=Be(h,d,a+1/3),f=Be(h,d,a),g=Be(h,d,a-1/3)}else e=f=g=c;return{red:Math.round(255*e),green:Math.round(255*f),blue:Math.round(255*g),alpha:d}}(c)),c}let Bj=(a,b)=>{let c=Bi(a),d=Bi(b);if(!c||!d)return Bf(a,b);let e={...c};return a=>(e.red=Bg(c.red,d.red,a),e.green=Bg(c.green,d.green,a),e.blue=Bg(c.blue,d.blue,a),e.alpha=Al(c.alpha,d.alpha,a),ys.transform(e))},Bk=new Set(["none","hidden"]);function Bl(a,b){return c=>Al(a,b,c)}function Bm(a){return"number"==typeof a?Bl:"string"==typeof a?y7(a)?Bf:yC.test(a)?Bj:Bp:Array.isArray(a)?Bn:"object"==typeof a?yC.test(a)?Bj:Bo:Bf}function Bn(a,b){let c=[...a],d=c.length,e=a.map((a,c)=>Bm(a)(a,b[c]));return a=>{for(let b=0;b<d;b++)c[b]=e[b](a);return c}}function Bo(a,b){let c={...a,...b},d={};for(let e in c)void 0!==a[e]&&void 0!==b[e]&&(d[e]=Bm(a[e])(a[e],b[e]));return a=>{for(let b in d)c[b]=d[b](a);return c}}let Bp=(a,b)=>{let c=yL.createTransformer(b),d=yH(a),e=yH(b);return d.indexes.var.length===e.indexes.var.length&&d.indexes.color.length===e.indexes.color.length&&d.indexes.number.length>=e.indexes.number.length?Bk.has(a)&&!e.values.length||Bk.has(b)&&!d.values.length?function(a,b){return Bk.has(a)?c=>c<=0?a:b:c=>c>=1?b:a}(a,b):Bc(Bn(function(a,b){let c=[],d={color:0,var:0,number:0};for(let e=0;e<b.values.length;e++){let f=b.types[e],g=a.indexes[f][d[f]],h=a.values[g]??0;c[e]=h,d[f]++}return c}(d,e),e.values),c):(y1(!0,`Complex values '${a}' and '${b}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),Bf(a,b))};function Bq(a,b,c){return"number"==typeof a&&"number"==typeof b&&"number"==typeof c?Al(a,b,c):Bm(a)(a,b)}let Br=a=>{let b=({timestamp:b})=>a(b);return{start:(a=!0)=>zu.update(b,a),stop:()=>zv(b),now:()=>zw.isProcessing?zw.timestamp:zO.now()}},Bs=(a,b,c=10)=>{let d="",e=Math.max(Math.round(b/c),2);for(let b=0;b<e;b++)d+=Math.round(1e4*a(b/(e-1)))/1e4+", ";return`linear(${d.substring(0,d.length-2)})`};function Bt(a){let b=0,c=a.next(b);for(;!c.done&&b<2e4;)b+=50,c=a.next(b);return b>=2e4?1/0:b}function Bu(a,b,c){var d,e;let f=Math.max(b-5,0);return d=c-a(f),(e=b-f)?1e3/e*d:0}let Bv={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};function Bw(a,b){return a*Math.sqrt(1-b*b)}let Bx=["duration","bounce"],By=["stiffness","damping","mass"];function Bz(a,b){return b.some(b=>void 0!==a[b])}function BA(a=Bv.visualDuration,b=Bv.bounce){let c,d="object"!=typeof a?{visualDuration:a,keyframes:[0,1],bounce:b}:a,{restSpeed:e,restDelta:f}=d,g=d.keyframes[0],h=d.keyframes[d.keyframes.length-1],i={done:!1,value:g},{stiffness:j,damping:k,mass:l,duration:m,velocity:n,isResolvedFromDuration:o}=function(a){let b={velocity:Bv.velocity,stiffness:Bv.stiffness,damping:Bv.damping,mass:Bv.mass,isResolvedFromDuration:!1,...a};if(!Bz(a,By)&&Bz(a,Bx))if(a.visualDuration){let c=2*Math.PI/(1.2*a.visualDuration),d=c*c,e=2*yi(.05,1,1-(a.bounce||0))*Math.sqrt(d);b={...b,mass:Bv.mass,stiffness:d,damping:e}}else{let c=function({duration:a=Bv.duration,bounce:b=Bv.bounce,velocity:c=Bv.velocity,mass:d=Bv.mass}){let e,f;y1(a<=Ba(Bv.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let g=1-b;g=yi(Bv.minDamping,Bv.maxDamping,g),a=yi(Bv.minDuration,Bv.maxDuration,a/1e3),g<1?(e=b=>{let d=b*g,e=d*a;return .001-(d-c)/Bw(b,g)*Math.exp(-e)},f=b=>{let d=b*g*a,f=Math.pow(g,2)*Math.pow(b,2)*a,h=Math.exp(-d),i=Bw(Math.pow(b,2),g);return(d*c+c-f)*h*(-e(b)+.001>0?-1:1)/i}):(e=b=>-.001+Math.exp(-b*a)*((b-c)*a+1),f=b=>a*a*(c-b)*Math.exp(-b*a));let h=function(a,b,c){let d=c;for(let c=1;c<12;c++)d-=a(d)/b(d);return d}(e,f,5/a);if(a=Ba(a),isNaN(h))return{stiffness:Bv.stiffness,damping:Bv.damping,duration:a};{let b=Math.pow(h,2)*d;return{stiffness:b,damping:2*g*Math.sqrt(d*b),duration:a}}}(a);(b={...b,...c,mass:Bv.mass}).isResolvedFromDuration=!0}return b}({...d,velocity:-((d.velocity||0)/1e3)}),p=n||0,q=k/(2*Math.sqrt(j*l)),r=h-g,s=Math.sqrt(j/l)/1e3,t=5>Math.abs(r);if(e||(e=t?Bv.restSpeed.granular:Bv.restSpeed.default),f||(f=t?Bv.restDelta.granular:Bv.restDelta.default),q<1){let a=Bw(s,q);c=b=>h-Math.exp(-q*s*b)*((p+q*s*r)/a*Math.sin(a*b)+r*Math.cos(a*b))}else if(1===q)c=a=>h-Math.exp(-s*a)*(r+(p+s*r)*a);else{let a=s*Math.sqrt(q*q-1);c=b=>{let c=Math.exp(-q*s*b),d=Math.min(a*b,300);return h-c*((p+q*s*r)*Math.sinh(d)+a*r*Math.cosh(d))/a}}let u={calculatedDuration:o&&m||null,next:a=>{let b=c(a);if(o)i.done=a>=m;else{let d=0===a?p:0;q<1&&(d=0===a?Ba(p):Bu(c,a,b));let g=Math.abs(h-b)<=f;i.done=Math.abs(d)<=e&&g}return i.value=i.done?h:b,i},toString:()=>{let a=Math.min(Bt(u),2e4),b=Bs(b=>u.next(a*b).value,a,30);return a+"ms "+b},toTransition:()=>{}};return u}function BB({keyframes:a,velocity:b=0,power:c=.8,timeConstant:d=325,bounceDamping:e=10,bounceStiffness:f=500,modifyTarget:g,min:h,max:i,restDelta:j=.5,restSpeed:k}){let l,m,n=a[0],o={done:!1,value:n},p=c*b,q=n+p,r=void 0===g?q:g(q);r!==q&&(p=r-n);let s=a=>-p*Math.exp(-a/d),t=a=>r+s(a),u=a=>{let b=s(a),c=t(a);o.done=Math.abs(b)<=j,o.value=o.done?r:c},v=a=>{let b;if(b=o.value,void 0!==h&&b<h||void 0!==i&&b>i){var c;l=a,m=BA({keyframes:[o.value,(c=o.value,void 0===h?i:void 0===i||Math.abs(h-c)<Math.abs(i-c)?h:i)],velocity:Bu(t,a,o.value),damping:e,stiffness:f,restDelta:j,restSpeed:k})}};return v(0),{calculatedDuration:null,next:a=>{let b=!1;return(m||void 0!==l||(b=!0,u(a),v(a)),void 0!==l&&a>=l)?m.next(a-l):(b||u(a),o)}}}BA.applyToOptions=a=>{let b=function(a,b=100,c){let d=c({...a,keyframes:[0,b]}),e=Math.min(Bt(d),2e4);return{type:"keyframes",ease:a=>d.next(e*a).value/b,duration:e/1e3}}(a,100,BA);return a.ease=b.ease,a.duration=Ba(b.duration),a.type="keyframes",a};let BC=(a,b,c)=>(((1-3*c+3*b)*a+(3*c-6*b))*a+3*b)*a;function BD(a,b,c,d){return a===b&&c===d?zp:e=>0===e||1===e?e:BC(function(a,b,c,d,e){let f,g,h=0;do(f=BC(g=b+(c-b)/2,d,e)-a)>0?c=g:b=g;while(Math.abs(f)>1e-7&&++h<12);return g}(e,0,1,a,c),b,d)}let BE=BD(.42,0,1,1),BF=BD(0,0,.58,1),BG=BD(.42,0,.58,1),BH=a=>b=>b<=.5?a(2*b)/2:(2-a(2*(1-b)))/2,BI=a=>b=>1-a(1-b),BJ=BD(.33,1.53,.69,.99),BK=BI(BJ),BL=BH(BK),BM=a=>(a*=2)<1?.5*BK(a):.5*(2-Math.pow(2,-10*(a-1))),BN=a=>1-Math.sin(Math.acos(a)),BO=BI(BN),BP=BH(BN),BQ=a=>Array.isArray(a)&&"number"==typeof a[0],BR={linear:zp,easeIn:BE,easeInOut:BG,easeOut:BF,circIn:BN,circInOut:BP,circOut:BO,backIn:BK,backInOut:BL,backOut:BJ,anticipate:BM},BS=a=>{if(BQ(a)){y2(4===a.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[b,c,d,e]=a;return BD(b,c,d,e)}return"string"==typeof a?(y2(void 0!==BR[a],`Invalid easing type '${a}'`,"invalid-easing-type"),BR[a]):a},BT=(a,b,c)=>{let d=b-a;return 0===d?1:(c-a)/d};function BU({duration:a=300,keyframes:b,times:c,ease:d="easeInOut"}){var e;let f=Array.isArray(d)&&"number"!=typeof d[0]?d.map(BS):BS(d),g={done:!1,value:b[0]},h=function(a,b,{clamp:c=!0,ease:d,mixer:e}={}){let f=a.length;if(y2(f===b.length,"Both input and output ranges must be the same length","range-length"),1===f)return()=>b[0];if(2===f&&b[0]===b[1])return()=>b[1];let g=a[0]===a[1];a[0]>a[f-1]&&(a=[...a].reverse(),b=[...b].reverse());let h=function(a,b,c){let d=[],e=c||zq.mix||Bq,f=a.length-1;for(let c=0;c<f;c++){let f=e(a[c],a[c+1]);b&&(f=Bc(Array.isArray(b)?b[c]||zp:b,f)),d.push(f)}return d}(b,d,e),i=h.length,j=c=>{if(g&&c<a[0])return b[0];let d=0;if(i>1)for(;d<a.length-2&&!(c<a[d+1]);d++);let e=BT(a[d],a[d+1],c);return h[d](e)};return c?b=>j(yi(a[0],a[f-1],b)):j}((e=c&&c.length===b.length?c:function(a){let b=[0];return!function(a,b){let c=a[a.length-1];for(let d=1;d<=b;d++){let e=BT(0,b,d);a.push(Al(c,1,e))}}(b,a.length-1),b}(b),e.map(b=>b*a)),b,{ease:Array.isArray(f)?f:b.map(()=>f||BG).splice(0,b.length-1)});return{calculatedDuration:a,next:b=>(g.value=h(b),g.done=b>=a,g)}}let BV=a=>null!==a;function BW(a,{repeat:b,repeatType:c="loop"},d,e=1){let f=a.filter(BV),g=e<0||b&&"loop"!==c&&b%2==1?0:f.length-1;return g&&void 0!==d?d:f[g]}let BX={decay:BB,inertia:BB,tween:BU,keyframes:BU,spring:BA};function BY(a){"string"==typeof a.type&&(a.type=BX[a.type])}class BZ{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(a=>{this.resolve=a})}notifyFinished(){this.resolve()}then(a,b){return this.finished.then(a,b)}}let B$=a=>a/100;class B_ extends BZ{constructor(a){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:a}=this.options;a&&a.updatedAt!==zO.now()&&this.tick(zO.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},Bd.mainThread++,this.options=a,this.initAnimation(),this.play(),!1===a.autoplay&&this.pause()}initAnimation(){let{options:a}=this;BY(a);let{type:b=BU,repeat:c=0,repeatDelay:d=0,repeatType:e,velocity:f=0}=a,{keyframes:g}=a,h=b||BU;h!==BU&&"number"!=typeof g[0]&&(this.mixKeyframes=Bc(B$,Bq(g[0],g[1])),g=[0,100]);let i=h({...a,keyframes:g});"mirror"===e&&(this.mirroredGenerator=h({...a,keyframes:[...g].reverse(),velocity:-f})),null===i.calculatedDuration&&(i.calculatedDuration=Bt(i));let{calculatedDuration:j}=i;this.calculatedDuration=j,this.resolvedDuration=j+d,this.totalDuration=this.resolvedDuration*(c+1)-d,this.generator=i}updateTime(a){let b=Math.round(a-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=b}tick(a,b=!1){let{generator:c,totalDuration:d,mixKeyframes:e,mirroredGenerator:f,resolvedDuration:g,calculatedDuration:h}=this;if(null===this.startTime)return c.next(0);let{delay:i=0,keyframes:j,repeat:k,repeatType:l,repeatDelay:m,type:n,onUpdate:o,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,a):this.speed<0&&(this.startTime=Math.min(a-d/this.speed,this.startTime)),b?this.currentTime=a:this.updateTime(a);let q=this.currentTime-i*(this.playbackSpeed>=0?1:-1),r=this.playbackSpeed>=0?q<0:q>d;this.currentTime=Math.max(q,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=d);let s=this.currentTime,t=c;if(k){let a=Math.min(this.currentTime,d)/g,b=Math.floor(a),c=a%1;!c&&a>=1&&(c=1),1===c&&b--,(b=Math.min(b,k+1))%2&&("reverse"===l?(c=1-c,m&&(c-=m/g)):"mirror"===l&&(t=f)),s=yi(0,1,c)*g}let u=r?{done:!1,value:j[0]}:t.next(s);e&&(u.value=e(u.value));let{done:v}=u;r||null===h||(v=this.playbackSpeed>=0?this.currentTime>=d:this.currentTime<=0);let w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&v);return w&&n!==BB&&(u.value=BW(j,this.options,p,this.speed)),o&&o(u.value),w&&this.finish(),u}then(a,b){return this.finished.then(a,b)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:a=0}=this.options||{};return this.duration+a/1e3}get time(){return this.currentTime/1e3}set time(a){a=Ba(a),this.currentTime=a,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=a:this.driver&&(this.startTime=this.driver.now()-a/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(a){this.updateTime(zO.now());let b=this.playbackSpeed!==a;this.playbackSpeed=a,b&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:a=Br,startTime:b}=this.options;this.driver||(this.driver=a(a=>this.tick(a))),this.options.onPlay?.();let c=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=c):null!==this.holdTime?this.startTime=c-this.holdTime:this.startTime||(this.startTime=b??c),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zO.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,Bd.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(a){return this.startTime=0,this.tick(a,!0)}attachTimeline(a){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),a.observe(this)}}function B0(a){let b;return()=>(void 0===b&&(b=a()),b)}let B1=B0(()=>void 0!==window.ScrollTimeline),B2={},B3=function(a,b){let c=B0(a);return()=>B2[b]??c()}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(a){return!1}return!0},"linearEasing"),B4=([a,b,c,d])=>`cubic-bezier(${a}, ${b}, ${c}, ${d})`,B5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:B4([0,.65,.55,1]),circOut:B4([.55,0,1,.45]),backIn:B4([.31,.01,.66,-.59]),backOut:B4([.33,1.53,.69,.99])};function B6(a){return"function"==typeof a&&"applyToOptions"in a}class B7 extends BZ{constructor(a){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!a)return;let{element:b,name:c,keyframes:d,pseudoElement:e,allowFlatten:f=!1,finalKeyframe:g,onComplete:h}=a;this.isPseudoElement=!!e,this.allowFlatten=f,this.options=a,y2("string"!=typeof a.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");let i=function({type:a,...b}){return B6(a)&&B3()?a.applyToOptions(b):(b.duration??(b.duration=300),b.ease??(b.ease="easeOut"),b)}(a);this.animation=function(a,b,c,{delay:d=0,duration:e=300,repeat:f=0,repeatType:g="loop",ease:h="easeOut",times:i}={},j){let k={[b]:c};i&&(k.offset=i);let l=function a(b,c){if(b)return"function"==typeof b?B3()?Bs(b,c):"ease-out":BQ(b)?B4(b):Array.isArray(b)?b.map(b=>a(b,c)||B5.easeOut):B5[b]}(h,e);Array.isArray(l)&&(k.easing=l),zs.value&&Bd.waapi++;let m={delay:d,duration:e,easing:Array.isArray(l)?"linear":l,fill:"both",iterations:f+1,direction:"reverse"===g?"alternate":"normal"};j&&(m.pseudoElement=j);let n=a.animate(k,m);return zs.value&&n.finished.finally(()=>{Bd.waapi--}),n}(b,c,d,i,e),!1===i.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!e){let a=BW(d,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(a):function(a,b,c){b.startsWith("--")?a.style.setProperty(b,c):a.style[b]=c}(b,c,a),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(a){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:a}=this;"idle"!==a&&"finished"!==a&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:a=0}=this.options||{};return this.duration+a/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(a){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ba(a)}get speed(){return this.animation.playbackRate}set speed(a){a<0&&(this.finishedTime=null),this.animation.playbackRate=a}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(a){this.manualStartTime=this.animation.startTime=a}attachTimeline({timeline:a,observe:b}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,a&&B1())?(this.animation.timeline=a,zp):b(this)}}let B8={anticipate:BM,backInOut:BL,circInOut:BP};class B9 extends B7{constructor(a){!function(a){"string"==typeof a.ease&&a.ease in B8&&(a.ease=B8[a.ease])}(a),BY(a),super(a),void 0!==a.startTime&&(this.startTime=a.startTime),this.options=a}updateMotionValue(a){let{motionValue:b,onUpdate:c,onComplete:d,element:e,...f}=this.options;if(!b)return;if(void 0!==a)return void b.set(a);let g=new B_({...f,autoplay:!1}),h=Math.max(10,zO.now()-this.startTime),i=yi(0,10,h-10);b.setWithVelocity(g.sample(Math.max(0,h-i)).value,g.sample(h).value,i),g.stop()}}let Ca=(a,b)=>"zIndex"!==b&&!!("number"==typeof a||Array.isArray(a)||"string"==typeof a&&(yL.test(a)||"0"===a)&&!a.startsWith("url("));function Cb(a){a.duration=0,a.type="keyframes"}let Cc=new Set(["opacity","clipPath","filter","transform"]),Cd=B0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class Ce extends BZ{constructor({autoplay:a=!0,delay:b=0,type:c="keyframes",repeat:d=0,repeatDelay:e=0,repeatType:f="loop",keyframes:g,name:h,motionValue:i,element:j,...k}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=zO.now();let l={autoplay:a,delay:b,type:c,repeat:d,repeatDelay:e,repeatType:f,name:h,motionValue:i,element:j,...k},m=j?.KeyframeResolver||zE;this.keyframeResolver=new m(g,(a,b,c)=>this.onKeyframesResolved(a,b,l,!c),h,i,j),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(a,b,c,d){this.keyframeResolver=void 0;let{name:e,type:f,velocity:g,delay:h,isHandoff:i,onUpdate:j}=c;this.resolvedAt=zO.now(),!function(a,b,c,d){let e=a[0];if(null===e)return!1;if("display"===b||"visibility"===b)return!0;let f=a[a.length-1],g=Ca(e,b),h=Ca(f,b);return y1(g===h,`You are trying to animate ${b} from "${e}" to "${f}". "${g?f:e}" is not an animatable value.`,"value-not-animatable"),!!g&&!!h&&(function(a){let b=a[0];if(1===a.length)return!0;for(let c=0;c<a.length;c++)if(a[c]!==b)return!0}(a)||("spring"===c||B6(c))&&d)}(a,e,f,g)&&((zq.instantAnimations||!h)&&j?.(BW(a,c,b)),a[0]=a[a.length-1],Cb(c),c.repeat=0);let k={startTime:d?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:b,...c,keyframes:a},l=!i&&function(a){let{motionValue:b,name:c,repeatDelay:d,repeatType:e,damping:f,type:g}=a;if(!(b?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:h,transformTemplate:i}=b.owner.getProps();return Cd()&&c&&Cc.has(c)&&("transform"!==c||!i)&&!h&&!d&&"mirror"!==e&&0!==f&&"inertia"!==g}(k),m=k.motionValue?.owner?.current,n=l?new B9({...k,element:m}):new B_(k);n.finished.then(()=>{this.notifyFinished()}).catch(zp),this.pendingTimeline&&(this.stopTimeline=n.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=n}get finished(){return this._animation?this.animation.finished:this._finished}then(a,b){return this.finished.finally(a).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),zB=!0,zD(),zC(),zB=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(a){this.animation.time=a}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(a){this.animation.speed=a}get startTime(){return this.animation.startTime}attachTimeline(a){return this._animation?this.stopTimeline=this.animation.attachTimeline(a):this.pendingTimeline=a,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let Cf={type:"spring",stiffness:500,damping:25,restSpeed:10},Cg={type:"keyframes",duration:.8},Ch={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ci=a=>null!==a,Cj=(a,b,c,d={},e,f)=>g=>{let h=A7(d,a)||{},i=h.delay||d.delay||0,{elapsed:j=0}=d;j-=Ba(i);let k={keyframes:Array.isArray(c)?c:[null,c],ease:"easeOut",velocity:b.getVelocity(),...h,delay:-j,onUpdate:a=>{b.set(a),h.onUpdate&&h.onUpdate(a)},onComplete:()=>{g(),h.onComplete&&h.onComplete()},name:a,motionValue:b,element:f?void 0:e};!function({when:a,delay:b,delayChildren:c,staggerChildren:d,staggerDirection:e,repeat:f,repeatType:g,repeatDelay:h,from:i,elapsed:j,...k}){return!!Object.keys(k).length}(h)&&Object.assign(k,((a,{keyframes:b})=>b.length>2?Cg:yh.has(a)?a.startsWith("scale")?{type:"spring",stiffness:550,damping:0===b[1]?2*Math.sqrt(550):30,restSpeed:10}:Cf:Ch)(a,k)),k.duration&&(k.duration=Ba(k.duration)),k.repeatDelay&&(k.repeatDelay=Ba(k.repeatDelay)),void 0!==k.from&&(k.keyframes[0]=k.from);let l=!1;if(!1!==k.type&&(0!==k.duration||k.repeatDelay)||(Cb(k),0===k.delay&&(l=!0)),(zq.instantAnimations||zq.skipAnimations)&&(l=!0,Cb(k),k.delay=0),k.allowFlatten=!h.type&&!h.ease,l&&!f&&void 0!==b.get()){let a=function(a,{repeat:b,repeatType:c="loop"},d){let e=a.filter(Ci),f=b&&"loop"!==c&&b%2==1?0:e.length-1;return e[f]}(k.keyframes,h);if(void 0!==a)return void zu.update(()=>{k.onUpdate(a),k.onComplete()})}return h.isSync?new B_(k):new Ce(k)};function Ck(a,b,{delay:c=0,transitionOverride:d,type:e}={}){let{transition:f=a.getDefaultTransition(),transitionEnd:g,...h}=b,i=f?.reduceMotion;d&&(f=d);let j=[],k=e&&a.animationState&&a.animationState.getState()[e];for(let b in h){let d=a.getValue(b,a.latestValues[b]??null),e=h[b];if(void 0===e||k&&function({protectedKeys:a,needsAnimating:b},c){let d=a.hasOwnProperty(c)&&!0!==b[c];return b[c]=!1,d}(k,b))continue;let g={delay:c,...A7(f||{},b)},l=d.get();if(void 0!==l&&!d.isAnimating&&!Array.isArray(e)&&e===l&&!g.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){let c=a.props[A0];if(c){let a=window.MotionHandoffAnimation(c,b,zu);null!==a&&(g.startTime=a,m=!0)}}A9(a,b);let n=i??a.shouldReduceMotion;d.start(Cj(b,d,e,n&&yZ.has(b)?{type:!1}:g,a,m));let o=d.animation;o&&j.push(o)}return g&&Promise.all(j).then(()=>{zu.update(()=>{g&&function(a,b){let{transitionEnd:c={},transition:d={},...e}=A6(a,b)||{};for(let b in e={...e,...c}){var f;let c=A8(f=e[b])?f[f.length-1]||0:f;a.hasValue(b)?a.getValue(b).set(c):a.addValue(b,zR(c))}}(a,g)})}),j}function Cl(a,b,c,d=0,e=1){let f=Array.from(a).sort((a,b)=>a.sortNodePosition(b)).indexOf(b),g=a.size,h=(g-1)*d;return"function"==typeof c?c(f,g):1===e?f*d:h-f*d}function Cm(a,b,c={}){let d=A6(a,b,"exit"===c.type?a.presenceContext?.custom:void 0),{transition:e=a.getDefaultTransition()||{}}=d||{};c.transitionOverride&&(e=c.transitionOverride);let f=d?()=>Promise.all(Ck(a,d,c)):()=>Promise.resolve(),g=a.variantChildren&&a.variantChildren.size?(d=0)=>{let{delayChildren:f=0,staggerChildren:g,staggerDirection:h}=e;return function(a,b,c=0,d=0,e=0,f=1,g){let h=[];for(let i of a.variantChildren)i.notify("AnimationStart",b),h.push(Cm(i,b,{...g,delay:c+("function"==typeof d?0:d)+Cl(a.variantChildren,i,d,e,f)}).then(()=>i.notify("AnimationComplete",b)));return Promise.all(h)}(a,b,d,f,g,h,c)}:()=>Promise.resolve(),{when:h}=e;if(!h)return Promise.all([f(),g(c.delay)]);{let[a,b]="beforeChildren"===h?[f,g]:[g,f];return a().then(()=>b())}}let Cn=z$.length;function Co(a,b){if(!Array.isArray(b))return!1;let c=b.length;if(c!==a.length)return!1;for(let d=0;d<c;d++)if(b[d]!==a[d])return!1;return!0}let Cp=[...zZ].reverse(),Cq=zZ.length;function Cr(a=!1){return{isActive:a,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Cs(){return{animate:Cr(!0),whileInView:Cr(),whileHover:Cr(),whileTap:Cr(),whileDrag:Cr(),whileFocus:Cr(),exit:Cr()}}class Ct extends A5{constructor(a){super(a),a.animationState||(a.animationState=function(a){let b=b=>Promise.all(b.map(({animation:b,options:c})=>(function(a,b,c={}){let d;if(a.notify("AnimationStart",b),Array.isArray(b))d=Promise.all(b.map(b=>Cm(a,b,c)));else if("string"==typeof b)d=Cm(a,b,c);else{let e="function"==typeof b?A6(a,b,c.custom):b;d=Promise.all(Ck(a,e,c))}return d.then(()=>{a.notify("AnimationComplete",b)})})(a,b,c))),c=Cs(),d=!0,e=b=>(c,d)=>{let e=A6(a,d,"exit"===b?a.presenceContext?.custom:void 0);if(e){let{transition:a,transitionEnd:b,...d}=e;c={...c,...d,...b}}return c};function f(f){let{props:g}=a,h=function a(b){if(!b)return;if(!b.isControllingVariants){let c=b.parent&&a(b.parent)||{};return void 0!==b.props.initial&&(c.initial=b.props.initial),c}let c={};for(let a=0;a<Cn;a++){let d=z$[a],e=b.props[d];(zY(e)||!1===e)&&(c[d]=e)}return c}(a.parent)||{},i=[],j=new Set,k={},l=1/0;for(let b=0;b<Cq;b++){var m,n;let o=Cp[b],p=c[o],q=void 0!==g[o]?g[o]:h[o],r=zY(q),s=o===f?p.isActive:null;!1===s&&(l=b);let t=q===h[o]&&q!==g[o]&&r;if(t&&d&&a.manuallyAnimateOnMount&&(t=!1),p.protectedKeys={...k},!p.isActive&&null===s||!q&&!p.prevProp||zX(q)||"boolean"==typeof q)continue;let u=(m=p.prevProp,"string"==typeof(n=q)?n!==m:!!Array.isArray(n)&&!Co(n,m)),v=u||o===f&&p.isActive&&!t&&r||b>l&&r,w=!1,x=Array.isArray(q)?q:[q],y=x.reduce(e(o),{});!1===s&&(y={});let{prevResolvedValues:z={}}=p,A={...z,...y},B=b=>{v=!0,j.has(b)&&(w=!0,j.delete(b)),p.needsAnimating[b]=!0;let c=a.getValue(b);c&&(c.liveStyle=!1)};for(let a in A){let b=y[a],c=z[a];if(!k.hasOwnProperty(a))(A8(b)&&A8(c)?Co(b,c):b===c)?void 0!==b&&j.has(a)?B(a):p.protectedKeys[a]=!0:null!=b?B(a):j.add(a)}p.prevProp=q,p.prevResolvedValues=y,p.isActive&&(k={...k,...y}),d&&a.blockInitialAnimation&&(v=!1);let C=t&&u,D=!C||w;v&&D&&i.push(...x.map(b=>{let c={type:o};if("string"==typeof b&&d&&!C&&a.manuallyAnimateOnMount&&a.parent){let{parent:d}=a,e=A6(d,b);if(d.enteringChildren&&e){let{delayChildren:b}=e.transition||{};c.delay=Cl(d.enteringChildren,a,b)}}return{animation:b,options:c}}))}if(j.size){let b={};if("boolean"!=typeof g.initial){let c=A6(a,Array.isArray(g.initial)?g.initial[0]:g.initial);c&&c.transition&&(b.transition=c.transition)}j.forEach(c=>{let d=a.getBaseTarget(c),e=a.getValue(c);e&&(e.liveStyle=!0),b[c]=d??null}),i.push({animation:b})}let o=!!i.length;return d&&(!1===g.initial||g.initial===g.animate)&&!a.manuallyAnimateOnMount&&(o=!1),d=!1,o?b(i):Promise.resolve()}return{animateChanges:f,setActive:function(b,d){if(c[b].isActive===d)return Promise.resolve();a.variantChildren?.forEach(a=>a.animationState?.setActive(b,d)),c[b].isActive=d;let e=f(b);for(let a in c)c[a].protectedKeys={};return e},setAnimateFunction:function(c){b=c(a)},getState:()=>c,reset:()=>{c=Cs()}}}(a))}updateAnimationControlsSubscription(){let{animate:a}=this.node.getProps();zX(a)&&(this.unmountControls=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:a}=this.node.getProps(),{animate:b}=this.node.prevProps||{};a!==b&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Cu=0;class Cv extends A5{constructor(){super(...arguments),this.id=Cu++}update(){if(!this.node.presenceContext)return;let{isPresent:a,onExitComplete:b}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===c)return;let d=this.node.animationState.setActive("exit",!a);b&&!a&&d.then(()=>{b(this.id)})}mount(){let{register:a,onExitComplete:b}=this.node.presenceContext||{};b&&b(this.id),a&&(this.unmount=a(this.id))}unmount(){}}let Cw={x:!1,y:!1};function Cx(a){return[a("x"),a("y")]}function Cy(a){return a.max-a.min}function Cz(a,b,c,d=.5){a.origin=d,a.originPoint=Al(b.min,b.max,a.origin),a.scale=Cy(c)/Cy(b),a.translate=Al(c.min,c.max,a.origin)-a.originPoint,(a.scale>=.9999&&a.scale<=1.0001||isNaN(a.scale))&&(a.scale=1),(a.translate>=-.01&&a.translate<=.01||isNaN(a.translate))&&(a.translate=0)}function CA(a,b,c,d){Cz(a.x,b.x,c.x,d?d.originX:void 0),Cz(a.y,b.y,c.y,d?d.originY:void 0)}function CB(a,b,c){a.min=c.min+b.min,a.max=a.min+Cy(b)}function CC(a,b,c){a.min=b.min-c.min,a.max=a.min+Cy(b)}function CD(a,b,c){CC(a.x,b.x,c.x),CC(a.y,b.y,c.y)}let CE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CF(a){return CE.has(a.tagName)||!0===a.isContentEditable}function CG(a,b,c,d={passive:!0}){return a.addEventListener(b,c,d),()=>a.removeEventListener(b,c)}let CH=a=>"mouse"===a.pointerType?"number"!=typeof a.button||a.button<=0:!1!==a.isPrimary;function CI(a){return{point:{x:a.pageX,y:a.pageY}}}function CJ(a,b,c,d){return CG(a,b,a=>CH(a)&&c(a,CI(a)),d)}let CK=({current:a})=>a?a.ownerDocument.defaultView:null,CL=(a,b)=>Math.abs(a-b),CM=new Set(["auto","scroll"]);class CN{constructor(a,b,{transformPagePoint:c,contextWindow:d=window,dragSnapToOrigin:e=!1,distanceThreshold:f=3,element:g}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=a=>{this.handleScroll(a.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let a=CQ(this.lastMoveEventInfo,this.history),b=null!==this.startEvent,c=function(a,b){return Math.sqrt(CL(a.x,b.x)**2+CL(a.y,b.y)**2)}(a.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!c)return;let{point:d}=a,{timestamp:e}=zw;this.history.push({...d,timestamp:e});let{onStart:f,onMove:g}=this.handlers;b||(f&&f(this.lastMoveEvent,a),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,a)},this.handlePointerMove=(a,b)=>{this.lastMoveEvent=a,this.lastMoveEventInfo=CO(b,this.transformPagePoint),zu.update(this.updatePoint,!0)},this.handlePointerUp=(a,b)=>{this.end();let{onEnd:c,onSessionEnd:d,resumeAnimation:e}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&e&&e(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let f=CQ("pointercancel"===a.type?this.lastMoveEventInfo:CO(b,this.transformPagePoint),this.history);this.startEvent&&c&&c(a,f),d&&d(a,f)},!CH(a))return;this.dragSnapToOrigin=e,this.handlers=b,this.transformPagePoint=c,this.distanceThreshold=f,this.contextWindow=d||window;let h=CO(CI(a),this.transformPagePoint),{point:i}=h,{timestamp:j}=zw;this.history=[{...i,timestamp:j}];let{onSessionStart:k}=b;k&&k(a,CQ(h,this.history)),this.removeListeners=Bc(CJ(this.contextWindow,"pointermove",this.handlePointerMove),CJ(this.contextWindow,"pointerup",this.handlePointerUp),CJ(this.contextWindow,"pointercancel",this.handlePointerUp)),g&&this.startScrollTracking(g)}startScrollTracking(a){let b=a.parentElement;for(;b;){let a=getComputedStyle(b);(CM.has(a.overflowX)||CM.has(a.overflowY))&&this.scrollPositions.set(b,{x:b.scrollLeft,y:b.scrollTop}),b=b.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(a){let b=this.scrollPositions.get(a);if(!b)return;let c=a===window,d=c?{x:window.scrollX,y:window.scrollY}:{x:a.scrollLeft,y:a.scrollTop},e={x:d.x-b.x,y:d.y-b.y};(0!==e.x||0!==e.y)&&(c?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=e.x,this.lastMoveEventInfo.point.y+=e.y):this.history.length>0&&(this.history[0].x-=e.x,this.history[0].y-=e.y),this.scrollPositions.set(a,d),zu.update(this.updatePoint,!0))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),zv(this.updatePoint)}}function CO(a,b){return b?{point:b(a.point)}:a}function CP(a,b){return{x:a.x-b.x,y:a.y-b.y}}function CQ({point:a},b){return{point:a,delta:CP(a,CR(b)),offset:CP(a,b[0]),velocity:function(a,b){if(a.length<2)return{x:0,y:0};let c=a.length-1,d=null,e=CR(a);for(;c>=0&&(d=a[c],!(e.timestamp-d.timestamp>Ba(.1)));)c--;if(!d)return{x:0,y:0};let f=(e.timestamp-d.timestamp)/1e3;if(0===f)return{x:0,y:0};let g={x:(e.x-d.x)/f,y:(e.y-d.y)/f};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}(b,.1)}}function CR(a){return a[a.length-1]}function CS(a,b,c){return{min:void 0!==b?a.min+b:void 0,max:void 0!==c?a.max+c-(a.max-a.min):void 0}}function CT(a,b){let c=b.min-a.min,d=b.max-a.max;return b.max-b.min<a.max-a.min&&([c,d]=[d,c]),{min:c,max:d}}function CU(a,b,c){return{min:CV(a,b),max:CV(a,c)}}function CV(a,b){return"number"==typeof a?a:a[b]||0}let CW=new WeakMap;class CX{constructor(a){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yX(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=a}start(a,{snapToCursor:b=!1,distanceThreshold:c}={}){let{presenceContext:d}=this.visualElement;if(d&&!1===d.isPresent)return;let e=a=>{b?(this.stopAnimation(),this.snapToCursor(CI(a).point)):this.pauseAnimation()},f=(a,b)=>{this.stopAnimation();let{drag:c,dragPropagation:d,onDragStart:e}=this.getProps();if(c&&!d&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(a){if("x"===a||"y"===a)if(Cw[a])return null;else return Cw[a]=!0,()=>{Cw[a]=!1};return Cw.x||Cw.y?null:(Cw.x=Cw.y=!0,()=>{Cw.x=Cw.y=!1})}(c),!this.openDragLock))return;this.latestPointerEvent=a,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cx(a=>{let b=this.getAxisMotionValue(a).get()||0;if(yw.test(b)){let{projection:c}=this.visualElement;if(c&&c.layout){let d=c.layout.layoutBox[a];d&&(b=Cy(d)*(parseFloat(b)/100))}}this.originPoint[a]=b}),e&&zu.postRender(()=>e(a,b)),A9(this.visualElement,"transform");let{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},g=(a,b)=>{this.latestPointerEvent=a,this.latestPanInfo=b;let{dragPropagation:c,dragDirectionLock:d,onDirectionLock:e,onDrag:f}=this.getProps();if(!c&&!this.openDragLock)return;let{offset:g}=b;if(d&&null===this.currentDirection){this.currentDirection=function(a,b=10){let c=null;return Math.abs(a.y)>b?c="y":Math.abs(a.x)>b&&(c="x"),c}(g),null!==this.currentDirection&&e&&e(this.currentDirection);return}this.updateAxis("x",b.point,g),this.updateAxis("y",b.point,g),this.visualElement.render(),f&&f(a,b)},h=(a,b)=>{this.latestPointerEvent=a,this.latestPanInfo=b,this.stop(a,b),this.latestPointerEvent=null,this.latestPanInfo=null},i=()=>Cx(a=>"paused"===this.getAnimationState(a)&&this.getAxisMotionValue(a).animation?.play()),{dragSnapToOrigin:j}=this.getProps();this.panSession=new CN(a,{onSessionStart:e,onStart:f,onMove:g,onSessionEnd:h,resumeAnimation:i},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,distanceThreshold:c,contextWindow:CK(this.visualElement),element:this.visualElement.current})}stop(a,b){let c=a||this.latestPointerEvent,d=b||this.latestPanInfo,e=this.isDragging;if(this.cancel(),!e||!d||!c)return;let{velocity:f}=d;this.startAnimation(f);let{onDragEnd:g}=this.getProps();g&&zu.postRender(()=>g(c,d))}cancel(){this.isDragging=!1;let{projection:a,animationState:b}=this.visualElement;a&&(a.isAnimationBlocked=!1),this.endPanSession();let{dragPropagation:c}=this.getProps();!c&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),b&&b.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(a,b,c){let{drag:d}=this.getProps();if(!c||!CY(a,d,this.currentDirection))return;let e=this.getAxisMotionValue(a),f=this.originPoint[a]+c[a];this.constraints&&this.constraints[a]&&(f=function(a,{min:b,max:c},d){return void 0!==b&&a<b?a=d?Al(b,a,d.min):Math.max(a,b):void 0!==c&&a>c&&(a=d?Al(c,a,d.max):Math.min(a,c)),a}(f,this.constraints[a],this.elastic[a])),e.set(f)}resolveConstraints(){let{dragConstraints:a,dragElastic:b}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,d=this.constraints;a&&A2(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&c?this.constraints=function(a,{top:b,left:c,bottom:d,right:e}){return{x:CS(a.x,c,e),y:CS(a.y,b,d)}}(c.layoutBox,a):this.constraints=!1,this.elastic=function(a=.35){return!1===a?a=0:!0===a&&(a=.35),{x:CU(a,"left","right"),y:CU(a,"top","bottom")}}(b),d!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&Cx(a=>{!1!==this.constraints&&this.getAxisMotionValue(a)&&(this.constraints[a]=function(a,b){let c={};return void 0!==b.min&&(c.min=b.min-a.min),void 0!==b.max&&(c.max=b.max-a.min),c}(c.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){var a;let{dragConstraints:b,onMeasureDragConstraints:c}=this.getProps();if(!b||!A2(b))return!1;let d=b.current;y2(null!==d,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:e}=this.visualElement;if(!e||!e.layout)return!1;let f=function(a,b,c){let d=AC(a,c),{scroll:e}=b;return e&&(Az(d.x,e.offset.x),Az(d.y,e.offset.y)),d}(d,e.root,this.visualElement.getTransformPagePoint()),g=(a=e.layout.layoutBox,{x:CT(a.x,f.x),y:CT(a.y,f.y)});if(c){let a=c(function({x:a,y:b}){return{top:b.min,right:a.max,bottom:b.max,left:a.min}}(g));this.hasMutatedConstraints=!!a,a&&(g=Ar(a))}return g}startAnimation(a){let{drag:b,dragMomentum:c,dragElastic:d,dragTransition:e,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),h=this.constraints||{};return Promise.all(Cx(g=>{if(!CY(g,b,this.currentDirection))return;let i=h&&h[g]||{};f&&(i={min:0,max:0});let j={type:"inertia",velocity:c?a[g]:0,bounceStiffness:d?200:1e6,bounceDamping:d?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...e,...i};return this.startAxisValueAnimation(g,j)})).then(g)}startAxisValueAnimation(a,b){let c=this.getAxisMotionValue(a);return A9(this.visualElement,a),c.start(Cj(a,c,0,b,this.visualElement,!1))}stopAnimation(){Cx(a=>this.getAxisMotionValue(a).stop())}pauseAnimation(){Cx(a=>this.getAxisMotionValue(a).animation?.pause())}getAnimationState(a){return this.getAxisMotionValue(a).animation?.state}getAxisMotionValue(a){let b=`_drag${a.toUpperCase()}`,c=this.visualElement.getProps();return c[b]||this.visualElement.getValue(a,(c.initial?c.initial[a]:void 0)||0)}snapToCursor(a){Cx(b=>{let{drag:c}=this.getProps();if(!CY(b,c,this.currentDirection))return;let{projection:d}=this.visualElement,e=this.getAxisMotionValue(b);if(d&&d.layout){let{min:c,max:f}=d.layout.layoutBox[b],g=e.get()||0;e.set(a[b]-Al(c,f,.5)+g)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:a,dragConstraints:b}=this.getProps(),{projection:c}=this.visualElement;if(!A2(b)||!c||!this.constraints)return;this.stopAnimation();let d={x:0,y:0};Cx(a=>{let b=this.getAxisMotionValue(a);if(b&&!1!==this.constraints){let c=b.get();d[a]=function(a,b){let c=.5,d=Cy(a),e=Cy(b);return e>d?c=BT(b.min,b.max-d,a.min):d>e&&(c=BT(a.min,a.max-e,b.min)),yi(0,1,c)}({min:c,max:c},this.constraints[a])}});let{transformTemplate:e}=this.visualElement.getProps();this.visualElement.current.style.transform=e?e({},""):"none",c.root&&c.root.updateScroll(),c.updateLayout(),this.resolveConstraints(),Cx(b=>{if(!CY(b,a,null))return;let c=this.getAxisMotionValue(b),{min:e,max:f}=this.constraints[b];c.set(Al(e,f,d[b]))})}addListeners(){if(!this.visualElement.current)return;CW.set(this.visualElement,this);let a=this.visualElement.current,b=CJ(a,"pointerdown",b=>{let{drag:c,dragListener:d=!0}=this.getProps(),e=b.target,f=e!==a&&CF(e);c&&d&&!f&&this.start(b)}),c=()=>{let{dragConstraints:a}=this.getProps();A2(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:d}=this.visualElement,e=d.addEventListener("measure",c);d&&!d.layout&&(d.root&&d.root.updateScroll(),d.updateLayout()),zu.read(c);let f=CG(window,"resize",()=>this.scalePositionWithinConstraints()),g=d.addEventListener("didUpdate",({delta:a,hasLayoutChanged:b})=>{this.isDragging&&b&&(Cx(b=>{let c=this.getAxisMotionValue(b);c&&(this.originPoint[b]+=a[b].translate,c.set(c.get()+a[b].translate))}),this.visualElement.render())});return()=>{f(),b(),e(),g&&g()}}getProps(){let a=this.visualElement.getProps(),{drag:b=!1,dragDirectionLock:c=!1,dragPropagation:d=!1,dragConstraints:e=!1,dragElastic:f=.35,dragMomentum:g=!0}=a;return{...a,drag:b,dragDirectionLock:c,dragPropagation:d,dragConstraints:e,dragElastic:f,dragMomentum:g}}}function CY(a,b,c){return(!0===b||b===a)&&(null===c||c===a)}class CZ extends A5{constructor(a){super(a),this.removeGroupControls=zp,this.removeListeners=zp,this.controls=new CX(a)}mount(){let{dragControls:a}=this.node.getProps();a&&(this.removeGroupControls=a.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zp}update(){let{dragControls:a}=this.node.getProps(),{dragControls:b}=this.node.prevProps||{};a!==b&&(this.removeGroupControls(),a&&(this.removeGroupControls=a.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}let C$=a=>(b,c)=>{a&&zu.postRender(()=>a(b,c))};class C_ extends A5{constructor(){super(...arguments),this.removePointerDownListener=zp}onPointerDown(a){this.session=new CN(a,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CK(this.node)})}createPanHandlers(){let{onPanSessionStart:a,onPanStart:b,onPan:c,onPanEnd:d}=this.node.getProps();return{onSessionStart:C$(a),onStart:C$(b),onMove:c,onEnd:(a,b)=>{delete this.session,d&&zu.postRender(()=>d(a,b))}}}mount(){this.removePointerDownListener=CJ(this.node.current,"pointerdown",a=>this.onPointerDown(a))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let C0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function C1(a=!0){let b=(0,aO.useContext)(AS);if(null===b)return[!0,null];let{isPresent:c,onExitComplete:d,register:e}=b,f=(0,aO.useId)(),g=(0,aO.useCallback)(()=>a&&d&&d(f),[f,d,a]);return!c&&d?[!1,g]:[!0]}let C2=!1;class C3 extends aO.Component{componentDidMount(){let{visualElement:a,layoutGroup:b,switchLayoutGroup:c,layoutId:d}=this.props,{projection:e}=a;e&&(b.group&&b.group.add(e),c&&c.register&&d&&c.register(e),C2&&e.root.didUpdate(),e.addEventListener("animationComplete",()=>{this.safeToRemove()}),e.setOptions({...e.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),C0.hasEverUpdated=!0}getSnapshotBeforeUpdate(a){let{layoutDependency:b,visualElement:c,drag:d,isPresent:e}=this.props,{projection:f}=c;return f&&(f.isPresent=e,a.layoutDependency!==b&&f.setOptions({...f.options,layoutDependency:b}),C2=!0,d||a.layoutDependency!==b||void 0===b||a.isPresent!==e?f.willUpdate():this.safeToRemove(),a.isPresent!==e&&(e?f.promote():f.relegate()||zu.postRender(()=>{let a=f.getStack();a&&a.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),zM.postRender(()=>{!a.currentAnimation&&a.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:a,layoutGroup:b,switchLayoutGroup:c}=this.props,{projection:d}=a;C2=!0,d&&(d.scheduleCheckAfterUnmount(),b&&b.group&&b.group.remove(d),c&&c.deregister&&c.deregister(d))}safeToRemove(){let{safeToRemove:a}=this.props;a&&a()}render(){return null}}function C4(a){let[b,c]=C1(),d=(0,aO.useContext)(AG);return(0,aN.jsx)(C3,{...a,layoutGroup:d,switchLayoutGroup:(0,aO.useContext)(A1),isPresent:b,safeToRemove:c})}function C5(a){return"object"==typeof a&&null!==a}function C6(a){return C5(a)&&"ownerSVGElement"in a}let C7=["TopLeft","TopRight","BottomLeft","BottomRight"],C8=C7.length,C9=a=>"string"==typeof a?parseFloat(a):a,Da=a=>"number"==typeof a||yx.test(a);function Db(a,b){return void 0!==a[b]?a[b]:a.borderRadius}let Dc=De(0,.5,BO),Dd=De(.5,.95,zp);function De(a,b,c){return d=>d<a?0:d>b?1:c(BT(a,b,d))}function Df(a,b){a.min=b.min,a.max=b.max}function Dg(a,b){Df(a.x,b.x),Df(a.y,b.y)}function Dh(a,b){a.translate=b.translate,a.scale=b.scale,a.originPoint=b.originPoint,a.origin=b.origin}function Di(a,b,c,d,e){return a-=b,a=d+1/c*(a-d),void 0!==e&&(a=d+1/e*(a-d)),a}function Dj(a,b,[c,d,e],f,g){!function(a,b=0,c=1,d=.5,e,f=a,g=a){if(yw.test(b)&&(b=parseFloat(b),b=Al(g.min,g.max,b/100)-g.min),"number"!=typeof b)return;let h=Al(f.min,f.max,d);a===f&&(h-=b),a.min=Di(a.min,b,c,h,e),a.max=Di(a.max,b,c,h,e)}(a,b[c],b[d],b[e],b.scale,f,g)}let Dk=["x","scaleX","originX"],Dl=["y","scaleY","originY"];function Dm(a,b,c,d){Dj(a.x,b,Dk,c?c.x:void 0,d?d.x:void 0),Dj(a.y,b,Dl,c?c.y:void 0,d?d.y:void 0)}function Dn(a){return 0===a.translate&&1===a.scale}function Do(a){return Dn(a.x)&&Dn(a.y)}function Dp(a,b){return a.min===b.min&&a.max===b.max}function Dq(a,b){return Math.round(a.min)===Math.round(b.min)&&Math.round(a.max)===Math.round(b.max)}function Dr(a,b){return Dq(a.x,b.x)&&Dq(a.y,b.y)}function Ds(a){return Cy(a.x)/Cy(a.y)}function Dt(a,b){return a.translate===b.translate&&a.scale===b.scale&&a.originPoint===b.originPoint}class Du{constructor(){this.members=[]}add(a){zJ(this.members,a),a.scheduleRender()}remove(a){if(zK(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){let a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(a){let b,c=this.members.findIndex(b=>a===b);if(0===c)return!1;for(let a=c;a>=0;a--){let c=this.members[a];if(!1!==c.isPresent){b=c;break}}return!!b&&(this.promote(b),!0)}promote(a,b){let c=this.lead;if(a!==c&&(this.prevLead=c,this.lead=a,a.show(),c)){c.instance&&c.scheduleRender(),a.scheduleRender();let d=c.options.layoutDependency,e=a.options.layoutDependency;(void 0===d||void 0===e||d!==e)&&(a.resumeFrom=c,b&&(a.resumeFrom.preserveOpacity=!0),c.snapshot&&(a.snapshot=c.snapshot,a.snapshot.latestValues=c.animationValues||c.latestValues),a.root&&a.root.isUpdating&&(a.isLayoutDirty=!0));let{crossfade:f}=a.options;!1===f&&c.hide()}}exitAnimationComplete(){this.members.forEach(a=>{let{options:b,resumingFrom:c}=a;b.onExitComplete&&b.onExitComplete(),c&&c.options.onExitComplete&&c.options.onExitComplete()})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let Dv=(a,b)=>a.depth-b.depth;class Dw{constructor(){this.children=[],this.isDirty=!1}add(a){zJ(this.children,a),this.isDirty=!0}remove(a){zK(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort(Dv),this.isDirty=!1,this.children.forEach(a)}}let Dx={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},Dy=["","X","Y","Z"],Dz=0;function DA(a,b,c,d){let{latestValues:e}=b;e[a]&&(c[a]=e[a],b.setStaticValue(a,0),d&&(d[a]=0))}function DB({attachResizeListener:a,defaultParent:b,measureScroll:c,checkIsScrollRoot:d,resetTransform:e}){return class{constructor(a={},c=b?.()){this.id=Dz++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zs.value&&(Dx.nodes=Dx.calculatedTargetDeltas=Dx.calculatedProjections=0),this.nodes.forEach(DE),this.nodes.forEach(DL),this.nodes.forEach(DM),this.nodes.forEach(DF),zs.addProjectionMetrics&&zs.addProjectionMetrics(Dx)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Dw)}addEventListener(a,b){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new zL),this.eventHandlers.get(a).add(b)}notifyListeners(a,...b){let c=this.eventHandlers.get(a);c&&c.notify(...b)}hasListeners(a){return this.eventHandlers.has(a)}mount(b){if(this.instance)return;this.isSVG=C6(b)&&!(C6(b)&&"svg"===b.tagName),this.instance=b;let{layoutId:c,layout:d,visualElement:e}=this.options;if(e&&!e.current&&e.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),a){let c,d=0,e=()=>this.root.updateBlockedByResize=!1;zu.read(()=>{d=window.innerWidth}),a(b,()=>{let a=window.innerWidth;a!==d&&(d=a,this.root.updateBlockedByResize=!0,c&&c(),c=function(a,b){let c=zO.now(),d=({timestamp:b})=>{let e=b-c;e>=250&&(zv(d),a(e-250))};return zu.setup(d,!0),()=>zv(d)}(e,250),C0.hasAnimatedSinceResize&&(C0.hasAnimatedSinceResize=!1,this.nodes.forEach(DK)))})}c&&this.root.registerSharedNode(c,this),!1!==this.options.animate&&e&&(c||d)&&this.addEventListener("didUpdate",({delta:a,hasLayoutChanged:b,hasRelativeLayoutChanged:c,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let f=this.options.transition||e.getDefaultTransition()||DS,{onLayoutAnimationStart:g,onLayoutAnimationComplete:h}=e.getProps(),i=!this.targetLayout||!Dr(this.targetLayout,d),j=!b&&c;if(this.options.layoutRoot||this.resumeFrom||j||b&&(i||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let b={...A7(f,"layout"),onPlay:g,onComplete:h};(e.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(a,j)}else b||DK(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zv(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DN),this.animationId++)}getTransformTemplate(){let{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function a(b){if(b.hasCheckedOptimisedAppear=!0,b.root===b)return;let{visualElement:c}=b.options;if(!c)return;let d=c.props[A0];if(window.MotionHasOptimisedAnimation(d,"transform")){let{layout:a,layoutId:c}=b.options;window.MotionCancelOptimisedAnimation(d,"transform",zu,!(a||c))}let{parent:e}=b;e&&!e.hasCheckedOptimisedAppear&&a(e)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){let b=this.path[a];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}let{layoutId:b,layout:c}=this.options;if(void 0===b&&!c)return;let d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(DH);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(DI);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(DJ),this.nodes.forEach(DC),this.nodes.forEach(DD)):this.nodes.forEach(DI),this.clearAllSnapshots();let a=zO.now();zw.delta=yi(0,1e3/60,a-zw.timestamp),zw.timestamp=a,zw.isProcessing=!0,zx.update.process(zw),zx.preRender.process(zw),zx.render.process(zw),zw.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(DG),this.sharedNodes.forEach(DO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zu.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zu.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Cy(this.snapshot.measuredBox.x)||Cy(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();let a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=yX(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(b=!1),b&&this.instance){let b=d(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:b,offset:c(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!e)return;let a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!Do(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;a&&this.instance&&(b||Au(this.latestValues)||f)&&(e(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){var b;let c=this.measurePageBox(),d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),DV((b=d).x),DV(b.y),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:a}=this.options;if(!a)return yX();let b=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(DX))){let{scroll:a}=this.root;a&&(Az(b.x,a.offset.x),Az(b.y,a.offset.y))}return b}removeElementScroll(a){let b=yX();if(Dg(b,a),this.scroll?.wasRoot)return b;for(let c=0;c<this.path.length;c++){let d=this.path[c],{scroll:e,options:f}=d;d!==this.root&&e&&f.layoutScroll&&(e.wasRoot&&Dg(b,a),Az(b.x,e.offset.x),Az(b.y,e.offset.y))}return b}applyTransform(a,b=!1){let c=yX();Dg(c,a);for(let a=0;a<this.path.length;a++){let d=this.path[a];!b&&d.options.layoutScroll&&d.scroll&&d!==d.root&&AB(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Au(d.latestValues)&&AB(c,d.latestValues)}return Au(this.latestValues)&&AB(c,this.latestValues),c}removeTransform(a){let b=yX();Dg(b,a);for(let a=0;a<this.path.length;a++){let c=this.path[a];if(!c.instance||!Au(c.latestValues))continue;At(c.latestValues)&&c.updateSnapshot();let d=yX();Dg(d,c.measurePageBox()),Dm(b,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Au(this.latestValues)&&Dm(b,this.latestValues),b}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:void 0===a.crossfade||a.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zw.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){let b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);let c=!!this.resumingFrom||this!==b;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:d,layoutId:e}=this.options;if(!this.layout||!(d||e))return;this.resolvedRelativeTargetAt=zw.timestamp;let f=this.getClosestProjectingParent();if(f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=yX(),this.targetWithTransforms=yX()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var g,h,i;this.forceRelativeParentToResolveTarget(),g=this.target,h=this.relativeTarget,i=this.relativeParent.target,CB(g.x,h.x,i.x),CB(g.y,h.y,i.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dg(this.target,this.layout.layoutBox),Ay(this.target,this.targetDelta)):Dg(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&1!==this.animationProgress?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0),zs.value&&Dx.calculatedTargetDeltas++}}getClosestProjectingParent(){if(!(!this.parent||At(this.parent.latestValues)||Av(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,b,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yX(),this.relativeTargetOrigin=yX(),CD(this.relativeTargetOrigin,b,c),Dg(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let a=this.getLead(),b=!!this.resumingFrom||this!==a,c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===zw.timestamp&&(c=!1),c)return;let{layout:d,layoutId:e}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||e))return;Dg(this.layoutCorrected,this.layout.layoutBox);let f=this.treeScale.x,g=this.treeScale.y;!function(a,b,c,d=!1){let e,f,g=c.length;if(g){b.x=b.y=1;for(let h=0;h<g;h++){f=(e=c[h]).projectionDelta;let{visualElement:g}=e.options;(!g||!g.props.style||"contents"!==g.props.style.display)&&(d&&e.options.layoutScroll&&e.scroll&&e!==e.root&&AB(a,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),f&&(b.x*=f.x.scale,b.y*=f.y.scale,Ay(a,f)),d&&Au(e.latestValues)&&AB(a,e.latestValues))}b.x<1.0000000000001&&b.x>.999999999999&&(b.x=1),b.y<1.0000000000001&&b.y>.999999999999&&(b.y=1)}}(this.layoutCorrected,this.treeScale,this.path,b),a.layout&&!a.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=yX());let{target:h}=a;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(Dh(this.prevProjectionDelta.x,this.projectionDelta.x),Dh(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),CA(this.projectionDelta,this.layoutCorrected,h,this.latestValues),this.treeScale.x===f&&this.treeScale.y===g&&Dt(this.projectionDelta.x,this.prevProjectionDelta.x)&&Dt(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h)),zs.value&&Dx.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){let a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yV(),this.projectionDelta=yV(),this.projectionDeltaWithTransform=yV()}setAnimationOrigin(a,b=!1){let c,d=this.snapshot,e=d?d.latestValues:{},f={...this.latestValues},g=yV();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;let h=yX(),i=(d?d.source:void 0)!==(this.layout?this.layout.source:void 0),j=this.getStack(),k=!j||j.members.length<=1,l=!!(i&&!k&&!0===this.options.crossfade&&!this.path.some(DR));this.animationProgress=0,this.mixTargetDelta=b=>{let d=b/1e3;if(DP(g.x,a.x,d),DP(g.y,a.y,d),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var j,m,n,o,p,q;CD(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n=this.relativeTarget,o=this.relativeTargetOrigin,p=h,q=d,DQ(n.x,o.x,p.x,q),DQ(n.y,o.y,p.y,q),c&&(j=this.relativeTarget,m=c,Dp(j.x,m.x)&&Dp(j.y,m.y))&&(this.isProjectionDirty=!1),c||(c=yX()),Dg(c,this.relativeTarget)}i&&(this.animationValues=f,function(a,b,c,d,e,f){e?(a.opacity=Al(0,c.opacity??1,Dc(d)),a.opacityExit=Al(b.opacity??1,0,Dd(d))):f&&(a.opacity=Al(b.opacity??1,c.opacity??1,d));for(let e=0;e<C8;e++){let f=`border${C7[e]}Radius`,g=Db(b,f),h=Db(c,f);(void 0!==g||void 0!==h)&&(g||(g=0),h||(h=0),0===g||0===h||Da(g)===Da(h)?(a[f]=Math.max(Al(C9(g),C9(h),d),0),(yw.test(h)||yw.test(g))&&(a[f]+="%")):a[f]=h)}(b.rotate||c.rotate)&&(a.rotate=Al(b.rotate||0,c.rotate||0,d))}(f,e,this.latestValues,d,l,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=d},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(zv(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zu.update(()=>{C0.hasAnimatedSinceResize=!0,Bd.layout++,this.motionValue||(this.motionValue=zR(0)),this.currentAnimation=function(a,b,c){let d=yY(a)?a:zR(a);return d.start(Cj("",d,b,c)),d.animation}(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:b=>{this.mixTargetDelta(b),a.onUpdate&&a.onUpdate(b)},onStop:()=>{Bd.layout--},onComplete:()=>{Bd.layout--,a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let a=this.getLead(),{targetWithTransforms:b,target:c,layout:d,latestValues:e}=a;if(b&&c&&d){if(this!==a&&this.layout&&d&&DW(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||yX();let b=Cy(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+b;let d=Cy(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+d}Dg(b,c),AB(b,e),CA(this.projectionDeltaWithTransform,this.layoutCorrected,b,e)}}registerSharedNode(a,b){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Du),this.sharedNodes.get(a).add(b);let c=b.options.initialPromotionConfig;b.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(b):void 0})}isLead(){let a=this.getStack();return!a||a.lead===this}getLead(){let{layoutId:a}=this.options;return a&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:b,preserveFollowOpacity:c}={}){let d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){let a=this.getStack();return!!a&&a.relegate(this)}resetSkewAndRotation(){let{visualElement:a}=this.options;if(!a)return;let b=!1,{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(b=!0),!b)return;let d={};c.z&&DA("z",a,d,this.animationValues);for(let b=0;b<Dy.length;b++)DA(`rotate${Dy[b]}`,a,d,this.animationValues),DA(`skew${Dy[b]}`,a,d,this.animationValues);for(let b in a.render(),d)a.setStaticValue(b,d[b]),this.animationValues&&(this.animationValues[b]=d[b]);a.scheduleRender()}applyProjectionStyles(a,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}let c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=AR(b?.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}let d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,a.pointerEvents=AR(b?.pointerEvents)||""),this.hasProjected&&!Au(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";let e=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=function(a,b,c){let d="",e=a.x.translate/b.x,f=a.y.translate/b.y,g=c?.z||0;if((e||f||g)&&(d=`translate3d(${e}px, ${f}px, ${g}px) `),(1!==b.x||1!==b.y)&&(d+=`scale(${1/b.x}, ${1/b.y}) `),c){let{transformPerspective:a,rotate:b,rotateX:e,rotateY:f,skewX:g,skewY:h}=c;a&&(d=`perspective(${a}px) ${d}`),b&&(d+=`rotate(${b}deg) `),e&&(d+=`rotateX(${e}deg) `),f&&(d+=`rotateY(${f}deg) `),g&&(d+=`skewX(${g}deg) `),h&&(d+=`skewY(${h}deg) `)}let h=a.x.scale*b.x,i=a.y.scale*b.y;return(1!==h||1!==i)&&(d+=`scale(${h}, ${i})`),d||"none"}(this.projectionDeltaWithTransform,this.treeScale,e);c&&(f=c(e,f)),a.transform=f;let{x:g,y:h}=this.projectionDelta;for(let b in a.transformOrigin=`${100*g.origin}% ${100*h.origin}% 0`,d.animationValues?a.opacity=d===this?e.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:e.opacityExit:a.opacity=d===this?void 0!==e.opacity?e.opacity:"":void 0!==e.opacityExit?e.opacityExit:0,Am){if(void 0===e[b])continue;let{correct:c,applyTo:g,isCSSVariable:h}=Am[b],i="none"===f?e[b]:c(e[b],d);if(g){let b=g.length;for(let c=0;c<b;c++)a[g[c]]=i}else h?this.options.visualElement.renderState.vars[b]=i:a[b]=i}this.options.layoutId&&(a.pointerEvents=d===this?AR(b?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(DH),this.root.sharedNodes.clear()}}}function DC(a){a.updateLayout()}function DD(a){let b=a.resumeFrom?.snapshot||a.snapshot;if(a.isLead()&&a.layout&&b&&a.hasListeners("didUpdate")){let{layoutBox:c,measuredBox:d}=a.layout,{animationType:e}=a.options,f=b.source!==a.layout.source;"size"===e?Cx(a=>{let d=f?b.measuredBox[a]:b.layoutBox[a],e=Cy(d);d.min=c[a].min,d.max=d.min+e}):DW(e,b.layoutBox,c)&&Cx(d=>{let e=f?b.measuredBox[d]:b.layoutBox[d],g=Cy(c[d]);e.max=e.min+g,a.relativeTarget&&!a.currentAnimation&&(a.isProjectionDirty=!0,a.relativeTarget[d].max=a.relativeTarget[d].min+g)});let g=yV();CA(g,c,b.layoutBox);let h=yV();f?CA(h,a.applyTransform(d,!0),b.measuredBox):CA(h,c,b.layoutBox);let i=!Do(g),j=!1;if(!a.resumeFrom){let d=a.getClosestProjectingParent();if(d&&!d.resumeFrom){let{snapshot:e,layout:f}=d;if(e&&f){let g=yX();CD(g,b.layoutBox,e.layoutBox);let h=yX();CD(h,c,f.layoutBox),Dr(g,h)||(j=!0),d.options.layoutRoot&&(a.relativeTarget=h,a.relativeTargetOrigin=g,a.relativeParent=d)}}}a.notifyListeners("didUpdate",{layout:c,snapshot:b,delta:h,layoutDelta:g,hasLayoutChanged:i,hasRelativeLayoutChanged:j})}else if(a.isLead()){let{onExitComplete:b}=a.options;b&&b()}a.options.transition=void 0}function DE(a){zs.value&&Dx.nodes++,a.parent&&(a.isProjecting()||(a.isProjectionDirty=a.parent.isProjectionDirty),a.isSharedProjectionDirty||(a.isSharedProjectionDirty=!!(a.isProjectionDirty||a.parent.isProjectionDirty||a.parent.isSharedProjectionDirty)),a.isTransformDirty||(a.isTransformDirty=a.parent.isTransformDirty))}function DF(a){a.isProjectionDirty=a.isSharedProjectionDirty=a.isTransformDirty=!1}function DG(a){a.clearSnapshot()}function DH(a){a.clearMeasurements()}function DI(a){a.isLayoutDirty=!1}function DJ(a){let{visualElement:b}=a.options;b&&b.getProps().onBeforeLayoutMeasure&&b.notify("BeforeLayoutMeasure"),a.resetTransform()}function DK(a){a.finishAnimation(),a.targetDelta=a.relativeTarget=a.target=void 0,a.isProjectionDirty=!0}function DL(a){a.resolveTargetDelta()}function DM(a){a.calcProjection()}function DN(a){a.resetSkewAndRotation()}function DO(a){a.removeLeadSnapshot()}function DP(a,b,c){a.translate=Al(b.translate,0,c),a.scale=Al(b.scale,1,c),a.origin=b.origin,a.originPoint=b.originPoint}function DQ(a,b,c,d){a.min=Al(b.min,c.min,d),a.max=Al(b.max,c.max,d)}function DR(a){return a.animationValues&&void 0!==a.animationValues.opacityExit}let DS={duration:.45,ease:[.4,0,.1,1]},DT=a=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(a),DU=DT("applewebkit/")&&!DT("chrome/")?Math.round:zp;function DV(a){a.min=DU(a.min),a.max=DU(a.max)}function DW(a,b,c){return"position"===a||"preserve-aspect"===a&&!(.2>=Math.abs(Ds(b)-Ds(c)))}function DX(a){return a!==a.root&&a.scroll?.wasRoot}let DY=DB({attachResizeListener:(a,b)=>CG(a,"resize",b),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),DZ={current:void 0},D$=DB({measureScroll:a=>({x:a.scrollLeft,y:a.scrollTop}),defaultParent:()=>{if(!DZ.current){let a=new DY({});a.mount(window),a.setOptions({layoutScroll:!0}),DZ.current=a}return DZ.current},resetTransform:(a,b)=>{a.style.transform=void 0!==b?b:"none"},checkIsScrollRoot:a=>"fixed"===window.getComputedStyle(a).position});function D_(a,b){let c=function(a,b,c){if(null==a)return[];if(a instanceof EventTarget)return[a];if("string"==typeof a){let b=document,c=(void 0)??b.querySelectorAll(a);return c?Array.from(c):[]}return Array.from(a).filter(a=>null!=a)}(a),d=new AbortController;return[c,{passive:!0,...b,signal:d.signal},()=>d.abort()]}function D0(a){return!("touch"===a.pointerType||Cw.x||Cw.y)}function D1(a,b,c){let{props:d}=a;a.animationState&&d.whileHover&&a.animationState.setActive("whileHover","Start"===c);let e=d["onHover"+c];e&&zu.postRender(()=>e(b,CI(b)))}class D2 extends A5{mount(){let{current:a}=this.node;a&&(this.unmount=function(a,b,c={}){let[d,e,f]=D_(a,c),g=a=>{if(!D0(a))return;let{target:c}=a,d=b(c,a);if("function"!=typeof d||!c)return;let f=a=>{D0(a)&&(d(a),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,e)};return d.forEach(a=>{a.addEventListener("pointerenter",g,e)}),f}(a,(a,b)=>(D1(this.node,b,"Start"),a=>D1(this.node,a,"End"))))}unmount(){}}class D3 extends A5{constructor(){super(...arguments),this.isActive=!1}onFocus(){let a=!1;try{a=this.node.current.matches(":focus-visible")}catch(b){a=!0}a&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bc(CG(this.node.current,"focus",()=>this.onFocus()),CG(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function D4(a){return C5(a)&&"offsetHeight"in a}let D5=(a,b)=>!!b&&(a===b||D5(a,b.parentElement)),D6=new WeakSet;function D7(a){return b=>{"Enter"===b.key&&a(b)}}function D8(a,b){a.dispatchEvent(new PointerEvent("pointer"+b,{isPrimary:!0,bubbles:!0}))}function D9(a){return CH(a)&&!(Cw.x||Cw.y)}function Ea(a,b,c){let{props:d}=a;if(a.current instanceof HTMLButtonElement&&a.current.disabled)return;a.animationState&&d.whileTap&&a.animationState.setActive("whileTap","Start"===c);let e=d["onTap"+("End"===c?"":c)];e&&zu.postRender(()=>e(b,CI(b)))}class Eb extends A5{mount(){let{current:a}=this.node;a&&(this.unmount=function(a,b,c={}){let[d,e,f]=D_(a,c),g=a=>{let d=a.currentTarget;if(!D9(a))return;D6.add(d);let f=b(d,a),g=(a,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",i),D6.has(d)&&D6.delete(d),D9(a)&&"function"==typeof f&&f(a,{success:b})},h=a=>{g(a,d===window||d===document||c.useGlobalTarget||D5(d,a.target))},i=a=>{g(a,!1)};window.addEventListener("pointerup",h,e),window.addEventListener("pointercancel",i,e)};return d.forEach(a=>{(c.useGlobalTarget?window:a).addEventListener("pointerdown",g,e),D4(a)&&(a.addEventListener("focus",a=>((a,b)=>{let c=a.currentTarget;if(!c)return;let d=D7(()=>{if(D6.has(c))return;D8(c,"down");let a=D7(()=>{D8(c,"up")});c.addEventListener("keyup",a,b),c.addEventListener("blur",()=>D8(c,"cancel"),b)});c.addEventListener("keydown",d,b),c.addEventListener("blur",()=>c.removeEventListener("keydown",d),b)})(a,e)),CF(a)||a.hasAttribute("tabindex")||(a.tabIndex=0))}),f}(a,(a,b)=>(Ea(this.node,b,"Start"),(a,{success:b})=>Ea(this.node,a,b?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}let Ec=new WeakMap,Ed=new WeakMap,Ee=a=>{let b=Ec.get(a.target);b&&b(a)},Ef=a=>{a.forEach(Ee)},Eg={some:0,all:1};class Eh extends A5{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:a={}}=this.node.getProps(),{root:b,margin:c,amount:d="some",once:e}=a,f={root:b?b.current:void 0,rootMargin:c,threshold:"number"==typeof d?d:Eg[d]},g=a=>{let{isIntersecting:b}=a;if(this.isInView===b||(this.isInView=b,e&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);let{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=b?c:d;f&&f(a)};var h=this.node.current;let i=function({root:a,...b}){let c=a||document;Ed.has(c)||Ed.set(c,{});let d=Ed.get(c),e=JSON.stringify(b);return d[e]||(d[e]=new IntersectionObserver(Ef,{root:a,...b})),d[e]}(f);return Ec.set(h,g),i.observe(h),()=>{Ec.delete(h),i.unobserve(h)}}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:a,prevProps:b}=this.node;["amount","margin","root"].some(function({viewport:a={}},{viewport:b={}}={}){return c=>a[c]!==b[c]}(a,b))&&this.startObserver()}unmount(){}}let Ei=function(a,b){if("undefined"==typeof Proxy)return A4;let c=new Map,d=(c,d)=>A4(c,d,a,b);return new Proxy((a,b)=>d(a,b),{get:(e,f)=>"create"===f?d:(c.has(f)||c.set(f,A4(f,void 0,a,b)),c.get(f))})}({animation:{Feature:Ct},exit:{Feature:Cv},inView:{Feature:Eh},tap:{Feature:Eb},focus:{Feature:D3},hover:{Feature:D2},pan:{Feature:C_},drag:{Feature:CZ,ProjectionNode:D$,MeasureLayout:C4},layout:{ProjectionNode:D$,MeasureLayout:C4}},(a,b)=>b.isSVG??AF(a)?new Aq(b):new AD(b,{allowProjection:a!==aO.Fragment}));function Ej(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class Ek extends aO.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=D4(a)&&a.offsetWidth||0,d=D4(a)&&a.offsetHeight||0,e=this.props.sizeRef.current;e.height=b.offsetHeight||0,e.width=b.offsetWidth||0,e.top=b.offsetTop,e.left=b.offsetLeft,e.right=c-e.width-e.left,e.bottom=d-e.height-e.top}return null}componentDidUpdate(){}render(){return this.props.children}}function El({children:a,isPresent:b,anchorX:c,anchorY:d,root:e}){let f=(0,aO.useId)(),g=(0,aO.useRef)(null),h=(0,aO.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:i}=(0,aO.useContext)(AI),j=function(...a){return aO.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=Ej(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():Ej(a[b],null)}}}}(...a),a)}(g,a.props?.ref??a?.ref);return(0,aO.useInsertionEffect)(()=>{let{width:a,height:j,top:k,left:l,right:m,bottom:n}=h.current;if(b||!g.current||!a||!j)return;let o="left"===c?`left: ${l}`:`right: ${m}`,p="bottom"===d?`bottom: ${n}`:`top: ${k}`;g.current.dataset.motionPopId=f;let q=document.createElement("style");i&&(q.nonce=i);let r=e??document.head;return r.appendChild(q),q.sheet&&q.sheet.insertRule(`
          [data-motion-pop-id="${f}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${j}px !important;
            ${o}px !important;
            ${p}px !important;
          }
        `),()=>{r.contains(q)&&r.removeChild(q)}},[b]),(0,aN.jsx)(Ek,{isPresent:b,childRef:g,sizeRef:h,children:aO.cloneElement(a,{ref:j})})}let Em=({children:a,initial:b,isPresent:c,onExitComplete:d,custom:e,presenceAffectsLayout:f,mode:g,anchorX:h,anchorY:i,root:j})=>{let k=AT(En),l=(0,aO.useId)(),m=!0,n=(0,aO.useMemo)(()=>(m=!1,{id:l,initial:b,isPresent:c,custom:e,onExitComplete:a=>{for(let b of(k.set(a,!0),k.values()))if(!b)return;d&&d()},register:a=>(k.set(a,!1),()=>k.delete(a))}),[c,k,d]);return f&&m&&(n={...n}),(0,aO.useMemo)(()=>{k.forEach((a,b)=>k.set(b,!1))},[c]),aO.useEffect(()=>{c||k.size||!d||d()},[c]),"popLayout"===g&&(a=(0,aN.jsx)(El,{isPresent:c,anchorX:h,anchorY:i,root:j,children:a})),(0,aN.jsx)(AS.Provider,{value:n,children:a})};function En(){return new Map}let Eo=a=>a.key||"";function Ep(a){let b=[];return aO.Children.forEach(a,a=>{(0,aO.isValidElement)(a)&&b.push(a)}),b}let Eq=({children:a,custom:b,initial:c=!0,onExitComplete:d,presenceAffectsLayout:e=!0,mode:f="sync",propagate:g=!1,anchorX:h="left",anchorY:i="top",root:j})=>{let[k,l]=C1(g),m=(0,aO.useMemo)(()=>Ep(a),[a]),n=g&&!k?[]:m.map(Eo),o=(0,aO.useRef)(!0),p=(0,aO.useRef)(m),q=AT(()=>new Map),r=(0,aO.useRef)(new Set),[s,t]=(0,aO.useState)(m),[u,v]=(0,aO.useState)(m);A3(()=>{o.current=!1,p.current=m;for(let a=0;a<u.length;a++){let b=Eo(u[a]);n.includes(b)?(q.delete(b),r.current.delete(b)):!0!==q.get(b)&&q.set(b,!1)}},[u,n.length,n.join("-")]);let w=[];if(m!==s){let a=[...m];for(let b=0;b<u.length;b++){let c=u[b],d=Eo(c);n.includes(d)||(a.splice(b,0,c),w.push(c))}return"wait"===f&&w.length&&(a=w),v(Ep(a)),t(m),null}let{forceRender:x}=(0,aO.useContext)(AG);return(0,aN.jsx)(aN.Fragment,{children:u.map(a=>{let s=Eo(a),t=(!g||!!k)&&(m===u||n.includes(s));return(0,aN.jsx)(Em,{isPresent:t,initial:(!o.current||!!c)&&void 0,custom:b,presenceAffectsLayout:e,mode:f,root:j,onExitComplete:t?void 0:()=>{if(r.current.has(s)||(r.current.add(s),!q.has(s)))return;q.set(s,!0);let a=!0;q.forEach(b=>{b||(a=!1)}),a&&(x?.(),v(p.current),g&&l?.(),d&&d())},anchorX:h,anchorY:i,children:a},s)})})},Er=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim(),Es=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)};var Et={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let Eu=(0,aO.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,aO.createElement)("svg",{ref:i,...Et,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:Er("lucide",e),...!f&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0;return!1})(h)&&{"aria-hidden":"true"},...h},[...g.map(([a,b])=>(0,aO.createElement)(a,b)),...Array.isArray(f)?f:[f]])),Ev=(a,b)=>{let c=(0,aO.forwardRef)(({className:c,...d},e)=>(0,aO.createElement)(Eu,{ref:e,iconNode:b,className:Er(`lucide-${Es(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...d}));return c.displayName=Es(a),c},Ew=Ev("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Ex=Ev("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Ey=Ev("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ez=Ev("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),EA=Ev("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),EB=Ev("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),EC=Ev("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ED=Ev("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),EE=Ev("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),EF=Ev("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]),EG=Ev("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),EH=Ev("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),EI=Ev("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),EJ=Ev("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),EK=Ev("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),EL=Ev("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),EM=Ev("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),EN=Ev("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),EO=Ev("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),EP=Ev("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),EQ=Ev("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ER=Ev("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ES=Ev("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ET=Ev("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),EU=Ev("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),EV=Ev("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),EW=Ev("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),EX=Ev("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),EY=({isOpen:a,onClose:b})=>{let[c,d]=(0,aO.useState)(!1),e=d2(),f=async a=>{d(!0);try{let{error:b}=await e.auth.signInWithOAuth({provider:a,options:{redirectTo:`${window.location.origin}/api/auth/callback`}});if(b)throw b}catch(a){console.error("Error logging in:",a),alert("Error logging in. Please try again."),d(!1)}};return a?(0,aN.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:b}),(0,aN.jsxs)("div",{className:"relative w-full max-w-sm glass-panel rounded-2xl p-6 transition-all animate-slideUp",children:[(0,aN.jsx)("button",{onClick:b,className:"absolute top-4 right-4 text-slate-400 hover:text-white transition-colors",children:(0,aN.jsx)("i",{className:"fa-solid fa-xmark text-xl"})}),(0,aN.jsxs)("div",{className:"text-center mb-8",children:[(0,aN.jsx)("div",{className:"w-16 h-16 bg-brand-cyan/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-brand-cyan/20 shadow-[0_0_20px_rgba(6,182,212,0.2)]",children:(0,aN.jsx)("i",{className:"fa-solid fa-user-astronaut text-2xl text-brand-cyan"})}),(0,aN.jsxs)("h2",{className:"text-xl font-black text-white italic skew-x-[-5deg]",children:["Welcome to ",(0,aN.jsx)("span",{className:"text-brand-cyan",children:"CardStreet"})]}),(0,aN.jsx)("p",{className:"text-xs text-slate-400 mt-2 font-medium",children:"Sign in to manage your vault and track portfolio value."})]}),(0,aN.jsxs)("div",{className:"space-y-3",children:[(0,aN.jsxs)("button",{onClick:()=>f("google"),disabled:c,className:"w-full h-12 bg-white hover:bg-slate-50 active:bg-slate-100 rounded-xl flex items-center justify-center gap-3 transition-all font-bold text-slate-700 shadow-lg group disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,aN.jsx)("i",{className:"fa-brands fa-google text-xl text-red-500 group-hover:scale-110 transition-transform"}),(0,aN.jsx)("span",{children:"Continue with Google"})]}),(0,aN.jsxs)("div",{className:"relative flex py-2 items-center",children:[(0,aN.jsx)("div",{className:"flex-grow border-t border-slate-600"}),(0,aN.jsx)("span",{className:"flex-shrink-0 mx-4 text-[10px] text-slate-500 uppercase font-bold tracking-widest",children:"Or"}),(0,aN.jsx)("div",{className:"flex-grow border-t border-slate-600"})]}),(0,aN.jsxs)("button",{onClick:()=>{localStorage.setItem("cardstreet-guest","true"),window.location.reload()},className:"w-full h-12 bg-white/5 hover:bg-white/10 active:bg-white/15 rounded-xl flex items-center justify-center gap-3 transition-all font-bold text-slate-300 border border-white/10",children:[(0,aN.jsx)("i",{className:"fa-solid fa-user-secret text-lg"}),(0,aN.jsx)("span",{children:"Continue as Guest"})]})]}),(0,aN.jsx)("div",{className:"mt-6 text-center",children:(0,aN.jsx)("p",{className:"text-[10px] text-slate-500",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})})]})]}):null},EZ={initial:{x:"100%",opacity:0},animate:{x:0,opacity:1,transition:{type:"spring",damping:25,stiffness:200}},exit:{x:"100%",opacity:0,transition:{duration:.2}}},E$={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-20,transition:{duration:.2}}},E_={bronze:{color:"from-amber-700 to-amber-900",icon:Ew,next:"silver",pointsNeeded:500},silver:{color:"from-slate-400 to-slate-600",icon:Ex,next:"gold",pointsNeeded:2e3},gold:{color:"from-yellow-400 to-amber-500",icon:Ex,next:"platinum",pointsNeeded:5e3},platinum:{color:"from-purple-400 to-indigo-600",icon:Ey,next:null,pointsNeeded:null}},E0=({user:a,onNavigatePartner:b,onGuestLogin:c})=>{let[d,e]=(0,aO.useState)(!1),[f,g]=(0,aO.useState)("none"),h=d2(),[i,j]=(0,aO.useState)({phone_number:null,shipping_address:{},two_factor_enabled:!1,notify_price_drops:!0,notify_order_updates:!0,notify_marketing:!1}),[k,l]=(0,aO.useState)({points_balance:0,tier:"bronze",lifetime_points:0,tier_progress:0}),[m,n]=(0,aO.useState)([]),[o,p]=(0,aO.useState)([]),[q,r]=(0,aO.useState)([]),[s,t]=(0,aO.useState)(0),[u,v]=(0,aO.useState)(!1),[w,x]=(0,aO.useState)(""),[y,z]=(0,aO.useState)(""),[A,B]=(0,aO.useState)({street:"",city:"",state:"",postal_code:"",country:""});(0,aO.useEffect)(()=>{a&&"guest"!==a.provider&&C()},[a]);let C=async()=>{try{let a=await fetch("/api/profile");if(a.ok){let b=await a.json();b.settings&&j(b.settings),b.rewards&&l(b.rewards)}}catch(a){console.error("Error fetching profile:",a)}},D=async()=>{try{let a=await fetch("/api/profile/payment-methods");if(a.ok){let b=await a.json();n(b)}}catch(a){console.error("Error fetching payment methods:",a)}},E=async()=>{try{let a=await fetch("/api/profile/orders?status=active");if(a.ok){let b=await a.json();p(b.orders)}}catch(a){console.error("Error fetching orders:",a)}},F=async()=>{try{let a=await fetch("/api/profile/sales");if(a.ok){let b=await a.json();r(b.sales),t(b.totalEarnings)}}catch(a){console.error("Error fetching sales:",a)}},G=async()=>{a?.provider==="guest"?localStorage.removeItem("cardstreet-guest"):await h.auth.signOut(),window.location.reload()},H=async(a,b)=>{j(c=>({...c,[a]:b}));try{await fetch("/api/profile/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({[a]:b})})}catch(c){console.error("Error updating settings:",c),j(c=>({...c,[a]:!b}))}},I=async()=>{v(!0);try{await fetch("/api/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({display_name:w,phone_number:y,shipping_address:A})}),j(a=>({...a,phone_number:y,shipping_address:A}))}catch(a){console.error("Error saving profile:",a)}v(!1)},J=async a=>{try{await fetch(`/api/profile/payment-methods?id=${a}`,{method:"DELETE"}),n(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Error deleting payment method:",a)}},K=b=>{g(b),"payment"===b&&D(),"orders"===b&&E(),"sales"===b&&F(),"account"===b&&a&&(x(a.name),z(i.phone_number||""),B({street:i.shipping_address?.street||"",city:i.shipping_address?.city||"",state:i.shipping_address?.state||"",postal_code:i.shipping_address?.postal_code||"",country:i.shipping_address?.country||""}))},L=[{title:"Account",items:[{name:"Edit Profile",icon:Ez,panel:"account",color:"text-brand-cyan"},{name:"Payment Methods",icon:EA,panel:"payment",color:"text-emerald-400"},{name:"Rewards",icon:EB,panel:"rewards",color:"text-amber-400"}]},{title:"Security & Notifications",items:[{name:"Settings",icon:EC,panel:"settings",color:"text-purple-400"}]},{title:"Orders & Sales",items:[{name:"Track Orders",icon:ED,panel:"orders",color:"text-blue-400"},{name:"Sales History",icon:EE,panel:"sales",color:"text-green-400"}]},{title:"Operations",items:[{name:"Partner Dashboard",icon:EF,action:b,color:"text-brand-green",special:!0}]},{title:"Support",items:[{name:"Help & Support",icon:EG,panel:"support",color:"text-slate-400"}]}];if(!a)return(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsxs)(Ei.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-12 py-10 flex flex-col items-center justify-center min-h-[70vh]",children:[(0,aN.jsxs)("div",{className:"text-center space-y-4",children:[(0,aN.jsx)("div",{className:"w-20 h-20 rounded-[2.2rem] glass mx-auto flex items-center justify-center border border-brand-cyan/20",children:(0,aN.jsx)(EH,{className:"w-8 h-8 text-brand-cyan"})}),(0,aN.jsxs)("div",{className:"space-y-1 px-4",children:[(0,aN.jsx)("h2",{className:"text-3xl font-black text-white tracking-tight uppercase leading-tight italic skew-x-[-10deg]",children:"Elite Registry"}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-600 font-black uppercase tracking-[0.3em] leading-relaxed max-w-[240px] mx-auto",children:"Unlock cross-device vault synchronization"})]})]}),(0,aN.jsxs)("div",{className:"w-full space-y-4 px-4 max-w-sm",children:[(0,aN.jsxs)("button",{onClick:()=>e(!0),className:"w-full h-16 bg-white hover:bg-slate-50 active:bg-slate-100 rounded-2xl flex items-center justify-center gap-4 transition-all shadow-xl group mb-3",children:[(0,aN.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.2em] text-slate-900",children:"Access Terminal"}),(0,aN.jsx)(EI,{className:"w-4 h-4 text-slate-900 group-hover:translate-x-1 transition-transform"})]}),(0,aN.jsxs)("button",{onClick:c,className:"w-full py-4 text-[10px] font-bold uppercase tracking-widest text-slate-600 hover:text-white transition-colors flex items-center justify-center gap-2",children:["Enter as Guest ",(0,aN.jsx)(Ez,{className:"w-3 h-3"})]})]})]}),(0,aN.jsx)(EY,{isOpen:d,onClose:()=>e(!1)})]});let M=E_[k.tier].icon;return(0,aN.jsxs)("div",{className:"relative min-h-screen pb-20",children:[(0,aN.jsx)(Eq,{mode:"wait",children:"none"===f&&(0,aN.jsxs)(Ei.div,{variants:E$,initial:"initial",animate:"animate",exit:"exit",className:"space-y-8 py-6",children:[(0,aN.jsxs)("div",{className:"text-center pb-4",children:[(0,aN.jsxs)("div",{className:"w-24 h-24 rounded-[2.8rem] glass mx-auto mb-5 flex items-center justify-center p-1.5 border border-brand-cyan/20 relative group overflow-hidden shadow-2xl",children:[(0,aN.jsx)("div",{className:"w-full h-full rounded-[2.5rem] bg-slate-900 flex items-center justify-center overflow-hidden border border-white/10",children:(0,aN.jsx)("img",{src:a.avatar,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",alt:a.name})}),(0,aN.jsx)("div",{className:`absolute -bottom-1 -right-1 w-9 h-9 rounded-2xl flex items-center justify-center border-4 border-[#121212] shadow-lg bg-gradient-to-br ${E_[k.tier].color}`,children:(0,aN.jsx)(M,{className:"w-4 h-4 text-white"})})]}),(0,aN.jsxs)("div",{className:"space-y-1",children:[(0,aN.jsx)("h3",{className:"text-2xl font-black text-white tracking-tight italic skew-x-[-10deg]",children:a.name}),(0,aN.jsx)("p",{className:"text-[10px] uppercase tracking-[0.4em] text-brand-cyan font-black",children:"guest"===a.provider?"Temporary Director":`${k.tier.toUpperCase()} MEMBER`}),(0,aN.jsx)("p",{className:"text-[9px] text-slate-600 font-bold uppercase tracking-widest pt-2",children:a.email})]}),"guest"!==a.provider&&(0,aN.jsxs)("button",{onClick:()=>K("rewards"),className:"mt-4 mx-auto flex items-center gap-3 px-4 py-2 glass rounded-2xl border border-amber-500/20 hover:border-amber-500/40 transition-colors",children:[(0,aN.jsx)(EB,{className:"w-4 h-4 text-amber-400"}),(0,aN.jsx)("span",{className:"text-sm font-bold text-white",children:k.points_balance.toLocaleString()}),(0,aN.jsx)("span",{className:"text-[9px] uppercase tracking-wider text-slate-500",children:"Points"}),(0,aN.jsx)(EI,{className:"w-3 h-3 text-slate-600"})]})]}),(0,aN.jsx)("div",{className:"space-y-6",children:L.map(a=>(0,aN.jsxs)("div",{className:"space-y-3",children:[(0,aN.jsx)("h4",{className:"text-slate-700 text-[9px] font-black uppercase tracking-[0.4em] px-2",children:a.title}),(0,aN.jsx)("div",{className:"glass rounded-[2rem] border-white/5 overflow-hidden shadow-xl",children:a.items.map((b,c)=>(0,aN.jsxs)("button",{onClick:()=>b.action?b.action():b.panel&&K(b.panel),className:`w-full h-14 px-5 flex items-center justify-between group active:bg-white/[0.04] transition-colors ${c!==a.items.length-1?"border-b border-white/[0.03]":""}`,children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4",children:[(0,aN.jsx)(b.icon,{className:`w-5 h-5 ${b.color} group-hover:scale-110 transition-transform`}),(0,aN.jsx)("span",{className:`text-sm font-semibold ${b.special?"text-white":"text-slate-300"} group-hover:text-white transition-colors`,children:b.name})]}),(0,aN.jsx)(EI,{className:"w-4 h-4 text-slate-700 group-hover:translate-x-1 transition-transform"})]},b.name))})]},a.title))}),(0,aN.jsxs)("button",{onClick:G,className:"w-full h-14 glass rounded-[2rem] text-brand-red/70 font-bold text-xs uppercase tracking-[0.2em] border-brand-red/10 active:scale-[0.98] transition-all mt-4 hover:text-brand-red hover:bg-brand-red/5 shadow-lg flex items-center justify-center gap-3",children:[(0,aN.jsx)(EJ,{className:"w-4 h-4"}),"Sign Out"]})]},"main")}),(0,aN.jsxs)(Eq,{children:["account"===f&&(0,aN.jsx)(Ei.div,{variants:EZ,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,aN.jsxs)("div",{className:"p-4 space-y-6",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,aN.jsx)("button",{onClick:()=>g("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,aN.jsx)(EK,{className:"w-5 h-5 text-slate-400"})}),(0,aN.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Edit Profile"})]}),(0,aN.jsxs)("div",{className:"space-y-4",children:[(0,aN.jsxs)("div",{className:"space-y-2",children:[(0,aN.jsxs)("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2",children:[(0,aN.jsx)(Ez,{className:"w-3 h-3"})," Name"]}),(0,aN.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"Your name"})]}),(0,aN.jsxs)("div",{className:"space-y-2",children:[(0,aN.jsxs)("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2",children:[(0,aN.jsx)(EL,{className:"w-3 h-3"})," Email"]}),(0,aN.jsx)("input",{type:"email",value:a.email,disabled:!0,className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-slate-500 cursor-not-allowed"})]}),(0,aN.jsxs)("div",{className:"space-y-2",children:[(0,aN.jsxs)("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2",children:[(0,aN.jsx)(EM,{className:"w-3 h-3"})," Phone Number"]}),(0,aN.jsx)("input",{type:"tel",value:y,onChange:a=>z(a.target.value),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"+66 xxx xxx xxxx"})]}),(0,aN.jsxs)("div",{className:"space-y-2",children:[(0,aN.jsxs)("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 flex items-center gap-2",children:[(0,aN.jsx)(EN,{className:"w-3 h-3"})," Shipping Address"]}),(0,aN.jsx)("input",{type:"text",value:A.street,onChange:a=>B(b=>({...b,street:a.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"Street address"}),(0,aN.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,aN.jsx)("input",{type:"text",value:A.city,onChange:a=>B(b=>({...b,city:a.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"City"}),(0,aN.jsx)("input",{type:"text",value:A.state,onChange:a=>B(b=>({...b,state:a.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"State/Province"})]}),(0,aN.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,aN.jsx)("input",{type:"text",value:A.postal_code,onChange:a=>B(b=>({...b,postal_code:a.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"Postal Code"}),(0,aN.jsx)("input",{type:"text",value:A.country,onChange:a=>B(b=>({...b,country:a.target.value})),className:"w-full h-12 px-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-600 focus:border-brand-cyan/50 focus:outline-none transition-colors",placeholder:"Country"})]})]})]}),(0,aN.jsx)("button",{onClick:I,disabled:u,className:"w-full h-14 bg-brand-cyan hover:bg-brand-cyan/90 text-black font-bold rounded-2xl flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:u?(0,aN.jsx)("div",{className:"w-5 h-5 border-2 border-black/20 border-t-black rounded-full animate-spin"}):(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsx)(EO,{className:"w-5 h-5"}),"Save Changes"]})})]})},"account"),"payment"===f&&(0,aN.jsx)(Ei.div,{variants:EZ,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,aN.jsxs)("div",{className:"p-4 space-y-6",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,aN.jsx)("button",{onClick:()=>g("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,aN.jsx)(EK,{className:"w-5 h-5 text-slate-400"})}),(0,aN.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Payment Methods"})]}),(0,aN.jsxs)("div",{className:"space-y-3",children:[0===m.length?(0,aN.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,aN.jsx)(EA,{className:"w-12 h-12 text-slate-700 mx-auto"}),(0,aN.jsx)("p",{className:"text-slate-500 text-sm",children:"No payment methods saved"})]}):m.map(a=>(0,aN.jsxs)("div",{className:"glass px-4 py-3 rounded-2xl border border-white/5 flex items-center justify-between",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-3",children:[(0,aN.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${"visa"===a.card_type?"bg-blue-600":"mastercard"===a.card_type?"bg-orange-500":"bg-slate-600"}`,children:(0,aN.jsx)(EA,{className:"w-5 h-5 text-white"})}),(0,aN.jsxs)("div",{children:[(0,aN.jsxs)("p",{className:"text-white font-semibold text-sm flex items-center gap-2",children:["•••• ",a.last_four,a.is_default&&(0,aN.jsx)("span",{className:"text-[8px] px-2 py-0.5 bg-brand-cyan/20 text-brand-cyan rounded-full uppercase",children:"Default"})]}),(0,aN.jsxs)("p",{className:"text-slate-500 text-xs",children:[a.expiry_month,"/",a.expiry_year]})]})]}),(0,aN.jsx)("button",{onClick:()=>J(a.id),className:"p-2 hover:bg-red-500/20 rounded-xl transition-colors group",children:(0,aN.jsx)(EP,{className:"w-4 h-4 text-slate-600 group-hover:text-red-400"})})]},a.id)),(0,aN.jsxs)("button",{className:"w-full h-16 border-2 border-dashed border-white/10 rounded-2xl flex items-center justify-center gap-3 text-slate-500 hover:text-white hover:border-brand-cyan/30 transition-colors group",children:[(0,aN.jsx)(EQ,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),(0,aN.jsx)("span",{className:"font-semibold",children:"Add New Card"})]})]})]})},"payment"),"rewards"===f&&(0,aN.jsx)(Ei.div,{variants:EZ,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,aN.jsxs)("div",{className:"p-4 space-y-6",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,aN.jsx)("button",{onClick:()=>g("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,aN.jsx)(EK,{className:"w-5 h-5 text-slate-400"})}),(0,aN.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Rewards"})]}),(0,aN.jsxs)("div",{className:`glass p-6 rounded-3xl border border-white/10 bg-gradient-to-br ${E_[k.tier].color} relative overflow-hidden`,children:[(0,aN.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-3xl"}),(0,aN.jsxs)("div",{className:"relative z-10",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,aN.jsx)(M,{className:"w-6 h-6 text-white"}),(0,aN.jsxs)("span",{className:"text-white/80 text-xs uppercase tracking-widest font-bold",children:[k.tier," Member"]})]}),(0,aN.jsx)("p",{className:"text-5xl font-black text-white mb-1",children:k.points_balance.toLocaleString()}),(0,aN.jsx)("p",{className:"text-white/60 text-sm",children:"Available Points"})]})]}),E_[k.tier].next&&(0,aN.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/5 space-y-3",children:[(0,aN.jsxs)("div",{className:"flex justify-between items-center",children:[(0,aN.jsxs)("span",{className:"text-slate-400 text-xs uppercase tracking-wider font-bold",children:["Progress to ",E_[k.tier].next]}),(0,aN.jsxs)("span",{className:"text-white font-bold text-sm",children:[k.lifetime_points," / ",E_[k.tier].pointsNeeded]})]}),(0,aN.jsx)("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:(0,aN.jsx)(Ei.div,{initial:{width:0},animate:{width:`${Math.min(k.lifetime_points/(E_[k.tier].pointsNeeded||1)*100,100)}%`},transition:{duration:1,ease:"easeOut"},className:`h-full rounded-full bg-gradient-to-r ${E_[k.tier].color}`})})]}),(0,aN.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,aN.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/5 text-center",children:[(0,aN.jsx)("p",{className:"text-2xl font-black text-white",children:k.lifetime_points.toLocaleString()}),(0,aN.jsx)("p",{className:"text-slate-500 text-xs uppercase tracking-wider",children:"Lifetime Points"})]}),(0,aN.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/5 text-center",children:[(0,aN.jsxs)("p",{className:"text-2xl font-black text-brand-green",children:["฿",(.5*k.points_balance).toFixed(0)]}),(0,aN.jsx)("p",{className:"text-slate-500 text-xs uppercase tracking-wider",children:"Points Value"})]})]})]})},"rewards"),"settings"===f&&(0,aN.jsx)(Ei.div,{variants:EZ,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,aN.jsxs)("div",{className:"p-4 space-y-6",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,aN.jsx)("button",{onClick:()=>g("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,aN.jsx)(EK,{className:"w-5 h-5 text-slate-400"})}),(0,aN.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Settings"})]}),(0,aN.jsxs)("div",{className:"space-y-3",children:[(0,aN.jsx)("h4",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest px-1",children:"Security"}),(0,aN.jsx)("div",{className:"glass rounded-2xl border border-white/5 overflow-hidden",children:(0,aN.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-3",children:[(0,aN.jsx)(ER,{className:`w-5 h-5 ${i.two_factor_enabled?"text-brand-green":"text-slate-500"}`}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("p",{className:"text-white font-semibold text-sm",children:"Two-Factor Authentication"}),(0,aN.jsx)("p",{className:"text-slate-500 text-xs flex items-center gap-1",children:i.two_factor_enabled?(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsx)(ES,{className:"w-3 h-3 text-brand-green"}),(0,aN.jsx)("span",{className:"text-brand-green",children:"Secured"})]}):(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsx)(ET,{className:"w-3 h-3 text-amber-500"}),(0,aN.jsx)("span",{className:"text-amber-500",children:"Not enabled"})]})})]})]}),(0,aN.jsx)("button",{onClick:()=>H("two_factor_enabled",!i.two_factor_enabled),className:`w-12 h-7 rounded-full transition-colors relative ${i.two_factor_enabled?"bg-brand-green":"bg-slate-700"}`,children:(0,aN.jsx)(Ei.div,{animate:{x:20*!!i.two_factor_enabled},className:"absolute left-1 top-1 w-5 h-5 bg-white rounded-full shadow-lg"})})]})})]}),(0,aN.jsxs)("div",{className:"space-y-3",children:[(0,aN.jsx)("h4",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest px-1",children:"Notifications"}),(0,aN.jsx)("div",{className:"glass rounded-2xl border border-white/5 overflow-hidden divide-y divide-white/5",children:[{key:"notify_price_drops",label:"Price Drop Alerts",desc:"Get notified when wishlist items drop"},{key:"notify_order_updates",label:"Order Updates",desc:"Shipping and delivery notifications"},{key:"notify_marketing",label:"Marketing",desc:"Promotions and special offers"}].map(a=>(0,aN.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-3",children:[(0,aN.jsx)(EU,{className:"w-5 h-5 text-slate-500"}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("p",{className:"text-white font-semibold text-sm",children:a.label}),(0,aN.jsx)("p",{className:"text-slate-500 text-xs",children:a.desc})]})]}),(0,aN.jsx)("button",{onClick:()=>H(a.key,!i[a.key]),className:`w-12 h-7 rounded-full transition-colors relative ${i[a.key]?"bg-brand-cyan":"bg-slate-700"}`,children:(0,aN.jsx)(Ei.div,{animate:{x:20*!!i[a.key]},className:"absolute left-1 top-1 w-5 h-5 bg-white rounded-full shadow-lg"})})]},a.key))})]})]})},"settings"),"orders"===f&&(0,aN.jsx)(Ei.div,{variants:EZ,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,aN.jsxs)("div",{className:"p-4 space-y-6",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,aN.jsx)("button",{onClick:()=>g("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,aN.jsx)(EK,{className:"w-5 h-5 text-slate-400"})}),(0,aN.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Track Orders"})]}),(0,aN.jsx)("div",{className:"space-y-4",children:0===o.length?(0,aN.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,aN.jsx)(ED,{className:"w-12 h-12 text-slate-700 mx-auto"}),(0,aN.jsx)("p",{className:"text-slate-500 text-sm",children:"No active orders"})]}):o.map(a=>(0,aN.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/5 space-y-4",children:[(0,aN.jsxs)("div",{className:"flex items-start gap-3",children:[(0,aN.jsx)("div",{className:"w-16 h-16 rounded-xl bg-slate-800 overflow-hidden flex-shrink-0",children:a.transaction?.listing?.card_data?.images?.small&&(0,aN.jsx)("img",{src:a.transaction.listing.card_data.images.small,alt:"Card",className:"w-full h-full object-cover"})}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,aN.jsx)("p",{className:"text-white font-semibold text-sm truncate",children:a.transaction?.listing?.card_data?.name||"Card Order"}),(0,aN.jsx)("p",{className:"text-slate-500 text-xs",children:a.transaction?.listing?.condition}),(0,aN.jsxs)("p",{className:"text-brand-cyan font-bold text-sm mt-1",children:["฿",a.transaction?.amount?.toLocaleString()]})]})]}),(0,aN.jsx)("div",{className:"flex items-center justify-between",children:["processing","shipped","out_for_delivery","delivered"].map((b,c)=>{let d=["processing","shipped","out_for_delivery","delivered"].indexOf(a.status),e=c<=d,f=c===d;return(0,aN.jsxs)(aP().Fragment,{children:[(0,aN.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,aN.jsxs)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${e?"bg-brand-green":"bg-slate-800"} ${f?"ring-2 ring-brand-green ring-offset-2 ring-offset-brand-darker":""}`,children:["processing"===b&&(0,aN.jsx)(EV,{className:`w-4 h-4 ${e?"text-black":"text-slate-600"}`}),"shipped"===b&&(0,aN.jsx)(ED,{className:`w-4 h-4 ${e?"text-black":"text-slate-600"}`}),"out_for_delivery"===b&&(0,aN.jsx)(EW,{className:`w-4 h-4 ${e?"text-black":"text-slate-600"}`}),"delivered"===b&&(0,aN.jsx)(ES,{className:`w-4 h-4 ${e?"text-black":"text-slate-600"}`})]}),(0,aN.jsx)("span",{className:`text-[8px] uppercase tracking-wider ${f?"text-brand-green font-bold":"text-slate-600"}`,children:b.replace("_"," ")})]}),c<3&&(0,aN.jsx)("div",{className:`flex-1 h-0.5 ${c<d?"bg-brand-green":"bg-slate-800"}`})]},b)})}),a.tracking_number&&(0,aN.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,aN.jsx)("span",{className:"text-slate-500",children:"Tracking:"}),(0,aN.jsx)("span",{className:"text-white font-mono",children:a.tracking_number})]})]},a.id))})]})},"orders"),"sales"===f&&(0,aN.jsx)(Ei.div,{variants:EZ,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,aN.jsxs)("div",{className:"p-4 space-y-6",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,aN.jsx)("button",{onClick:()=>g("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,aN.jsx)(EK,{className:"w-5 h-5 text-slate-400"})}),(0,aN.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Sales History"})]}),(0,aN.jsxs)("div",{className:"glass p-4 rounded-2xl border border-brand-green/20 bg-brand-green/5",children:[(0,aN.jsx)("p",{className:"text-slate-400 text-xs uppercase tracking-wider mb-1",children:"Total Earnings"}),(0,aN.jsxs)("p",{className:"text-3xl font-black text-brand-green",children:["฿",s.toLocaleString()]})]}),(0,aN.jsx)("div",{className:"space-y-3",children:0===q.length?(0,aN.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,aN.jsx)(EE,{className:"w-12 h-12 text-slate-700 mx-auto"}),(0,aN.jsx)("p",{className:"text-slate-500 text-sm",children:"No sales yet"})]}):q.map(a=>(0,aN.jsxs)("div",{className:"glass p-3 rounded-2xl border border-white/5 flex items-center gap-3",children:[(0,aN.jsx)("div",{className:"w-14 h-14 rounded-xl bg-slate-800 overflow-hidden flex-shrink-0",children:a.listing?.card_data?.images?.small&&(0,aN.jsx)("img",{src:a.listing.card_data.images.small,alt:"Card",className:"w-full h-full object-cover"})}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,aN.jsx)("p",{className:"text-white font-semibold text-sm truncate",children:a.listing?.card_data?.name||"Card Sale"}),(0,aN.jsx)("p",{className:"text-slate-500 text-xs",children:a.listing?.condition})]}),(0,aN.jsxs)("div",{className:"text-right",children:[(0,aN.jsxs)("p",{className:"text-brand-green font-bold",children:["+฿",(a.amount-(a.platform_fee||0)).toLocaleString()]}),(0,aN.jsx)("p",{className:"text-slate-600 text-[10px]",children:new Date(a.completed_at).toLocaleDateString()})]})]},a.id))})]})},"sales"),"support"===f&&(0,aN.jsx)(Ei.div,{variants:EZ,initial:"initial",animate:"animate",exit:"exit",className:"absolute inset-0 bg-brand-darker z-50 overflow-y-auto pb-20",children:(0,aN.jsxs)("div",{className:"p-4 space-y-6",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,aN.jsx)("button",{onClick:()=>g("none"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl transition-colors",children:(0,aN.jsx)(EK,{className:"w-5 h-5 text-slate-400"})}),(0,aN.jsx)("h2",{className:"text-lg font-black text-white uppercase tracking-wide",children:"Help & Support"})]}),(0,aN.jsx)("div",{className:"glass rounded-2xl border border-white/5 overflow-hidden divide-y divide-white/5",children:[{icon:EG,label:"Help Center",href:"#"},{icon:EL,label:"Contact Us",href:"mailto:support@cardstreet.app"},{icon:EX,label:"Privacy Policy",href:"#"},{icon:EX,label:"Terms of Service",href:"#"}].map(a=>(0,aN.jsxs)("a",{href:a.href,className:"p-4 flex items-center justify-between group hover:bg-white/[0.02] transition-colors",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-3",children:[(0,aN.jsx)(a.icon,{className:"w-5 h-5 text-slate-500 group-hover:text-white transition-colors"}),(0,aN.jsx)("span",{className:"text-white font-semibold text-sm",children:a.label})]}),(0,aN.jsx)(EI,{className:"w-4 h-4 text-slate-700 group-hover:translate-x-1 transition-transform"})]},a.label))}),(0,aN.jsxs)("div",{className:"text-center pt-8",children:[(0,aN.jsx)("p",{className:"text-slate-600 text-xs",children:"CardStreet TCG v1.0.0"}),(0,aN.jsx)("p",{className:"text-slate-700 text-[10px] mt-1",children:"Made with ❤️ in Thailand"})]})]})},"support")]})]})},E1=({isOpen:a,onClose:b,cart:c,onRemoveItem:d,onCheckout:e,currencySymbol:f})=>{let g=(0,aO.useMemo)(()=>c.reduce((a,b)=>a+b.price,0),[c]);return a?(0,aN.jsxs)("div",{className:"fixed inset-0 z-[60] flex justify-end",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fadeIn",onClick:b}),(0,aN.jsxs)("div",{className:"relative w-full max-w-sm bg-[#0f172a] h-full shadow-2xl border-l border-white/10 flex flex-col animate-slideLeft",children:[(0,aN.jsxs)("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-brand-darker/50",children:[(0,aN.jsxs)("h2",{className:"text-xl font-black italic skew-x-[-10deg] text-white uppercase tracking-tight",children:["Your Cart ",(0,aN.jsxs)("span",{className:"text-brand-cyan text-sm not-italic ml-2",children:["(",c.length,")"]})]}),(0,aN.jsx)("button",{onClick:b,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white/10 transition-colors",children:(0,aN.jsx)("i",{className:"fa-solid fa-xmark text-slate-400"})})]}),(0,aN.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:0===c.length?(0,aN.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 opacity-50",children:[(0,aN.jsx)("i",{className:"fa-solid fa-cart-shopping text-4xl mb-4"}),(0,aN.jsx)("p",{className:"text-xs font-black uppercase tracking-widest",children:"Cart is Empty"})]}):c.map(a=>(0,aN.jsxs)("div",{className:"bg-white/5 p-3 rounded-xl flex gap-3 border border-white/5 relative group",children:[(0,aN.jsx)("div",{className:"w-16 h-20 bg-brand-darker rounded-lg overflow-hidden flex-shrink-0 border border-white/5",children:(0,aN.jsx)("img",{src:a.card.imageUrl,className:"w-full h-full object-contain",alt:a.card.name})}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0 py-1",children:[(0,aN.jsx)("h4",{className:"text-white text-sm font-bold truncate pr-6",children:a.card.name}),(0,aN.jsxs)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:[a.condition," • ",a.sellerName]}),(0,aN.jsxs)("p",{className:"text-brand-cyan font-black",children:[f,a.price.toLocaleString()]})]}),(0,aN.jsx)("button",{onClick:()=>d(a.id),className:"absolute top-2 right-2 text-slate-600 hover:text-brand-red transition-colors p-1",children:(0,aN.jsx)("i",{className:"fa-solid fa-trash-can text-xs"})})]},a.id))}),(0,aN.jsxs)("div",{className:"p-6 bg-brand-darker/80 border-t border-white/5 backdrop-blur-xl",children:[(0,aN.jsxs)("div",{className:"flex justify-between items-end mb-4",children:[(0,aN.jsx)("span",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Total"}),(0,aN.jsxs)("span",{className:"text-2xl font-black text-white",children:[f,g.toLocaleString()]})]}),(0,aN.jsxs)("button",{onClick:e,disabled:0===c.length,className:"w-full h-14 bg-brand-green text-brand-darker font-black uppercase tracking-[0.2em] rounded-xl shadow-lg shadow-brand-green/20 hover:bg-white transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:["Checkout ",(0,aN.jsx)("i",{className:"fa-solid fa-arrow-right"})]})]})]})]}):null},E2=({candidates:a,onSelect:b,onCancel:c})=>(0,aN.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-[#121212]/95 backdrop-blur-md animate-fadeIn",children:(0,aN.jsxs)("div",{className:"w-full max-w-[400px] glass rounded-[2.5rem] border-white/10 p-8 flex flex-col max-h-[80vh]",children:[(0,aN.jsxs)("div",{className:"text-center mb-6",children:[(0,aN.jsx)("div",{className:"w-12 h-12 rounded-full bg-brand-cyan/10 flex items-center justify-center mx-auto mb-4",children:(0,aN.jsx)("i",{className:"fa-solid fa-question text-brand-cyan"})}),(0,aN.jsx)("h3",{className:"text-xl font-black text-white tracking-tight uppercase italic skew-x-[-10deg]",children:"Multiple Matches"}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"Select the exact version you scanned"})]}),(0,aN.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 scrollbar-hide",children:a.map(a=>(0,aN.jsxs)("button",{onClick:()=>b(a),className:"w-full glass p-4 rounded-3xl border-white/5 flex items-center gap-4 text-left active:scale-95 transition-all group",children:[(0,aN.jsx)("div",{className:"w-14 h-20 rounded-xl overflow-hidden bg-white/5 flex-shrink-0",children:(0,aN.jsx)("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-contain"})}),(0,aN.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,aN.jsx)("p",{className:"text-white text-sm font-bold truncate group-hover:text-brand-cyan",children:a.name}),(0,aN.jsx)("p",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest mt-0.5",children:a.set}),(0,aN.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,aN.jsx)("span",{className:"text-[8px] bg-white/10 text-slate-400 px-2 py-0.5 rounded-full",children:a.rarity}),(0,aN.jsxs)("span",{className:"text-[8px] text-slate-600",children:["#",a.number]})]})]})]},a.id))}),(0,aN.jsx)("button",{onClick:c,className:"mt-6 w-full h-12 rounded-2xl glass border-white/10 text-slate-500 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all hover:text-white",children:"Cancel Scan"})]})});var E3=c(32286);let E4=({isOpen:a,onClose:b,amount:c,currency:d,items:e,onPaymentSuccess:f,onPaymentFailed:g})=>{let[h,i]=(0,aO.useState)("promptpay"),[j,k]=(0,aO.useState)(!1),[l,m]=(0,aO.useState)(null),[n,o]=(0,aO.useState)({name:"",number:"",expiration_month:"",expiration_year:"",security_code:""}),p="THB"===d?(.028*c).toFixed(2):c.toFixed(2);(0,aO.useEffect)(()=>{"undefined"!=typeof Omise&&Omise.setPublicKey("pkey_test_66dszputjckcbp2srfs")},[a]);let q=async()=>{k(!0),m(null);try{if("undefined"==typeof Omise)throw Error("Omise.js not loaded");if("promptpay"===h)Omise.createSource("promptpay",{amount:100*c,currency:d},(a,b)=>{200===a?r(b.id,"promptpay",c):(k(!1),g(b.message))});else if("card"===h){let a={name:n.name,number:n.number,expiration_month:n.expiration_month,expiration_year:n.expiration_year,security_code:n.security_code};Omise.createToken("card",a,(a,b)=>{200===a?r(b.id,"card",c):(k(!1),g(b.message))})}}catch(a){k(!1),g(a.message)}},r=async(a,b,c)=>{try{let h={amount:c,currency:d,metadata:{items:JSON.stringify(e.map(a=>a.id))}};"card"===b?h.token=a:h.source=a;let i=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),j=await i.json();if(!i.ok)throw Error(j.error||"Payment failed");if("promptpay"===b)if(j.source?.scannable_code?.image?.download_uri)m(j.source.scannable_code.image.download_uri),k(!1);else if("successful"===j.status||"pending"===j.status)m(j.source?.scannable_code?.image?.download_uri),k(!1);else throw Error("Could not generate QR code");else"successful"===j.status?f():j.authorize_uri?window.location.href=j.authorize_uri:g("Payment not successful: "+j.status),k(!1)}catch(a){k(!1),g(a.message)}},s=async()=>{try{let a=await fetch("/api/paypal/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(p),currency:"USD"})}),b=await a.json();if(b.error)throw Error(b.error);return b.orderID}catch(a){throw g(a.message),a}},t=async a=>{try{k(!0);let b=await fetch("/api/paypal/capture-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderID:a.orderID})}),c=await b.json();c.success?f():g(c.message||"Payment capture failed")}catch(a){g(a.message)}finally{k(!1)}};return a?(0,aN.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-md p-4 animate-fadeIn",children:(0,aN.jsxs)("div",{className:"bg-[#0f172a] w-full max-w-sm rounded-[2rem] border border-white/10 overflow-hidden shadow-2xl",children:[(0,aN.jsxs)("div",{className:"bg-gradient-to-r from-brand-darker to-[#1e293b] p-6 border-b border-white/5 flex justify-between items-center",children:[(0,aN.jsxs)("div",{children:[(0,aN.jsx)("h3",{className:"text-white text-lg font-black italic skew-x-[-10deg]",children:"Secure Checkout"}),(0,aN.jsx)("p",{className:"text-[10px] text-brand-green font-bold uppercase tracking-widest",children:"Encrypted Payment"})]}),(0,aN.jsx)("button",{onClick:b,className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 text-slate-400",children:(0,aN.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,aN.jsxs)("div",{className:"p-6",children:[(0,aN.jsxs)("div",{className:"mb-6 flex justify-between items-center bg-white/5 rounded-xl p-3",children:[(0,aN.jsx)("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider",children:"Total Amount"}),(0,aN.jsxs)("div",{className:"text-right",children:[(0,aN.jsxs)("span",{className:"text-2xl font-black text-white",children:["THB"===d?"฿":"$",c.toLocaleString()]}),"paypal"===h&&"THB"===d&&(0,aN.jsxs)("p",{className:"text-[10px] text-slate-500",children:["≈ $",p," USD"]})]})]}),l?(0,aN.jsxs)("div",{className:"text-center space-y-4 animate-fadeIn",children:[(0,aN.jsx)("div",{className:"bg-white p-4 rounded-xl inline-block mx-auto",children:(0,aN.jsx)("img",{src:l,className:"w-48 h-48 object-contain"})}),(0,aN.jsx)("p",{className:"text-slate-400 text-xs",children:"Scan with any Thai Banking App"}),(0,aN.jsx)("button",{onClick:f,className:"w-full h-12 bg-brand-green text-brand-darker font-black rounded-xl uppercase tracking-widest hover:bg-white transition-colors",children:"Simulate Payment Success (Test)"}),(0,aN.jsx)("button",{onClick:()=>m(null),className:"text-xs text-slate-500 underline",children:"Cancel"})]}):(0,aN.jsxs)(aN.Fragment,{children:[(0,aN.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,aN.jsxs)("button",{onClick:()=>i("promptpay"),className:`flex-1 py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ${"promptpay"===h?"bg-brand-cyan/10 border-brand-cyan text-brand-cyan":"bg-white/5 border-transparent text-slate-500"}`,children:[(0,aN.jsx)("i",{className:"fa-solid fa-qrcode text-xl leading-none"}),(0,aN.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"PromptPay"})]}),(0,aN.jsxs)("button",{onClick:()=>i("card"),className:`flex-1 py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ${"card"===h?"bg-brand-purple/10 border-brand-purple text-brand-purple":"bg-white/5 border-transparent text-slate-500"}`,children:[(0,aN.jsx)("i",{className:"fa-regular fa-credit-card text-xl leading-none"}),(0,aN.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Card"})]}),(0,aN.jsxs)("button",{onClick:()=>i("paypal"),className:`flex-1 py-3 rounded-xl border flex flex-col items-center gap-1 transition-all ${"paypal"===h?"bg-[#0070ba]/10 border-[#0070ba] text-[#0070ba]":"bg-white/5 border-transparent text-slate-500"}`,children:[(0,aN.jsx)("i",{className:"fa-brands fa-paypal text-xl leading-none"}),(0,aN.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"PayPal"})]})]}),"card"===h?(0,aN.jsxs)("div",{className:"space-y-3",children:[(0,aN.jsx)("input",{type:"text",placeholder:"Card Name",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:n.name,onChange:a=>o({...n,name:a.target.value})}),(0,aN.jsx)("input",{type:"text",placeholder:"Card Number",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:n.number,onChange:a=>o({...n,number:a.target.value})}),(0,aN.jsxs)("div",{className:"flex gap-3",children:[(0,aN.jsx)("input",{type:"text",placeholder:"MM",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:n.expiration_month,onChange:a=>o({...n,expiration_month:a.target.value})}),(0,aN.jsx)("input",{type:"text",placeholder:"YYYY",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:n.expiration_year,onChange:a=>o({...n,expiration_year:a.target.value})}),(0,aN.jsx)("input",{type:"text",placeholder:"CVC",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-brand-purple outline-none",value:n.security_code,onChange:a=>o({...n,security_code:a.target.value})})]})]}):"paypal"===h?(0,aN.jsxs)("div",{className:"space-y-4",children:[(0,aN.jsxs)("div",{className:"text-center py-4 bg-white/5 rounded-2xl border border-dashed border-white/10",children:[(0,aN.jsx)("div",{className:"w-16 h-10 bg-white rounded-lg mx-auto mb-2 flex items-center justify-center",children:(0,aN.jsx)("i",{className:"fa-brands fa-paypal text-[#0070ba] text-2xl"})}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-400",children:"Pay securely with PayPal"})]}),(0,aN.jsx)("div",{className:"paypal-button-container",children:(0,aN.jsx)(E3.JV,{style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal",height:45},createOrder:s,onApprove:t,onError:a=>{console.error("PayPal Error:",a),g("PayPal payment failed")},onCancel:()=>{console.log("PayPal payment cancelled")}})})]}):(0,aN.jsxs)("div",{className:"text-center py-4 bg-white/5 rounded-2xl border border-dashed border-white/10",children:[(0,aN.jsx)("div",{className:"w-12 h-12 bg-white rounded-lg mx-auto mb-2 p-1",children:(0,aN.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/c/c5/PromptPay-logo.png",className:"w-full h-full object-contain"})}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-400",children:"Scan QR Code to Pay instantly"})]}),"paypal"!==h&&(0,aN.jsx)("button",{onClick:q,disabled:j,className:`mt-6 w-full h-12 rounded-xl font-black uppercase tracking-[0.2em] text-xs transition-all ${j?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-brand-cyan text-brand-darker hover:bg-white hover:scale-[1.02]"}`,children:j?"Processing...":`Pay ${"THB"===d?"฿":"$"}${c.toLocaleString()}`})]})]})]})}):null},E5=({listing:a,onClose:b,onBuyNow:c,onAddToCart:d,onSellerClick:e,currency:f="THB",exchangeRate:g=1})=>{let h=a.card_data;return(0,aN.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-brand-darker animate-slideUp",children:[(0,aN.jsxs)("div",{className:"px-6 py-6 flex justify-between items-center sticky top-0 z-10 bg-brand-darker/80 backdrop-blur-lg border-b border-white/5",children:[(0,aN.jsx)("button",{onClick:b,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-white/5 active:bg-brand-cyan active:text-brand-darker transition-all border border-white/5",children:(0,aN.jsx)("i",{className:"fa-solid fa-chevron-left text-sm"})}),(0,aN.jsxs)("div",{className:"text-center",children:[(0,aN.jsx)("span",{className:"font-black italic skew-x-[-10deg] uppercase tracking-wider text-xs text-brand-green block",children:"Listing Details"}),(0,aN.jsx)("span",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:h.number})]}),(0,aN.jsx)("div",{className:"w-10"})," "]}),(0,aN.jsxs)("div",{className:"flex-1 overflow-y-auto pb-40 scrollbar-hide",children:[(0,aN.jsxs)("div",{className:"p-8 flex justify-center relative",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-brand-green/5 to-transparent pointer-events-none"}),(0,aN.jsx)("img",{src:h.imageUrl,alt:h.name,className:"w-full max-w-[280px] drop-shadow-[0_25px_50px_rgba(0,0,0,0.8)] z-10"})]}),(0,aN.jsxs)("div",{className:"px-6 space-y-6",children:[(0,aN.jsxs)("div",{className:"text-center",children:[(0,aN.jsx)("h1",{className:"text-2xl font-black text-white leading-none tracking-tight mb-2",children:h.name}),(0,aN.jsxs)("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:[h.set," • ",h.rarity]})]}),(0,aN.jsxs)("div",{className:"glass p-6 rounded-3xl border border-brand-green/20 space-y-4",children:[(0,aN.jsxs)("div",{className:"flex justify-between items-center border-b border-white/5 pb-4",children:[(0,aN.jsxs)("div",{children:[(0,aN.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Asking Price"}),(0,aN.jsxs)("p",{className:"text-4xl font-black text-brand-cyan",children:[aX[f]||f," ",Math.round(a.price*g).toLocaleString()]})]}),(0,aN.jsx)("div",{className:"text-right",children:(0,aN.jsx)("span",{className:"bg-brand-green/20 text-brand-green px-3 py-1 rounded-lg text-xs font-black uppercase tracking-widest border border-brand-green/20",children:a.condition})})]}),(0,aN.jsxs)("div",{className:"flex items-center gap-4 pt-2 cursor-pointer group",onClick:()=>e(a.seller),children:[(0,aN.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-slate-800 overflow-hidden border border-white/10 group-hover:border-brand-cyan transition-colors relative z-10",children:(0,aN.jsx)("img",{src:a.seller.avatar_url||"https://api.dicebear.com/7.x/avataaars/svg?seed=seller",className:"w-full h-full object-cover"})}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest group-hover:text-brand-cyan transition-colors",children:"Seller"}),(0,aN.jsx)("p",{className:"text-white font-bold group-hover:text-brand-cyan transition-colors",children:a.seller.display_name}),(0,aN.jsxs)("div",{className:"flex text-[10px] text-yellow-500 gap-0.5",children:[(0,aN.jsx)("i",{className:"fa-solid fa-star"}),(0,aN.jsx)("i",{className:"fa-solid fa-star"}),(0,aN.jsx)("i",{className:"fa-solid fa-star"}),(0,aN.jsx)("i",{className:"fa-solid fa-star"}),(0,aN.jsx)("i",{className:"fa-solid fa-star-half-stroke"}),(0,aN.jsx)("span",{className:"text-slate-500 ml-1",children:"(4.8)"})]})]})]}),(0,aN.jsx)("div",{className:"bg-white/5 p-3 rounded-xl",children:(0,aN.jsx)("p",{className:"text-xs text-slate-400 italic",children:'"Pack fresh, immediately sleeved. Will ship in top loader."'})})]})]})]}),(0,aN.jsxs)("div",{className:"fixed bottom-0 left-0 w-full p-6 bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 flex gap-3 z-50",children:[(0,aN.jsxs)("button",{onClick:d,className:"flex-1 h-14 bg-white/5 border border-white/10 text-white hover:bg-white/10 font-black text-[10px] tracking-[0.2em] rounded-xl active:scale-95 transition-all uppercase flex items-center justify-center gap-2 group",children:[(0,aN.jsx)("i",{className:"fa-solid fa-cart-plus text-brand-cyan group-hover:scale-110 transition-transform text-lg"}),"ADD TO CART"]}),(0,aN.jsxs)("button",{onClick:c,className:"flex-[2] h-14 bg-brand-green text-brand-darker font-black text-[10px] tracking-[0.2em] rounded-xl shadow-lg shadow-brand-green/20 active:scale-95 transition-all uppercase flex items-center justify-center gap-2",children:["BUY NOW",(0,aN.jsx)("i",{className:"fa-solid fa-arrow-right"})]})]})]})};var E6=c(7423),E7=c(29021);let E8=require("fs/promises");var E9=c(57075);let Fa=require("node:stream/promises");c(7363),c(26802),c(92910);var Fb=c(77740);c(35366);var Fc=c(33873);class Fd{}function Fe(a,b){return a.replace(/\{([^}]+)\}/g,(a,c)=>{if(Object.prototype.hasOwnProperty.call(b,c)){let a=b[c];return null!=a?String(a):""}throw Error(`Key '${c}' not found in valueMap.`)})}function Ff(a,b,c){for(let d=0;d<b.length-1;d++){let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))if(Array.isArray(c))a[f]=Array.from({length:c.length},()=>({}));else throw Error(`Value must be a list given an array path ${e}`);if(Array.isArray(a[f])){let e=a[f];if(Array.isArray(c))for(let a=0;a<e.length;a++)Ff(e[a],b.slice(d+1),c[a]);else for(let a of e)Ff(a,b.slice(d+1),c)}return}if(e.endsWith("[0]")){let f=e.slice(0,-3);f in a||(a[f]=[{}]),Ff(a[f][0],b.slice(d+1),c);return}a[e]&&"object"==typeof a[e]||(a[e]={}),a=a[e]}let d=b[b.length-1],e=a[d];if(void 0!==e){if(!c||"object"==typeof c&&0===Object.keys(c).length||c===e)return;if("object"==typeof e&&"object"==typeof c&&null!==e&&null!==c)Object.assign(e,c);else throw Error(`Cannot set value for an existing key. Key: ${d}`)}else"_self"!==d||"object"!=typeof c||null===c||Array.isArray(c)?a[d]=c:Object.assign(a,c)}function Fg(a,b,c){try{if(1===b.length&&"_self"===b[0])return a;for(let d=0;d<b.length;d++){if("object"!=typeof a||null===a)return c;let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))return c;{let e=a[f];if(!Array.isArray(e))return c;return e.map(a=>Fg(a,b.slice(d+1),c))}}a=a[e]}return a}catch(a){if(a instanceof TypeError)return c;throw a}}function Fh(a){if("string"!=typeof a)throw Error("fromImageBytes must be a string");return a}function Fi(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["metadata"]);null!=d&&Ff(b,["metadata"],d);let e=Fg(a,["done"]);null!=e&&Ff(b,["done"],e);let f=Fg(a,["error"]);null!=f&&Ff(b,["error"],f);let g=Fg(a,["response"]);return null!=g&&Ff(b,["response"],function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["parent"]);null!=d&&Ff(b,["parent"],d);let e=Fg(a,["documentName"]);return null!=e&&Ff(b,["documentName"],e),b}(g)),b}!function(a){a.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",a.OUTCOME_OK="OUTCOME_OK",a.OUTCOME_FAILED="OUTCOME_FAILED",a.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(I||(I={})),function(a){a.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",a.PYTHON="PYTHON"}(J||(J={})),function(a){a.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",a.SILENT="SILENT",a.WHEN_IDLE="WHEN_IDLE",a.INTERRUPT="INTERRUPT"}(K||(K={})),function(a){a.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",a.STRING="STRING",a.NUMBER="NUMBER",a.INTEGER="INTEGER",a.BOOLEAN="BOOLEAN",a.ARRAY="ARRAY",a.OBJECT="OBJECT",a.NULL="NULL"}(L||(L={})),function(a){a.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",a.SIMPLE_SEARCH="SIMPLE_SEARCH",a.ELASTIC_SEARCH="ELASTIC_SEARCH"}(M||(M={})),function(a){a.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",a.NO_AUTH="NO_AUTH",a.API_KEY_AUTH="API_KEY_AUTH",a.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",a.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",a.OAUTH="OAUTH",a.OIDC_AUTH="OIDC_AUTH"}(N||(N={})),function(a){a.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",a.HTTP_IN_QUERY="HTTP_IN_QUERY",a.HTTP_IN_HEADER="HTTP_IN_HEADER",a.HTTP_IN_PATH="HTTP_IN_PATH",a.HTTP_IN_BODY="HTTP_IN_BODY",a.HTTP_IN_COOKIE="HTTP_IN_COOKIE"}(O||(O={})),function(a){a.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",a.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",a.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",a.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"}(P||(P={})),function(a){a.UNSPECIFIED="UNSPECIFIED",a.BLOCKING="BLOCKING",a.NON_BLOCKING="NON_BLOCKING"}(Q||(Q={})),function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"}(R||(R={})),function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.AUTO="AUTO",a.ANY="ANY",a.NONE="NONE",a.VALIDATED="VALIDATED"}(S||(S={})),function(a){a.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH",a.MINIMAL="MINIMAL"}(T||(T={})),function(a){a.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",a.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",a.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",a.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",a.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"}(U||(U={})),function(a){a.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",a.SEVERITY="SEVERITY",a.PROBABILITY="PROBABILITY"}(V||(V={})),function(a){a.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE",a.OFF="OFF"}(W||(W={})),function(a){a.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.LANGUAGE="LANGUAGE",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.SPII="SPII",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.IMAGE_SAFETY="IMAGE_SAFETY",a.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",a.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",a.NO_IMAGE="NO_IMAGE",a.IMAGE_RECITATION="IMAGE_RECITATION",a.IMAGE_OTHER="IMAGE_OTHER"}(X||(X={})),function(a){a.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH"}(Y||(Y={})),function(a){a.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",a.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",a.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",a.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",a.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(Z||(Z={})),function(a){a.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",a.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",a.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",a.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",a.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}($||($={})),function(a){a.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.IMAGE_SAFETY="IMAGE_SAFETY",a.MODEL_ARMOR="MODEL_ARMOR",a.JAILBREAK="JAILBREAK"}(_||(_={})),function(a){a.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",a.ON_DEMAND="ON_DEMAND",a.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(aa||(aa={})),function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.AUDIO="AUDIO"}(ab||(ab={})),function(a){a.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",a.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",a.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",a.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(ac||(ac={})),function(a){a.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",a.TUNING_MODE_FULL="TUNING_MODE_FULL",a.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(ad||(ad={})),function(a){a.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",a.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",a.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",a.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",a.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",a.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",a.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(ae||(ae={})),function(a){a.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",a.JOB_STATE_QUEUED="JOB_STATE_QUEUED",a.JOB_STATE_PENDING="JOB_STATE_PENDING",a.JOB_STATE_RUNNING="JOB_STATE_RUNNING",a.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",a.JOB_STATE_FAILED="JOB_STATE_FAILED",a.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",a.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",a.JOB_STATE_PAUSED="JOB_STATE_PAUSED",a.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",a.JOB_STATE_UPDATING="JOB_STATE_UPDATING",a.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(af||(af={})),function(a){a.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",a.TUNING_TASK_I2V="TUNING_TASK_I2V",a.TUNING_TASK_T2V="TUNING_TASK_T2V",a.TUNING_TASK_R2V="TUNING_TASK_R2V"}(ag||(ag={})),function(a){a.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",a.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",a.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",a.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",a.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"}(ah||(ah={})),(ai||(ai={})).COLLECTION="COLLECTION",function(a){a.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",a.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",a.BALANCED="BALANCED",a.PRIORITIZE_COST="PRIORITIZE_COST"}(aj||(aj={})),function(a){a.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",a.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}(ak||(ak={})),function(a){a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE"}(al||(al={})),function(a){a.DONT_ALLOW="DONT_ALLOW",a.ALLOW_ADULT="ALLOW_ADULT",a.ALLOW_ALL="ALLOW_ALL"}(am||(am={})),function(a){a.auto="auto",a.en="en",a.ja="ja",a.ko="ko",a.hi="hi",a.zh="zh",a.pt="pt",a.es="es"}(an||(an={})),function(a){a.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",a.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",a.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",a.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",a.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(ao||(ao={})),function(a){a.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",a.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",a.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",a.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(ap||(ap={})),function(a){a.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",a.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",a.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",a.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(aq||(aq={})),function(a){a.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",a.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",a.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",a.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",a.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",a.EDIT_MODE_STYLE="EDIT_MODE_STYLE",a.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",a.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(ar||(ar={})),function(a){a.FOREGROUND="FOREGROUND",a.BACKGROUND="BACKGROUND",a.PROMPT="PROMPT",a.SEMANTIC="SEMANTIC",a.INTERACTIVE="INTERACTIVE"}(as||(as={})),function(a){a.ASSET="ASSET",a.STYLE="STYLE"}(at||(at={})),function(a){a.INSERT="INSERT",a.REMOVE="REMOVE",a.REMOVE_STATIC="REMOVE_STATIC",a.OUTPAINT="OUTPAINT"}(au||(au={})),function(a){a.OPTIMIZED="OPTIMIZED",a.LOSSLESS="LOSSLESS"}(av||(av={})),function(a){a.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",a.PREFERENCE_TUNING="PREFERENCE_TUNING"}(aw||(aw={})),function(a){a.STATE_UNSPECIFIED="STATE_UNSPECIFIED",a.STATE_PENDING="STATE_PENDING",a.STATE_ACTIVE="STATE_ACTIVE",a.STATE_FAILED="STATE_FAILED"}(ax||(ax={})),function(a){a.STATE_UNSPECIFIED="STATE_UNSPECIFIED",a.PROCESSING="PROCESSING",a.ACTIVE="ACTIVE",a.FAILED="FAILED"}(ay||(ay={})),function(a){a.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",a.UPLOADED="UPLOADED",a.GENERATED="GENERATED",a.REGISTERED="REGISTERED"}(az||(az={})),function(a){a.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.RESPONSE_REJECTED="RESPONSE_REJECTED",a.NEED_MORE_INPUT="NEED_MORE_INPUT"}(aA||(aA={})),function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.VIDEO="VIDEO",a.AUDIO="AUDIO",a.DOCUMENT="DOCUMENT"}(aB||(aB={})),function(a){a.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",a.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",a.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"}(aC||(aC={})),function(a){a.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",a.ACTIVITY_START="ACTIVITY_START",a.ACTIVITY_END="ACTIVITY_END"}(aD||(aD={})),function(a){a.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",a.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",a.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(aE||(aE={})),function(a){a.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",a.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",a.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(aF||(aF={})),function(a){a.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",a.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",a.NO_INTERRUPTION="NO_INTERRUPTION"}(aG||(aG={})),function(a){a.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",a.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",a.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(aH||(aH={})),function(a){a.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",a.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",a.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",a.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",a.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",a.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",a.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",a.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",a.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",a.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",a.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",a.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",a.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(aI||(aI={})),function(a){a.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",a.QUALITY="QUALITY",a.DIVERSITY="DIVERSITY",a.VOCALIZATION="VOCALIZATION"}(aJ||(aJ={})),function(a){a.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",a.PLAY="PLAY",a.PAUSE="PAUSE",a.STOP="STOP",a.RESET_CONTEXT="RESET_CONTEXT"}(aK||(aK={}));class Fj{constructor(a){let b={};for(let c of a.headers.entries())b[c[0]]=c[1];this.headers=b,this.responseInternal=a}json(){return this.responseInternal.json()}}class Fk{get text(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let i="",j=!1,k=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"text"!==b&&"thought"!==b&&"thoughtSignature"!==b&&(null!==c||void 0!==c)&&k.push(b);if("string"==typeof a.text){if("boolean"==typeof a.thought&&a.thought)continue;j=!0,i+=a.text}}return k.length>0&&console.warn(`there are non-text parts ${k} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),j?i:void 0}get data(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let i="",j=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"inlineData"!==b&&(null!==c||void 0!==c)&&j.push(b);a.inlineData&&"string"==typeof a.inlineData.data&&(i+=atob(a.inlineData.data))}return j.length>0&&console.warn(`there are non-data parts ${j} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}get functionCalls(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let i=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.functionCall).map(a=>a.functionCall).filter(a=>void 0!==a);if((null==i?void 0:i.length)!==0)return i}get executableCode(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.executableCode).map(a=>a.executableCode).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.code}get codeExecutionResult(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.codeExecutionResult).map(a=>a.codeExecutionResult).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.output}}class Fl{}class Fm{}class Fn{}class Fo{}class Fp{}class Fq{}class Fr{}class Fs{}class Ft{}class Fu{}class Fv{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new Fv;return Object.assign(c,b?function(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["metadata"]);null!=d&&Ff(b,["metadata"],d);let e=Fg(a,["done"]);null!=e&&Ff(b,["done"],e);let f=Fg(a,["error"]);null!=f&&Ff(b,["error"],f);let g=Fg(a,["response"]);return null!=g&&Ff(b,["response"],function(a){let b={},c=Fg(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["_self"]);return null!=c&&Ff(b,["video"],function(a){let b={},c=Fg(a,["gcsUri"]);null!=c&&Ff(b,["uri"],c);let d=Fg(a,["bytesBase64Encoded"]);null!=d&&Ff(b,["videoBytes"],Fh(d));let e=Fg(a,["mimeType"]);return null!=e&&Ff(b,["mimeType"],e),b}(c)),b})(a))),Ff(b,["generatedVideos"],a)}let d=Fg(a,["raiMediaFilteredCount"]);null!=d&&Ff(b,["raiMediaFilteredCount"],d);let e=Fg(a,["raiMediaFilteredReasons"]);return null!=e&&Ff(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a):function(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["metadata"]);null!=d&&Ff(b,["metadata"],d);let e=Fg(a,["done"]);null!=e&&Ff(b,["done"],e);let f=Fg(a,["error"]);null!=f&&Ff(b,["error"],f);let g=Fg(a,["response","generateVideoResponse"]);return null!=g&&Ff(b,["response"],function(a){let b={},c=Fg(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["video"]);return null!=c&&Ff(b,["video"],function(a){let b={},c=Fg(a,["uri"]);null!=c&&Ff(b,["uri"],c);let d=Fg(a,["encodedVideo"]);null!=d&&Ff(b,["videoBytes"],Fh(d));let e=Fg(a,["encoding"]);return null!=e&&Ff(b,["mimeType"],e),b}(c)),b})(a))),Ff(b,["generatedVideos"],a)}let d=Fg(a,["raiMediaFilteredCount"]);null!=d&&Ff(b,["raiMediaFilteredCount"],d);let e=Fg(a,["raiMediaFilteredReasons"]);return null!=e&&Ff(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a)),c}}class Fw{}class Fx{}class Fy{}class Fz{}class FA{}class FB{}class FC{}class FD{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new FD;return Object.assign(c,function(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["metadata"]);null!=d&&Ff(b,["metadata"],d);let e=Fg(a,["done"]);null!=e&&Ff(b,["done"],e);let f=Fg(a,["error"]);null!=f&&Ff(b,["error"],f);let g=Fg(a,["response"]);return null!=g&&Ff(b,["response"],function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["parent"]);null!=d&&Ff(b,["parent"],d);let e=Fg(a,["documentName"]);return null!=e&&Ff(b,["documentName"],e),b}(g)),b}(a)),c}}class FE{}class FF{}class FG{}class FH{}class FI{get text(){var a,b,c;let d="",e=!1,f=[];for(let g of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(g))"text"!==a&&"thought"!==a&&null!==b&&f.push(a);if("string"==typeof g.text){if("boolean"==typeof g.thought&&g.thought)continue;e=!0,d+=g.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),e?d:void 0}get data(){var a,b,c;let d="",e=[];for(let f of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(f))"inlineData"!==a&&null!==b&&e.push(a);f.inlineData&&"string"==typeof f.inlineData.data&&(d+=atob(f.inlineData.data))}return e.length>0&&console.warn(`there are non-data parts ${e} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}}class FJ{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class FK{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new FK;return Object.assign(c,Fi(a)),c}}function FL(a,b){if(!b||"string"!=typeof b)throw Error("model is required and must be a string");if(b.includes("..")||b.includes("?")||b.includes("&"))throw Error("invalid model parameter");if(a.isVertexAI())if(b.startsWith("publishers/")||b.startsWith("projects/")||b.startsWith("models/"))return b;else{if(!(b.indexOf("/")>=0))return`publishers/google/models/${b}`;let a=b.split("/",2);return`publishers/${a[0]}/models/${a[1]}`}return b.startsWith("models/")||b.startsWith("tunedModels/")?b:`models/${b}`}function FM(a,b){let c=FL(a,b);return c?c.startsWith("publishers/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/${c}`:c.startsWith("models/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/publishers/google/${c}`:c:""}function FN(a){return Array.isArray(a)?a.map(a=>FO(a)):[FO(a)]}function FO(a){if("object"==typeof a&&null!==a)return a;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof a}`)}function FP(a){let b=FO(a);if(b.mimeType&&b.mimeType.startsWith("image/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function FQ(a){let b=FO(a);if(b.mimeType&&b.mimeType.startsWith("audio/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function FR(a){if(null==a)throw Error("PartUnion is required");if("object"==typeof a)return a;if("string"==typeof a)return{text:a};throw Error(`Unsupported part type: ${typeof a}`)}function FS(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("PartListUnion is required");return Array.isArray(a)?a.map(a=>FR(a)):[FR(a)]}function FT(a){return null!=a&&"object"==typeof a&&"parts"in a&&Array.isArray(a.parts)}function FU(a){return null!=a&&"object"==typeof a&&"functionCall"in a}function FV(a){return null!=a&&"object"==typeof a&&"functionResponse"in a}function FW(a){if(null==a)throw Error("ContentUnion is required");return FT(a)?a:{role:"user",parts:FS(a)}}function FX(a,b){if(!b)return[];if(a.isVertexAI()&&Array.isArray(b))return b.flatMap(a=>{let b=FW(a);return b.parts&&b.parts.length>0&&void 0!==b.parts[0].text?[b.parts[0].text]:[]});if(a.isVertexAI()){let a=FW(b);return a.parts&&a.parts.length>0&&void 0!==a.parts[0].text?[a.parts[0].text]:[]}return Array.isArray(b)?b.map(a=>FW(a)):[FW(b)]}function FY(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("contents are required");if(!Array.isArray(a)){if(FU(a)||FV(a))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[FW(a)]}let b=[],c=[],d=FT(a[0]);for(let e of a){let a=FT(e);if(a!=d)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)b.push(e);else if(FU(e)||FV(e))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else c.push(e)}return d||b.push({role:"user",parts:FS(c)}),b}function FZ(a){let b={},c=["items"],d=["anyOf"],e=["properties"];if(a.type&&a.anyOf)throw Error("type and anyOf cannot be both populated.");let f=a.anyOf;for(let[g,h]of(null!=f&&2==f.length&&("null"===f[0].type?(b.nullable=!0,a=f[1]):"null"===f[1].type&&(b.nullable=!0,a=f[0])),a.type instanceof Array&&function(a,b){a.includes("null")&&(b.nullable=!0);let c=a.filter(a=>"null"!==a);if(1===c.length)b.type=Object.values(L).includes(c[0].toUpperCase())?c[0].toUpperCase():L.TYPE_UNSPECIFIED;else for(let a of(b.anyOf=[],c))b.anyOf.push({type:Object.values(L).includes(a.toUpperCase())?a.toUpperCase():L.TYPE_UNSPECIFIED})}(a.type,b),Object.entries(a)))if(null!=h)if("type"==g){if("null"===h)throw Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;b.type=Object.values(L).includes(h.toUpperCase())?h.toUpperCase():L.TYPE_UNSPECIFIED}else if(c.includes(g))b[g]=FZ(h);else if(d.includes(g)){let a=[];for(let c of h){if("null"==c.type){b.nullable=!0;continue}a.push(FZ(c))}b[g]=a}else if(e.includes(g)){let a={};for(let[b,c]of Object.entries(h))a[b]=FZ(c);b[g]=a}else{if("additionalProperties"===g)continue;b[g]=h}return b}function F$(a){if("object"==typeof a)return a;if("string"==typeof a)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:a}}};throw Error(`Unsupported speechConfig type: ${typeof a}`)}function F_(a){if("multiSpeakerVoiceConfig"in a)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return a}function F0(a){if(a.functionDeclarations)for(let b of a.functionDeclarations)b.parameters&&(Object.keys(b.parameters).includes("$schema")?b.parametersJsonSchema||(b.parametersJsonSchema=b.parameters,delete b.parameters):b.parameters=FZ(b.parameters)),b.response&&(Object.keys(b.response).includes("$schema")?b.responseJsonSchema||(b.responseJsonSchema=b.response,delete b.response):b.response=FZ(b.response));return a}function F1(a){if(null==a)throw Error("tools is required");if(!Array.isArray(a))throw Error("tools is required and must be an array of Tools");let b=[];for(let c of a)b.push(c);return b}function F2(a,b){if("string"!=typeof b)throw Error("name must be a string");return function(a,b,c,d=1){let e=!b.startsWith(`${c}/`)&&b.split("/").length===d;if(a.isVertexAI())if(b.startsWith("projects/"))return b;else if(b.startsWith("locations/"))return`projects/${a.getProject()}/${b}`;else if(b.startsWith(`${c}/`))return`projects/${a.getProject()}/locations/${a.getLocation()}/${b}`;else if(e)return`projects/${a.getProject()}/locations/${a.getLocation()}/${c}/${b}`;else return b;return e?`${c}/${b}`:b}(a,b,"cachedContents")}function F3(a){switch(a){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return a}}function F4(a){return null!=a&&"object"==typeof a&&"video"in a}function F5(a){return null!=a&&"object"==typeof a&&"uri"in a}function F6(a){var b;let c;if(null!=a&&"object"==typeof a&&"name"in a&&(c=a.name),!F5(a)||void 0!==(c=a.uri)){if(!F4(a)||void 0!==(c=null==(b=a.video)?void 0:b.uri)){if("string"==typeof a&&(c=a),void 0===c)throw Error("Could not extract file name from the provided input.");if(c.startsWith("https://")){let a=c.split("files/")[1].match(/[a-z0-9]+/);if(null===a)throw Error(`Could not extract file name from URI ${c}`);c=a[0]}else c.startsWith("files/")&&(c=c.split("files/")[1]);return c}}}function F7(a,b){return a.isVertexAI()?b?"publishers/google/models":"models":b?"models":"tunedModels"}function F8(a){for(let d of["models","tunedModels","publisherModels"]){var b,c;if(b=a,c=d,null!==b&&"object"==typeof b&&c in b)return a[d]}return[]}function F9(a,b){let c;if("string"==typeof b)if(a.isVertexAI())if(b.startsWith("gs://"))c={format:"jsonl",gcsUri:[b]};else if(b.startsWith("bq://"))c={format:"bigquery",bigqueryUri:b};else throw Error(`Unsupported string source for Vertex AI: ${b}`);else if(b.startsWith("files/"))c={fileName:b};else throw Error(`Unsupported string source for Gemini API: ${b}`);else if(Array.isArray(b)){if(a.isVertexAI())throw Error("InlinedRequest[] is not supported in Vertex AI.");c={inlinedRequests:b}}else c=b;let d=[c.gcsUri,c.bigqueryUri].filter(Boolean).length,e=[c.inlinedRequests,c.fileName].filter(Boolean).length;if(a.isVertexAI()){if(e>0||1!==d)throw Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(d>0||1!==e)throw Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return c}function Ga(a){if("object"!=typeof a||null===a)return{};let b=a.inlinedResponses;if("object"!=typeof b||null===b)return a;let c=b.inlinedResponses;if(!Array.isArray(c)||0===c.length)return a;let d=!1;for(let a of c){if("object"!=typeof a||null===a)continue;let b=a.response;if("object"==typeof b&&null!==b&&void 0!==b.embedding){d=!0;break}}return d&&(a.inlinedEmbedContentResponses=a.inlinedResponses,delete a.inlinedResponses),a}function Gb(a,b){if(!a.isVertexAI()){if(/batches\/[^/]+$/.test(b))return b.split("/").pop();throw Error(`Invalid batch job name: ${b}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(b))return b.split("/").pop();if(/^\d+$/.test(b))return b;throw Error(`Invalid batch job name: ${b}.`)}function Gc(a){if("BATCH_STATE_UNSPECIFIED"===a)return"JOB_STATE_UNSPECIFIED";if("BATCH_STATE_PENDING"===a)return"JOB_STATE_PENDING";if("BATCH_STATE_RUNNING"===a)return"JOB_STATE_RUNNING";if("BATCH_STATE_SUCCEEDED"===a)return"JOB_STATE_SUCCEEDED";if("BATCH_STATE_FAILED"===a)return"JOB_STATE_FAILED";else if("BATCH_STATE_CANCELLED"===a)return"JOB_STATE_CANCELLED";else if("BATCH_STATE_EXPIRED"===a)return"JOB_STATE_EXPIRED";else return a}function Gd(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["metadata","displayName"]);null!=d&&Ff(b,["displayName"],d);let e=Fg(a,["metadata","state"]);null!=e&&Ff(b,["state"],Gc(e));let f=Fg(a,["metadata","createTime"]);null!=f&&Ff(b,["createTime"],f);let g=Fg(a,["metadata","endTime"]);null!=g&&Ff(b,["endTime"],g);let h=Fg(a,["metadata","updateTime"]);null!=h&&Ff(b,["updateTime"],h);let i=Fg(a,["metadata","model"]);null!=i&&Ff(b,["model"],i);let j=Fg(a,["metadata","output"]);return null!=j&&Ff(b,["dest"],function(a){let b={},c=Fg(a,["responsesFile"]);null!=c&&Ff(b,["fileName"],c);let d=Fg(a,["inlinedResponses","inlinedResponses"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["response"]);null!=c&&Ff(b,["response"],function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["content"]);null!=c&&Ff(b,["content"],c);let d=Fg(a,["citationMetadata"]);null!=d&&Ff(b,["citationMetadata"],function(a){let b={},c=Fg(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["citations"],a)}return b}(d));let e=Fg(a,["tokenCount"]);null!=e&&Ff(b,["tokenCount"],e);let f=Fg(a,["finishReason"]);null!=f&&Ff(b,["finishReason"],f);let g=Fg(a,["avgLogprobs"]);null!=g&&Ff(b,["avgLogprobs"],g);let h=Fg(a,["groundingMetadata"]);null!=h&&Ff(b,["groundingMetadata"],h);let i=Fg(a,["index"]);null!=i&&Ff(b,["index"],i);let j=Fg(a,["logprobsResult"]);null!=j&&Ff(b,["logprobsResult"],j);let k=Fg(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["safetyRatings"],a)}let l=Fg(a,["urlContextMetadata"]);return null!=l&&Ff(b,["urlContextMetadata"],l),b})(a))),Ff(b,["candidates"],a)}let e=Fg(a,["modelVersion"]);null!=e&&Ff(b,["modelVersion"],e);let f=Fg(a,["promptFeedback"]);null!=f&&Ff(b,["promptFeedback"],f);let g=Fg(a,["responseId"]);null!=g&&Ff(b,["responseId"],g);let h=Fg(a,["usageMetadata"]);return null!=h&&Ff(b,["usageMetadata"],h),b}(c));let d=Fg(a,["error"]);return null!=d&&Ff(b,["error"],d),b})(a))),Ff(b,["inlinedResponses"],a)}let e=Fg(a,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["inlinedEmbedContentResponses"],a)}return b}(Ga(j))),b}function Ge(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["displayName"]);null!=d&&Ff(b,["displayName"],d);let e=Fg(a,["state"]);null!=e&&Ff(b,["state"],Gc(e));let f=Fg(a,["error"]);null!=f&&Ff(b,["error"],f);let g=Fg(a,["createTime"]);null!=g&&Ff(b,["createTime"],g);let h=Fg(a,["startTime"]);null!=h&&Ff(b,["startTime"],h);let i=Fg(a,["endTime"]);null!=i&&Ff(b,["endTime"],i);let j=Fg(a,["updateTime"]);null!=j&&Ff(b,["updateTime"],j);let k=Fg(a,["model"]);null!=k&&Ff(b,["model"],k);let l=Fg(a,["inputConfig"]);null!=l&&Ff(b,["src"],function(a){let b={},c=Fg(a,["instancesFormat"]);null!=c&&Ff(b,["format"],c);let d=Fg(a,["gcsSource","uris"]);null!=d&&Ff(b,["gcsUri"],d);let e=Fg(a,["bigquerySource","inputUri"]);return null!=e&&Ff(b,["bigqueryUri"],e),b}(l));let m=Fg(a,["outputConfig"]);null!=m&&Ff(b,["dest"],function(a){let b={},c=Fg(a,["predictionsFormat"]);null!=c&&Ff(b,["format"],c);let d=Fg(a,["gcsDestination","outputUriPrefix"]);null!=d&&Ff(b,["gcsUri"],d);let e=Fg(a,["bigqueryDestination","outputUri"]);return null!=e&&Ff(b,["bigqueryUri"],e),b}(Ga(m)));let n=Fg(a,["completionStats"]);return null!=n&&Ff(b,["completionStats"],n),b}function Gf(a){let b={},c=Fg(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["mediaResolution"]);null!=c&&Ff(b,["mediaResolution"],c);let d=Fg(a,["codeExecutionResult"]);null!=d&&Ff(b,["codeExecutionResult"],d);let e=Fg(a,["executableCode"]);null!=e&&Ff(b,["executableCode"],e);let f=Fg(a,["fileData"]);null!=f&&Ff(b,["fileData"],function(a){let b={};if(void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=Fg(a,["fileUri"]);null!=c&&Ff(b,["fileUri"],c);let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(f));let g=Fg(a,["functionCall"]);null!=g&&Ff(b,["functionCall"],function(a){let b={},c=Fg(a,["id"]);null!=c&&Ff(b,["id"],c);let d=Fg(a,["args"]);null!=d&&Ff(b,["args"],d);let e=Fg(a,["name"]);if(null!=e&&Ff(b,["name"],e),void 0!==Fg(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==Fg(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=Fg(a,["functionResponse"]);null!=h&&Ff(b,["functionResponse"],h);let i=Fg(a,["inlineData"]);null!=i&&Ff(b,["inlineData"],function(a){let b={},c=Fg(a,["data"]);if(null!=c&&Ff(b,["data"],c),void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(i));let j=Fg(a,["text"]);null!=j&&Ff(b,["text"],j);let k=Fg(a,["thought"]);null!=k&&Ff(b,["thought"],k);let l=Fg(a,["thoughtSignature"]);null!=l&&Ff(b,["thoughtSignature"],l);let m=Fg(a,["videoMetadata"]);return null!=m&&Ff(b,["videoMetadata"],m),b})(a))),Ff(b,["parts"],a)}let d=Fg(a,["role"]);return null!=d&&Ff(b,["role"],d),b}function Gg(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["src"]);null!=e&&Ff(c,["batch","inputConfig"],function(a,b){let c={};if(void 0!==Fg(b,["format"]))throw Error("format parameter is not supported in Gemini API.");if(void 0!==Fg(b,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==Fg(b,["bigqueryUri"]))throw Error("bigqueryUri parameter is not supported in Gemini API.");let d=Fg(b,["fileName"]);null!=d&&Ff(c,["fileName"],d);let e=Fg(b,["inlinedRequests"]);if(null!=e){let b=e;Array.isArray(b)&&(b=b.map(b=>(function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["request","model"],FL(a,d));let e=Fg(b,["contents"]);if(null!=e){let a=FY(e);Array.isArray(a)&&(a=a.map(a=>Gf(a))),Ff(c,["request","contents"],a)}let f=Fg(b,["metadata"]);null!=f&&Ff(c,["metadata"],f);let g=Fg(b,["config"]);return null!=g&&Ff(c,["request","generationConfig"],function(a,b,c){let d={},e=Fg(b,["systemInstruction"]);void 0!==c&&null!=e&&Ff(c,["systemInstruction"],Gf(FW(e)));let f=Fg(b,["temperature"]);null!=f&&Ff(d,["temperature"],f);let g=Fg(b,["topP"]);null!=g&&Ff(d,["topP"],g);let h=Fg(b,["topK"]);null!=h&&Ff(d,["topK"],h);let i=Fg(b,["candidateCount"]);null!=i&&Ff(d,["candidateCount"],i);let j=Fg(b,["maxOutputTokens"]);null!=j&&Ff(d,["maxOutputTokens"],j);let k=Fg(b,["stopSequences"]);null!=k&&Ff(d,["stopSequences"],k);let l=Fg(b,["responseLogprobs"]);null!=l&&Ff(d,["responseLogprobs"],l);let m=Fg(b,["logprobs"]);null!=m&&Ff(d,["logprobs"],m);let n=Fg(b,["presencePenalty"]);null!=n&&Ff(d,["presencePenalty"],n);let o=Fg(b,["frequencyPenalty"]);null!=o&&Ff(d,["frequencyPenalty"],o);let p=Fg(b,["seed"]);null!=p&&Ff(d,["seed"],p);let q=Fg(b,["responseMimeType"]);null!=q&&Ff(d,["responseMimeType"],q);let r=Fg(b,["responseSchema"]);null!=r&&Ff(d,["responseSchema"],FZ(r));let s=Fg(b,["responseJsonSchema"]);if(null!=s&&Ff(d,["responseJsonSchema"],s),void 0!==Fg(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==Fg(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let t=Fg(b,["safetySettings"]);if(void 0!==c&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["category"]);if(null!=c&&Ff(b,["category"],c),void 0!==Fg(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=Fg(a,["threshold"]);return null!=d&&Ff(b,["threshold"],d),b})(a))),Ff(c,["safetySettings"],a)}let u=Fg(b,["tools"]);if(void 0!==c&&null!=u){let a=F1(u);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==Fg(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let c=Fg(a,["computerUse"]);null!=c&&Ff(b,["computerUse"],c);let d=Fg(a,["fileSearch"]);null!=d&&Ff(b,["fileSearch"],d);let e=Fg(a,["codeExecution"]);if(null!=e&&Ff(b,["codeExecution"],e),void 0!==Fg(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let f=Fg(a,["functionDeclarations"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["functionDeclarations"],a)}let g=Fg(a,["googleMaps"]);null!=g&&Ff(b,["googleMaps"],function(a){let b={};if(void 0!==Fg(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=Fg(a,["enableWidget"]);return null!=c&&Ff(b,["enableWidget"],c),b}(g));let h=Fg(a,["googleSearch"]);null!=h&&Ff(b,["googleSearch"],function(a){let b={};if(void 0!==Fg(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==Fg(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=Fg(a,["timeRangeFilter"]);return null!=c&&Ff(b,["timeRangeFilter"],c),b}(h));let i=Fg(a,["googleSearchRetrieval"]);null!=i&&Ff(b,["googleSearchRetrieval"],i);let j=Fg(a,["urlContext"]);return null!=j&&Ff(b,["urlContext"],j),b})(F0(a)))),Ff(c,["tools"],a)}let v=Fg(b,["toolConfig"]);if(void 0!==c&&null!=v&&Ff(c,["toolConfig"],function(a){let b={},c=Fg(a,["retrievalConfig"]);null!=c&&Ff(b,["retrievalConfig"],c);let d=Fg(a,["functionCallingConfig"]);return null!=d&&Ff(b,["functionCallingConfig"],function(a){let b={},c=Fg(a,["allowedFunctionNames"]);null!=c&&Ff(b,["allowedFunctionNames"],c);let d=Fg(a,["mode"]);if(null!=d&&Ff(b,["mode"],d),void 0!==Fg(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(d)),b}(v)),void 0!==Fg(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=Fg(b,["cachedContent"]);void 0!==c&&null!=w&&Ff(c,["cachedContent"],F2(a,w));let x=Fg(b,["responseModalities"]);null!=x&&Ff(d,["responseModalities"],x);let y=Fg(b,["mediaResolution"]);null!=y&&Ff(d,["mediaResolution"],y);let z=Fg(b,["speechConfig"]);if(null!=z&&Ff(d,["speechConfig"],F$(z)),void 0!==Fg(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let A=Fg(b,["thinkingConfig"]);null!=A&&Ff(d,["thinkingConfig"],A);let B=Fg(b,["imageConfig"]);null!=B&&Ff(d,["imageConfig"],function(a){let b={},c=Fg(a,["aspectRatio"]);null!=c&&Ff(b,["aspectRatio"],c);let d=Fg(a,["imageSize"]);if(null!=d&&Ff(b,["imageSize"],d),void 0!==Fg(a,["personGeneration"]))throw Error("personGeneration parameter is not supported in Gemini API.");if(void 0!==Fg(a,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==Fg(a,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return b}(B));let C=Fg(b,["enableEnhancedCivicAnswers"]);if(null!=C&&Ff(d,["enableEnhancedCivicAnswers"],C),void 0!==Fg(b,["modelArmorConfig"]))throw Error("modelArmorConfig parameter is not supported in Gemini API.");return d}(a,g,Fg(c,["request"],{}))),c})(a,b))),Ff(c,["requests","requests"],b)}return c}(a,F9(a,e)));let f=Fg(b,["config"]);return null!=f&&function(a,b){let c=Fg(a,["displayName"]);if(void 0!==b&&null!=c&&Ff(b,["batch","displayName"],c),void 0!==Fg(a,["dest"]))throw Error("dest parameter is not supported in Gemini API.")}(f,c),c}!function(a){a.PAGED_ITEM_BATCH_JOBS="batchJobs",a.PAGED_ITEM_MODELS="models",a.PAGED_ITEM_TUNING_JOBS="tuningJobs",a.PAGED_ITEM_FILES="files",a.PAGED_ITEM_CACHED_CONTENTS="cachedContents",a.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",a.PAGED_ITEM_DOCUMENTS="documents"}(aL||(aL={}));class Gh{constructor(a,b,c,d){this.pageInternal=[],this.paramsInternal={},this.requestInternal=b,this.init(a,c,d)}init(a,b,c){var d,e;this.nameInternal=a,this.pageInternal=b[this.nameInternal]||[],this.sdkHttpResponseInternal=null==b?void 0:b.sdkHttpResponse,this.idxInternal=0;let f={config:{}};(f=c&&0!==Object.keys(c).length?"object"==typeof c?Object.assign({},c):c:{config:{}}).config&&(f.config.pageToken=b.nextPageToken),this.paramsInternal=f,this.pageInternalSize=null!=(e=null==(d=f.config)?void 0:d.pageSize)?e:this.pageInternal.length}initNextPage(a){this.init(this.nameInternal,a,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(a){return this.pageInternal[a]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(!this.hasNextPage())return{value:void 0,done:!0};else await this.nextPage();let a=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:a,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let a=await this.requestInternal(this.params);return this.initNextPage(a),this.page}hasNextPage(){var a;return(null==(a=this.params.config)?void 0:a.pageToken)!==void 0}}class Gi extends Fd{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new Gh(aL.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(a),a),this.create=async a=>(this.apiClient.isVertexAI()&&(a.config=this.formatDestination(a.src,a.config)),this.createInternal(a)),this.createEmbeddings=async a=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(a)}}createInlinedGenerateContentRequest(a){let b=Gg(this.apiClient,a),c=Fe("{model}:batchGenerateContent",b._url),d=b.batch.inputConfig.requests,e=d.requests,f=[];for(let a of e){let b=Object.assign({},a);if(b.systemInstruction){let a=b.systemInstruction;delete b.systemInstruction;let c=b.request;c.systemInstruction=a,b.request=c}f.push(b)}return d.requests=f,delete b.config,delete b._url,delete b._query,{path:c,body:b}}getGcsUri(a){return"string"==typeof a?a.startsWith("gs://")?a:void 0:!Array.isArray(a)&&a.gcsUri&&a.gcsUri.length>0?a.gcsUri[0]:void 0}getBigqueryUri(a){return"string"==typeof a?a.startsWith("bq://")?a:void 0:Array.isArray(a)?void 0:a.bigqueryUri}formatDestination(a,b){let c=b?Object.assign({},b):{},d=Date.now().toString();if(c.displayName||(c.displayName=`genaiBatchJob_${d}`),void 0===c.dest){let b=this.getGcsUri(a),e=this.getBigqueryUri(a);if(b)b.endsWith(".jsonl")?c.dest=`${b.slice(0,-6)}/dest`:c.dest=`${b}_dest_${d}`;else if(e)c.dest=`${e}_dest_${d}`;else throw Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return c}async createInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["model"],FL(a,d));let e=Fg(b,["src"]);null!=e&&Ff(c,["inputConfig"],function(a){let b={},c=Fg(a,["format"]);null!=c&&Ff(b,["instancesFormat"],c);let d=Fg(a,["gcsUri"]);null!=d&&Ff(b,["gcsSource","uris"],d);let e=Fg(a,["bigqueryUri"]);if(null!=e&&Ff(b,["bigquerySource","inputUri"],e),void 0!==Fg(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==Fg(a,["inlinedRequests"]))throw Error("inlinedRequests parameter is not supported in Vertex AI.");return b}(F9(a,e)));let f=Fg(b,["config"]);return null!=f&&function(a,b){let c=Fg(a,["displayName"]);void 0!==b&&null!=c&&Ff(b,["displayName"],c);let d=Fg(a,["dest"]);void 0!==b&&null!=d&&Ff(b,["outputConfig"],function(a){let b={},c=Fg(a,["format"]);null!=c&&Ff(b,["predictionsFormat"],c);let d=Fg(a,["gcsUri"]);null!=d&&Ff(b,["gcsDestination","outputUriPrefix"],d);let e=Fg(a,["bigqueryUri"]);if(null!=e&&Ff(b,["bigqueryDestination","outputUri"],e),void 0!==Fg(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==Fg(a,["inlinedResponses"]))throw Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==Fg(a,["inlinedEmbedContentResponses"]))throw Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return b}(function(a){if("string"!=typeof a)return a;if(a.startsWith("gs://"))return{format:"jsonl",gcsUri:a};if(a.startsWith("bq://"))return{format:"bigquery",bigqueryUri:a};throw Error(`Unsupported destination: ${a}`)}(d)))}(f,c),c}(this.apiClient,a);return f=Fe("batchPredictionJobs",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>Ge(a))}{let b=Gg(this.apiClient,a);return f=Fe("{model}:batchGenerateContent",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>Gd(a))}}async createEmbeddingsInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["src"]);null!=e&&Ff(c,["batch","inputConfig"],function(a,b){let c={},d=Fg(b,["fileName"]);null!=d&&Ff(c,["file_name"],d);let e=Fg(b,["inlinedRequests"]);return null!=e&&Ff(c,["requests"],function(a,b){let c={},d=Fg(b,["contents"]);if(null!=d){let b=FX(a,d);Array.isArray(b)&&(b=b.map(a=>a)),Ff(c,["requests[]","request","content"],b)}let e=Fg(b,["config"]);return null!=e&&(Ff(c,["_self"],function(a,b){let c=Fg(a,["taskType"]);void 0!==b&&null!=c&&Ff(b,["requests[]","taskType"],c);let d=Fg(a,["title"]);void 0!==b&&null!=d&&Ff(b,["requests[]","title"],d);let e=Fg(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&Ff(b,["requests[]","outputDimensionality"],e),void 0!==Fg(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==Fg(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.");return{}}(e,c)),!function(a,b){for(let[c,d]of Object.entries(b)){let b=c.split("."),e=d.split("."),f=new Set,g=-1;for(let a=0;a<b.length;a++)if("*"===b[a]){g=a;break}if(-1!==g&&e.length>g)for(let a=g;a<e.length;a++){let b=e[a];"*"===b||b.endsWith("[]")||b.endsWith("[0]")||f.add(b)}!function a(b,c,d,e,f){if(e>=c.length||"object"!=typeof b||null===b)return;let g=c[e];if(g.endsWith("[]")){let h=g.slice(0,-2);if(h in b&&Array.isArray(b[h]))for(let g of b[h])a(g,c,d,e+1,f)}else if("*"===g){if("object"==typeof b&&null!==b&&!Array.isArray(b)){let a=Object.keys(b).filter(a=>!a.startsWith("_")&&!f.has(a)),c={};for(let d of a)c[d]=b[d];for(let[a,f]of Object.entries(c)){let c=[];for(let b of d.slice(e))"*"===b?c.push(a):c.push(b);Ff(b,c,f)}for(let c of a)delete b[c]}}else g in b&&a(b[g],c,d,e+1,f)}(a,b,e,0,f)}}(c,{"requests[].*":"requests[].request.*"})),c}(a,e)),c}(a,e));let f=Fg(b,["config"]);return null!=f&&function(a,b){let c=Fg(a,["displayName"]);void 0!==b&&null!=c&&Ff(b,["batch","displayName"],c)}(f,c),c}(this.apiClient,a);return d=Fe("{model}:asyncBatchEmbedContent",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>Gd(a))}}async get(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],Gb(a,d)),c}(this.apiClient,a);return f=Fe("batchPredictionJobs/{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>Ge(a))}{let b=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],Gb(a,d)),c}(this.apiClient,a);return f=Fe("batches/{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>Gd(a))}}async cancel(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],Gb(a,d)),c}(this.apiClient,a);f=Fe("batchPredictionJobs/{name}:cancel",d._url),g=d._query,delete d._url,delete d._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}else{let b=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],Gb(a,d)),c}(this.apiClient,a);f=Fe("batches/{name}:cancel",b._url),g=b._query,delete b._url,delete b._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal})}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a){let b={},c=Fg(a,["config"]);return null!=c&&function(a,b){let c=Fg(a,["pageSize"]);void 0!==b&&null!=c&&Ff(b,["_query","pageSize"],c);let d=Fg(a,["pageToken"]);void 0!==b&&null!=d&&Ff(b,["_query","pageToken"],d);let e=Fg(a,["filter"]);void 0!==b&&null!=e&&Ff(b,["_query","filter"],e)}(c,b),b}(a);return f=Fe("batchPredictionJobs",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["nextPageToken"]);null!=d&&Ff(b,["nextPageToken"],d);let e=Fg(a,["batchPredictionJobs"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>Ge(a))),Ff(b,["batchJobs"],a)}return b}(a),c=new FH;return Object.assign(c,b),c})}{let b=function(a){let b={},c=Fg(a,["config"]);return null!=c&&function(a,b){let c=Fg(a,["pageSize"]);void 0!==b&&null!=c&&Ff(b,["_query","pageSize"],c);let d=Fg(a,["pageToken"]);if(void 0!==b&&null!=d&&Ff(b,["_query","pageToken"],d),void 0!==Fg(a,["filter"]))throw Error("filter parameter is not supported in Gemini API.")}(c,b),b}(a);return f=Fe("batches",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["nextPageToken"]);null!=d&&Ff(b,["nextPageToken"],d);let e=Fg(a,["operations"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>Gd(a))),Ff(b,["batchJobs"],a)}return b}(a),c=new FH;return Object.assign(c,b),c})}}async delete(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],Gb(a,d)),c}(this.apiClient,a);return f=Fe("batchPredictionJobs/{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>(function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["name"]);null!=d&&Ff(b,["name"],d);let e=Fg(a,["done"]);null!=e&&Ff(b,["done"],e);let f=Fg(a,["error"]);return null!=f&&Ff(b,["error"],f),b})(a))}{let b=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],Gb(a,d)),c}(this.apiClient,a);return f=Fe("batches/{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>(function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["name"]);null!=d&&Ff(b,["name"],d);let e=Fg(a,["done"]);null!=e&&Ff(b,["done"],e);let f=Fg(a,["error"]);return null!=f&&Ff(b,["error"],f),b})(a))}}}function Gj(a){let b={},c=Fg(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["mediaResolution"]);null!=c&&Ff(b,["mediaResolution"],c);let d=Fg(a,["codeExecutionResult"]);null!=d&&Ff(b,["codeExecutionResult"],d);let e=Fg(a,["executableCode"]);null!=e&&Ff(b,["executableCode"],e);let f=Fg(a,["fileData"]);null!=f&&Ff(b,["fileData"],function(a){let b={};if(void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=Fg(a,["fileUri"]);null!=c&&Ff(b,["fileUri"],c);let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(f));let g=Fg(a,["functionCall"]);null!=g&&Ff(b,["functionCall"],function(a){let b={},c=Fg(a,["id"]);null!=c&&Ff(b,["id"],c);let d=Fg(a,["args"]);null!=d&&Ff(b,["args"],d);let e=Fg(a,["name"]);if(null!=e&&Ff(b,["name"],e),void 0!==Fg(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==Fg(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=Fg(a,["functionResponse"]);null!=h&&Ff(b,["functionResponse"],h);let i=Fg(a,["inlineData"]);null!=i&&Ff(b,["inlineData"],function(a){let b={},c=Fg(a,["data"]);if(null!=c&&Ff(b,["data"],c),void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(i));let j=Fg(a,["text"]);null!=j&&Ff(b,["text"],j);let k=Fg(a,["thought"]);null!=k&&Ff(b,["thought"],k);let l=Fg(a,["thoughtSignature"]);null!=l&&Ff(b,["thoughtSignature"],l);let m=Fg(a,["videoMetadata"]);return null!=m&&Ff(b,["videoMetadata"],m),b})(a))),Ff(b,["parts"],a)}let d=Fg(a,["role"]);return null!=d&&Ff(b,["role"],d),b}class Gk extends Fd{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new Gh(aL.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(a),a)}async create(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["model"],FM(a,d));let e=Fg(b,["config"]);return null!=e&&function(a,b){let c=Fg(a,["ttl"]);void 0!==b&&null!=c&&Ff(b,["ttl"],c);let d=Fg(a,["expireTime"]);void 0!==b&&null!=d&&Ff(b,["expireTime"],d);let e=Fg(a,["displayName"]);void 0!==b&&null!=e&&Ff(b,["displayName"],e);let f=Fg(a,["contents"]);if(void 0!==b&&null!=f){let a=FY(f);Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["contents"],a)}let g=Fg(a,["systemInstruction"]);void 0!==b&&null!=g&&Ff(b,["systemInstruction"],FW(g));let h=Fg(a,["tools"]);if(void 0!==b&&null!=h){let a=h;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["retrieval"]);null!=c&&Ff(b,["retrieval"],c);let d=Fg(a,["computerUse"]);if(null!=d&&Ff(b,["computerUse"],d),void 0!==Fg(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let e=Fg(a,["codeExecution"]);null!=e&&Ff(b,["codeExecution"],e);let f=Fg(a,["enterpriseWebSearch"]);null!=f&&Ff(b,["enterpriseWebSearch"],f);let g=Fg(a,["functionDeclarations"]);if(null!=g){let a=g;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["description"]);null!=c&&Ff(b,["description"],c);let d=Fg(a,["name"]);null!=d&&Ff(b,["name"],d);let e=Fg(a,["parameters"]);null!=e&&Ff(b,["parameters"],e);let f=Fg(a,["parametersJsonSchema"]);null!=f&&Ff(b,["parametersJsonSchema"],f);let g=Fg(a,["response"]);null!=g&&Ff(b,["response"],g);let h=Fg(a,["responseJsonSchema"]);if(null!=h&&Ff(b,["responseJsonSchema"],h),void 0!==Fg(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");return b})(a))),Ff(b,["functionDeclarations"],a)}let h=Fg(a,["googleMaps"]);null!=h&&Ff(b,["googleMaps"],h);let i=Fg(a,["googleSearch"]);null!=i&&Ff(b,["googleSearch"],i);let j=Fg(a,["googleSearchRetrieval"]);null!=j&&Ff(b,["googleSearchRetrieval"],j);let k=Fg(a,["urlContext"]);return null!=k&&Ff(b,["urlContext"],k),b})(a))),Ff(b,["tools"],a)}let i=Fg(a,["toolConfig"]);void 0!==b&&null!=i&&Ff(b,["toolConfig"],i);let j=Fg(a,["kmsKeyName"]);void 0!==b&&null!=j&&Ff(b,["encryption_spec","kmsKeyName"],j)}(e,c),c}(this.apiClient,a);return f=Fe("cachedContents",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["model"],FM(a,d));let e=Fg(b,["config"]);return null!=e&&function(a,b){let c=Fg(a,["ttl"]);void 0!==b&&null!=c&&Ff(b,["ttl"],c);let d=Fg(a,["expireTime"]);void 0!==b&&null!=d&&Ff(b,["expireTime"],d);let e=Fg(a,["displayName"]);void 0!==b&&null!=e&&Ff(b,["displayName"],e);let f=Fg(a,["contents"]);if(void 0!==b&&null!=f){let a=FY(f);Array.isArray(a)&&(a=a.map(a=>Gj(a))),Ff(b,["contents"],a)}let g=Fg(a,["systemInstruction"]);void 0!==b&&null!=g&&Ff(b,["systemInstruction"],Gj(FW(g)));let h=Fg(a,["tools"]);if(void 0!==b&&null!=h){let a=h;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==Fg(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let c=Fg(a,["computerUse"]);null!=c&&Ff(b,["computerUse"],c);let d=Fg(a,["fileSearch"]);null!=d&&Ff(b,["fileSearch"],d);let e=Fg(a,["codeExecution"]);if(null!=e&&Ff(b,["codeExecution"],e),void 0!==Fg(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let f=Fg(a,["functionDeclarations"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["functionDeclarations"],a)}let g=Fg(a,["googleMaps"]);null!=g&&Ff(b,["googleMaps"],function(a){let b={};if(void 0!==Fg(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=Fg(a,["enableWidget"]);return null!=c&&Ff(b,["enableWidget"],c),b}(g));let h=Fg(a,["googleSearch"]);null!=h&&Ff(b,["googleSearch"],function(a){let b={};if(void 0!==Fg(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==Fg(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=Fg(a,["timeRangeFilter"]);return null!=c&&Ff(b,["timeRangeFilter"],c),b}(h));let i=Fg(a,["googleSearchRetrieval"]);null!=i&&Ff(b,["googleSearchRetrieval"],i);let j=Fg(a,["urlContext"]);return null!=j&&Ff(b,["urlContext"],j),b})(a))),Ff(b,["tools"],a)}let i=Fg(a,["toolConfig"]);if(void 0!==b&&null!=i&&Ff(b,["toolConfig"],function(a){let b={},c=Fg(a,["retrievalConfig"]);null!=c&&Ff(b,["retrievalConfig"],c);let d=Fg(a,["functionCallingConfig"]);return null!=d&&Ff(b,["functionCallingConfig"],function(a){let b={},c=Fg(a,["allowedFunctionNames"]);null!=c&&Ff(b,["allowedFunctionNames"],c);let d=Fg(a,["mode"]);if(null!=d&&Ff(b,["mode"],d),void 0!==Fg(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(d)),b}(i)),void 0!==Fg(a,["kmsKeyName"]))throw Error("kmsKeyName parameter is not supported in Gemini API.")}(e,c),c}(this.apiClient,a);return f=Fe("cachedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async get(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],F2(a,d)),c}(this.apiClient,a);return f=Fe("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],F2(a,d)),c}(this.apiClient,a);return f=Fe("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],F2(a,d)),c}(this.apiClient,a);return f=Fe("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);return null!=c&&Ff(b,["sdkHttpResponse"],c),b}(a),c=new Fy;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=Fg(b,["name"]);return null!=d&&Ff(c,["_url","name"],F2(a,d)),c}(this.apiClient,a);return f=Fe("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);return null!=c&&Ff(b,["sdkHttpResponse"],c),b}(a),c=new Fy;return Object.assign(c,b),c})}}async update(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["name"]);null!=d&&Ff(c,["_url","name"],F2(a,d));let e=Fg(b,["config"]);return null!=e&&function(a,b){let c=Fg(a,["ttl"]);void 0!==b&&null!=c&&Ff(b,["ttl"],c);let d=Fg(a,["expireTime"]);void 0!==b&&null!=d&&Ff(b,["expireTime"],d)}(e,c),c}(this.apiClient,a);return f=Fe("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b=function(a,b){let c={},d=Fg(b,["name"]);null!=d&&Ff(c,["_url","name"],F2(a,d));let e=Fg(b,["config"]);return null!=e&&function(a,b){let c=Fg(a,["ttl"]);void 0!==b&&null!=c&&Ff(b,["ttl"],c);let d=Fg(a,["expireTime"]);void 0!==b&&null!=d&&Ff(b,["expireTime"],d)}(e,c),c}(this.apiClient,a);return f=Fe("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a){let b={},c=Fg(a,["config"]);return null!=c&&function(a,b){let c=Fg(a,["pageSize"]);void 0!==b&&null!=c&&Ff(b,["_query","pageSize"],c);let d=Fg(a,["pageToken"]);void 0!==b&&null!=d&&Ff(b,["_query","pageToken"],d)}(c,b),b}(a);return f=Fe("cachedContents",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["nextPageToken"]);null!=d&&Ff(b,["nextPageToken"],d);let e=Fg(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["cachedContents"],a)}return b}(a),c=new Fz;return Object.assign(c,b),c})}{let b=function(a){let b={},c=Fg(a,["config"]);return null!=c&&function(a,b){let c=Fg(a,["pageSize"]);void 0!==b&&null!=c&&Ff(b,["_query","pageSize"],c);let d=Fg(a,["pageToken"]);void 0!==b&&null!=d&&Ff(b,["_query","pageToken"],d)}(c,b),b}(a);return f=Fe("cachedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["nextPageToken"]);null!=d&&Ff(b,["nextPageToken"],d);let e=Fg(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["cachedContents"],a)}return b}(a),c=new Fz;return Object.assign(c,b),c})}}}function Gl(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function Gm(a){return this instanceof Gm?(this.v=a,this):new Gm(a)}function Gn(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof Gm?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function Go(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function Gp(a){if(void 0===a.parts||0===a.parts.length)return!1;for(let b of a.parts)if(void 0===b||0===Object.keys(b).length)return!1;return!0}function Gq(a){if(void 0===a||0===a.length)return[];let b=[],c=a.length,d=0;for(;d<c;)if("user"===a[d].role)b.push(a[d]),d++;else{let e=[],f=!0;for(;d<c&&"model"===a[d].role;)e.push(a[d]),f&&!Gp(a[d])&&(f=!1),d++;f?b.push(...e):b.pop()}return b}"function"==typeof SuppressedError&&SuppressedError;class Gr{constructor(a,b){this.modelsModule=a,this.apiClient=b}create(a){return new Gs(this.apiClient,this.modelsModule,a.model,a.config,structuredClone(a.history))}}class Gs{constructor(a,b,c,d={},e=[]){this.apiClient=a,this.modelsModule=b,this.model=c,this.config=d,this.history=e,this.sendPromise=Promise.resolve(),function(a){if(0!==a.length){for(let b of a)if("user"!==b.role&&"model"!==b.role)throw Error(`Role must be user or model, but got ${b.role}.`)}}(e)}async sendMessage(a){var b;await this.sendPromise;let c=FW(a.message),d=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});return this.sendPromise=(async()=>{var a,b,e;let f=await d,g=null==(b=null==(a=f.candidates)?void 0:a[0])?void 0:b.content,h=f.automaticFunctionCallingHistory,i=this.getHistory(!0).length,j=[];null!=h&&(j=null!=(e=h.slice(i))?e:[]),this.recordHistory(c,g?[g]:[],j)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),d}async sendMessageStream(a){var b;await this.sendPromise;let c=FW(a.message),d=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});this.sendPromise=d.then(()=>void 0).catch(()=>void 0);let e=await d;return this.processStreamResponse(e,c)}getHistory(a=!1){return structuredClone(a?Gq(this.history):this.history)}processStreamResponse(a,b){return Gn(this,arguments,function*(){let c=[];try{for(var d,e,f,g,h,i,j,k=!0,l=Go(a);!(d=(j=yield Gm(l.next())).done);k=!0){if(g=j.value,k=!1,function(a){var b;if(void 0==a.candidates||0===a.candidates.length)return!1;let c=null==(b=a.candidates[0])?void 0:b.content;return void 0!==c&&Gp(c)}(g)){let a=null==(i=null==(h=g.candidates)?void 0:h[0])?void 0:i.content;void 0!==a&&c.push(a)}yield yield Gm(g)}}catch(a){e={error:a}}finally{try{!k&&!d&&(f=l.return)&&(yield Gm(f.call(l)))}finally{if(e)throw e.error}}this.recordHistory(b,c)})}recordHistory(a,b,c){let d=[];b.length>0&&b.every(a=>void 0!==a.role)?d=b:d.push({role:"model",parts:[]}),c&&c.length>0?this.history.push(...Gq(c)):this.history.push(a),this.history.push(...d)}}class Gt extends Error{constructor(a){super(a.message),this.name="ApiError",this.status=a.status,Object.setPrototypeOf(this,Gt.prototype)}}class Gu extends Fd{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new Gh(aL.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(a),a)}async upload(a){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(a.file,a.config).then(a=>a)}async download(a){await this.apiClient.downloadFile(a)}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["config"]);return null!=c&&function(a,b){let c=Fg(a,["pageSize"]);void 0!==b&&null!=c&&Ff(b,["_query","pageSize"],c);let d=Fg(a,["pageToken"]);void 0!==b&&null!=d&&Ff(b,["_query","pageToken"],d)}(c,b),b}(a);return d=Fe("files",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["nextPageToken"]);null!=d&&Ff(b,["nextPageToken"],d);let e=Fg(a,["files"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["files"],a)}return b}(a),c=new FE;return Object.assign(c,b),c})}}async createInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["file"]);return null!=c&&Ff(b,["file"],c),b}(a);return d=Fe("upload/v1beta/files",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);return null!=c&&Ff(b,["sdkHttpResponse"],c),b}(a),c=new FF;return Object.assign(c,b),c})}}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["name"]);return null!=c&&Ff(b,["_url","file"],F6(c)),b}(a);return d=Fe("files/{file}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["name"]);return null!=c&&Ff(b,["_url","file"],F6(c)),b}(a);return d=Fe("files/{file}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);return null!=c&&Ff(b,["sdkHttpResponse"],c),b}(a),c=new FG;return Object.assign(c,b),c})}}}function Gv(a){let b={},c=Fg(a,["data"]);if(null!=c&&Ff(b,["data"],c),void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}function Gw(a){let b={},c=Fg(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["mediaResolution"]);null!=c&&Ff(b,["mediaResolution"],c);let d=Fg(a,["codeExecutionResult"]);null!=d&&Ff(b,["codeExecutionResult"],d);let e=Fg(a,["executableCode"]);null!=e&&Ff(b,["executableCode"],e);let f=Fg(a,["fileData"]);null!=f&&Ff(b,["fileData"],function(a){let b={};if(void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=Fg(a,["fileUri"]);null!=c&&Ff(b,["fileUri"],c);let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(f));let g=Fg(a,["functionCall"]);null!=g&&Ff(b,["functionCall"],function(a){let b={},c=Fg(a,["id"]);null!=c&&Ff(b,["id"],c);let d=Fg(a,["args"]);null!=d&&Ff(b,["args"],d);let e=Fg(a,["name"]);if(null!=e&&Ff(b,["name"],e),void 0!==Fg(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==Fg(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=Fg(a,["functionResponse"]);null!=h&&Ff(b,["functionResponse"],h);let i=Fg(a,["inlineData"]);null!=i&&Ff(b,["inlineData"],function(a){let b={},c=Fg(a,["data"]);if(null!=c&&Ff(b,["data"],c),void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(i));let j=Fg(a,["text"]);null!=j&&Ff(b,["text"],j);let k=Fg(a,["thought"]);null!=k&&Ff(b,["thought"],k);let l=Fg(a,["thoughtSignature"]);null!=l&&Ff(b,["thoughtSignature"],l);let m=Fg(a,["videoMetadata"]);return null!=m&&Ff(b,["videoMetadata"],m),b})(a))),Ff(b,["parts"],a)}let d=Fg(a,["role"]);return null!=d&&Ff(b,["role"],d),b}function Gx(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["contents"]);if(null!=e){let a=FY(e);Array.isArray(a)&&(a=a.map(a=>Gw(a))),Ff(c,["contents"],a)}let f=Fg(b,["config"]);return null!=f&&Ff(c,["generationConfig"],function(a,b,c){let d={},e=Fg(b,["systemInstruction"]);void 0!==c&&null!=e&&Ff(c,["systemInstruction"],Gw(FW(e)));let f=Fg(b,["temperature"]);null!=f&&Ff(d,["temperature"],f);let g=Fg(b,["topP"]);null!=g&&Ff(d,["topP"],g);let h=Fg(b,["topK"]);null!=h&&Ff(d,["topK"],h);let i=Fg(b,["candidateCount"]);null!=i&&Ff(d,["candidateCount"],i);let j=Fg(b,["maxOutputTokens"]);null!=j&&Ff(d,["maxOutputTokens"],j);let k=Fg(b,["stopSequences"]);null!=k&&Ff(d,["stopSequences"],k);let l=Fg(b,["responseLogprobs"]);null!=l&&Ff(d,["responseLogprobs"],l);let m=Fg(b,["logprobs"]);null!=m&&Ff(d,["logprobs"],m);let n=Fg(b,["presencePenalty"]);null!=n&&Ff(d,["presencePenalty"],n);let o=Fg(b,["frequencyPenalty"]);null!=o&&Ff(d,["frequencyPenalty"],o);let p=Fg(b,["seed"]);null!=p&&Ff(d,["seed"],p);let q=Fg(b,["responseMimeType"]);null!=q&&Ff(d,["responseMimeType"],q);let r=Fg(b,["responseSchema"]);null!=r&&Ff(d,["responseSchema"],FZ(r));let s=Fg(b,["responseJsonSchema"]);if(null!=s&&Ff(d,["responseJsonSchema"],s),void 0!==Fg(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==Fg(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let t=Fg(b,["safetySettings"]);if(void 0!==c&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["category"]);if(null!=c&&Ff(b,["category"],c),void 0!==Fg(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=Fg(a,["threshold"]);return null!=d&&Ff(b,["threshold"],d),b})(a))),Ff(c,["safetySettings"],a)}let u=Fg(b,["tools"]);if(void 0!==c&&null!=u){let a=F1(u);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==Fg(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let c=Fg(a,["computerUse"]);null!=c&&Ff(b,["computerUse"],c);let d=Fg(a,["fileSearch"]);null!=d&&Ff(b,["fileSearch"],d);let e=Fg(a,["codeExecution"]);if(null!=e&&Ff(b,["codeExecution"],e),void 0!==Fg(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let f=Fg(a,["functionDeclarations"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["functionDeclarations"],a)}let g=Fg(a,["googleMaps"]);null!=g&&Ff(b,["googleMaps"],function(a){let b={};if(void 0!==Fg(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=Fg(a,["enableWidget"]);return null!=c&&Ff(b,["enableWidget"],c),b}(g));let h=Fg(a,["googleSearch"]);null!=h&&Ff(b,["googleSearch"],function(a){let b={};if(void 0!==Fg(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==Fg(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=Fg(a,["timeRangeFilter"]);return null!=c&&Ff(b,["timeRangeFilter"],c),b}(h));let i=Fg(a,["googleSearchRetrieval"]);null!=i&&Ff(b,["googleSearchRetrieval"],i);let j=Fg(a,["urlContext"]);return null!=j&&Ff(b,["urlContext"],j),b})(F0(a)))),Ff(c,["tools"],a)}let v=Fg(b,["toolConfig"]);if(void 0!==c&&null!=v&&Ff(c,["toolConfig"],function(a){let b={},c=Fg(a,["retrievalConfig"]);null!=c&&Ff(b,["retrievalConfig"],c);let d=Fg(a,["functionCallingConfig"]);return null!=d&&Ff(b,["functionCallingConfig"],function(a){let b={},c=Fg(a,["allowedFunctionNames"]);null!=c&&Ff(b,["allowedFunctionNames"],c);let d=Fg(a,["mode"]);if(null!=d&&Ff(b,["mode"],d),void 0!==Fg(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(d)),b}(v)),void 0!==Fg(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=Fg(b,["cachedContent"]);void 0!==c&&null!=w&&Ff(c,["cachedContent"],F2(a,w));let x=Fg(b,["responseModalities"]);null!=x&&Ff(d,["responseModalities"],x);let y=Fg(b,["mediaResolution"]);null!=y&&Ff(d,["mediaResolution"],y);let z=Fg(b,["speechConfig"]);if(null!=z&&Ff(d,["speechConfig"],F$(z)),void 0!==Fg(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let A=Fg(b,["thinkingConfig"]);null!=A&&Ff(d,["thinkingConfig"],A);let B=Fg(b,["imageConfig"]);null!=B&&Ff(d,["imageConfig"],function(a){let b={},c=Fg(a,["aspectRatio"]);null!=c&&Ff(b,["aspectRatio"],c);let d=Fg(a,["imageSize"]);if(null!=d&&Ff(b,["imageSize"],d),void 0!==Fg(a,["personGeneration"]))throw Error("personGeneration parameter is not supported in Gemini API.");if(void 0!==Fg(a,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==Fg(a,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return b}(B));let C=Fg(b,["enableEnhancedCivicAnswers"]);if(null!=C&&Ff(d,["enableEnhancedCivicAnswers"],C),void 0!==Fg(b,["modelArmorConfig"]))throw Error("modelArmorConfig parameter is not supported in Gemini API.");return d}(a,f,c)),c}function Gy(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["contents"]);if(null!=e){let a=FY(e);Array.isArray(a)&&(a=a.map(a=>a)),Ff(c,["contents"],a)}let f=Fg(b,["config"]);return null!=f&&Ff(c,["generationConfig"],function(a,b,c){let d={},e=Fg(b,["systemInstruction"]);void 0!==c&&null!=e&&Ff(c,["systemInstruction"],FW(e));let f=Fg(b,["temperature"]);null!=f&&Ff(d,["temperature"],f);let g=Fg(b,["topP"]);null!=g&&Ff(d,["topP"],g);let h=Fg(b,["topK"]);null!=h&&Ff(d,["topK"],h);let i=Fg(b,["candidateCount"]);null!=i&&Ff(d,["candidateCount"],i);let j=Fg(b,["maxOutputTokens"]);null!=j&&Ff(d,["maxOutputTokens"],j);let k=Fg(b,["stopSequences"]);null!=k&&Ff(d,["stopSequences"],k);let l=Fg(b,["responseLogprobs"]);null!=l&&Ff(d,["responseLogprobs"],l);let m=Fg(b,["logprobs"]);null!=m&&Ff(d,["logprobs"],m);let n=Fg(b,["presencePenalty"]);null!=n&&Ff(d,["presencePenalty"],n);let o=Fg(b,["frequencyPenalty"]);null!=o&&Ff(d,["frequencyPenalty"],o);let p=Fg(b,["seed"]);null!=p&&Ff(d,["seed"],p);let q=Fg(b,["responseMimeType"]);null!=q&&Ff(d,["responseMimeType"],q);let r=Fg(b,["responseSchema"]);null!=r&&Ff(d,["responseSchema"],FZ(r));let s=Fg(b,["responseJsonSchema"]);null!=s&&Ff(d,["responseJsonSchema"],s);let t=Fg(b,["routingConfig"]);null!=t&&Ff(d,["routingConfig"],t);let u=Fg(b,["modelSelectionConfig"]);null!=u&&Ff(d,["modelConfig"],u);let v=Fg(b,["safetySettings"]);if(void 0!==c&&null!=v){let a=v;Array.isArray(a)&&(a=a.map(a=>a)),Ff(c,["safetySettings"],a)}let w=Fg(b,["tools"]);if(void 0!==c&&null!=w){let a=F1(w);Array.isArray(a)&&(a=a.map(a=>GJ(F0(a)))),Ff(c,["tools"],a)}let x=Fg(b,["toolConfig"]);void 0!==c&&null!=x&&Ff(c,["toolConfig"],x);let y=Fg(b,["labels"]);void 0!==c&&null!=y&&Ff(c,["labels"],y);let z=Fg(b,["cachedContent"]);void 0!==c&&null!=z&&Ff(c,["cachedContent"],F2(a,z));let A=Fg(b,["responseModalities"]);null!=A&&Ff(d,["responseModalities"],A);let B=Fg(b,["mediaResolution"]);null!=B&&Ff(d,["mediaResolution"],B);let C=Fg(b,["speechConfig"]);null!=C&&Ff(d,["speechConfig"],F$(C));let D=Fg(b,["audioTimestamp"]);null!=D&&Ff(d,["audioTimestamp"],D);let E=Fg(b,["thinkingConfig"]);null!=E&&Ff(d,["thinkingConfig"],E);let F=Fg(b,["imageConfig"]);if(null!=F&&Ff(d,["imageConfig"],function(a){let b={},c=Fg(a,["aspectRatio"]);null!=c&&Ff(b,["aspectRatio"],c);let d=Fg(a,["imageSize"]);null!=d&&Ff(b,["imageSize"],d);let e=Fg(a,["personGeneration"]);null!=e&&Ff(b,["personGeneration"],e);let f=Fg(a,["outputMimeType"]);null!=f&&Ff(b,["imageOutputOptions","mimeType"],f);let g=Fg(a,["outputCompressionQuality"]);return null!=g&&Ff(b,["imageOutputOptions","compressionQuality"],g),b}(F)),void 0!==Fg(b,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let G=Fg(b,["modelArmorConfig"]);return void 0!==c&&null!=G&&Ff(c,["modelArmorConfig"],G),d}(a,f,c)),c}function Gz(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["content"]);null!=c&&Ff(b,["content"],c);let d=Fg(a,["citationMetadata"]);null!=d&&Ff(b,["citationMetadata"],function(a){let b={},c=Fg(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["citations"],a)}return b}(d));let e=Fg(a,["tokenCount"]);null!=e&&Ff(b,["tokenCount"],e);let f=Fg(a,["finishReason"]);null!=f&&Ff(b,["finishReason"],f);let g=Fg(a,["avgLogprobs"]);null!=g&&Ff(b,["avgLogprobs"],g);let h=Fg(a,["groundingMetadata"]);null!=h&&Ff(b,["groundingMetadata"],h);let i=Fg(a,["index"]);null!=i&&Ff(b,["index"],i);let j=Fg(a,["logprobsResult"]);null!=j&&Ff(b,["logprobsResult"],j);let k=Fg(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["safetyRatings"],a)}let l=Fg(a,["urlContextMetadata"]);return null!=l&&Ff(b,["urlContextMetadata"],l),b})(a))),Ff(b,["candidates"],a)}let e=Fg(a,["modelVersion"]);null!=e&&Ff(b,["modelVersion"],e);let f=Fg(a,["promptFeedback"]);null!=f&&Ff(b,["promptFeedback"],f);let g=Fg(a,["responseId"]);null!=g&&Ff(b,["responseId"],g);let h=Fg(a,["usageMetadata"]);return null!=h&&Ff(b,["usageMetadata"],h),b}function GA(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["candidates"],a)}let e=Fg(a,["createTime"]);null!=e&&Ff(b,["createTime"],e);let f=Fg(a,["modelVersion"]);null!=f&&Ff(b,["modelVersion"],f);let g=Fg(a,["promptFeedback"]);null!=g&&Ff(b,["promptFeedback"],g);let h=Fg(a,["responseId"]);null!=h&&Ff(b,["responseId"],h);let i=Fg(a,["usageMetadata"]);return null!=i&&Ff(b,["usageMetadata"],i),b}function GB(a){let b={},c=Fg(a,["_self"]);null!=c&&Ff(b,["image"],GC(c));let d=Fg(a,["raiFilteredReason"]);null!=d&&Ff(b,["raiFilteredReason"],d);let e=Fg(a,["_self"]);null!=e&&Ff(b,["safetyAttributes"],GI(e));let f=Fg(a,["prompt"]);return null!=f&&Ff(b,["enhancedPrompt"],f),b}function GC(a){let b={},c=Fg(a,["gcsUri"]);null!=c&&Ff(b,["gcsUri"],c);let d=Fg(a,["bytesBase64Encoded"]);null!=d&&Ff(b,["imageBytes"],Fh(d));let e=Fg(a,["mimeType"]);return null!=e&&Ff(b,["mimeType"],e),b}function GD(a){let b={};if(void 0!==Fg(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");let c=Fg(a,["imageBytes"]);null!=c&&Ff(b,["bytesBase64Encoded"],Fh(c));let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}function GE(a){let b={},c=Fg(a,["gcsUri"]);null!=c&&Ff(b,["gcsUri"],c);let d=Fg(a,["imageBytes"]);null!=d&&Ff(b,["bytesBase64Encoded"],Fh(d));let e=Fg(a,["mimeType"]);return null!=e&&Ff(b,["mimeType"],e),b}function GF(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["displayName"]);null!=d&&Ff(b,["displayName"],d);let e=Fg(a,["description"]);null!=e&&Ff(b,["description"],e);let f=Fg(a,["version"]);null!=f&&Ff(b,["version"],f);let g=Fg(a,["_self"]);null!=g&&Ff(b,["tunedModelInfo"],function(a){let b={},c=Fg(a,["baseModel"]);null!=c&&Ff(b,["baseModel"],c);let d=Fg(a,["createTime"]);null!=d&&Ff(b,["createTime"],d);let e=Fg(a,["updateTime"]);return null!=e&&Ff(b,["updateTime"],e),b}(g));let h=Fg(a,["inputTokenLimit"]);null!=h&&Ff(b,["inputTokenLimit"],h);let i=Fg(a,["outputTokenLimit"]);null!=i&&Ff(b,["outputTokenLimit"],i);let j=Fg(a,["supportedGenerationMethods"]);null!=j&&Ff(b,["supportedActions"],j);let k=Fg(a,["temperature"]);null!=k&&Ff(b,["temperature"],k);let l=Fg(a,["maxTemperature"]);null!=l&&Ff(b,["maxTemperature"],l);let m=Fg(a,["topP"]);null!=m&&Ff(b,["topP"],m);let n=Fg(a,["topK"]);null!=n&&Ff(b,["topK"],n);let o=Fg(a,["thinking"]);return null!=o&&Ff(b,["thinking"],o),b}function GG(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["displayName"]);null!=d&&Ff(b,["displayName"],d);let e=Fg(a,["description"]);null!=e&&Ff(b,["description"],e);let f=Fg(a,["versionId"]);null!=f&&Ff(b,["version"],f);let g=Fg(a,["deployedModels"]);if(null!=g){let a=g;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["endpoint"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["deployedModelId"]);return null!=d&&Ff(b,["deployedModelId"],d),b})(a))),Ff(b,["endpoints"],a)}let h=Fg(a,["labels"]);null!=h&&Ff(b,["labels"],h);let i=Fg(a,["_self"]);null!=i&&Ff(b,["tunedModelInfo"],function(a){let b={},c=Fg(a,["labels","google-vertex-llm-tuning-base-model-id"]);null!=c&&Ff(b,["baseModel"],c);let d=Fg(a,["createTime"]);null!=d&&Ff(b,["createTime"],d);let e=Fg(a,["updateTime"]);return null!=e&&Ff(b,["updateTime"],e),b}(i));let j=Fg(a,["defaultCheckpointId"]);null!=j&&Ff(b,["defaultCheckpointId"],j);let k=Fg(a,["checkpoints"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["checkpoints"],a)}return b}function GH(a){let b={},c=Fg(a,["safetyAttributes","categories"]);null!=c&&Ff(b,["categories"],c);let d=Fg(a,["safetyAttributes","scores"]);null!=d&&Ff(b,["scores"],d);let e=Fg(a,["contentType"]);return null!=e&&Ff(b,["contentType"],e),b}function GI(a){let b={},c=Fg(a,["safetyAttributes","categories"]);null!=c&&Ff(b,["categories"],c);let d=Fg(a,["safetyAttributes","scores"]);null!=d&&Ff(b,["scores"],d);let e=Fg(a,["contentType"]);return null!=e&&Ff(b,["contentType"],e),b}function GJ(a){let b={},c=Fg(a,["retrieval"]);null!=c&&Ff(b,["retrieval"],c);let d=Fg(a,["computerUse"]);if(null!=d&&Ff(b,["computerUse"],d),void 0!==Fg(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let e=Fg(a,["codeExecution"]);null!=e&&Ff(b,["codeExecution"],e);let f=Fg(a,["enterpriseWebSearch"]);null!=f&&Ff(b,["enterpriseWebSearch"],f);let g=Fg(a,["functionDeclarations"]);if(null!=g){let a=g;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["description"]);null!=c&&Ff(b,["description"],c);let d=Fg(a,["name"]);null!=d&&Ff(b,["name"],d);let e=Fg(a,["parameters"]);null!=e&&Ff(b,["parameters"],e);let f=Fg(a,["parametersJsonSchema"]);null!=f&&Ff(b,["parametersJsonSchema"],f);let g=Fg(a,["response"]);null!=g&&Ff(b,["response"],g);let h=Fg(a,["responseJsonSchema"]);if(null!=h&&Ff(b,["responseJsonSchema"],h),void 0!==Fg(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");return b})(a))),Ff(b,["functionDeclarations"],a)}let h=Fg(a,["googleMaps"]);null!=h&&Ff(b,["googleMaps"],h);let i=Fg(a,["googleSearch"]);null!=i&&Ff(b,["googleSearch"],i);let j=Fg(a,["googleSearchRetrieval"]);null!=j&&Ff(b,["googleSearchRetrieval"],j);let k=Fg(a,["urlContext"]);return null!=k&&Ff(b,["urlContext"],k),b}function GK(a){let b={},c=Fg(a,["uri"]);null!=c&&Ff(b,["uri"],c);let d=Fg(a,["videoBytes"]);null!=d&&Ff(b,["encodedVideo"],Fh(d));let e=Fg(a,["mimeType"]);return null!=e&&Ff(b,["encoding"],e),b}function GL(a){let b={},c=Fg(a,["uri"]);null!=c&&Ff(b,["gcsUri"],c);let d=Fg(a,["videoBytes"]);null!=d&&Ff(b,["bytesBase64Encoded"],Fh(d));let e=Fg(a,["mimeType"]);return null!=e&&Ff(b,["mimeType"],e),b}function GM(a,b){let c=Fg(a,["mimeType"]);void 0!==b&&null!=c&&Ff(b,["mimeType"],c);let d=Fg(a,["displayName"]);void 0!==b&&null!=d&&Ff(b,["displayName"],d);let e=Fg(a,["customMetadata"]);if(void 0!==b&&null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["customMetadata"],a)}let f=Fg(a,["chunkingConfig"]);return void 0!==b&&null!=f&&Ff(b,["chunkingConfig"],f),{}}let GN="x-goog-api-client";class GO{constructor(a){var b,c,d;this.clientOptions=Object.assign({},a),this.customBaseUrl=null==(b=a.httpOptions)?void 0:b.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let e={};if(this.clientOptions.vertexai){if(this.clientOptions.location||this.clientOptions.apiKey||this.customBaseUrl||(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let b=a.project&&a.location||!!a.apiKey;this.customBaseUrl&&!b?(e.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||"global"===this.clientOptions.location?e.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(e.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),e.apiVersion=null!=(c=this.clientOptions.apiVersion)?c:"v1beta1"}else{if(!this.clientOptions.apiKey)throw new Gt({message:"API key must be set when using the Gemini API.",status:403});e.apiVersion=null!=(d=this.clientOptions.apiVersion)?d:"v1beta",e.baseUrl="https://generativelanguage.googleapis.com/"}e.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=e,a.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(e,a.httpOptions))}isVertexAI(){var a;return null!=(a=this.clientOptions.vertexai)&&a}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let a=new Headers;return await this.clientOptions.auth.addAuthHeaders(a),a}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw Error("Headers are not set.")}getRequestUrlInternal(a){if(!a||void 0===a.baseUrl||void 0===a.apiVersion)throw Error("HTTP options are not correctly set.");let b=[a.baseUrl.endsWith("/")?a.baseUrl.slice(0,-1):a.baseUrl];return a.apiVersion&&""!==a.apiVersion&&b.push(a.apiVersion),b.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let a=new URL(this.getBaseUrl());return a.protocol="http:"==a.protocol?"ws":"wss",a.toString()}setBaseUrl(a){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=a;else throw Error("HTTP options are not correctly set.")}constructUrl(a,b,c){let d=[this.getRequestUrlInternal(b)];return c&&d.push(this.getBaseResourcePath()),""!==a&&d.push(a),new URL(`${d.join("/")}`)}shouldPrependVertexProjectPath(a,b){return!(b.baseUrl&&b.baseUrlResourceScope===ai.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||a.path.startsWith("projects/")||"GET"===a.httpMethod&&a.path.startsWith("publishers/google/models"))}async request(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a,b),d=this.constructUrl(a.path,b,c);if(a.queryParams)for(let[b,c]of Object.entries(a.queryParams))d.searchParams.append(b,String(c));let e={};if("GET"===a.httpMethod){if(a.body&&"{}"!==a.body)throw Error("Request body should be empty for GET request, but got non empty request body")}else e.body=a.body;return e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.unaryApiCall(d,e,a.httpMethod)}patchHttpOptions(a,b){let c=JSON.parse(JSON.stringify(a));for(let[a,d]of Object.entries(b))"object"==typeof d?c[a]=Object.assign(Object.assign({},c[a]),d):void 0!==d&&(c[a]=d);return c}async requestStream(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a,b),d=this.constructUrl(a.path,b,c);d.searchParams.has("alt")&&"sse"===d.searchParams.get("alt")||d.searchParams.set("alt","sse");let e={};return e.body=a.body,e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.streamApiCall(d,e,a.httpMethod)}async includeExtraHttpOptionsToRequestInit(a,b,c,d){if(b&&b.timeout||d){let c=new AbortController,e=c.signal;if(b.timeout&&(null==b?void 0:b.timeout)>0){let a=setTimeout(()=>c.abort(),b.timeout);a&&"function"==typeof a.unref&&a.unref()}d&&d.addEventListener("abort",()=>{c.abort()}),a.signal=e}return b&&null!==b.extraBody&&function(a,b){if(!b||0===Object.keys(b).length)return;if(a.body instanceof Blob)return console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let c={};if("string"==typeof a.body&&a.body.length>0)try{let b=JSON.parse(a.body);if("object"!=typeof b||null===b||Array.isArray(b))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");c=b}catch(a){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}a.body=JSON.stringify(function a(b,c){let d=Object.assign({},b);for(let b in c)if(Object.prototype.hasOwnProperty.call(c,b)){let e=c[b],f=d[b];e&&"object"==typeof e&&!Array.isArray(e)&&f&&"object"==typeof f&&!Array.isArray(f)?d[b]=a(f,e):(f&&e&&typeof f!=typeof e&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${b}". Original type: ${typeof f}, New type: ${typeof e}. Overwriting.`),d[b]=e)}return d}(c,b))}(a,b.extraBody),a.headers=await this.getHeadersInternal(b,c),a}async unaryApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await GP(a),new Fj(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}async streamApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await GP(a),this.processStreamResponse(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}processStreamResponse(a){return Gn(this,arguments,function*(){var b;let c=null==(b=null==a?void 0:a.body)?void 0:b.getReader(),d=new TextDecoder("utf-8");if(!c)throw Error("Response body is empty");try{let b="",e="data:",f=["\n\n","\r\r","\r\n\r\n"];for(;;){let{done:g,value:h}=yield Gm(c.read());if(g){if(b.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let i=d.decode(h,{stream:!0});try{let a=JSON.parse(i);if("error"in a){let b=JSON.parse(JSON.stringify(a.error)),c=b.status,d=b.code,e=`got status: ${c}. ${JSON.stringify(a)}`;if(d>=400&&d<600)throw new Gt({message:e,status:d})}}catch(a){if("ApiError"===a.name)throw a}b+=i;let j=-1,k=0;for(;;){for(let a of(j=-1,k=0,f)){let c=b.indexOf(a);-1!==c&&(-1===j||c<j)&&(j=c,k=a.length)}if(-1===j)break;let c=b.substring(0,j);b=b.substring(j+k);let d=c.trim();if(d.startsWith(e)){let b=d.substring(e.length).trim();try{let c=new Response(b,{headers:null==a?void 0:a.headers,status:null==a?void 0:a.status,statusText:null==a?void 0:a.statusText});yield yield Gm(new Fj(c))}catch(a){throw Error(`exception parsing stream chunk ${b}. ${a}`)}}}}}finally{c.releaseLock()}})}async apiCall(a,b){return fetch(a,b).catch(a=>{throw Error(`exception ${a} sending request`)})}getDefaultHeaders(){let a={},b="google-genai-sdk/1.38.0 "+this.clientOptions.userAgentExtra;return a["User-Agent"]=b,a[GN]=b,a["Content-Type"]="application/json",a}async getHeadersInternal(a,b){let c=new Headers;if(a&&a.headers){for(let[b,d]of Object.entries(a.headers))c.append(b,d);a.timeout&&a.timeout>0&&c.append("X-Server-Timeout",String(Math.ceil(a.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(c,b),c}getFileName(a){var b;let c="";return"string"==typeof a&&(c=null!=(b=(c=a.replace(/[/\\]+$/,"")).split(/[/\\]/).pop())?b:""),c}async uploadFile(a,b){var c;let d={};null!=b&&(d.mimeType=b.mimeType,d.name=b.name,d.displayName=b.displayName),d.name&&!d.name.startsWith("files/")&&(d.name=`files/${d.name}`);let e=this.clientOptions.uploader,f=await e.stat(a);d.sizeBytes=String(f.size);let g=null!=(c=null==b?void 0:b.mimeType)?c:f.type;if(void 0===g||""===g)throw Error("Can not determine mimeType. Please provide mimeType in the config.");d.mimeType=g;let h={file:d},i=this.getFileName(a),j=Fe("upload/v1beta/files",h._url),k=await this.fetchUploadUrl(j,d.sizeBytes,d.mimeType,i,h,null==b?void 0:b.httpOptions);return e.upload(a,k,this)}async uploadFileToFileSearchStore(a,b,c){var d;let e=this.clientOptions.uploader,f=await e.stat(b),g=String(f.size),h=null!=(d=null==c?void 0:c.mimeType)?d:f.type;if(void 0===h||""===h)throw Error("Can not determine mimeType. Please provide mimeType in the config.");let i=`upload/v1beta/${a}:uploadToFileSearchStore`,j=this.getFileName(b),k={};null!=c&&GM(c,k);let l=await this.fetchUploadUrl(i,g,h,j,k,null==c?void 0:c.httpOptions);return e.uploadToFileSearchStore(b,l,this)}async downloadFile(a){let b=this.clientOptions.downloader;await b.download(a,this)}async fetchUploadUrl(a,b,c,d,e,f){var g;let h={};h=f||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${b}`,"X-Goog-Upload-Header-Content-Type":`${c}`},d?{"X-Goog-Upload-File-Name":d}:{})};let i=await this.request({path:a,body:JSON.stringify(e),httpMethod:"POST",httpOptions:h});if(!i||!(null==i?void 0:i.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let j=null==(g=null==i?void 0:i.headers)?void 0:g["x-goog-upload-url"];if(void 0===j)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return j}}async function GP(a){var b;if(void 0===a)throw Error("response is undefined");if(!a.ok){let c=a.status,d=JSON.stringify((null==(b=a.headers.get("content-type"))?void 0:b.includes("application/json"))?await a.json():{error:{message:await a.text(),code:a.status,status:a.statusText}});if(c>=400&&c<600)throw new Gt({message:d,status:c});throw Error(d)}}function GQ(a){for(let c of a){var b;if(null!==(b=c)&&"object"==typeof b&&b instanceof GS||"object"==typeof c&&"inputSchema"in c)return!0}return!1}function GR(a){var b;let c=null!=(b=a[GN])?b:"";a[GN]=(c+" mcp_used/unknown").trimStart()}class GS{constructor(a=[],b){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=a,this.config=b}static create(a,b){return new GS(a,b)}async initialize(){var a,b,c,d;if(this.mcpTools.length>0)return;let e={},f=[];for(let j of this.mcpClients)try{for(var g,h=!0,i=(b=void 0,Go(function(a){return Gn(this,arguments,function*(a,b=100){let c,d=0;for(;d<b;){let b=yield Gm(a.listTools({cursor:c}));for(let a of b.tools)yield yield Gm(a),d++;if(!b.nextCursor)break;c=b.nextCursor}})}(j)));!(a=(g=await i.next()).done);h=!0){d=g.value,h=!1,f.push(d);let a=d.name;if(e[a])throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);e[a]=j}}catch(a){b={error:a}}finally{try{!h&&!a&&(c=i.return)&&await c.call(i)}finally{if(b)throw b.error}}this.mcpTools=f,this.functionNameToMcpClient=e}async tool(){return await this.initialize(),function(a,b={}){let c=[],d=new Set;for(let e of a){let a=e.name;if(d.has(a))throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);d.add(a);let f=function(a,b={}){let c={name:a.name,description:a.description,parametersJsonSchema:a.inputSchema};return a.outputSchema&&(c.responseJsonSchema=a.outputSchema),b.behavior&&(c.behavior=b.behavior),{functionDeclarations:[c]}}(e,b);f.functionDeclarations&&c.push(...f.functionDeclarations)}return{functionDeclarations:c}}(this.mcpTools,this.config)}async callTool(a){await this.initialize();let b=[];for(let c of a)if(c.name in this.functionNameToMcpClient){let a,d=this.functionNameToMcpClient[c.name];this.config.timeout&&(a={timeout:this.config.timeout});let e=await d.callTool({name:c.name,arguments:c.args},void 0,a);b.push({functionResponse:{name:c.name,response:e.isError?{error:e}:e}})}return b}}async function GT(a,b,c){let d=new FJ;Object.assign(d,c.data instanceof Blob?JSON.parse(await c.data.text()):JSON.parse(c.data)),b(d)}class GU{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c}async connect(a){var b,c;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let d=this.apiClient.getWebsocketBaseUrl(),e=this.apiClient.getApiVersion(),f=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),h=`${d}/ws/google.ai.generativelanguage.${e}.GenerativeService.BidiGenerateMusic?key=${g}`,i=()=>{},j=new Promise(a=>{i=a}),k=a.callbacks,l=this.apiClient,m={onopen:function(){i({})},onmessage:a=>{GT(l,k.onmessage,a)},onerror:null!=(b=null==k?void 0:k.onerror)?b:function(a){},onclose:null!=(c=null==k?void 0:k.onclose)?c:function(a){}},n=this.webSocketFactory.create(h,function(a){let b={};return a.forEach((a,c)=>{b[c]=a}),b}(f),m);n.connect(),await j;let o=FL(this.apiClient,a.model);return n.send(JSON.stringify({setup:{model:o}})),new GV(n,this.apiClient)}}class GV{constructor(a,b){this.conn=a,this.apiClient=b}async setWeightedPrompts(a){if(!a.weightedPrompts||0===Object.keys(a.weightedPrompts).length)throw Error("Weighted prompts must be set and contain at least one entry.");let b=function(a){let b={},c=Fg(a,["weightedPrompts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["weightedPrompts"],a)}return b}(a);this.conn.send(JSON.stringify({clientContent:b}))}async setMusicGenerationConfig(a){a.musicGenerationConfig||(a.musicGenerationConfig={});let b=function(a){let b={},c=Fg(a,["musicGenerationConfig"]);return null!=c&&Ff(b,["musicGenerationConfig"],c),b}(a);this.conn.send(JSON.stringify(b))}sendPlaybackControl(a){this.conn.send(JSON.stringify({playbackControl:a}))}play(){this.sendPlaybackControl(aK.PLAY)}pause(){this.sendPlaybackControl(aK.PAUSE)}stop(){this.sendPlaybackControl(aK.STOP)}resetContext(){this.sendPlaybackControl(aK.RESET_CONTEXT)}close(){this.conn.close()}}async function GW(a,b,c){let d=new FI,e=JSON.parse(c.data instanceof Blob?await c.data.text():c.data instanceof ArrayBuffer?new TextDecoder().decode(c.data):c.data);a.isVertexAI()?Object.assign(d,function(a){let b={},c=Fg(a,["setupComplete"]);null!=c&&Ff(b,["setupComplete"],c);let d=Fg(a,["serverContent"]);null!=d&&Ff(b,["serverContent"],d);let e=Fg(a,["toolCall"]);null!=e&&Ff(b,["toolCall"],e);let f=Fg(a,["toolCallCancellation"]);null!=f&&Ff(b,["toolCallCancellation"],f);let g=Fg(a,["usageMetadata"]);null!=g&&Ff(b,["usageMetadata"],function(a){let b={},c=Fg(a,["promptTokenCount"]);null!=c&&Ff(b,["promptTokenCount"],c);let d=Fg(a,["cachedContentTokenCount"]);null!=d&&Ff(b,["cachedContentTokenCount"],d);let e=Fg(a,["candidatesTokenCount"]);null!=e&&Ff(b,["responseTokenCount"],e);let f=Fg(a,["toolUsePromptTokenCount"]);null!=f&&Ff(b,["toolUsePromptTokenCount"],f);let g=Fg(a,["thoughtsTokenCount"]);null!=g&&Ff(b,["thoughtsTokenCount"],g);let h=Fg(a,["totalTokenCount"]);null!=h&&Ff(b,["totalTokenCount"],h);let i=Fg(a,["promptTokensDetails"]);if(null!=i){let a=i;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["promptTokensDetails"],a)}let j=Fg(a,["cacheTokensDetails"]);if(null!=j){let a=j;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["cacheTokensDetails"],a)}let k=Fg(a,["candidatesTokensDetails"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["responseTokensDetails"],a)}let l=Fg(a,["toolUsePromptTokensDetails"]);if(null!=l){let a=l;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["toolUsePromptTokensDetails"],a)}let m=Fg(a,["trafficType"]);return null!=m&&Ff(b,["trafficType"],m),b}(g));let h=Fg(a,["goAway"]);null!=h&&Ff(b,["goAway"],h);let i=Fg(a,["sessionResumptionUpdate"]);null!=i&&Ff(b,["sessionResumptionUpdate"],i);let j=Fg(a,["voiceActivityDetectionSignal"]);null!=j&&Ff(b,["voiceActivityDetectionSignal"],j);let k=Fg(a,["voiceActivity"]);return null!=k&&Ff(b,["voiceActivity"],function(a){let b={},c=Fg(a,["type"]);return null!=c&&Ff(b,["voiceActivityType"],c),b}(k)),b}(e)):Object.assign(d,e),b(d)}class GX{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c,this.music=new GU(this.apiClient,this.auth,this.webSocketFactory)}async connect(a){var b,c,d,e,f,g;let h;if(a.config&&a.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let i=this.apiClient.getWebsocketBaseUrl(),j=this.apiClient.getApiVersion(),k=this.apiClient.getHeaders();a.config&&a.config.tools&&GQ(a.config.tools)&&GR(k);let l=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(k);if(this.apiClient.isVertexAI()){let a=this.apiClient.getProject(),b=this.apiClient.getLocation(),c=this.apiClient.getApiKey();this.apiClient.getCustomBaseUrl()&&!(a&&b||c)?h=i:(h=`${i}/ws/google.cloud.aiplatform.${j}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(l,h))}else{let a=this.apiClient.getApiKey(),b="BidiGenerateContent",c="key";(null==a?void 0:a.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==j&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",c="access_token"),h=`${i}/ws/google.ai.generativelanguage.${j}.GenerativeService.${b}?${c}=${a}`}let m=()=>{},n=new Promise(a=>{m=a}),o=a.callbacks,p=this.apiClient,q={onopen:function(){var a;null==(a=null==o?void 0:o.onopen)||a.call(o),m({})},onmessage:a=>{GW(p,o.onmessage,a)},onerror:null!=(b=null==o?void 0:o.onerror)?b:function(a){},onclose:null!=(c=null==o?void 0:o.onclose)?c:function(a){}},r=this.webSocketFactory.create(h,function(a){let b={};return a.forEach((a,c)=>{b[c]=a}),b}(l),q);r.connect(),await n;let s=FL(this.apiClient,a.model);if(this.apiClient.isVertexAI()&&s.startsWith("publishers/")){let a=this.apiClient.getProject(),b=this.apiClient.getLocation();a&&b&&(s=`projects/${a}/locations/${b}/`+s)}let t={};this.apiClient.isVertexAI()&&(null==(d=a.config)?void 0:d.responseModalities)===void 0&&(void 0===a.config?a.config={responseModalities:[ab.AUDIO]}:a.config.responseModalities=[ab.AUDIO]),(null==(e=a.config)?void 0:e.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let u=null!=(g=null==(f=a.config)?void 0:f.tools)?g:[],v=[];for(let a of u)this.isCallableTool(a)?v.push(await a.tool()):v.push(a);v.length>0&&(a.config.tools=v);let w={model:s,config:a.config,callbacks:a.callbacks};return t=this.apiClient.isVertexAI()?function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["setup","model"],FL(a,d));let e=Fg(b,["config"]);return null!=e&&Ff(c,["config"],function(a,b){let c=Fg(a,["generationConfig"]);void 0!==b&&null!=c&&Ff(b,["setup","generationConfig"],function(a){let b={},c=Fg(a,["modelSelectionConfig"]);null!=c&&Ff(b,["modelConfig"],c);let d=Fg(a,["responseJsonSchema"]);null!=d&&Ff(b,["responseJsonSchema"],d);let e=Fg(a,["audioTimestamp"]);null!=e&&Ff(b,["audioTimestamp"],e);let f=Fg(a,["candidateCount"]);null!=f&&Ff(b,["candidateCount"],f);let g=Fg(a,["enableAffectiveDialog"]);null!=g&&Ff(b,["enableAffectiveDialog"],g);let h=Fg(a,["frequencyPenalty"]);null!=h&&Ff(b,["frequencyPenalty"],h);let i=Fg(a,["logprobs"]);null!=i&&Ff(b,["logprobs"],i);let j=Fg(a,["maxOutputTokens"]);null!=j&&Ff(b,["maxOutputTokens"],j);let k=Fg(a,["mediaResolution"]);null!=k&&Ff(b,["mediaResolution"],k);let l=Fg(a,["presencePenalty"]);null!=l&&Ff(b,["presencePenalty"],l);let m=Fg(a,["responseLogprobs"]);null!=m&&Ff(b,["responseLogprobs"],m);let n=Fg(a,["responseMimeType"]);null!=n&&Ff(b,["responseMimeType"],n);let o=Fg(a,["responseModalities"]);null!=o&&Ff(b,["responseModalities"],o);let p=Fg(a,["responseSchema"]);null!=p&&Ff(b,["responseSchema"],p);let q=Fg(a,["routingConfig"]);null!=q&&Ff(b,["routingConfig"],q);let r=Fg(a,["seed"]);null!=r&&Ff(b,["seed"],r);let s=Fg(a,["speechConfig"]);null!=s&&Ff(b,["speechConfig"],s);let t=Fg(a,["stopSequences"]);null!=t&&Ff(b,["stopSequences"],t);let u=Fg(a,["temperature"]);null!=u&&Ff(b,["temperature"],u);let v=Fg(a,["thinkingConfig"]);null!=v&&Ff(b,["thinkingConfig"],v);let w=Fg(a,["topK"]);null!=w&&Ff(b,["topK"],w);let x=Fg(a,["topP"]);if(null!=x&&Ff(b,["topP"],x),void 0!==Fg(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(c));let d=Fg(a,["responseModalities"]);void 0!==b&&null!=d&&Ff(b,["setup","generationConfig","responseModalities"],d);let e=Fg(a,["temperature"]);void 0!==b&&null!=e&&Ff(b,["setup","generationConfig","temperature"],e);let f=Fg(a,["topP"]);void 0!==b&&null!=f&&Ff(b,["setup","generationConfig","topP"],f);let g=Fg(a,["topK"]);void 0!==b&&null!=g&&Ff(b,["setup","generationConfig","topK"],g);let h=Fg(a,["maxOutputTokens"]);void 0!==b&&null!=h&&Ff(b,["setup","generationConfig","maxOutputTokens"],h);let i=Fg(a,["mediaResolution"]);void 0!==b&&null!=i&&Ff(b,["setup","generationConfig","mediaResolution"],i);let j=Fg(a,["seed"]);void 0!==b&&null!=j&&Ff(b,["setup","generationConfig","seed"],j);let k=Fg(a,["speechConfig"]);void 0!==b&&null!=k&&Ff(b,["setup","generationConfig","speechConfig"],F_(k));let l=Fg(a,["thinkingConfig"]);void 0!==b&&null!=l&&Ff(b,["setup","generationConfig","thinkingConfig"],l);let m=Fg(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&Ff(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=Fg(a,["systemInstruction"]);void 0!==b&&null!=n&&Ff(b,["setup","systemInstruction"],FW(n));let o=Fg(a,["tools"]);if(void 0!==b&&null!=o){let a=F1(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["retrieval"]);null!=c&&Ff(b,["retrieval"],c);let d=Fg(a,["computerUse"]);if(null!=d&&Ff(b,["computerUse"],d),void 0!==Fg(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let e=Fg(a,["codeExecution"]);null!=e&&Ff(b,["codeExecution"],e);let f=Fg(a,["enterpriseWebSearch"]);null!=f&&Ff(b,["enterpriseWebSearch"],f);let g=Fg(a,["functionDeclarations"]);if(null!=g){let a=g;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["description"]);null!=c&&Ff(b,["description"],c);let d=Fg(a,["name"]);null!=d&&Ff(b,["name"],d);let e=Fg(a,["parameters"]);null!=e&&Ff(b,["parameters"],e);let f=Fg(a,["parametersJsonSchema"]);null!=f&&Ff(b,["parametersJsonSchema"],f);let g=Fg(a,["response"]);null!=g&&Ff(b,["response"],g);let h=Fg(a,["responseJsonSchema"]);if(null!=h&&Ff(b,["responseJsonSchema"],h),void 0!==Fg(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");return b})(a))),Ff(b,["functionDeclarations"],a)}let h=Fg(a,["googleMaps"]);null!=h&&Ff(b,["googleMaps"],h);let i=Fg(a,["googleSearch"]);null!=i&&Ff(b,["googleSearch"],i);let j=Fg(a,["googleSearchRetrieval"]);null!=j&&Ff(b,["googleSearchRetrieval"],j);let k=Fg(a,["urlContext"]);return null!=k&&Ff(b,["urlContext"],k),b})(F0(a)))),Ff(b,["setup","tools"],a)}let p=Fg(a,["sessionResumption"]);void 0!==b&&null!=p&&Ff(b,["setup","sessionResumption"],p);let q=Fg(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&Ff(b,["setup","inputAudioTranscription"],q);let r=Fg(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&Ff(b,["setup","outputAudioTranscription"],r);let s=Fg(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&Ff(b,["setup","realtimeInputConfig"],s);let t=Fg(a,["contextWindowCompression"]);void 0!==b&&null!=t&&Ff(b,["setup","contextWindowCompression"],t);let u=Fg(a,["proactivity"]);void 0!==b&&null!=u&&Ff(b,["setup","proactivity"],u);let v=Fg(a,["explicitVadSignal"]);return void 0!==b&&null!=v&&Ff(b,["setup","explicitVadSignal"],v),{}}(e,c)),c}(this.apiClient,w):function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["setup","model"],FL(a,d));let e=Fg(b,["config"]);return null!=e&&Ff(c,["config"],function(a,b){let c=Fg(a,["generationConfig"]);void 0!==b&&null!=c&&Ff(b,["setup","generationConfig"],c);let d=Fg(a,["responseModalities"]);void 0!==b&&null!=d&&Ff(b,["setup","generationConfig","responseModalities"],d);let e=Fg(a,["temperature"]);void 0!==b&&null!=e&&Ff(b,["setup","generationConfig","temperature"],e);let f=Fg(a,["topP"]);void 0!==b&&null!=f&&Ff(b,["setup","generationConfig","topP"],f);let g=Fg(a,["topK"]);void 0!==b&&null!=g&&Ff(b,["setup","generationConfig","topK"],g);let h=Fg(a,["maxOutputTokens"]);void 0!==b&&null!=h&&Ff(b,["setup","generationConfig","maxOutputTokens"],h);let i=Fg(a,["mediaResolution"]);void 0!==b&&null!=i&&Ff(b,["setup","generationConfig","mediaResolution"],i);let j=Fg(a,["seed"]);void 0!==b&&null!=j&&Ff(b,["setup","generationConfig","seed"],j);let k=Fg(a,["speechConfig"]);void 0!==b&&null!=k&&Ff(b,["setup","generationConfig","speechConfig"],F_(k));let l=Fg(a,["thinkingConfig"]);void 0!==b&&null!=l&&Ff(b,["setup","generationConfig","thinkingConfig"],l);let m=Fg(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&Ff(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=Fg(a,["systemInstruction"]);void 0!==b&&null!=n&&Ff(b,["setup","systemInstruction"],function(a){let b={},c=Fg(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["mediaResolution"]);null!=c&&Ff(b,["mediaResolution"],c);let d=Fg(a,["codeExecutionResult"]);null!=d&&Ff(b,["codeExecutionResult"],d);let e=Fg(a,["executableCode"]);null!=e&&Ff(b,["executableCode"],e);let f=Fg(a,["fileData"]);null!=f&&Ff(b,["fileData"],function(a){let b={};if(void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=Fg(a,["fileUri"]);null!=c&&Ff(b,["fileUri"],c);let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(f));let g=Fg(a,["functionCall"]);null!=g&&Ff(b,["functionCall"],function(a){let b={},c=Fg(a,["id"]);null!=c&&Ff(b,["id"],c);let d=Fg(a,["args"]);null!=d&&Ff(b,["args"],d);let e=Fg(a,["name"]);if(null!=e&&Ff(b,["name"],e),void 0!==Fg(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==Fg(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=Fg(a,["functionResponse"]);null!=h&&Ff(b,["functionResponse"],h);let i=Fg(a,["inlineData"]);null!=i&&Ff(b,["inlineData"],Gv(i));let j=Fg(a,["text"]);null!=j&&Ff(b,["text"],j);let k=Fg(a,["thought"]);null!=k&&Ff(b,["thought"],k);let l=Fg(a,["thoughtSignature"]);null!=l&&Ff(b,["thoughtSignature"],l);let m=Fg(a,["videoMetadata"]);return null!=m&&Ff(b,["videoMetadata"],m),b})(a))),Ff(b,["parts"],a)}let d=Fg(a,["role"]);return null!=d&&Ff(b,["role"],d),b}(FW(n)));let o=Fg(a,["tools"]);if(void 0!==b&&null!=o){let a=F1(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==Fg(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let c=Fg(a,["computerUse"]);null!=c&&Ff(b,["computerUse"],c);let d=Fg(a,["fileSearch"]);null!=d&&Ff(b,["fileSearch"],d);let e=Fg(a,["codeExecution"]);if(null!=e&&Ff(b,["codeExecution"],e),void 0!==Fg(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let f=Fg(a,["functionDeclarations"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["functionDeclarations"],a)}let g=Fg(a,["googleMaps"]);null!=g&&Ff(b,["googleMaps"],function(a){let b={};if(void 0!==Fg(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=Fg(a,["enableWidget"]);return null!=c&&Ff(b,["enableWidget"],c),b}(g));let h=Fg(a,["googleSearch"]);null!=h&&Ff(b,["googleSearch"],function(a){let b={};if(void 0!==Fg(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==Fg(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=Fg(a,["timeRangeFilter"]);return null!=c&&Ff(b,["timeRangeFilter"],c),b}(h));let i=Fg(a,["googleSearchRetrieval"]);null!=i&&Ff(b,["googleSearchRetrieval"],i);let j=Fg(a,["urlContext"]);return null!=j&&Ff(b,["urlContext"],j),b})(F0(a)))),Ff(b,["setup","tools"],a)}let p=Fg(a,["sessionResumption"]);void 0!==b&&null!=p&&Ff(b,["setup","sessionResumption"],function(a){let b={},c=Fg(a,["handle"]);if(null!=c&&Ff(b,["handle"],c),void 0!==Fg(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=Fg(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&Ff(b,["setup","inputAudioTranscription"],q);let r=Fg(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&Ff(b,["setup","outputAudioTranscription"],r);let s=Fg(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&Ff(b,["setup","realtimeInputConfig"],s);let t=Fg(a,["contextWindowCompression"]);void 0!==b&&null!=t&&Ff(b,["setup","contextWindowCompression"],t);let u=Fg(a,["proactivity"]);if(void 0!==b&&null!=u&&Ff(b,["setup","proactivity"],u),void 0!==Fg(a,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(e,c)),c}(this.apiClient,w),delete t.config,r.send(JSON.stringify(t)),new GZ(r,this.apiClient)}isCallableTool(a){return"callTool"in a&&"function"==typeof a.callTool}}let GY={turnComplete:!0};class GZ{constructor(a,b){this.conn=a,this.apiClient=b}tLiveClientContent(a,b){if(null!==b.turns&&void 0!==b.turns){let c=[];try{c=FY(b.turns),a.isVertexAI()||(c=c.map(a=>Gw(a)))}catch(a){throw Error(`Failed to parse client content "turns", type: '${typeof b.turns}'`)}return{clientContent:{turns:c,turnComplete:b.turnComplete}}}return{clientContent:{turnComplete:b.turnComplete}}}tLiveClienttToolResponse(a,b){let c=[];if(null==b.functionResponses||0===(c=Array.isArray(b.functionResponses)?b.functionResponses:[b.functionResponses]).length)throw Error("functionResponses is required.");for(let b of c){if("object"!=typeof b||null===b||!("name"in b)||!("response"in b))throw Error(`Could not parse function response, type '${typeof b}'.`);if(!a.isVertexAI()&&!("id"in b))throw Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:c}}}sendClientContent(a){a=Object.assign(Object.assign({},GY),a);let b=this.tLiveClientContent(this.apiClient,a);this.conn.send(JSON.stringify(b))}sendRealtimeInput(a){let b={};b=this.apiClient.isVertexAI()?{realtimeInput:function(a){let b={},c=Fg(a,["media"]);if(null!=c){let a=FN(c);Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["mediaChunks"],a)}let d=Fg(a,["audio"]);null!=d&&Ff(b,["audio"],FQ(d));let e=Fg(a,["audioStreamEnd"]);null!=e&&Ff(b,["audioStreamEnd"],e);let f=Fg(a,["video"]);null!=f&&Ff(b,["video"],FP(f));let g=Fg(a,["text"]);null!=g&&Ff(b,["text"],g);let h=Fg(a,["activityStart"]);null!=h&&Ff(b,["activityStart"],h);let i=Fg(a,["activityEnd"]);return null!=i&&Ff(b,["activityEnd"],i),b}(a)}:{realtimeInput:function(a){let b={},c=Fg(a,["media"]);if(null!=c){let a=FN(c);Array.isArray(a)&&(a=a.map(a=>Gv(a))),Ff(b,["mediaChunks"],a)}let d=Fg(a,["audio"]);null!=d&&Ff(b,["audio"],Gv(FQ(d)));let e=Fg(a,["audioStreamEnd"]);null!=e&&Ff(b,["audioStreamEnd"],e);let f=Fg(a,["video"]);null!=f&&Ff(b,["video"],Gv(FP(f)));let g=Fg(a,["text"]);null!=g&&Ff(b,["text"],g);let h=Fg(a,["activityStart"]);null!=h&&Ff(b,["activityStart"],h);let i=Fg(a,["activityEnd"]);return null!=i&&Ff(b,["activityEnd"],i),b}(a)},this.conn.send(JSON.stringify(b))}sendToolResponse(a){if(null==a.functionResponses)throw Error("Tool response parameters are required.");let b=this.tLiveClienttToolResponse(this.apiClient,a);this.conn.send(JSON.stringify(b))}close(){this.conn.close()}}function G$(a){var b,c,d;if(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.disable)return!0;let e=!1;for(let b of null!=(c=null==a?void 0:a.tools)?c:[])if(G_(b)){e=!0;break}if(!e)return!0;let f=null==(d=null==a?void 0:a.automaticFunctionCalling)?void 0:d.maximumRemoteCalls;return(!(!f||!(f<0)&&Number.isInteger(f))||0==f)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0)}function G_(a){return"callTool"in a&&"function"==typeof a.callTool}function G0(a){var b;let c=[];return(null==(b=null==a?void 0:a.config)?void 0:b.tools)&&a.config.tools.forEach((a,b)=>{!G_(a)&&a.functionDeclarations&&a.functionDeclarations.length>0&&c.push(b)}),c}function G1(a){var b;return!(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.ignoreCallHistory)}class G2 extends Fd{constructor(a){super(),this.apiClient=a,this.generateContent=async a=>{var b,c,d,e,f;let g,h,i=await this.processParamsMaybeAddMcpUsage(a);if(this.maybeMoveToResponseJsonSchem(a),!function(a){var b,c,d;return null!=(d=null==(c=null==(b=a.config)?void 0:b.tools)?void 0:c.some(a=>G_(a)))&&d}(a)||G$(a.config))return await this.generateContentInternal(i);let j=G0(a);if(j.length>0){let a=j.map(a=>`tools[${a}]`).join(", ");throw Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${a}.`)}let k=FY(i.contents),l=null!=(d=null==(c=null==(b=i.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,m=0;for(;m<l&&(g=await this.generateContentInternal(i)).functionCalls&&0!==g.functionCalls.length;){let b=g.candidates[0].content,c=[];for(let b of null!=(f=null==(e=a.config)?void 0:e.tools)?f:[])if(G_(b)){let a=await b.callTool(g.functionCalls);c.push(...a)}m++,h={role:"user",parts:c},i.contents=FY(i.contents),i.contents.push(b),i.contents.push(h),G1(i.config)&&(k.push(b),k.push(h))}return G1(i.config)&&(g.automaticFunctionCallingHistory=k),g},this.generateContentStream=async a=>{var b,c,d,e,f;if(this.maybeMoveToResponseJsonSchem(a),G$(a.config)){let b=await this.processParamsMaybeAddMcpUsage(a);return await this.generateContentStreamInternal(b)}let g=G0(a);if(g.length>0){let a=g.map(a=>`tools[${a}]`).join(", ");throw Error(`Incompatible tools found at ${a}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let h=null==(d=null==(c=null==(b=null==a?void 0:a.config)?void 0:b.toolConfig)?void 0:c.functionCallingConfig)?void 0:d.streamFunctionCallArguments,i=null==(f=null==(e=null==a?void 0:a.config)?void 0:e.automaticFunctionCalling)?void 0:f.disable;if(h&&!i)throw Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(a)},this.generateImages=async a=>await this.generateImagesInternal(a).then(a=>{var b;let c,d=[];if(null==a?void 0:a.generatedImages)for(let e of a.generatedImages)e&&(null==e?void 0:e.safetyAttributes)&&(null==(b=null==e?void 0:e.safetyAttributes)?void 0:b.contentType)==="Positive Prompt"?c=null==e?void 0:e.safetyAttributes:d.push(e);return c?{generatedImages:d,positivePromptSafetyAttributes:c,sdkHttpResponse:a.sdkHttpResponse}:{generatedImages:d,sdkHttpResponse:a.sdkHttpResponse}}),this.list=async a=>{var b;let c={config:Object.assign(Object.assign({},{queryBase:!0}),null==a?void 0:a.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase)if(null==(b=c.config)?void 0:b.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else c.config.filter="labels.tune-type:*";return new Gh(aL.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(c),c)},this.editImage=async a=>{let b={model:a.model,prompt:a.prompt,referenceImages:[],config:a.config};return a.referenceImages&&a.referenceImages&&(b.referenceImages=a.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(b)},this.upscaleImage=async a=>{let b={numberOfImages:1,mode:"upscale"};a.config&&(b=Object.assign(Object.assign({},b),a.config));let c={model:a.model,image:a.image,upscaleFactor:a.upscaleFactor,config:b};return await this.upscaleImageInternal(c)},this.generateVideos=async a=>{var b,c,d,e,f,g;if((a.prompt||a.image||a.video)&&a.source)throw Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return!this.apiClient.isVertexAI()&&((null==(b=a.video)?void 0:b.uri)&&(null==(c=a.video)?void 0:c.videoBytes)?a.video={uri:a.video.uri,mimeType:a.video.mimeType}:(null==(e=null==(d=a.source)?void 0:d.video)?void 0:e.uri)&&(null==(g=null==(f=a.source)?void 0:f.video)?void 0:g.videoBytes)&&(a.source.video={uri:a.source.video.uri,mimeType:a.source.video.mimeType})),await this.generateVideosInternal(a)}}maybeMoveToResponseJsonSchem(a){a.config&&a.config.responseSchema&&!a.config.responseJsonSchema&&Object.keys(a.config.responseSchema).includes("$schema")&&(a.config.responseJsonSchema=a.config.responseSchema,delete a.config.responseSchema)}async processParamsMaybeAddMcpUsage(a){var b,c,d;let e=null==(b=a.config)?void 0:b.tools;if(!e)return a;let f=await Promise.all(e.map(async a=>G_(a)?await a.tool():a)),g={model:a.model,contents:a.contents,config:Object.assign(Object.assign({},a.config),{tools:f})};if(g.config.tools=f,a.config&&a.config.tools&&GQ(a.config.tools)){let b=Object.assign({},null!=(d=null==(c=a.config.httpOptions)?void 0:c.headers)?d:{});0===Object.keys(b).length&&(b=this.apiClient.getDefaultHeaders()),GR(b),g.config.httpOptions=Object.assign(Object.assign({},a.config.httpOptions),{headers:b})}return g}async initAfcToolsMap(a){var b,c,d;let e=new Map;for(let f of null!=(c=null==(b=a.config)?void 0:b.tools)?c:[])if(G_(f))for(let a of null!=(d=(await f.tool()).functionDeclarations)?d:[]){if(!a.name)throw Error("Function declaration name is required.");if(e.has(a.name))throw Error(`Duplicate tool declaration name: ${a.name}`);e.set(a.name,f)}return e}async processAfcStream(a){var b,c,d;let e=null!=(d=null==(c=null==(b=a.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,f=!1,g=0;return function(a,b,c){return Gn(this,arguments,function*(){for(;g<e;){f&&(g++,f=!1);let p=yield Gm(a.processParamsMaybeAddMcpUsage(c)),q=yield Gm(a.generateContentStreamInternal(p)),r=[],s=[];try{for(var d,h,i,j,k,l,m,n=!0,o=(h=void 0,Go(q));!(d=(m=yield Gm(o.next())).done);n=!0)if(j=m.value,n=!1,yield yield Gm(j),j.candidates&&(null==(k=j.candidates[0])?void 0:k.content)){for(let a of(s.push(j.candidates[0].content),null!=(l=j.candidates[0].content.parts)?l:[]))if(g<e&&a.functionCall){if(!a.functionCall.name)throw Error("Function call name was not returned by the model.");if(b.has(a.functionCall.name)){let c=yield Gm(b.get(a.functionCall.name).callTool([a.functionCall]));r.push(...c)}else throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${a.functionCall.name}`)}}}catch(a){h={error:a}}finally{try{!n&&!d&&(i=o.return)&&(yield Gm(i.call(o)))}finally{if(h)throw h.error}}if(r.length>0){f=!0;let a=new Fk;a.candidates=[{content:{role:"user",parts:r}}],yield yield Gm(a);let b=[];b.push(...s),b.push({role:"user",parts:r});let d=FY(c.contents).concat(b);c.contents=d}else break}})}(this,await this.initAfcToolsMap(a),a)}async generateContentInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=Gy(this.apiClient,a);return f=Fe("{model}:generateContent",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=GA(a),c=new Fk;return Object.assign(c,b),c})}{let b=Gx(this.apiClient,a);return f=Fe("{model}:generateContent",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=Gz(a),c=new Fk;return Object.assign(c,b),c})}}async generateContentStreamInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=Gy(this.apiClient,a);return f=Fe("{model}:streamGenerateContent?alt=sse",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(function(a){return Gn(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=Go(a);!(b=(f=yield Gm(h.next())).done);g=!0){e=f.value,g=!1;let a=GA((yield Gm(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new Fk;Object.assign(b,a),yield yield Gm(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield Gm(d.call(h)))}finally{if(c)throw c.error}}})})}{let b=Gx(this.apiClient,a);return f=Fe("{model}:streamGenerateContent?alt=sse",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(function(a){return Gn(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=Go(a);!(b=(f=yield Gm(h.next())).done);g=!0){e=f.value,g=!1;let a=Gz((yield Gm(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new Fk;Object.assign(b,a),yield yield Gm(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield Gm(d.call(h)))}finally{if(c)throw c.error}}})})}}async embedContent(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["contents"]);if(null!=e){let b=FX(a,e);Array.isArray(b)&&(b=b.map(a=>a)),Ff(c,["instances[]","content"],b)}let f=Fg(b,["config"]);return null!=f&&function(a,b){let c=Fg(a,["taskType"]);void 0!==b&&null!=c&&Ff(b,["instances[]","task_type"],c);let d=Fg(a,["title"]);void 0!==b&&null!=d&&Ff(b,["instances[]","title"],d);let e=Fg(a,["outputDimensionality"]);void 0!==b&&null!=e&&Ff(b,["parameters","outputDimensionality"],e);let f=Fg(a,["mimeType"]);void 0!==b&&null!=f&&Ff(b,["instances[]","mimeType"],f);let g=Fg(a,["autoTruncate"]);void 0!==b&&null!=g&&Ff(b,["parameters","autoTruncate"],g)}(f,c),c}(this.apiClient,a);return f=Fe("{model}:predict",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["predictions[]","embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["values"]);null!=c&&Ff(b,["values"],c);let d=Fg(a,["statistics"]);return null!=d&&Ff(b,["statistics"],function(a){let b={},c=Fg(a,["truncated"]);null!=c&&Ff(b,["truncated"],c);let d=Fg(a,["token_count"]);return null!=d&&Ff(b,["tokenCount"],d),b}(d)),b})(a))),Ff(b,["embeddings"],a)}let e=Fg(a,["metadata"]);return null!=e&&Ff(b,["metadata"],e),b}(a),c=new Fl;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["contents"]);if(null!=e){let b=FX(a,e);Array.isArray(b)&&(b=b.map(a=>a)),Ff(c,["requests[]","content"],b)}let f=Fg(b,["config"]);null!=f&&function(a,b){let c=Fg(a,["taskType"]);void 0!==b&&null!=c&&Ff(b,["requests[]","taskType"],c);let d=Fg(a,["title"]);void 0!==b&&null!=d&&Ff(b,["requests[]","title"],d);let e=Fg(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&Ff(b,["requests[]","outputDimensionality"],e),void 0!==Fg(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==Fg(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.")}(f,c);let g=Fg(b,["model"]);return void 0!==g&&Ff(c,["requests[]","model"],FL(a,g)),c}(this.apiClient,a);return f=Fe("{model}:batchEmbedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["embeddings"],a)}let e=Fg(a,["metadata"]);return null!=e&&Ff(b,["metadata"],e),b}(a),c=new Fl;return Object.assign(c,b),c})}}async generateImagesInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["prompt"]);null!=e&&Ff(c,["instances[0]","prompt"],e);let f=Fg(b,["config"]);return null!=f&&function(a,b){let c=Fg(a,["outputGcsUri"]);void 0!==b&&null!=c&&Ff(b,["parameters","storageUri"],c);let d=Fg(a,["negativePrompt"]);void 0!==b&&null!=d&&Ff(b,["parameters","negativePrompt"],d);let e=Fg(a,["numberOfImages"]);void 0!==b&&null!=e&&Ff(b,["parameters","sampleCount"],e);let f=Fg(a,["aspectRatio"]);void 0!==b&&null!=f&&Ff(b,["parameters","aspectRatio"],f);let g=Fg(a,["guidanceScale"]);void 0!==b&&null!=g&&Ff(b,["parameters","guidanceScale"],g);let h=Fg(a,["seed"]);void 0!==b&&null!=h&&Ff(b,["parameters","seed"],h);let i=Fg(a,["safetyFilterLevel"]);void 0!==b&&null!=i&&Ff(b,["parameters","safetySetting"],i);let j=Fg(a,["personGeneration"]);void 0!==b&&null!=j&&Ff(b,["parameters","personGeneration"],j);let k=Fg(a,["includeSafetyAttributes"]);void 0!==b&&null!=k&&Ff(b,["parameters","includeSafetyAttributes"],k);let l=Fg(a,["includeRaiReason"]);void 0!==b&&null!=l&&Ff(b,["parameters","includeRaiReason"],l);let m=Fg(a,["language"]);void 0!==b&&null!=m&&Ff(b,["parameters","language"],m);let n=Fg(a,["outputMimeType"]);void 0!==b&&null!=n&&Ff(b,["parameters","outputOptions","mimeType"],n);let o=Fg(a,["outputCompressionQuality"]);void 0!==b&&null!=o&&Ff(b,["parameters","outputOptions","compressionQuality"],o);let p=Fg(a,["addWatermark"]);void 0!==b&&null!=p&&Ff(b,["parameters","addWatermark"],p);let q=Fg(a,["labels"]);void 0!==b&&null!=q&&Ff(b,["labels"],q);let r=Fg(a,["imageSize"]);void 0!==b&&null!=r&&Ff(b,["parameters","sampleImageSize"],r);let s=Fg(a,["enhancePrompt"]);void 0!==b&&null!=s&&Ff(b,["parameters","enhancePrompt"],s)}(f,c),c}(this.apiClient,a);return f=Fe("{model}:predict",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>GB(a))),Ff(b,["generatedImages"],a)}let e=Fg(a,["positivePromptSafetyAttributes"]);return null!=e&&Ff(b,["positivePromptSafetyAttributes"],GI(e)),b}(a),c=new Fm;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["prompt"]);null!=e&&Ff(c,["instances[0]","prompt"],e);let f=Fg(b,["config"]);return null!=f&&function(a,b){if(void 0!==Fg(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==Fg(a,["negativePrompt"]))throw Error("negativePrompt parameter is not supported in Gemini API.");let c=Fg(a,["numberOfImages"]);void 0!==b&&null!=c&&Ff(b,["parameters","sampleCount"],c);let d=Fg(a,["aspectRatio"]);void 0!==b&&null!=d&&Ff(b,["parameters","aspectRatio"],d);let e=Fg(a,["guidanceScale"]);if(void 0!==b&&null!=e&&Ff(b,["parameters","guidanceScale"],e),void 0!==Fg(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let f=Fg(a,["safetyFilterLevel"]);void 0!==b&&null!=f&&Ff(b,["parameters","safetySetting"],f);let g=Fg(a,["personGeneration"]);void 0!==b&&null!=g&&Ff(b,["parameters","personGeneration"],g);let h=Fg(a,["includeSafetyAttributes"]);void 0!==b&&null!=h&&Ff(b,["parameters","includeSafetyAttributes"],h);let i=Fg(a,["includeRaiReason"]);void 0!==b&&null!=i&&Ff(b,["parameters","includeRaiReason"],i);let j=Fg(a,["language"]);void 0!==b&&null!=j&&Ff(b,["parameters","language"],j);let k=Fg(a,["outputMimeType"]);void 0!==b&&null!=k&&Ff(b,["parameters","outputOptions","mimeType"],k);let l=Fg(a,["outputCompressionQuality"]);if(void 0!==b&&null!=l&&Ff(b,["parameters","outputOptions","compressionQuality"],l),void 0!==Fg(a,["addWatermark"]))throw Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==Fg(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let m=Fg(a,["imageSize"]);if(void 0!==b&&null!=m&&Ff(b,["parameters","sampleImageSize"],m),void 0!==Fg(a,["enhancePrompt"]))throw Error("enhancePrompt parameter is not supported in Gemini API.")}(f,c),c}(this.apiClient,a);return f=Fe("{model}:predict",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["_self"]);null!=c&&Ff(b,["image"],function(a){let b={},c=Fg(a,["bytesBase64Encoded"]);null!=c&&Ff(b,["imageBytes"],Fh(c));let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(c));let d=Fg(a,["raiFilteredReason"]);null!=d&&Ff(b,["raiFilteredReason"],d);let e=Fg(a,["_self"]);return null!=e&&Ff(b,["safetyAttributes"],GH(e)),b})(a))),Ff(b,["generatedImages"],a)}let e=Fg(a,["positivePromptSafetyAttributes"]);return null!=e&&Ff(b,["positivePromptSafetyAttributes"],GH(e)),b}(a),c=new Fm;return Object.assign(c,b),c})}}async editImageInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["prompt"]);null!=e&&Ff(c,["instances[0]","prompt"],e);let f=Fg(b,["referenceImages"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["referenceImage"]);null!=c&&Ff(b,["referenceImage"],GE(c));let d=Fg(a,["referenceId"]);null!=d&&Ff(b,["referenceId"],d);let e=Fg(a,["referenceType"]);null!=e&&Ff(b,["referenceType"],e);let f=Fg(a,["maskImageConfig"]);null!=f&&Ff(b,["maskImageConfig"],function(a){let b={},c=Fg(a,["maskMode"]);null!=c&&Ff(b,["maskMode"],c);let d=Fg(a,["segmentationClasses"]);null!=d&&Ff(b,["maskClasses"],d);let e=Fg(a,["maskDilation"]);return null!=e&&Ff(b,["dilation"],e),b}(f));let g=Fg(a,["controlImageConfig"]);null!=g&&Ff(b,["controlImageConfig"],function(a){let b={},c=Fg(a,["controlType"]);null!=c&&Ff(b,["controlType"],c);let d=Fg(a,["enableControlImageComputation"]);return null!=d&&Ff(b,["computeControl"],d),b}(g));let h=Fg(a,["styleImageConfig"]);null!=h&&Ff(b,["styleImageConfig"],h);let i=Fg(a,["subjectImageConfig"]);return null!=i&&Ff(b,["subjectImageConfig"],i),b})(a))),Ff(c,["instances[0]","referenceImages"],a)}let g=Fg(b,["config"]);return null!=g&&function(a,b){let c=Fg(a,["outputGcsUri"]);void 0!==b&&null!=c&&Ff(b,["parameters","storageUri"],c);let d=Fg(a,["negativePrompt"]);void 0!==b&&null!=d&&Ff(b,["parameters","negativePrompt"],d);let e=Fg(a,["numberOfImages"]);void 0!==b&&null!=e&&Ff(b,["parameters","sampleCount"],e);let f=Fg(a,["aspectRatio"]);void 0!==b&&null!=f&&Ff(b,["parameters","aspectRatio"],f);let g=Fg(a,["guidanceScale"]);void 0!==b&&null!=g&&Ff(b,["parameters","guidanceScale"],g);let h=Fg(a,["seed"]);void 0!==b&&null!=h&&Ff(b,["parameters","seed"],h);let i=Fg(a,["safetyFilterLevel"]);void 0!==b&&null!=i&&Ff(b,["parameters","safetySetting"],i);let j=Fg(a,["personGeneration"]);void 0!==b&&null!=j&&Ff(b,["parameters","personGeneration"],j);let k=Fg(a,["includeSafetyAttributes"]);void 0!==b&&null!=k&&Ff(b,["parameters","includeSafetyAttributes"],k);let l=Fg(a,["includeRaiReason"]);void 0!==b&&null!=l&&Ff(b,["parameters","includeRaiReason"],l);let m=Fg(a,["language"]);void 0!==b&&null!=m&&Ff(b,["parameters","language"],m);let n=Fg(a,["outputMimeType"]);void 0!==b&&null!=n&&Ff(b,["parameters","outputOptions","mimeType"],n);let o=Fg(a,["outputCompressionQuality"]);void 0!==b&&null!=o&&Ff(b,["parameters","outputOptions","compressionQuality"],o);let p=Fg(a,["addWatermark"]);void 0!==b&&null!=p&&Ff(b,["parameters","addWatermark"],p);let q=Fg(a,["labels"]);void 0!==b&&null!=q&&Ff(b,["labels"],q);let r=Fg(a,["editMode"]);void 0!==b&&null!=r&&Ff(b,["parameters","editMode"],r);let s=Fg(a,["baseSteps"]);void 0!==b&&null!=s&&Ff(b,["parameters","editConfig","baseSteps"],s)}(g,c),c}(this.apiClient,a);return d=Fe("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>GB(a))),Ff(b,["generatedImages"],a)}return b}(a),c=new Fn;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["image"]);null!=e&&Ff(c,["instances[0]","image"],GE(e));let f=Fg(b,["upscaleFactor"]);null!=f&&Ff(c,["parameters","upscaleConfig","upscaleFactor"],f);let g=Fg(b,["config"]);return null!=g&&function(a,b){let c=Fg(a,["outputGcsUri"]);void 0!==b&&null!=c&&Ff(b,["parameters","storageUri"],c);let d=Fg(a,["safetyFilterLevel"]);void 0!==b&&null!=d&&Ff(b,["parameters","safetySetting"],d);let e=Fg(a,["personGeneration"]);void 0!==b&&null!=e&&Ff(b,["parameters","personGeneration"],e);let f=Fg(a,["includeRaiReason"]);void 0!==b&&null!=f&&Ff(b,["parameters","includeRaiReason"],f);let g=Fg(a,["outputMimeType"]);void 0!==b&&null!=g&&Ff(b,["parameters","outputOptions","mimeType"],g);let h=Fg(a,["outputCompressionQuality"]);void 0!==b&&null!=h&&Ff(b,["parameters","outputOptions","compressionQuality"],h);let i=Fg(a,["enhanceInputImage"]);void 0!==b&&null!=i&&Ff(b,["parameters","upscaleConfig","enhanceInputImage"],i);let j=Fg(a,["imagePreservationFactor"]);void 0!==b&&null!=j&&Ff(b,["parameters","upscaleConfig","imagePreservationFactor"],j);let k=Fg(a,["labels"]);void 0!==b&&null!=k&&Ff(b,["labels"],k);let l=Fg(a,["numberOfImages"]);void 0!==b&&null!=l&&Ff(b,["parameters","sampleCount"],l);let m=Fg(a,["mode"]);void 0!==b&&null!=m&&Ff(b,["parameters","mode"],m)}(g,c),c}(this.apiClient,a);return d=Fe("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>GB(a))),Ff(b,["generatedImages"],a)}return b}(a),c=new Fo;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async recontextImage(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["source"]);null!=e&&function(a,b){let c=Fg(a,["prompt"]);void 0!==b&&null!=c&&Ff(b,["instances[0]","prompt"],c);let d=Fg(a,["personImage"]);void 0!==b&&null!=d&&Ff(b,["instances[0]","personImage","image"],GE(d));let e=Fg(a,["productImages"]);if(void 0!==b&&null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["productImage"]);return null!=c&&Ff(b,["image"],GE(c)),b})(a))),Ff(b,["instances[0]","productImages"],a)}}(e,c);let f=Fg(b,["config"]);return null!=f&&function(a,b){let c=Fg(a,["numberOfImages"]);void 0!==b&&null!=c&&Ff(b,["parameters","sampleCount"],c);let d=Fg(a,["baseSteps"]);void 0!==b&&null!=d&&Ff(b,["parameters","baseSteps"],d);let e=Fg(a,["outputGcsUri"]);void 0!==b&&null!=e&&Ff(b,["parameters","storageUri"],e);let f=Fg(a,["seed"]);void 0!==b&&null!=f&&Ff(b,["parameters","seed"],f);let g=Fg(a,["safetyFilterLevel"]);void 0!==b&&null!=g&&Ff(b,["parameters","safetySetting"],g);let h=Fg(a,["personGeneration"]);void 0!==b&&null!=h&&Ff(b,["parameters","personGeneration"],h);let i=Fg(a,["addWatermark"]);void 0!==b&&null!=i&&Ff(b,["parameters","addWatermark"],i);let j=Fg(a,["outputMimeType"]);void 0!==b&&null!=j&&Ff(b,["parameters","outputOptions","mimeType"],j);let k=Fg(a,["outputCompressionQuality"]);void 0!==b&&null!=k&&Ff(b,["parameters","outputOptions","compressionQuality"],k);let l=Fg(a,["enhancePrompt"]);void 0!==b&&null!=l&&Ff(b,["parameters","enhancePrompt"],l);let m=Fg(a,["labels"]);void 0!==b&&null!=m&&Ff(b,["labels"],m)}(f,c),c}(this.apiClient,a);return d=Fe("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=Fg(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>GB(a))),Ff(b,["generatedImages"],a)}return b}(a),c=new Fp;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async segmentImage(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["source"]);null!=e&&function(a,b){let c=Fg(a,["prompt"]);void 0!==b&&null!=c&&Ff(b,["instances[0]","prompt"],c);let d=Fg(a,["image"]);void 0!==b&&null!=d&&Ff(b,["instances[0]","image"],GE(d));let e=Fg(a,["scribbleImage"]);void 0!==b&&null!=e&&Ff(b,["instances[0]","scribble"],function(a){let b={},c=Fg(a,["image"]);return null!=c&&Ff(b,["image"],GE(c)),b}(e))}(e,c);let f=Fg(b,["config"]);return null!=f&&function(a,b){let c=Fg(a,["mode"]);void 0!==b&&null!=c&&Ff(b,["parameters","mode"],c);let d=Fg(a,["maxPredictions"]);void 0!==b&&null!=d&&Ff(b,["parameters","maxPredictions"],d);let e=Fg(a,["confidenceThreshold"]);void 0!==b&&null!=e&&Ff(b,["parameters","confidenceThreshold"],e);let f=Fg(a,["maskDilation"]);void 0!==b&&null!=f&&Ff(b,["parameters","maskDilation"],f);let g=Fg(a,["binaryColorThreshold"]);void 0!==b&&null!=g&&Ff(b,["parameters","binaryColorThreshold"],g);let h=Fg(a,["labels"]);void 0!==b&&null!=h&&Ff(b,["labels"],h)}(f,c),c}(this.apiClient,a);return d=Fe("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=Fg(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["_self"]);null!=c&&Ff(b,["mask"],GC(c));let d=Fg(a,["labels"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["labels"],a)}return b})(a))),Ff(b,["generatedMasks"],a)}return b}(a),c=new Fq;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async get(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["model"]);return null!=d&&Ff(c,["_url","name"],FL(a,d)),c}(this.apiClient,a);return f=Fe("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>GG(a))}{let b=function(a,b){let c={},d=Fg(b,["model"]);return null!=d&&Ff(c,["_url","name"],FL(a,d)),c}(this.apiClient,a);return f=Fe("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>GF(a))}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["config"]);return null!=d&&function(a,b,c){let d=Fg(b,["pageSize"]);void 0!==c&&null!=d&&Ff(c,["_query","pageSize"],d);let e=Fg(b,["pageToken"]);void 0!==c&&null!=e&&Ff(c,["_query","pageToken"],e);let f=Fg(b,["filter"]);void 0!==c&&null!=f&&Ff(c,["_query","filter"],f);let g=Fg(b,["queryBase"]);void 0!==c&&null!=g&&Ff(c,["_url","models_url"],F7(a,g))}(a,d,c),c}(this.apiClient,a);return f=Fe("{models_url}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["nextPageToken"]);null!=d&&Ff(b,["nextPageToken"],d);let e=Fg(a,["_self"]);if(null!=e){let a=F8(e);Array.isArray(a)&&(a=a.map(a=>GG(a))),Ff(b,["models"],a)}return b}(a),c=new Fr;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=Fg(b,["config"]);return null!=d&&function(a,b,c){let d=Fg(b,["pageSize"]);void 0!==c&&null!=d&&Ff(c,["_query","pageSize"],d);let e=Fg(b,["pageToken"]);void 0!==c&&null!=e&&Ff(c,["_query","pageToken"],e);let f=Fg(b,["filter"]);void 0!==c&&null!=f&&Ff(c,["_query","filter"],f);let g=Fg(b,["queryBase"]);void 0!==c&&null!=g&&Ff(c,["_url","models_url"],F7(a,g))}(a,d,c),c}(this.apiClient,a);return f=Fe("{models_url}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["nextPageToken"]);null!=d&&Ff(b,["nextPageToken"],d);let e=Fg(a,["_self"]);if(null!=e){let a=F8(e);Array.isArray(a)&&(a=a.map(a=>GF(a))),Ff(b,["models"],a)}return b}(a),c=new Fr;return Object.assign(c,b),c})}}async update(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["config"]);return null!=e&&function(a,b){let c=Fg(a,["displayName"]);void 0!==b&&null!=c&&Ff(b,["displayName"],c);let d=Fg(a,["description"]);void 0!==b&&null!=d&&Ff(b,["description"],d);let e=Fg(a,["defaultCheckpointId"]);void 0!==b&&null!=e&&Ff(b,["defaultCheckpointId"],e)}(e,c),c}(this.apiClient,a);return f=Fe("{model}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>GG(a))}{let b=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","name"],FL(a,d));let e=Fg(b,["config"]);return null!=e&&function(a,b){let c=Fg(a,["displayName"]);void 0!==b&&null!=c&&Ff(b,["displayName"],c);let d=Fg(a,["description"]);void 0!==b&&null!=d&&Ff(b,["description"],d);let e=Fg(a,["defaultCheckpointId"]);void 0!==b&&null!=e&&Ff(b,["defaultCheckpointId"],e)}(e,c),c}(this.apiClient,a);return f=Fe("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>GF(a))}}async delete(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["model"]);return null!=d&&Ff(c,["_url","name"],FL(a,d)),c}(this.apiClient,a);return f=Fe("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);return null!=c&&Ff(b,["sdkHttpResponse"],c),b}(a),c=new Fs;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=Fg(b,["model"]);return null!=d&&Ff(c,["_url","name"],FL(a,d)),c}(this.apiClient,a);return f=Fe("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);return null!=c&&Ff(b,["sdkHttpResponse"],c),b}(a),c=new Fs;return Object.assign(c,b),c})}}async countTokens(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["contents"]);if(null!=e){let a=FY(e);Array.isArray(a)&&(a=a.map(a=>a)),Ff(c,["contents"],a)}let f=Fg(b,["config"]);return null!=f&&function(a,b){let c=Fg(a,["systemInstruction"]);void 0!==b&&null!=c&&Ff(b,["systemInstruction"],FW(c));let d=Fg(a,["tools"]);if(void 0!==b&&null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>GJ(a))),Ff(b,["tools"],a)}let e=Fg(a,["generationConfig"]);void 0!==b&&null!=e&&Ff(b,["generationConfig"],function(a){let b={},c=Fg(a,["modelSelectionConfig"]);null!=c&&Ff(b,["modelConfig"],c);let d=Fg(a,["responseJsonSchema"]);null!=d&&Ff(b,["responseJsonSchema"],d);let e=Fg(a,["audioTimestamp"]);null!=e&&Ff(b,["audioTimestamp"],e);let f=Fg(a,["candidateCount"]);null!=f&&Ff(b,["candidateCount"],f);let g=Fg(a,["enableAffectiveDialog"]);null!=g&&Ff(b,["enableAffectiveDialog"],g);let h=Fg(a,["frequencyPenalty"]);null!=h&&Ff(b,["frequencyPenalty"],h);let i=Fg(a,["logprobs"]);null!=i&&Ff(b,["logprobs"],i);let j=Fg(a,["maxOutputTokens"]);null!=j&&Ff(b,["maxOutputTokens"],j);let k=Fg(a,["mediaResolution"]);null!=k&&Ff(b,["mediaResolution"],k);let l=Fg(a,["presencePenalty"]);null!=l&&Ff(b,["presencePenalty"],l);let m=Fg(a,["responseLogprobs"]);null!=m&&Ff(b,["responseLogprobs"],m);let n=Fg(a,["responseMimeType"]);null!=n&&Ff(b,["responseMimeType"],n);let o=Fg(a,["responseModalities"]);null!=o&&Ff(b,["responseModalities"],o);let p=Fg(a,["responseSchema"]);null!=p&&Ff(b,["responseSchema"],p);let q=Fg(a,["routingConfig"]);null!=q&&Ff(b,["routingConfig"],q);let r=Fg(a,["seed"]);null!=r&&Ff(b,["seed"],r);let s=Fg(a,["speechConfig"]);null!=s&&Ff(b,["speechConfig"],s);let t=Fg(a,["stopSequences"]);null!=t&&Ff(b,["stopSequences"],t);let u=Fg(a,["temperature"]);null!=u&&Ff(b,["temperature"],u);let v=Fg(a,["thinkingConfig"]);null!=v&&Ff(b,["thinkingConfig"],v);let w=Fg(a,["topK"]);null!=w&&Ff(b,["topK"],w);let x=Fg(a,["topP"]);if(null!=x&&Ff(b,["topP"],x),void 0!==Fg(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(e))}(f,c),c}(this.apiClient,a);return f=Fe("{model}:countTokens",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["totalTokens"]);return null!=d&&Ff(b,["totalTokens"],d),b}(a),c=new Ft;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["contents"]);if(null!=e){let a=FY(e);Array.isArray(a)&&(a=a.map(a=>Gw(a))),Ff(c,["contents"],a)}let f=Fg(b,["config"]);return null!=f&&function(a){if(void 0!==Fg(a,["systemInstruction"]))throw Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==Fg(a,["tools"]))throw Error("tools parameter is not supported in Gemini API.");if(void 0!==Fg(a,["generationConfig"]))throw Error("generationConfig parameter is not supported in Gemini API.")}(f),c}(this.apiClient,a);return f=Fe("{model}:countTokens",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["totalTokens"]);null!=d&&Ff(b,["totalTokens"],d);let e=Fg(a,["cachedContentTokenCount"]);return null!=e&&Ff(b,["cachedContentTokenCount"],e),b}(a),c=new Ft;return Object.assign(c,b),c})}}async computeTokens(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["contents"]);if(null!=e){let a=FY(e);Array.isArray(a)&&(a=a.map(a=>a)),Ff(c,["contents"],a)}return c}(this.apiClient,a);return d=Fe("{model}:computeTokens",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["tokensInfo"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["tokensInfo"],a)}return b}(a),c=new Fu;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["prompt"]);null!=e&&Ff(c,["instances[0]","prompt"],e);let f=Fg(b,["image"]);null!=f&&Ff(c,["instances[0]","image"],GE(f));let g=Fg(b,["video"]);null!=g&&Ff(c,["instances[0]","video"],GL(g));let h=Fg(b,["source"]);null!=h&&function(a,b){let c=Fg(a,["prompt"]);void 0!==b&&null!=c&&Ff(b,["instances[0]","prompt"],c);let d=Fg(a,["image"]);void 0!==b&&null!=d&&Ff(b,["instances[0]","image"],GE(d));let e=Fg(a,["video"]);void 0!==b&&null!=e&&Ff(b,["instances[0]","video"],GL(e))}(h,c);let i=Fg(b,["config"]);return null!=i&&function(a,b){let c=Fg(a,["numberOfVideos"]);void 0!==b&&null!=c&&Ff(b,["parameters","sampleCount"],c);let d=Fg(a,["outputGcsUri"]);void 0!==b&&null!=d&&Ff(b,["parameters","storageUri"],d);let e=Fg(a,["fps"]);void 0!==b&&null!=e&&Ff(b,["parameters","fps"],e);let f=Fg(a,["durationSeconds"]);void 0!==b&&null!=f&&Ff(b,["parameters","durationSeconds"],f);let g=Fg(a,["seed"]);void 0!==b&&null!=g&&Ff(b,["parameters","seed"],g);let h=Fg(a,["aspectRatio"]);void 0!==b&&null!=h&&Ff(b,["parameters","aspectRatio"],h);let i=Fg(a,["resolution"]);void 0!==b&&null!=i&&Ff(b,["parameters","resolution"],i);let j=Fg(a,["personGeneration"]);void 0!==b&&null!=j&&Ff(b,["parameters","personGeneration"],j);let k=Fg(a,["pubsubTopic"]);void 0!==b&&null!=k&&Ff(b,["parameters","pubsubTopic"],k);let l=Fg(a,["negativePrompt"]);void 0!==b&&null!=l&&Ff(b,["parameters","negativePrompt"],l);let m=Fg(a,["enhancePrompt"]);void 0!==b&&null!=m&&Ff(b,["parameters","enhancePrompt"],m);let n=Fg(a,["generateAudio"]);void 0!==b&&null!=n&&Ff(b,["parameters","generateAudio"],n);let o=Fg(a,["lastFrame"]);void 0!==b&&null!=o&&Ff(b,["instances[0]","lastFrame"],GE(o));let p=Fg(a,["referenceImages"]);if(void 0!==b&&null!=p){let a=p;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["image"]);null!=c&&Ff(b,["image"],GE(c));let d=Fg(a,["referenceType"]);return null!=d&&Ff(b,["referenceType"],d),b})(a))),Ff(b,["instances[0]","referenceImages"],a)}let q=Fg(a,["mask"]);void 0!==b&&null!=q&&Ff(b,["instances[0]","mask"],function(a){let b={},c=Fg(a,["image"]);null!=c&&Ff(b,["_self"],GE(c));let d=Fg(a,["maskMode"]);return null!=d&&Ff(b,["maskMode"],d),b}(q));let r=Fg(a,["compressionQuality"]);void 0!==b&&null!=r&&Ff(b,["parameters","compressionQuality"],r)}(i,c),c}(this.apiClient,a);return f=Fe("{model}:predictLongRunning",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["metadata"]);null!=d&&Ff(b,["metadata"],d);let e=Fg(a,["done"]);null!=e&&Ff(b,["done"],e);let f=Fg(a,["error"]);null!=f&&Ff(b,["error"],f);let g=Fg(a,["response"]);return null!=g&&Ff(b,["response"],function(a){let b={},c=Fg(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["_self"]);return null!=c&&Ff(b,["video"],function(a){let b={},c=Fg(a,["gcsUri"]);null!=c&&Ff(b,["uri"],c);let d=Fg(a,["bytesBase64Encoded"]);null!=d&&Ff(b,["videoBytes"],Fh(d));let e=Fg(a,["mimeType"]);return null!=e&&Ff(b,["mimeType"],e),b}(c)),b})(a))),Ff(b,["generatedVideos"],a)}let d=Fg(a,["raiMediaFilteredCount"]);null!=d&&Ff(b,["raiMediaFilteredCount"],d);let e=Fg(a,["raiMediaFilteredReasons"]);return null!=e&&Ff(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a),c=new Fv;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["_url","model"],FL(a,d));let e=Fg(b,["prompt"]);null!=e&&Ff(c,["instances[0]","prompt"],e);let f=Fg(b,["image"]);null!=f&&Ff(c,["instances[0]","image"],GD(f));let g=Fg(b,["video"]);null!=g&&Ff(c,["instances[0]","video"],GK(g));let h=Fg(b,["source"]);null!=h&&function(a,b){let c=Fg(a,["prompt"]);void 0!==b&&null!=c&&Ff(b,["instances[0]","prompt"],c);let d=Fg(a,["image"]);void 0!==b&&null!=d&&Ff(b,["instances[0]","image"],GD(d));let e=Fg(a,["video"]);void 0!==b&&null!=e&&Ff(b,["instances[0]","video"],GK(e))}(h,c);let i=Fg(b,["config"]);return null!=i&&function(a,b){let c=Fg(a,["numberOfVideos"]);if(void 0!==b&&null!=c&&Ff(b,["parameters","sampleCount"],c),void 0!==Fg(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==Fg(a,["fps"]))throw Error("fps parameter is not supported in Gemini API.");let d=Fg(a,["durationSeconds"]);if(void 0!==b&&null!=d&&Ff(b,["parameters","durationSeconds"],d),void 0!==Fg(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let e=Fg(a,["aspectRatio"]);void 0!==b&&null!=e&&Ff(b,["parameters","aspectRatio"],e);let f=Fg(a,["resolution"]);void 0!==b&&null!=f&&Ff(b,["parameters","resolution"],f);let g=Fg(a,["personGeneration"]);if(void 0!==b&&null!=g&&Ff(b,["parameters","personGeneration"],g),void 0!==Fg(a,["pubsubTopic"]))throw Error("pubsubTopic parameter is not supported in Gemini API.");let h=Fg(a,["negativePrompt"]);void 0!==b&&null!=h&&Ff(b,["parameters","negativePrompt"],h);let i=Fg(a,["enhancePrompt"]);if(void 0!==b&&null!=i&&Ff(b,["parameters","enhancePrompt"],i),void 0!==Fg(a,["generateAudio"]))throw Error("generateAudio parameter is not supported in Gemini API.");let j=Fg(a,["lastFrame"]);void 0!==b&&null!=j&&Ff(b,["instances[0]","lastFrame"],GD(j));let k=Fg(a,["referenceImages"]);if(void 0!==b&&null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["image"]);null!=c&&Ff(b,["image"],GD(c));let d=Fg(a,["referenceType"]);return null!=d&&Ff(b,["referenceType"],d),b})(a))),Ff(b,["instances[0]","referenceImages"],a)}if(void 0!==Fg(a,["mask"]))throw Error("mask parameter is not supported in Gemini API.");if(void 0!==Fg(a,["compressionQuality"]))throw Error("compressionQuality parameter is not supported in Gemini API.")}(i,c),c}(this.apiClient,a);return f=Fe("{model}:predictLongRunning",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["metadata"]);null!=d&&Ff(b,["metadata"],d);let e=Fg(a,["done"]);null!=e&&Ff(b,["done"],e);let f=Fg(a,["error"]);null!=f&&Ff(b,["error"],f);let g=Fg(a,["response","generateVideoResponse"]);return null!=g&&Ff(b,["response"],function(a){let b={},c=Fg(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["video"]);return null!=c&&Ff(b,["video"],function(a){let b={},c=Fg(a,["uri"]);null!=c&&Ff(b,["uri"],c);let d=Fg(a,["encodedVideo"]);null!=d&&Ff(b,["videoBytes"],Fh(d));let e=Fg(a,["encoding"]);return null!=e&&Ff(b,["mimeType"],e),b}(c)),b})(a))),Ff(b,["generatedVideos"],a)}let d=Fg(a,["raiMediaFilteredCount"]);null!=d&&Ff(b,["raiMediaFilteredCount"],d);let e=Fg(a,["raiMediaFilteredReasons"]);return null!=e&&Ff(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a),c=new Fv;return Object.assign(c,b),c})}}}class G3 extends Fd{constructor(a){super(),this.apiClient=a}async getVideosOperation(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,_isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,_isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a){let b={},c=Fg(a,["operationName"]);return null!=c&&Ff(b,["_url","operationName"],c),b}(a);return f=Fe("{operationName}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}{let b=function(a){let b={},c=Fg(a,["operationName"]);return null!=c&&Ff(b,["_url","operationName"],c),b}(a);return f=Fe("{operationName}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json())}}async fetchPredictVideosOperationInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a){let b={},c=Fg(a,["operationName"]);null!=c&&Ff(b,["operationName"],c);let d=Fg(a,["resourceName"]);return null!=d&&Ff(b,["_url","resourceName"],d),b}(a);return d=Fe("{resourceName}:fetchPredictOperation",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}throw Error("This method is only supported by the Vertex AI.")}}class G4 extends Fd{constructor(a){super(),this.apiClient=a}async create(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let f=function(a,b){let c={},d=Fg(b,["config"]);return null!=d&&Ff(c,["config"],function(a,b,c){let d=Fg(b,["expireTime"]);void 0!==c&&null!=d&&Ff(c,["expireTime"],d);let e=Fg(b,["newSessionExpireTime"]);void 0!==c&&null!=e&&Ff(c,["newSessionExpireTime"],e);let f=Fg(b,["uses"]);void 0!==c&&null!=f&&Ff(c,["uses"],f);let g=Fg(b,["liveConnectConstraints"]);void 0!==c&&null!=g&&Ff(c,["bidiGenerateContentSetup"],function(a,b){let c={},d=Fg(b,["model"]);null!=d&&Ff(c,["setup","model"],FL(a,d));let e=Fg(b,["config"]);return null!=e&&Ff(c,["config"],function(a,b){let c=Fg(a,["generationConfig"]);void 0!==b&&null!=c&&Ff(b,["setup","generationConfig"],c);let d=Fg(a,["responseModalities"]);void 0!==b&&null!=d&&Ff(b,["setup","generationConfig","responseModalities"],d);let e=Fg(a,["temperature"]);void 0!==b&&null!=e&&Ff(b,["setup","generationConfig","temperature"],e);let f=Fg(a,["topP"]);void 0!==b&&null!=f&&Ff(b,["setup","generationConfig","topP"],f);let g=Fg(a,["topK"]);void 0!==b&&null!=g&&Ff(b,["setup","generationConfig","topK"],g);let h=Fg(a,["maxOutputTokens"]);void 0!==b&&null!=h&&Ff(b,["setup","generationConfig","maxOutputTokens"],h);let i=Fg(a,["mediaResolution"]);void 0!==b&&null!=i&&Ff(b,["setup","generationConfig","mediaResolution"],i);let j=Fg(a,["seed"]);void 0!==b&&null!=j&&Ff(b,["setup","generationConfig","seed"],j);let k=Fg(a,["speechConfig"]);void 0!==b&&null!=k&&Ff(b,["setup","generationConfig","speechConfig"],F_(k));let l=Fg(a,["thinkingConfig"]);void 0!==b&&null!=l&&Ff(b,["setup","generationConfig","thinkingConfig"],l);let m=Fg(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&Ff(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=Fg(a,["systemInstruction"]);void 0!==b&&null!=n&&Ff(b,["setup","systemInstruction"],function(a){let b={},c=Fg(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=Fg(a,["mediaResolution"]);null!=c&&Ff(b,["mediaResolution"],c);let d=Fg(a,["codeExecutionResult"]);null!=d&&Ff(b,["codeExecutionResult"],d);let e=Fg(a,["executableCode"]);null!=e&&Ff(b,["executableCode"],e);let f=Fg(a,["fileData"]);null!=f&&Ff(b,["fileData"],function(a){let b={};if(void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=Fg(a,["fileUri"]);null!=c&&Ff(b,["fileUri"],c);let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(f));let g=Fg(a,["functionCall"]);null!=g&&Ff(b,["functionCall"],function(a){let b={},c=Fg(a,["id"]);null!=c&&Ff(b,["id"],c);let d=Fg(a,["args"]);null!=d&&Ff(b,["args"],d);let e=Fg(a,["name"]);if(null!=e&&Ff(b,["name"],e),void 0!==Fg(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==Fg(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=Fg(a,["functionResponse"]);null!=h&&Ff(b,["functionResponse"],h);let i=Fg(a,["inlineData"]);null!=i&&Ff(b,["inlineData"],function(a){let b={},c=Fg(a,["data"]);if(null!=c&&Ff(b,["data"],c),void 0!==Fg(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=Fg(a,["mimeType"]);return null!=d&&Ff(b,["mimeType"],d),b}(i));let j=Fg(a,["text"]);null!=j&&Ff(b,["text"],j);let k=Fg(a,["thought"]);null!=k&&Ff(b,["thought"],k);let l=Fg(a,["thoughtSignature"]);null!=l&&Ff(b,["thoughtSignature"],l);let m=Fg(a,["videoMetadata"]);return null!=m&&Ff(b,["videoMetadata"],m),b})(a))),Ff(b,["parts"],a)}let d=Fg(a,["role"]);return null!=d&&Ff(b,["role"],d),b}(FW(n)));let o=Fg(a,["tools"]);if(void 0!==b&&null!=o){let a=F1(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==Fg(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let c=Fg(a,["computerUse"]);null!=c&&Ff(b,["computerUse"],c);let d=Fg(a,["fileSearch"]);null!=d&&Ff(b,["fileSearch"],d);let e=Fg(a,["codeExecution"]);if(null!=e&&Ff(b,["codeExecution"],e),void 0!==Fg(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let f=Fg(a,["functionDeclarations"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["functionDeclarations"],a)}let g=Fg(a,["googleMaps"]);null!=g&&Ff(b,["googleMaps"],function(a){let b={};if(void 0!==Fg(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=Fg(a,["enableWidget"]);return null!=c&&Ff(b,["enableWidget"],c),b}(g));let h=Fg(a,["googleSearch"]);null!=h&&Ff(b,["googleSearch"],function(a){let b={};if(void 0!==Fg(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==Fg(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=Fg(a,["timeRangeFilter"]);return null!=c&&Ff(b,["timeRangeFilter"],c),b}(h));let i=Fg(a,["googleSearchRetrieval"]);null!=i&&Ff(b,["googleSearchRetrieval"],i);let j=Fg(a,["urlContext"]);return null!=j&&Ff(b,["urlContext"],j),b})(F0(a)))),Ff(b,["setup","tools"],a)}let p=Fg(a,["sessionResumption"]);void 0!==b&&null!=p&&Ff(b,["setup","sessionResumption"],function(a){let b={},c=Fg(a,["handle"]);if(null!=c&&Ff(b,["handle"],c),void 0!==Fg(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=Fg(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&Ff(b,["setup","inputAudioTranscription"],q);let r=Fg(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&Ff(b,["setup","outputAudioTranscription"],r);let s=Fg(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&Ff(b,["setup","realtimeInputConfig"],s);let t=Fg(a,["contextWindowCompression"]);void 0!==b&&null!=t&&Ff(b,["setup","contextWindowCompression"],t);let u=Fg(a,["proactivity"]);if(void 0!==b&&null!=u&&Ff(b,["setup","proactivity"],u),void 0!==Fg(a,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(e,c)),c}(a,g));let h=Fg(b,["lockAdditionalFields"]);return void 0!==c&&null!=h&&Ff(c,["fieldMask"],h),{}}(a,d,c)),c}(this.apiClient,a);d=Fe("auth_tokens",f._url),e=f._query,delete f.config,delete f._url,delete f._query;let g=function(a,b){let c=null,d=a.bidiGenerateContentSetup;if("object"==typeof d&&null!==d&&"setup"in d){let b=d.setup;"object"==typeof b&&null!==b?(a.bidiGenerateContentSetup=b,c=b):delete a.bidiGenerateContentSetup}else void 0!==d&&delete a.bidiGenerateContentSetup;let e=a.fieldMask;if(c){let d=function(a){let b=[];for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)){let d=a[c];if("object"==typeof d&&null!=d&&Object.keys(d).length>0){let a=Object.keys(d).map(a=>`${c}.${a}`);b.push(...a)}else b.push(c)}return b.join(",")}(c);if(Array.isArray(null==b?void 0:b.lockAdditionalFields)&&(null==b?void 0:b.lockAdditionalFields.length)===0)d?a.fieldMask=d:delete a.fieldMask;else if((null==b?void 0:b.lockAdditionalFields)&&b.lockAdditionalFields.length>0&&null!==e&&Array.isArray(e)&&e.length>0){let b=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],c=[];e.length>0&&(c=e.map(a=>b.includes(a)?`generationConfig.${a}`:a));let f=[];d&&f.push(d),c.length>0&&f.push(...c),f.length>0?a.fieldMask=f.join(","):delete a.fieldMask}else delete a.fieldMask}else null!==e&&Array.isArray(e)&&e.length>0?a.fieldMask=e.join(","):delete a.fieldMask;return a}(f,a.config);return this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(g),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}}class G5 extends Fd{constructor(a){super(),this.apiClient=a,this.list=async a=>new Gh(aL.PAGED_ITEM_DOCUMENTS,b=>this.listInternal({parent:a.parent,config:b.config}),await this.listInternal(a),a)}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["name"]);return null!=c&&Ff(b,["_url","name"],c),b}(a);return d=Fe("{name}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["_url","name"],c);let d=Fg(a,["config"]);return null!=d&&function(a,b){let c=Fg(a,["force"]);void 0!==b&&null!=c&&Ff(b,["_query","force"],c)}(d,b),b}(a);d=Fe("{name}",f._url),e=f._query,delete f._url,delete f._query,await this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["parent"]);null!=c&&Ff(b,["_url","parent"],c);let d=Fg(a,["config"]);return null!=d&&function(a,b){let c=Fg(a,["pageSize"]);void 0!==b&&null!=c&&Ff(b,["_query","pageSize"],c);let d=Fg(a,["pageToken"]);void 0!==b&&null!=d&&Ff(b,["_query","pageToken"],d)}(d,b),b}(a);return d=Fe("{parent}/documents",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["nextPageToken"]);null!=d&&Ff(b,["nextPageToken"],d);let e=Fg(a,["documents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["documents"],a)}return b}(a),c=new FA;return Object.assign(c,b),c})}}}class G6 extends Fd{constructor(a,b=new G5(a)){super(),this.apiClient=a,this.documents=b,this.list=async(a={})=>new Gh(aL.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(a),a)}async uploadToFileSearchStore(a){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(a.fileSearchStoreName,a.file,a.config)}async create(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["config"]);return null!=c&&function(a,b){let c=Fg(a,["displayName"]);void 0!==b&&null!=c&&Ff(b,["displayName"],c)}(c,b),b}(a);return d=Fe("fileSearchStores",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["name"]);return null!=c&&Ff(b,["_url","name"],c),b}(a);return d=Fe("{name}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["_url","name"],c);let d=Fg(a,["config"]);return null!=d&&function(a,b){let c=Fg(a,["force"]);void 0!==b&&null!=c&&Ff(b,["_query","force"],c)}(d,b),b}(a);d=Fe("{name}",f._url),e=f._query,delete f._url,delete f._query,await this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["config"]);return null!=c&&function(a,b){let c=Fg(a,["pageSize"]);void 0!==b&&null!=c&&Ff(b,["_query","pageSize"],c);let d=Fg(a,["pageToken"]);void 0!==b&&null!=d&&Ff(b,["_query","pageToken"],d)}(c,b),b}(a);return d=Fe("fileSearchStores",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["nextPageToken"]);null!=d&&Ff(b,["nextPageToken"],d);let e=Fg(a,["fileSearchStores"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["fileSearchStores"],a)}return b}(a),c=new FB;return Object.assign(c,b),c})}}async uploadToFileSearchStoreInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["fileSearchStoreName"]);null!=c&&Ff(b,["_url","file_search_store_name"],c);let d=Fg(a,["config"]);return null!=d&&GM(d,b),b}(a);return d=Fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=Fg(a,["sdkHttpResponse"]);return null!=c&&Ff(b,["sdkHttpResponse"],c),b}(a),c=new FC;return Object.assign(c,b),c})}}async importFile(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=Fg(a,["fileSearchStoreName"]);null!=c&&Ff(b,["_url","file_search_store_name"],c);let d=Fg(a,["fileName"]);null!=d&&Ff(b,["fileName"],d);let e=Fg(a,["config"]);return null!=e&&function(a,b){let c=Fg(a,["customMetadata"]);if(void 0!==b&&null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),Ff(b,["customMetadata"],a)}let d=Fg(a,["chunkingConfig"]);void 0!==b&&null!=d&&Ff(b,["chunkingConfig"],d)}(e,b),b}(a);return d=Fe("{file_search_store_name}:importFile",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=Fg(a,["name"]);null!=c&&Ff(b,["name"],c);let d=Fg(a,["metadata"]);null!=d&&Ff(b,["metadata"],d);let e=Fg(a,["done"]);null!=e&&Ff(b,["done"],e);let f=Fg(a,["error"]);null!=f&&Ff(b,["error"],f);let g=Fg(a,["response"]);return null!=g&&Ff(b,["response"],function(a){let b={},c=Fg(a,["sdkHttpResponse"]);null!=c&&Ff(b,["sdkHttpResponse"],c);let d=Fg(a,["parent"]);null!=d&&Ff(b,["parent"],d);let e=Fg(a,["documentName"]);return null!=e&&Ff(b,["documentName"],e),b}(g)),b}(a),c=new FD;return Object.assign(c,b),c})}}}let G7=function(){let{crypto:a}=globalThis;if(null==a?void 0:a.randomUUID)return G7=a.randomUUID.bind(a),a.randomUUID();let b=new Uint8Array(1),c=a?()=>a.getRandomValues(b)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(a^c()&15>>a/4).toString(16))};function G8(a){return"object"==typeof a&&null!==a&&("name"in a&&"AbortError"===a.name||"message"in a&&String(a.message).includes("FetchRequestCanceledException"))}let G9=a=>{if(a instanceof Error)return a;if("object"==typeof a&&null!==a){try{if("[object Error]"===Object.prototype.toString.call(a)){let b=Error(a.message,a.cause?{cause:a.cause}:{});return a.stack&&(b.stack=a.stack),a.cause&&!b.cause&&(b.cause=a.cause),a.name&&(b.name=a.name),b}}catch(a){}try{return Error(JSON.stringify(a))}catch(a){}}return Error(a)};class Ha extends Error{}class Hb extends Ha{constructor(a,b,c,d){super(`${Hb.makeMessage(a,b,c)}`),this.status=a,this.headers=d,this.error=b}static makeMessage(a,b,c){let d=(null==b?void 0:b.message)?"string"==typeof b.message?b.message:JSON.stringify(b.message):b?JSON.stringify(b):c;return a&&d?`${a} ${d}`:a?`${a} status code (no body)`:d||"(no status code or body)"}static generate(a,b,c,d){return a&&d?400===a?new Hf(a,b,c,d):401===a?new Hg(a,b,c,d):403===a?new Hh(a,b,c,d):404===a?new Hi(a,b,c,d):409===a?new Hj(a,b,c,d):422===a?new Hk(a,b,c,d):429===a?new Hl(a,b,c,d):a>=500?new Hm(a,b,c,d):new Hb(a,b,c,d):new Hd({message:c,cause:G9(b)})}}class Hc extends Hb{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class Hd extends Hb{constructor({message:a,cause:b}){super(void 0,void 0,a||"Connection error.",void 0),b&&(this.cause=b)}}class He extends Hd{constructor({message:a}={}){super({message:null!=a?a:"Request timed out."})}}class Hf extends Hb{}class Hg extends Hb{}class Hh extends Hb{}class Hi extends Hb{}class Hj extends Hb{}class Hk extends Hb{}class Hl extends Hb{}class Hm extends Hb{}let Hn=/^[a-z][a-z0-9+.-]*:/i,Ho=a=>(Ho=Array.isArray)(a),Hp=Ho,Hq="0.0.1",Hr=a=>"x32"===a?"x32":"x86_64"===a||"x64"===a?"x64":"arm"===a?"arm":"aarch64"===a||"arm64"===a?"arm64":a?`other:${a}`:"unknown",Hs=a=>(a=a.toLowerCase()).includes("ios")?"iOS":"android"===a?"Android":"darwin"===a?"MacOS":"win32"===a?"Windows":"freebsd"===a?"FreeBSD":"openbsd"===a?"OpenBSD":"linux"===a?"Linux":a?`Other:${a}`:"Unknown";function Ht(...a){let b=globalThis.ReadableStream;if(void 0===b)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new b(...a)}function Hu(a){if(a[Symbol.asyncIterator])return a;let b=a.getReader();return{async next(){try{let a=await b.read();return(null==a?void 0:a.done)&&b.releaseLock(),a}catch(a){throw b.releaseLock(),a}},async return(){let a=b.cancel();return b.releaseLock(),await a,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Hv(a){var b,c;if(null===a||"object"!=typeof a)return;if(a[Symbol.asyncIterator])return void await (null==(c=(b=a[Symbol.asyncIterator]()).return)?void 0:c.call(b));let d=a.getReader(),e=d.cancel();d.releaseLock(),await e}let Hw=({headers:a,body:b})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(b)}),Hx=()=>{var a;if("undefined"==typeof File){let{process:b}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof(null==(a=null==b?void 0:b.versions)?void 0:a.node)&&20>parseInt(b.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Hy(a,b,c){return Hx(),new File(a,null!=b?b:"unknown_file",c)}let Hz=a=>null!=a&&"object"==typeof a&&"number"==typeof a.size&&"string"==typeof a.type&&"function"==typeof a.text&&"function"==typeof a.slice&&"function"==typeof a.arrayBuffer;async function HA(a,b,c){var d;let e,f;if(Hx(),null!=(e=a=await a)&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&Hz(e))return a instanceof File?a:Hy([await a.arrayBuffer()],a.name);if(null!=(f=a)&&"object"==typeof f&&"string"==typeof f.url&&"function"==typeof f.blob){let d=await a.blob();return b||(b=new URL(a.url).pathname.split(/[\\/]/).pop()),Hy(await HB(d),b,c)}let g=await HB(a);if(b||(b=("object"==typeof(d=a)&&null!==d&&("name"in d&&d.name&&String(d.name)||"url"in d&&d.url&&String(d.url)||"filename"in d&&d.filename&&String(d.filename)||"path"in d&&d.path&&String(d.path))||"").split(/[\\/]/).pop()||void 0),!(null==c?void 0:c.type)){let a=g.find(a=>"object"==typeof a&&"type"in a&&a.type);"string"==typeof a&&(c=Object.assign(Object.assign({},c),{type:a}))}return Hy(g,b,c)}async function HB(a){let b=[];if("string"==typeof a||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)b.push(a);else if(Hz(a))b.push(a instanceof Blob?a:await a.arrayBuffer());else if(null!=a&&"object"==typeof a&&"function"==typeof a[Symbol.asyncIterator])try{for(var c,d,e,f,g,h,i=!0,j=Go(a);!(c=(h=await j.next()).done);i=!0)f=h.value,i=!1,b.push(...await HB(f))}catch(a){d={error:a}}finally{try{!i&&!c&&(e=j.return)&&await e.call(j)}finally{if(d)throw d.error}}else{let b=null==(g=null==a?void 0:a.constructor)?void 0:g.name;throw Error(`Unexpected data type: ${typeof a}${b?`; constructor: ${b}`:""}${function(a){if("object"!=typeof a||null===a)return"";let b=Object.getOwnPropertyNames(a);return`; props: [${b.map(a=>`"${a}"`).join(", ")}]`}(a)}`)}return b}class HC{constructor(a){this._client=a}}function HD(a){return a.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}HC._key=[];let HE=Object.freeze(Object.create(null)),HF=((a=HD)=>function(b,...c){let d;if(1===b.length)return b[0];let e=!1,f=[],g=b.reduce((b,d,g)=>{var h,i,j;/[?#]/.test(d)&&(e=!0);let k=c[g],l=(e?encodeURIComponent:a)(""+k);return g!==c.length&&(null==k||"object"==typeof k&&k.toString===(null==(j=Object.getPrototypeOf(null!=(i=Object.getPrototypeOf(null!=(h=k.hasOwnProperty)?h:HE))?i:HE))?void 0:j.toString))&&(l=k+"",f.push({start:b.length+d.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),b+d+(g===c.length?"":l)},""),h=g.split(/[?#]/,1)[0],i=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(d=i.exec(h));)f.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(f.sort((a,b)=>a.start-b.start),f.length>0){let a=0,b=f.reduce((b,c)=>{let d=" ".repeat(c.start-a),e="^".repeat(c.length);return a=c.start+c.length,b+d+e},"");throw new Ha(`Path parameters result in path with invalid segments:
${f.map(a=>a.error).join("\n")}
${g}
${b}`)}return g})(HD);class HG extends HC{create(a,b){var c;let{api_version:d=this._client.apiVersion}=a,e=Gl(a,["api_version"]);if("model"in e&&"agent_config"in e)throw new Ha("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in e&&"generation_config"in e)throw new Ha("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(HF`/${d}/interactions`,Object.assign(Object.assign({body:e},b),{stream:null!=(c=a.stream)&&c}))}delete(a,b={},c){let{api_version:d=this._client.apiVersion}=null!=b?b:{};return this._client.delete(HF`/${d}/interactions/${a}`,c)}cancel(a,b={},c){let{api_version:d=this._client.apiVersion}=null!=b?b:{};return this._client.post(HF`/${d}/interactions/${a}/cancel`,c)}get(a,b={},c){var d;let e=null!=b?b:{},{api_version:f=this._client.apiVersion}=e,g=Gl(e,["api_version"]);return this._client.get(HF`/${f}/interactions/${a}`,Object.assign(Object.assign({query:g},c),{stream:null!=(d=null==b?void 0:b.stream)&&d}))}}HG._key=Object.freeze(["interactions"]);class HH extends HG{}function HI(a){let b;return(null!=h?h:h=(b=new globalThis.TextEncoder).encode.bind(b))(a)}function HJ(a){let b;return(null!=i?i:i=(b=new globalThis.TextDecoder).decode.bind(b))(a)}class HK{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(a){let b;if(null==a)return[];let c=a instanceof ArrayBuffer?new Uint8Array(a):"string"==typeof a?HI(a):a;this.buffer=function(a){let b=0;for(let c of a)b+=c.length;let c=new Uint8Array(b),d=0;for(let b of a)c.set(b,d),d+=b.length;return c}([this.buffer,c]);let d=[];for(;null!=(b=function(a,b){for(let c=null!=b?b:0;c<a.length;c++){if(10===a[c])return{preceding:c,index:c+1,carriage:!1};if(13===a[c])return{preceding:c,index:c+1,carriage:!0}}return null}(this.buffer,this.carriageReturnIndex));){if(b.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=b.index;continue}if(null!=this.carriageReturnIndex&&(b.index!==this.carriageReturnIndex+1||b.carriage)){d.push(HJ(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let a=null!==this.carriageReturnIndex?b.preceding-1:b.preceding,c=HJ(this.buffer.subarray(0,a));d.push(c),this.buffer=this.buffer.subarray(b.index),this.carriageReturnIndex=null}return d}flush(){return this.buffer.length?this.decode("\n"):[]}}HK.NEWLINE_CHARS=new Set(["\n","\r"]),HK.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let HL={off:0,error:200,warn:300,info:400,debug:500},HM=(a,b,c)=>{if(a){if(Object.prototype.hasOwnProperty.call(HL,a))return a;HR(c).warn(`${b} was set to ${JSON.stringify(a)}, expected one of ${JSON.stringify(Object.keys(HL))}`)}};function HN(){}function HO(a,b,c){return!b||HL[a]>HL[c]?HN:b[a].bind(b)}let HP={error:HN,warn:HN,info:HN,debug:HN},HQ=new WeakMap;function HR(a){var b;let c=a.logger,d=null!=(b=a.logLevel)?b:"off";if(!c)return HP;let e=HQ.get(c);if(e&&e[0]===d)return e[1];let f={error:HO("error",c,d),warn:HO("warn",c,d),info:HO("info",c,d),debug:HO("debug",c,d)};return HQ.set(c,[d,f]),f}let HS=a=>(a.options&&(a.options=Object.assign({},a.options),delete a.options.headers),a.headers&&(a.headers=Object.fromEntries((a.headers instanceof Headers?[...a.headers]:Object.entries(a.headers)).map(([a,b])=>[a,"x-goog-api-key"===a.toLowerCase()||"authorization"===a.toLowerCase()||"cookie"===a.toLowerCase()||"set-cookie"===a.toLowerCase()?"***":b]))),"retryOfRequestLogID"in a&&(a.retryOfRequestLogID&&(a.retryOf=a.retryOfRequestLogID),delete a.retryOfRequestLogID),a);class HT{constructor(a,b,c){this.iterator=a,this.controller=b,this.client=c}static fromSSEResponse(a,b,c){let d=!1,e=c?HR(c):console;return new HT(function(){return Gn(this,arguments,function*(){var c,f,g,h;if(d)throw new Ha("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");d=!0;let i=!1;try{try{for(var j,k=!0,l=Go(function(a,b){return Gn(this,arguments,function*(){var c,d,e,f;if(!a.body){if(b.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new Ha("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new Ha("Attempted to iterate over a response with no body")}let g=new HU,h=new HK,i=Hu(a.body);try{for(var j,k=!0,l=Go(function(a){return Gn(this,arguments,function*(){var b,c,d,e;let f=new Uint8Array;try{for(var g,h=!0,i=Go(a);!(b=(g=yield Gm(i.next())).done);h=!0){let a;if(e=g.value,h=!1,null==e)continue;let b=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?HI(e):e,c=new Uint8Array(f.length+b.length);for(c.set(f),c.set(b,f.length),f=c;-1!==(a=function(a){for(let b=0;b<a.length-1;b++){if(10===a[b]&&10===a[b+1]||13===a[b]&&13===a[b+1])return b+2;if(13===a[b]&&10===a[b+1]&&b+3<a.length&&13===a[b+2]&&10===a[b+3])return b+4}return -1}(f));)yield yield Gm(f.slice(0,a)),f=f.slice(a)}}catch(a){c={error:a}}finally{try{!h&&!b&&(d=i.return)&&(yield Gm(d.call(i)))}finally{if(c)throw c.error}}f.length>0&&(yield yield Gm(f))})}(i));!(c=(j=yield Gm(l.next())).done);k=!0)for(let a of(f=j.value,k=!1,h.decode(f))){let b=g.decode(a);b&&(yield yield Gm(b))}}catch(a){d={error:a}}finally{try{!k&&!c&&(e=l.return)&&(yield Gm(e.call(l)))}finally{if(d)throw d.error}}for(let a of h.flush()){let b=g.decode(a);b&&(yield yield Gm(b))}})}(a,b));!(c=(j=yield Gm(l.next())).done);k=!0)if(h=j.value,k=!1,!i)if(h.data.startsWith("[DONE]")){i=!0;continue}else try{yield yield Gm(JSON.parse(h.data))}catch(a){throw e.error("Could not parse message into JSON:",h.data),e.error("From chunk:",h.raw),a}}catch(a){f={error:a}}finally{try{!k&&!c&&(g=l.return)&&(yield Gm(g.call(l)))}finally{if(f)throw f.error}}i=!0}catch(a){if(G8(a))return yield Gm(void 0);throw a}finally{i||b.abort()}})},b,c)}static fromReadableStream(a,b,c){let d=!1;return new HT(function(){return Gn(this,arguments,function*(){var c,e,f,g;if(d)throw new Ha("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");d=!0;let h=!1;try{try{for(var i,j=!0,k=Go(function(){return Gn(this,arguments,function*(){var b,c,d,e;let f=new HK,g=Hu(a);try{for(var h,i=!0,j=Go(g);!(b=(h=yield Gm(j.next())).done);i=!0)for(let a of(e=h.value,i=!1,f.decode(e)))yield yield Gm(a)}catch(a){c={error:a}}finally{try{!i&&!b&&(d=j.return)&&(yield Gm(d.call(j)))}finally{if(c)throw c.error}}for(let a of f.flush())yield yield Gm(a)})}());!(c=(i=yield Gm(k.next())).done);j=!0)g=i.value,j=!1,!h&&g&&(yield yield Gm(JSON.parse(g)))}catch(a){e={error:a}}finally{try{!j&&!c&&(f=k.return)&&(yield Gm(f.call(k)))}finally{if(e)throw e.error}}h=!0}catch(a){if(G8(a))return yield Gm(void 0);throw a}finally{h||b.abort()}})},b,c)}[Symbol.asyncIterator](){return this.iterator()}tee(){let a=[],b=[],c=this.iterator(),d=d=>({next:()=>{if(0===d.length){let d=c.next();a.push(d),b.push(d)}return d.shift()}});return[new HT(()=>d(a),this.controller,this.client),new HT(()=>d(b),this.controller,this.client)]}toReadableStream(){let a,b=this;return Ht({async start(){a=b[Symbol.asyncIterator]()},async pull(b){try{let{value:c,done:d}=await a.next();if(d)return b.close();let e=HI(JSON.stringify(c)+"\n");b.enqueue(e)}catch(a){b.error(a)}},async cancel(){var b;await (null==(b=a.return)?void 0:b.call(a))}})}}class HU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(a){if(a.endsWith("\r")&&(a=a.substring(0,a.length-1)),!a){if(!this.event&&!this.data.length)return null;let a={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(a),a.startsWith(":"))return null;let[b,c,d]=function(a,b){let c=a.indexOf(":");return -1!==c?[a.substring(0,c),b,a.substring(c+b.length)]:[a,"",""]}(a,":");return d.startsWith(" ")&&(d=d.substring(1)),"event"===b?this.event=d:"data"===b&&this.data.push(d),null}}async function HV(a,b){let{response:c,requestLogID:d,retryOfRequestLogID:e,startTime:f}=b,g=await (async()=>{var d;if(b.options.stream)return(HR(a).debug("response",c.status,c.url,c.headers,c.body),b.options.__streamClass)?b.options.__streamClass.fromSSEResponse(c,b.controller,a):HT.fromSSEResponse(c,b.controller,a);if(204===c.status)return null;if(b.options.__binaryResponse)return c;let e=c.headers.get("content-type"),f=null==(d=null==e?void 0:e.split(";")[0])?void 0:d.trim();return(null==f?void 0:f.includes("application/json"))||(null==f?void 0:f.endsWith("+json"))?await c.json():await c.text()})();return HR(a).debug(`[${d}] response parsed`,HS({retryOfRequestLogID:e,url:c.url,status:c.status,body:g,durationMs:Date.now()-f})),g}class HW extends Promise{constructor(a,b,c=HV){super(a=>{a(null)}),this.responsePromise=b,this.parseResponse=c,this.client=a}_thenUnwrap(a){return new HW(this.client,this.responsePromise,async(b,c)=>a(await this.parseResponse(b,c),c))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){let[a,b]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:b}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(a=>this.parseResponse(this.client,a))),this.parsedPromise}then(a,b){return this.parse().then(a,b)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}let HX=Symbol("brand.privateNullableHeaders"),HY=a=>{let b=new Headers,c=new Set;for(let d of a){let a=new Set;for(let[e,f]of function*(a){let b;if(!a)return;if(HX in a){let{values:b,nulls:c}=a;for(let a of(yield*b.entries(),c))yield[a,null];return}let c=!1;for(let d of(a instanceof Headers?b=a.entries():Hp(a)?b=a:(c=!0,b=Object.entries(null!=a?a:{})),b)){let a=d[0];if("string"!=typeof a)throw TypeError("expected header name to be a string");let b=Hp(d[1])?d[1]:[d[1]],e=!1;for(let d of b)void 0!==d&&(c&&!e&&(e=!0,yield[a,null]),yield[a,d])}}(d)){let d=e.toLowerCase();a.has(d)||(b.delete(e),a.add(d)),null===f?(b.delete(e),c.add(d)):(b.append(e,f),c.delete(d))}}return{[HX]:!0,values:b,nulls:c}},HZ=a=>{var b,c,d,e,f,g;return void 0!==globalThis.process?null!=(d=null==(c=null==(b=globalThis.process.env)?void 0:b[a])?void 0:c.trim())?d:void 0:void 0!==globalThis.Deno?null==(g=null==(f=null==(e=globalThis.Deno.env)?void 0:e.get)?void 0:f.call(e,a))?void 0:g.trim():void 0};class H${constructor(a){var b,c,d,e,f,g,h,{baseURL:i=HZ("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:j=null!=(b=HZ("GEMINI_API_KEY"))?b:null,apiVersion:k="v1beta"}=a;let l=Object.assign(Object.assign({apiKey:j,apiVersion:k},Gl(a,["baseURL","apiKey","apiVersion"])),{baseURL:i||"https://generativelanguage.googleapis.com"});this.baseURL=l.baseURL,this.timeout=null!=(c=l.timeout)?c:H$.DEFAULT_TIMEOUT,this.logger=null!=(d=l.logger)?d:console;let m="warn";this.logLevel=m,this.logLevel=null!=(f=null!=(e=HM(l.logLevel,"ClientOptions.logLevel",this))?e:HM(HZ("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))?f:m,this.fetchOptions=l.fetchOptions,this.maxRetries=null!=(g=l.maxRetries)?g:2,this.fetch=null!=(h=l.fetch)?h:function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=Hw,this._options=l,this.apiKey=j,this.apiVersion=k,this.clientAdapter=l.clientAdapter}withOptions(a){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),a))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:a,nulls:b}){if(!(a.has("authorization")||a.has("x-goog-api-key")||this.apiKey&&a.get("x-goog-api-key"))&&!b.has("x-goog-api-key"))throw Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(a){let b=HY([a.headers]);if(!(b.values.has("authorization")||b.values.has("x-goog-api-key"))){if(this.apiKey)return HY([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return HY([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(a){return Object.entries(a).filter(([a,b])=>void 0!==b).map(([a,b])=>{if("string"==typeof b||"number"==typeof b||"boolean"==typeof b)return`${encodeURIComponent(a)}=${encodeURIComponent(b)}`;if(null===b)return`${encodeURIComponent(a)}=`;throw new Ha(`Cannot stringify type ${typeof b}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Hq}`}defaultIdempotencyKey(){return`stainless-node-retry-${G7()}`}makeStatusError(a,b,c,d){return Hb.generate(a,b,c,d)}buildURL(a,b,c){let d=!this.baseURLOverridden()&&c||this.baseURL,e=new URL(Hn.test(a)?a:d+(d.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),f=this.defaultQuery();return!function(a){if(!a)return!0;for(let b in a)return!1;return!0}(f)&&(b=Object.assign(Object.assign({},f),b)),"object"==typeof b&&b&&!Array.isArray(b)&&(e.search=this.stringifyQuery(b)),e.toString()}async prepareOptions(a){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!a.path.startsWith(`/${this.apiVersion}/projects/`)){let b=a.path.slice(this.apiVersion.length+1);a.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${b}`}}async prepareRequest(a,{url:b,options:c}){}get(a,b){return this.methodRequest("get",a,b)}post(a,b){return this.methodRequest("post",a,b)}patch(a,b){return this.methodRequest("patch",a,b)}put(a,b){return this.methodRequest("put",a,b)}delete(a,b){return this.methodRequest("delete",a,b)}methodRequest(a,b,c){return this.request(Promise.resolve(c).then(c=>Object.assign({method:a,path:b},c)))}request(a,b=null){return new HW(this,this.makeRequest(a,b,void 0))}async makeRequest(a,b,c){var d,e,f;let g=await a,h=null!=(d=g.maxRetries)?d:this.maxRetries;null==b&&(b=h),await this.prepareOptions(g);let{req:i,url:j,timeout:k}=await this.buildRequest(g,{retryCount:h-b});await this.prepareRequest(i,{url:j,options:g});let l="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),m=void 0===c?"":`, retryOf: ${c}`,n=Date.now();if(HR(this).debug(`[${l}] sending request`,HS({retryOfRequestLogID:c,method:g.method,url:j,options:g,headers:i.headers})),null==(e=g.signal)?void 0:e.aborted)throw new Hc;let o=new AbortController,p=await this.fetchWithTimeout(j,i,k,o).catch(G9),q=Date.now();if(p instanceof globalThis.Error){let a=`retrying, ${b} attempts remaining`;if(null==(f=g.signal)?void 0:f.aborted)throw new Hc;let d=G8(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(b)return HR(this).info(`[${l}] connection ${d?"timed out":"failed"} - ${a}`),HR(this).debug(`[${l}] connection ${d?"timed out":"failed"} (${a})`,HS({retryOfRequestLogID:c,url:j,durationMs:q-n,message:p.message})),this.retryRequest(g,b,null!=c?c:l);if(HR(this).info(`[${l}] connection ${d?"timed out":"failed"} - error; no more retries left`),HR(this).debug(`[${l}] connection ${d?"timed out":"failed"} (error; no more retries left)`,HS({retryOfRequestLogID:c,url:j,durationMs:q-n,message:p.message})),d)throw new He;throw new Hd({cause:p})}let r=`[${l}${m}] ${i.method} ${j} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${q-n}ms`;if(!p.ok){let a=await this.shouldRetry(p);if(b&&a){let a=`retrying, ${b} attempts remaining`;return await Hv(p.body),HR(this).info(`${r} - ${a}`),HR(this).debug(`[${l}] response error (${a})`,HS({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,durationMs:q-n})),this.retryRequest(g,b,null!=c?c:l,p.headers)}let d=a?"error; no more retries left":"error; not retryable";HR(this).info(`${r} - ${d}`);let e=await p.text().catch(a=>G9(a).message),f=(a=>{try{return JSON.parse(a)}catch(a){return}})(e),h=f?void 0:e;throw HR(this).debug(`[${l}] response error (${d})`,HS({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,message:h,durationMs:Date.now()-n})),this.makeStatusError(p.status,f,h,p.headers)}return HR(this).info(r),HR(this).debug(`[${l}] response start`,HS({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,durationMs:q-n})),{response:p,options:g,controller:o,requestLogID:l,retryOfRequestLogID:c,startTime:n}}async fetchWithTimeout(a,b,c,d){let e=b||{},{signal:f,method:g}=e,h=Gl(e,["signal","method"]);f&&f.addEventListener("abort",()=>d.abort());let i=setTimeout(()=>d.abort(),c),j=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||"object"==typeof h.body&&null!==h.body&&Symbol.asyncIterator in h.body,k=Object.assign(Object.assign(Object.assign({signal:d.signal},j?{duplex:"half"}:{}),{method:"GET"}),h);g&&(k.method=g.toUpperCase());try{return await this.fetch.call(void 0,a,k)}finally{clearTimeout(i)}}async shouldRetry(a){let b=a.headers.get("x-should-retry");return"true"===b||"false"!==b&&(408===a.status||409===a.status||429===a.status||!!(a.status>=500))}async retryRequest(a,b,c,d){var e;let f,g,h=null==d?void 0:d.get("retry-after-ms");if(h){let a=parseFloat(h);Number.isNaN(a)||(f=a)}let i=null==d?void 0:d.get("retry-after");if(i&&!f){let a=parseFloat(i);f=Number.isNaN(a)?Date.parse(i)-Date.now():1e3*a}if(!(f&&0<=f&&f<6e4)){let c=null!=(e=a.maxRetries)?e:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(b,c)}return await (g=f,new Promise(a=>setTimeout(a,g))),this.makeRequest(a,b-1,c)}calculateDefaultRetryTimeoutMillis(a,b){return Math.min(.5*Math.pow(2,b-a),8)*(1-.25*Math.random())*1e3}async buildRequest(a,{retryCount:b=0}={}){var c,d,e;let f=Object.assign({},a),{method:g,path:h,query:i,defaultBaseURL:j}=f,k=this.buildURL(h,i,j);"timeout"in f&&((a,b)=>{if("number"!=typeof b||!Number.isInteger(b))throw new Ha(`${a} must be an integer`);if(b<0)throw new Ha(`${a} must be a positive integer`)})("timeout",f.timeout),f.timeout=null!=(c=f.timeout)?c:this.timeout;let{bodyHeaders:l,body:m}=this.buildBody({options:f}),n=await this.buildHeaders({options:a,method:g,bodyHeaders:l,retryCount:b});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:g,headers:n},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),null!=(d=this.fetchOptions)?d:{}),null!=(e=f.fetchOptions)?e:{}),url:k,timeout:f.timeout}}async buildHeaders({options:a,method:b,bodyHeaders:c,retryCount:d}){let e={};this.idempotencyHeader&&"get"!==b&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),e[this.idempotencyHeader]=a.idempotencyKey);let f=await this.authHeaders(a),h=HY([e,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(d)},a.timeout?{"X-Stainless-Timeout":String(Math.trunc(a.timeout/1e3))}:{}),null!=g?g:g=(()=>{var a,b,c,d,e;let f="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===f)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hq,"X-Stainless-OS":Hs(Deno.build.os),"X-Stainless-Arch":Hr(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!=(b=null==(a=Deno.version)?void 0:a.deno)?b:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hq,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===f)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hq,"X-Stainless-OS":Hs(null!=(c=globalThis.process.platform)?c:"unknown"),"X-Stainless-Arch":Hr(null!=(d=globalThis.process.arch)?d:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!=(e=globalThis.process.version)?e:"unknown"};let g=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:a,pattern:b}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let c=b.exec(navigator.userAgent);if(c){let b=c[1]||0,d=c[2]||0,e=c[3]||0;return{browser:a,version:`${b}.${d}.${e}`}}}return null}();return g?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hq,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${g.browser}`,"X-Stainless-Runtime-Version":g.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hq,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),this._options.defaultHeaders,c,a.headers,f]);return this.validateHeaders(h),h.values}buildBody({options:{body:a,headers:b}}){let c;if(!a)return{bodyHeaders:void 0,body:void 0};let d=HY([b]);if(ArrayBuffer.isView(a)||a instanceof ArrayBuffer||a instanceof DataView||"string"==typeof a&&d.values.has("content-type")||globalThis.Blob&&a instanceof globalThis.Blob||a instanceof FormData||a instanceof URLSearchParams||globalThis.ReadableStream&&a instanceof globalThis.ReadableStream)return{bodyHeaders:void 0,body:a};if("object"!=typeof a||!(Symbol.asyncIterator in a)&&(!(Symbol.iterator in a)||!("next"in a)||"function"!=typeof a.next))return this.encoder({body:a,headers:d});return{bodyHeaders:void 0,body:(c=Symbol.asyncIterator in a?a[Symbol.asyncIterator]():a[Symbol.iterator](),Ht({start(){},async pull(a){let{done:b,value:d}=await c.next();b?a.close():a.enqueue(d)},async cancel(){var a;await (null==(a=c.return)?void 0:a.call(c))}}))}}}H$.DEFAULT_TIMEOUT=6e4;class H_ extends H${constructor(){super(...arguments),this.interactions=new HH(this)}}H_.GeminiNextGenAPIClient=H_,H_.GeminiNextGenAPIClientError=Ha,H_.APIError=Hb,H_.APIConnectionError=Hd,H_.APIConnectionTimeoutError=He,H_.APIUserAbortError=Hc,H_.NotFoundError=Hi,H_.ConflictError=Hj,H_.RateLimitError=Hl,H_.BadRequestError=Hf,H_.AuthenticationError=Hg,H_.InternalServerError=Hm,H_.PermissionDeniedError=Hh,H_.UnprocessableEntityError=Hk,H_.toFile=HA,H_.Interactions=HH;let H0="x-goog-api-key",H1="https://www.googleapis.com/auth/cloud-platform";class H2{constructor(a){if(void 0!==a.apiKey){this.apiKey=a.apiKey;return}let b=function(a){let b;if(!a)return{scopes:[H1]};if((b=a).scopes){if("string"==typeof b.scopes&&b.scopes!==H1||Array.isArray(b.scopes)&&0>b.scopes.indexOf(H1))throw Error(`Invalid auth scopes. Scopes must include: ${H1}`)}else b.scopes=[H1];return b}(a.googleAuthOptions);this.googleAuth=new E6.kF(b)}async addAuthHeaders(a,b){if(void 0!==this.apiKey){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(a);return}return this.addGoogleAuthHeaders(a,b)}addKeyHeader(a){if(null===a.get(H0)){if(void 0===this.apiKey)throw Error("Trying to set API key header but apiKey is not set");a.append(H0,this.apiKey)}}async addGoogleAuthHeaders(a,b){if(void 0===this.googleAuth)throw Error("Trying to set google-auth headers but googleAuth is unset");for(let[c,d]of(await this.googleAuth.getRequestHeaders(b)))null===a.get(c)&&a.append(c,d)}}class H3{async download(a,b){if(a.downloadPath){let c=await H4(a,b);if(c instanceof Fj){let b=(0,E7.createWriteStream)(a.downloadPath);E9.Readable.fromWeb(c.responseInternal.body).pipe(b),await (0,Fa.finished)(b)}else try{await (0,E8.writeFile)(a.downloadPath,c,{encoding:"base64"})}catch(b){throw Error(`Failed to write file to ${a.downloadPath}: ${b}`)}}}}async function H4(a,b){var c,d,e;let f=F6(a.file);if(void 0!==f)return await b.request({path:`files/${f}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:null==(c=a.config)?void 0:c.httpOptions,abortSignal:null==(d=a.config)?void 0:d.abortSignal});if(F4(a.file)){let b=null==(e=a.file.video)?void 0:e.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download generated video, Uri or videoBytes not found.")}if(F5(a.file)){let b=a.file.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download video, Uri or videoBytes not found.")}throw Error("Unsupported file type")}class H5{create(a,b,c){return new H6(a,b,c)}}class H6{constructor(a,b,c){this.url=a,this.headers=b,this.callbacks=c}connect(){this.ws=new Fb(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(a){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.send(a)}close(){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.close()}}function H7(a,b){let c={},d=Fg(a,["sdkHttpResponse"]);null!=d&&Ff(c,["sdkHttpResponse"],d);let e=Fg(a,["name"]);null!=e&&Ff(c,["name"],e);let f=Fg(a,["state"]);null!=f&&Ff(c,["state"],F3(f));let g=Fg(a,["createTime"]);null!=g&&Ff(c,["createTime"],g);let h=Fg(a,["tuningTask","startTime"]);null!=h&&Ff(c,["startTime"],h);let i=Fg(a,["tuningTask","completeTime"]);null!=i&&Ff(c,["endTime"],i);let j=Fg(a,["updateTime"]);null!=j&&Ff(c,["updateTime"],j);let k=Fg(a,["description"]);null!=k&&Ff(c,["description"],k);let l=Fg(a,["baseModel"]);null!=l&&Ff(c,["baseModel"],l);let m=Fg(a,["_self"]);return null!=m&&Ff(c,["tunedModel"],function(a,b){let c={},d=Fg(a,["name"]);null!=d&&Ff(c,["model"],d);let e=Fg(a,["name"]);return null!=e&&Ff(c,["endpoint"],e),c}(m)),c}function H8(a,b){let c={},d=Fg(a,["sdkHttpResponse"]);null!=d&&Ff(c,["sdkHttpResponse"],d);let e=Fg(a,["name"]);null!=e&&Ff(c,["name"],e);let f=Fg(a,["state"]);null!=f&&Ff(c,["state"],F3(f));let g=Fg(a,["createTime"]);null!=g&&Ff(c,["createTime"],g);let h=Fg(a,["startTime"]);null!=h&&Ff(c,["startTime"],h);let i=Fg(a,["endTime"]);null!=i&&Ff(c,["endTime"],i);let j=Fg(a,["updateTime"]);null!=j&&Ff(c,["updateTime"],j);let k=Fg(a,["error"]);null!=k&&Ff(c,["error"],k);let l=Fg(a,["description"]);null!=l&&Ff(c,["description"],l);let m=Fg(a,["baseModel"]);null!=m&&Ff(c,["baseModel"],m);let n=Fg(a,["tunedModel"]);null!=n&&Ff(c,["tunedModel"],n);let o=Fg(a,["preTunedModel"]);null!=o&&Ff(c,["preTunedModel"],o);let p=Fg(a,["supervisedTuningSpec"]);null!=p&&Ff(c,["supervisedTuningSpec"],p);let q=Fg(a,["preferenceOptimizationSpec"]);null!=q&&Ff(c,["preferenceOptimizationSpec"],q);let r=Fg(a,["tuningDataStats"]);null!=r&&Ff(c,["tuningDataStats"],r);let s=Fg(a,["encryptionSpec"]);null!=s&&Ff(c,["encryptionSpec"],s);let t=Fg(a,["partnerModelTuningSpec"]);null!=t&&Ff(c,["partnerModelTuningSpec"],t);let u=Fg(a,["customBaseModel"]);null!=u&&Ff(c,["customBaseModel"],u);let v=Fg(a,["experiment"]);null!=v&&Ff(c,["experiment"],v);let w=Fg(a,["labels"]);null!=w&&Ff(c,["labels"],w);let x=Fg(a,["outputUri"]);null!=x&&Ff(c,["outputUri"],x);let y=Fg(a,["pipelineJob"]);null!=y&&Ff(c,["pipelineJob"],y);let z=Fg(a,["serviceAccount"]);null!=z&&Ff(c,["serviceAccount"],z);let A=Fg(a,["tunedModelDisplayName"]);null!=A&&Ff(c,["tunedModelDisplayName"],A);let B=Fg(a,["veoTuningSpec"]);return null!=B&&Ff(c,["veoTuningSpec"],B),c}function H9(a,b){let c={},d=Fg(a,["gcsUri"]);null!=d&&Ff(c,["validationDatasetUri"],d);let e=Fg(a,["vertexDatasetResource"]);return null!=e&&Ff(c,["validationDatasetUri"],e),c}class Ia extends Fd{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new Gh(aL.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(a),a),this.get=async a=>await this.getInternal(a),this.tune=async a=>{var b;if(this.apiClient.isVertexAI())if(a.baseModel.startsWith("projects/")){let c={tunedModelName:a.baseModel};(null==(b=a.config)?void 0:b.preTunedModelCheckpointId)&&(c.checkpointId=a.config.preTunedModelCheckpointId);let d=Object.assign(Object.assign({},a),{preTunedModel:c});return d.baseModel=void 0,await this.tuneInternal(d)}else{let b=Object.assign({},a);return await this.tuneInternal(b)}{let b=Object.assign({},a),c=await this.tuneMldevInternal(b),d="";return void 0!==c.metadata&&void 0!==c.metadata.tunedModel?d=c.metadata.tunedModel:void 0!==c.name&&c.name.includes("/operations/")&&(d=c.name.split("/operations/")[0]),{name:d,state:af.JOB_STATE_QUEUED}}}}async getInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(a,["name"]);return null!=d&&Ff(c,["_url","name"],d),c}(a);return f=Fe("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>H8(a))}{let b=function(a,b){let c={},d=Fg(a,["name"]);return null!=d&&Ff(c,["_url","name"],d),c}(a);return f=Fe("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>H7(a))}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(a,["config"]);return null!=d&&function(a,b,c){let d=Fg(a,["pageSize"]);void 0!==b&&null!=d&&Ff(b,["_query","pageSize"],d);let e=Fg(a,["pageToken"]);void 0!==b&&null!=e&&Ff(b,["_query","pageToken"],e);let f=Fg(a,["filter"]);void 0!==b&&null!=f&&Ff(b,["_query","filter"],f)}(d,c),c}(a);return f=Fe("tuningJobs",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=Fg(a,["sdkHttpResponse"]);null!=d&&Ff(c,["sdkHttpResponse"],d);let e=Fg(a,["nextPageToken"]);null!=e&&Ff(c,["nextPageToken"],e);let f=Fg(a,["tuningJobs"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>H8(a))),Ff(c,["tuningJobs"],a)}return c}(a),c=new Fw;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=Fg(a,["config"]);return null!=d&&function(a,b,c){let d=Fg(a,["pageSize"]);void 0!==b&&null!=d&&Ff(b,["_query","pageSize"],d);let e=Fg(a,["pageToken"]);void 0!==b&&null!=e&&Ff(b,["_query","pageToken"],e);let f=Fg(a,["filter"]);void 0!==b&&null!=f&&Ff(b,["_query","filter"],f)}(d,c),c}(a);return f=Fe("tunedModels",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=Fg(a,["sdkHttpResponse"]);null!=d&&Ff(c,["sdkHttpResponse"],d);let e=Fg(a,["nextPageToken"]);null!=e&&Ff(c,["nextPageToken"],e);let f=Fg(a,["tunedModels"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>H7(a))),Ff(c,["tuningJobs"],a)}return c}(a),c=new Fw;return Object.assign(c,b),c})}}async cancel(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=Fg(a,["name"]);return null!=d&&Ff(c,["_url","name"],d),c}(a);return f=Fe("{name}:cancel",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=Fg(a,["sdkHttpResponse"]);return null!=d&&Ff(c,["sdkHttpResponse"],d),c}(a),c=new Fx;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=Fg(a,["name"]);return null!=d&&Ff(c,["_url","name"],d),c}(a);return f=Fe("{name}:cancel",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=Fg(a,["sdkHttpResponse"]);return null!=d&&Ff(c,["sdkHttpResponse"],d),c}(a),c=new Fx;return Object.assign(c,b),c})}}async tuneInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=Fg(a,["baseModel"]);null!=d&&Ff(c,["baseModel"],d);let e=Fg(a,["preTunedModel"]);null!=e&&Ff(c,["preTunedModel"],e);let f=Fg(a,["trainingDataset"]);null!=f&&function(a,b,c){let d=Fg(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=Fg(a,["gcsUri"]);void 0!==b&&null!=c&&Ff(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===d){let c=Fg(a,["gcsUri"]);void 0!==b&&null!=c&&Ff(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let e=Fg(c,["config","method"]);if(void 0===e&&(e="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===e){let c=Fg(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&Ff(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===e){let c=Fg(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&Ff(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(void 0!==Fg(a,["examples"]))throw Error("examples parameter is not supported in Vertex AI.")}(f,c,b);let g=Fg(a,["config"]);return null!=g&&function(a,b,c){let d=Fg(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=Fg(a,["validationDataset"]);void 0!==b&&null!=c&&Ff(b,["supervisedTuningSpec"],H9(c))}else if("PREFERENCE_TUNING"===d){let c=Fg(a,["validationDataset"]);void 0!==b&&null!=c&&Ff(b,["preferenceOptimizationSpec"],H9(c))}let e=Fg(a,["tunedModelDisplayName"]);void 0!==b&&null!=e&&Ff(b,["tunedModelDisplayName"],e);let f=Fg(a,["description"]);void 0!==b&&null!=f&&Ff(b,["description"],f);let g=Fg(c,["config","method"]);if(void 0===g&&(g="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===g){let c=Fg(a,["epochCount"]);void 0!==b&&null!=c&&Ff(b,["supervisedTuningSpec","hyperParameters","epochCount"],c)}else if("PREFERENCE_TUNING"===g){let c=Fg(a,["epochCount"]);void 0!==b&&null!=c&&Ff(b,["preferenceOptimizationSpec","hyperParameters","epochCount"],c)}let h=Fg(c,["config","method"]);if(void 0===h&&(h="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===h){let c=Fg(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&Ff(b,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c)}else if("PREFERENCE_TUNING"===h){let c=Fg(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&Ff(b,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],c)}let i=Fg(c,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let c=Fg(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&Ff(b,["supervisedTuningSpec","exportLastCheckpointOnly"],c)}else if("PREFERENCE_TUNING"===i){let c=Fg(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&Ff(b,["preferenceOptimizationSpec","exportLastCheckpointOnly"],c)}let j=Fg(c,["config","method"]);if(void 0===j&&(j="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===j){let c=Fg(a,["adapterSize"]);void 0!==b&&null!=c&&Ff(b,["supervisedTuningSpec","hyperParameters","adapterSize"],c)}else if("PREFERENCE_TUNING"===j){let c=Fg(a,["adapterSize"]);void 0!==b&&null!=c&&Ff(b,["preferenceOptimizationSpec","hyperParameters","adapterSize"],c)}if(void 0!==Fg(a,["batchSize"]))throw Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==Fg(a,["learningRate"]))throw Error("learningRate parameter is not supported in Vertex AI.");let k=Fg(a,["labels"]);void 0!==b&&null!=k&&Ff(b,["labels"],k);let l=Fg(a,["beta"]);void 0!==b&&null!=l&&Ff(b,["preferenceOptimizationSpec","hyperParameters","beta"],l)}(g,c,b),c}(a,a);return d=Fe("tuningJobs",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>H8(a))}throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a,b){let c={},d=Fg(a,["baseModel"]);null!=d&&Ff(c,["baseModel"],d);let e=Fg(a,["preTunedModel"]);null!=e&&Ff(c,["preTunedModel"],e);let f=Fg(a,["trainingDataset"]);null!=f&&function(a,b){if(void 0!==Fg(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==Fg(a,["vertexDatasetResource"]))throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let c=Fg(a,["examples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),Ff({},["examples","examples"],a)}}(f);let g=Fg(a,["config"]);return null!=g&&function(a,b,c){if(void 0!==Fg(a,["validationDataset"]))throw Error("validationDataset parameter is not supported in Gemini API.");let d=Fg(a,["tunedModelDisplayName"]);if(void 0!==b&&null!=d&&Ff(b,["displayName"],d),void 0!==Fg(a,["description"]))throw Error("description parameter is not supported in Gemini API.");let e=Fg(a,["epochCount"]);void 0!==b&&null!=e&&Ff(b,["tuningTask","hyperparameters","epochCount"],e);let f=Fg(a,["learningRateMultiplier"]);if(null!=f&&Ff({},["tuningTask","hyperparameters","learningRateMultiplier"],f),void 0!==Fg(a,["exportLastCheckpointOnly"]))throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==Fg(a,["preTunedModelCheckpointId"]))throw Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==Fg(a,["adapterSize"]))throw Error("adapterSize parameter is not supported in Gemini API.");let g=Fg(a,["batchSize"]);void 0!==b&&null!=g&&Ff(b,["tuningTask","hyperparameters","batchSize"],g);let h=Fg(a,["learningRate"]);if(void 0!==b&&null!=h&&Ff(b,["tuningTask","hyperparameters","learningRate"],h),void 0!==Fg(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");if(void 0!==Fg(a,["beta"]))throw Error("beta parameter is not supported in Gemini API.")}(g,c),c}(a);return d=Fe("tunedModels",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>(function(a,b){let c={},d=Fg(a,["sdkHttpResponse"]);null!=d&&Ff(c,["sdkHttpResponse"],d);let e=Fg(a,["name"]);null!=e&&Ff(c,["name"],e);let f=Fg(a,["metadata"]);null!=f&&Ff(c,["metadata"],f);let g=Fg(a,["done"]);null!=g&&Ff(c,["done"],g);let h=Fg(a,["error"]);return null!=h&&Ff(c,["error"],h),c})(a))}}}let Ib="x-goog-upload-status";async function Ic(a,b,c){var d;let e=await Ie(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[Ib])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Id(a,b,c){var d;let e=await Ie(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[Ib])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let g=Fi(f),h=new FK;return Object.assign(h,g),h}async function Ie(a,b,c){var d,e;let f=0,g=0,h=new Fj(new Response),i="upload";for(f=a.size;g<f;){let j=Math.min(8388608,f-g),k=a.slice(g,g+j);g+j>=f&&(i+=", finalize");let l=0,m=1e3;for(;l<3&&(null==(d=null==(h=await c.request({path:"",body:k,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":i,"X-Goog-Upload-Offset":String(g),"Content-Length":String(j)}}}))?void 0:h.headers)||!d[Ib]);)l++,await Ig(m),m*=2;if(g+=j,(null==(e=null==h?void 0:h.headers)?void 0:e[Ib])!=="active")break;if(f<=g)throw Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function If(a){return{size:a.size,type:a.type}}function Ig(a){return new Promise(b=>setTimeout(b,a))}class Ih{async stat(a){let b={size:0,type:void 0};return"string"==typeof a?(b.size=(await E8.stat(a)).size,b.type=this.inferMimeType(a),b):await If(a)}async upload(a,b,c){return"string"==typeof a?await this.uploadFileFromPath(a,b,c):Ic(a,b,c)}async uploadToFileSearchStore(a,b,c){return"string"==typeof a?await this.uploadFileToFileSearchStoreFromPath(a,b,c):Id(a,b,c)}inferMimeType(a){return({aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"})[a.slice(a.lastIndexOf(".")+1).toLowerCase()]}async uploadFileFromPath(a,b,c){var d;let e=await this.uploadFileFromPathInternal(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[Ib])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return f.file}async uploadFileToFileSearchStoreFromPath(a,b,c){var d;let e=await this.uploadFileFromPathInternal(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[Ib])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let g=Fi(f),h=new FK;return Object.assign(h,g),h}async uploadFileFromPathInternal(a,b,c){var d,e;let f,g=0,h=0,i=new Fj(new Response),j="upload",k=Fc.basename(a);try{if(!(f=await E8.open(a,"r")))throw Error("Failed to open file");for(g=(await f.stat()).size;h<g;){let a=Math.min(8388608,g-h);h+a>=g&&(j+=", finalize");let l=new Uint8Array(a),{bytesRead:m}=await f.read(l,0,a,h);if(m!==a)throw Error(`Failed to read ${a} bytes from file at offset ${h}. bytes actually read: ${m}`);let n=new Blob([l]),o=0,p=1e3;for(;o<3&&(null==(d=null==(i=await c.request({path:"",body:n,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m),"X-Goog-Upload-File-Name":k}}}))?void 0:i.headers)||!d[Ib]);)o++,await Ig(p),p*=2;if(h+=m,(null==(e=null==i?void 0:i.headers)?void 0:e[Ib])!=="active")break;if(g<=h)throw Error("All content has been uploaded, but the upload status is not finalized.")}return i}finally{f&&await f.close()}}}class Ii{get interactions(){if(void 0!==this._interactions)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let a=this.httpOptions;(null==a?void 0:a.extraBody)&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let b=new H_({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:null==a?void 0:a.timeout});return this._interactions=b.interactions,this._interactions}constructor(a){var b,c,d,e,f,g;if((a.project||a.location)&&a.apiKey)throw Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=null!=(c=null!=(b=a.vertexai)?b:function(a){var b;return void 0!==(b=Ij(a))&&"true"===b.toLowerCase()}("GOOGLE_GENAI_USE_VERTEXAI"))&&c;let h=function(){let a=Ij("GOOGLE_API_KEY"),b=Ij("GEMINI_API_KEY");return a&&b&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),a||b||void 0}(),i=Ij("GOOGLE_CLOUD_PROJECT"),l=Ij("GOOGLE_CLOUD_LOCATION");if(this.apiKey=null!=(d=a.apiKey)?d:h,this.project=null!=(e=a.project)?e:i,this.location=null!=(f=a.location)?f:l,!this.vertexai&&!this.apiKey)throw Error("API key must be set when using the Gemini API.");a.vertexai&&((null==(g=a.googleAuthOptions)?void 0:g.credentials)&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(i||l)&&a.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(a.project||a.location)&&h?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(i||l)&&h&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0),this.location||this.apiKey||(this.location="global"));let m=function(a,b,c,d){return(null==a?void 0:a.baseUrl)?a.baseUrl:b?null!=k?k:c:null!=j?j:d}(a.httpOptions,a.vertexai,Ij("GOOGLE_VERTEX_BASE_URL"),Ij("GOOGLE_GEMINI_BASE_URL"));m&&(a.httpOptions?a.httpOptions.baseUrl=m:a.httpOptions={baseUrl:m}),this.apiVersion=a.apiVersion,this.httpOptions=a.httpOptions;let n=new H2({apiKey:this.apiKey,googleAuthOptions:a.googleAuthOptions});this.apiClient=new GO({auth:n,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/"+process.version,uploader:new Ih,downloader:new H3}),this.models=new G2(this.apiClient),this.live=new GX(this.apiClient,n,new H5),this.batches=new Gi(this.apiClient),this.chats=new Gr(this.models,this.apiClient),this.caches=new Gk(this.apiClient),this.files=new Gu(this.apiClient),this.operations=new G3(this.apiClient),this.authTokens=new G4(this.apiClient),this.tunings=new Ia(this.apiClient),this.fileSearchStores=new G6(this.apiClient)}}function Ij(a){var b,c,d;return null!=(d=null==(c=null==(b=null==process?void 0:process.env)?void 0:b[a])?void 0:c.trim())?d:void 0}new Ii({apiKey:"PLACEHOLDER_API_KEY"});let Ik=[{level:1,name:"Entry",minSignups:0,fee:5,color:"text-brand-orange border-brand-orange"},{level:2,name:"Rising Star",minSignups:100,fee:4.5,color:"text-slate-300 border-slate-300"},{level:3,name:"Pro Dealer",minSignups:500,fee:4,color:"text-yellow-400 border-yellow-400"},{level:4,name:"Market Maker",minSignups:1e3,fee:3.5,color:"text-brand-cyan border-brand-cyan"},{level:5,name:"Hobby Icon",minSignups:5e3,fee:3,color:"text-brand-purple border-brand-purple"},{level:6,name:"Legendary",minSignups:1e4,fee:2,color:"text-transparent bg-clip-text bg-gradient-to-r from-brand-cyan via-white to-brand-purple border-white"}],Il=({user:a})=>{let b=a.partnerStats||{totalSignups:0,totalEarnings:0,currentFee:5,referralCode:`CARDSTREET-${a.name.toUpperCase().slice(0,5)}`,level:1},c=Ik.findIndex(a=>a.level===b.level),d=Ik[c],e=Ik[c+1],f=e?Math.min(100,Math.max(0,(b.totalSignups-d.minSignups)/(e.minSignups-d.minSignups)*100)):100,[g,h]=(0,aO.useState)(!1);return(0,aN.jsxs)("div",{className:"pb-32 animate-fadeIn bg-brand-darker min-h-screen",children:[(0,aN.jsxs)("div",{className:"pt-6 px-6 pb-6 bg-gradient-to-b from-brand-cyan/5 to-transparent border-b border-white/5",children:[(0,aN.jsx)("p",{className:"text-brand-cyan text-[10px] font-black uppercase tracking-[0.2em] italic skew-x-[-10deg] mb-1",children:"Partner Portal"}),(0,aN.jsxs)("h1",{className:"text-3xl font-black text-white italic skew-x-[-5deg]",children:["Welcome back, ",(0,aN.jsx)("br",{}),(0,aN.jsx)("span",{className:d.color,children:a.name})]}),(0,aN.jsxs)("p",{className:"text-xs font-bold text-slate-500 mt-2 uppercase tracking-widest",children:["Level ",b.level," • ",d.name," Partner"]})]}),(0,aN.jsxs)("div",{className:"px-4 -mt-4 space-y-6",children:[(0,aN.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,aN.jsxs)("div",{className:"glass p-5 rounded-2xl border border-white/10 relative overflow-hidden group",children:[(0,aN.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:(0,aN.jsx)("i",{className:"fa-solid fa-users text-4xl text-brand-cyan"})}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Total Sign-ups"}),(0,aN.jsx)("p",{className:"text-4xl font-black text-white",children:b.totalSignups.toLocaleString()}),(0,aN.jsxs)("div",{className:"mt-2 text-[10px] text-brand-green font-bold uppercase flex items-center gap-1",children:[(0,aN.jsx)("i",{className:"fa-solid fa-arrow-trend-up"})," Top 5%"]})]}),(0,aN.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,aN.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/10",children:[(0,aN.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Current Fee"}),(0,aN.jsxs)("p",{className:"text-2xl font-black text-brand-red",children:[b.currentFee,"%"]})]}),(0,aN.jsxs)("div",{className:"glass p-4 rounded-2xl border border-white/10",children:[(0,aN.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Earnings"}),(0,aN.jsxs)("p",{className:"text-2xl font-black text-brand-green",children:["฿",b.totalEarnings.toLocaleString()]})]})]})]}),(0,aN.jsxs)("div",{className:"glass p-6 rounded-2xl border border-white/10 space-y-4 relative overflow-hidden",children:[(0,aN.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-cyan/5 to-brand-purple/5"}),(0,aN.jsxs)("div",{className:"flex justify-between items-end relative z-10",children:[(0,aN.jsx)("h3",{className:"font-black text-white italic skew-x-[-10deg] uppercase tracking-wide",children:"Road to Legend"}),e&&(0,aN.jsxs)("span",{className:"text-[9px] font-bold text-brand-cyan uppercase tracking-wider",children:[e.minSignups-b.totalSignups," to Level ",e.level]})]}),(0,aN.jsx)("div",{className:"h-4 bg-brand-darker rounded-full overflow-hidden border border-white/10 relative z-10",children:(0,aN.jsx)("div",{className:"h-full bg-gradient-to-r from-brand-cyan via-brand-purple to-brand-red relative",style:{width:`${f}%`},children:(0,aN.jsx)("div",{className:"absolute inset-0 w-full h-full bg-white/20 animate-pulse"})})}),(0,aN.jsxs)("div",{className:"flex justify-between text-[9px] font-bold text-slate-500 uppercase tracking-widest relative z-10",children:[(0,aN.jsx)("span",{children:d.minSignups}),(0,aN.jsx)("span",{children:e?e.minSignups:"MAX"})]})]}),(0,aN.jsxs)("div",{className:"glass p-6 rounded-2xl border border-white/10 space-y-4",children:[(0,aN.jsx)("h3",{className:"font-black text-white italic skew-x-[-10deg] uppercase tracking-wide",children:"Share the Value"}),(0,aN.jsxs)("div",{className:"flex gap-2",children:[(0,aN.jsx)("div",{className:"flex-1 bg-brand-darker border border-white/10 rounded-xl px-4 flex items-center h-12",children:(0,aN.jsxs)("span",{className:"text-xs text-slate-400 font-mono table-fixed truncate w-full",children:["cardstreet.app/join/",b.referralCode]})}),(0,aN.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(`https://cardstreet.app/join/${b.referralCode}`),h(!0),setTimeout(()=>h(!1),2e3)},className:"w-12 h-12 bg-white text-brand-darker rounded-xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all",children:g?(0,aN.jsx)("i",{className:"fa-solid fa-check text-brand-green"}):(0,aN.jsx)("i",{className:"fa-regular fa-copy"})}),(0,aN.jsx)("button",{className:"w-12 h-12 bg-brand-cyan text-brand-darker rounded-xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all",children:(0,aN.jsx)("i",{className:"fa-solid fa-qrcode"})})]})]}),(0,aN.jsxs)("div",{className:"space-y-3",children:[(0,aN.jsx)("h3",{className:"font-black text-white italic skew-x-[-10deg] uppercase tracking-wide px-2",children:"Tier Rewards"}),Ik.map(a=>(0,aN.jsxs)("div",{className:`flex justify-between items-center p-4 rounded-xl border transition-all ${a.level===b.level?"bg-white/10 border-brand-cyan/50 shadow-[0_0_15px_rgba(6,182,212,0.1)]":"bg-white/5 border-white/5 opacity-60"}`,children:[(0,aN.jsxs)("div",{className:"flex items-center gap-3",children:[(0,aN.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black text-xs border ${a.color.replace("text-","bg-").split(" ")[0]} bg-opacity-20 ${a.color.split(" ")[0]}`,children:a.level}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("p",{className:`text-sm font-bold ${a.color.split(" ")[0]}`,children:a.name}),(0,aN.jsxs)("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:[a.minSignups,"+ Recruits"]})]})]}),(0,aN.jsxs)("div",{className:"text-right",children:[(0,aN.jsxs)("p",{className:"text-sm font-black text-white",children:[a.fee,"%"]}),(0,aN.jsx)("p",{className:"text-[8px] text-slate-500 font-bold uppercase",children:"Fee"})]})]},a.level))]})]})]})},Im=({onApply:a})=>(0,aN.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-6 text-center animate-fadeIn relative overflow-hidden",children:[(0,aN.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-cyan/10 rounded-full blur-[100px]"}),(0,aN.jsx)("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-brand-purple/10 rounded-full blur-[100px]"}),(0,aN.jsxs)("div",{className:"relative z-10 space-y-8",children:[(0,aN.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-brand-cyan to-brand-purple shadow-lg shadow-brand-cyan/20 mb-4 animate-bounce-slow",children:(0,aN.jsx)("i",{className:"fa-solid fa-crown text-4xl text-brand-darker"})}),(0,aN.jsxs)("div",{className:"space-y-2",children:[(0,aN.jsxs)("h1",{className:"text-4xl font-black text-white italic skew-x-[-5deg] tracking-tighter",children:["Your Empire ",(0,aN.jsx)("br",{}),(0,aN.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-brand-cyan to-brand-green",children:"Starts Here."})]}),(0,aN.jsx)("p",{className:"text-slate-400 font-medium text-sm max-w-xs mx-auto leading-relaxed",children:"Bring the community together. Lower your fees. Become a Legend in the CardStreet ecosystem."})]}),(0,aN.jsxs)("div",{className:"grid grid-cols-1 gap-4 w-full max-w-sm",children:[(0,aN.jsxs)("div",{className:"glass p-4 rounded-xl border border-white/5 flex items-center gap-4 text-left",children:[(0,aN.jsx)("div",{className:"w-10 h-10 rounded-full bg-brand-green/20 flex items-center justify-center text-brand-green",children:(0,aN.jsx)("i",{className:"fa-solid fa-percent"})}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("h3",{className:"font-bold text-white text-sm",children:"Lower Fees"}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Earn up to 2% fee rate"})]})]}),(0,aN.jsxs)("div",{className:"glass p-4 rounded-xl border border-white/5 flex items-center gap-4 text-left",children:[(0,aN.jsx)("div",{className:"w-10 h-10 rounded-full bg-brand-cyan/20 flex items-center justify-center text-brand-cyan",children:(0,aN.jsx)("i",{className:"fa-solid fa-users"})}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("h3",{className:"font-bold text-white text-sm",children:"Community Leader"}),(0,aN.jsx)("p",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Exclusive badge & tools"})]})]})]}),(0,aN.jsxs)("button",{onClick:a,className:"w-full h-14 bg-white text-brand-darker font-black text-xs uppercase tracking-[0.2em] rounded-xl shadow-xl shadow-white/10 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2 group",children:["Recruit Collectors",(0,aN.jsx)("i",{className:"fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"})]})]})]}),In=({rating:a,max:b=5,size:c="sm",color:d="text-yellow-400"})=>(0,aN.jsx)("div",{className:`flex gap-0.5 ${"sm"===c?"text-xs":"md"===c?"text-sm":"text-lg"} ${d}`,children:[...Array(b)].map((b,c)=>(0,aN.jsx)("i",{className:`fa-solid fa-star ${c<Math.floor(a)?"opacity-100":"opacity-20"}`},c))}),Io=({reviews:a})=>(0,aN.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,aN.jsxs)("div",{className:"glass p-4 rounded-xl border border-white/5 space-y-2",children:[(0,aN.jsxs)("div",{className:"flex justify-between items-start",children:[(0,aN.jsxs)("div",{className:"flex items-center gap-2",children:[(0,aN.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-700 overflow-hidden",children:(0,aN.jsx)("img",{src:a.reviewerAvatar,alt:a.reviewerName,className:"w-full h-full object-cover"})}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("h4",{className:"text-xs font-bold text-white",children:a.reviewerName}),(0,aN.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:a.date})]})]}),a.verifiedPurchase&&(0,aN.jsx)("span",{className:"bg-brand-green/10 text-brand-green text-[8px] font-black uppercase px-1.5 py-0.5 rounded border border-brand-green/20",children:"Verified"})]}),(0,aN.jsx)(In,{rating:a.rating}),(0,aN.jsx)("p",{className:"text-xs text-slate-300 leading-relaxed",children:a.comment}),a.itemName&&(0,aN.jsxs)("div",{className:"flex items-center gap-1 mt-2 p-1.5 bg-black/20 rounded border border-white/5 w-fit",children:[(0,aN.jsx)("i",{className:"fa-solid fa-tag text-[9px] text-brand-cyan"}),(0,aN.jsx)("span",{className:"text-[9px] text-slate-400 font-bold truncate max-w-[150px]",children:a.itemName})]})]},a.id))}),Ip=({seller:a,listings:b,reviews:c,onBack:d,onSelectCard:e,currency:f="THB",exchangeRate:g=1})=>{let[h,i]=(0,aO.useState)("shop"),j=aX[f]||f,k=a.rating||4.9;return a.reviewCount,(0,aN.jsxs)("div",{className:"bg-brand-darker min-h-screen pb-32 animate-fadeIn relative",children:[(0,aN.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-purple/10 rounded-full blur-[80px] pointer-events-none"}),(0,aN.jsxs)("div",{className:"pt-6 px-4 flex items-center gap-4 relative z-10",children:[(0,aN.jsx)("button",{onClick:d,className:"w-10 h-10 rounded-xl glass flex items-center justify-center text-slate-400 hover:text-white transition-colors",children:(0,aN.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,aN.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Seller Profile"})]}),(0,aN.jsxs)("div",{className:"px-6 mt-6 text-center space-y-4 relative z-10",children:[(0,aN.jsxs)("div",{className:"relative mx-auto w-24 h-24",children:[(0,aN.jsx)("div",{className:"w-24 h-24 rounded-full p-1 bg-gradient-to-br from-brand-cyan via-brand-purple to-brand-red animate-pulse-slow",children:(0,aN.jsx)("img",{src:a.avatar,className:"w-full h-full rounded-full object-cover border-4 border-brand-darker",alt:a.name})}),(0,aN.jsx)("div",{className:"absolute bottom-0 right-0 w-8 h-8 bg-brand-darker rounded-full flex items-center justify-center border border-brand-cyan/30 shadow-lg",children:(0,aN.jsx)("i",{className:"fa-solid fa-certificate text-brand-cyan text-lg"})})]}),(0,aN.jsxs)("div",{children:[(0,aN.jsx)("h1",{className:"text-2xl font-black text-white italic skew-x-[-5deg] mb-1",children:a.name}),(0,aN.jsx)("div",{className:"flex items-center justify-center gap-2 mb-3",children:a.badges?.map(a=>(0,aN.jsx)("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/10 text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:a},a))||(0,aN.jsx)("span",{className:"px-2 py-0.5 rounded bg-brand-purple/10 border border-brand-purple/20 text-[9px] font-bold text-brand-purple uppercase tracking-wider",children:"Verified Pro"})}),(0,aN.jsxs)("div",{className:"flex justify-center items-center gap-6",children:[(0,aN.jsxs)("div",{className:"text-center",children:[(0,aN.jsx)("p",{className:"text-lg font-black text-white",children:k}),(0,aN.jsx)(In,{rating:k})]}),(0,aN.jsx)("div",{className:"w-[1px] h-8 bg-white/10"}),(0,aN.jsxs)("div",{className:"text-center",children:[(0,aN.jsx)("p",{className:"text-lg font-black text-white",children:142}),(0,aN.jsx)("p",{className:"text-[8px] font-bold text-slate-500 uppercase",children:"Sales"})]})]})]}),(0,aN.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,aN.jsx)("button",{className:"h-10 px-6 bg-white text-brand-darker font-black text-xs uppercase tracking-widest rounded-xl hover:scale-105 transition-transform",children:"Follow"}),(0,aN.jsx)("button",{className:"h-10 w-10 glass rounded-xl flex items-center justify-center text-brand-cyan hover:bg-brand-cyan/10 transition-colors",children:(0,aN.jsx)("i",{className:"fa-regular fa-comment-dots"})})]})]}),(0,aN.jsx)("div",{className:"mt-8 border-b border-white/5 px-6 flex gap-6 overflow-x-auto scrollbar-hide",children:["shop","reviews","about"].map(a=>(0,aN.jsxs)("button",{onClick:()=>i(a),className:`pb-3 text-xs font-bold uppercase tracking-widest transition-colors relative ${h===a?"text-white":"text-slate-600 hover:text-slate-400"}`,children:[a,h===a&&(0,aN.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-brand-cyan"})]},a))}),(0,aN.jsxs)("div",{className:"p-6 min-h-[300px]",children:["shop"===h&&(0,aN.jsx)("div",{className:"grid grid-cols-2 gap-3",children:b.map(a=>(0,aN.jsxs)("div",{className:"glass rounded-xl p-2 border border-white/5 group relative active:scale-95 transition-all",children:[(0,aN.jsxs)("div",{className:"aspect-[3/4] bg-brand-darker rounded-lg mb-2 relative overflow-hidden",children:[(0,aN.jsx)("img",{src:a.card_data.images?.small||a.card_data.imageUrl,className:"w-full h-full object-cover"}),(0,aN.jsx)("span",{className:"absolute top-1 right-1 bg-black/60 backdrop-blur text-white text-[9px] font-bold px-1.5 py-0.5 rounded",children:a.condition})]}),(0,aN.jsx)("h4",{className:"text-[10px] font-bold text-white truncate",children:a.card_data.name}),(0,aN.jsxs)("p",{className:"text-brand-green font-black text-xs",children:[j,Math.round(a.price*g).toLocaleString()]}),(0,aN.jsx)("button",{onClick:()=>e(a.card_data),className:"absolute inset-0 w-full h-full opacity-0"})]},a.id))}),"reviews"===h&&(0,aN.jsx)(Io,{reviews:c}),"about"===h&&(0,aN.jsxs)("div",{className:"glass p-6 rounded-2xl border border-white/5 space-y-4 text-center",children:[(0,aN.jsx)("i",{className:"fa-solid fa-quote-left text-brand-cyan text-2xl opacity-50"}),(0,aN.jsx)("p",{className:"text-sm text-slate-300 italic leading-relaxed",children:a.bio||"Professional collector based in Bangkok. Specializing in Mint condition Japanese FA and SAR charts. Fast shipping and bomb-proof packaging guaranteed!"}),(0,aN.jsxs)("div",{className:"pt-4 border-t border-white/5 flex flex-col gap-2",children:[(0,aN.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,aN.jsx)("span",{className:"text-slate-500 font-bold uppercase",children:"Member Since"}),(0,aN.jsx)("span",{className:"text-white font-mono",children:a.joinedAt||"Nov 2023"})]}),(0,aN.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,aN.jsx)("span",{className:"text-slate-500 font-bold uppercase",children:"Avg Ship Time"}),(0,aN.jsx)("span",{className:"text-brand-green font-mono",children:"1.2 Days"})]})]})]})]})]})};function Iq(){let[a,b]=(0,aO.useState)("marketplace"),[c,d]=(0,aO.useState)("all"),[e,f]=(0,aO.useState)(null),[g,h]=(0,aO.useState)(null),[i,j]=(0,aO.useState)(null),[k,l]=(0,aO.useState)([]),[m,n]=(0,aO.useState)([]),[o,p]=(0,aO.useState)(null),[q,r]=(0,aO.useState)("THB"),[s,t]=(0,aO.useState)("TH"),[u,v]=(0,aO.useState)([]),[w,x]=(0,aO.useState)(!1),[y,z]=(0,aO.useState)(!1),[A,B]=(0,aO.useState)(null),[C,D]=(0,aO.useState)(()=>[{id:"default",name:"Main Vault",items:aY.slice(0,3).map((a,b)=>({id:`seed-item-${b}`,cardId:a.id,card:a,quantity:1,condition:0===b?aQ.NM:1===b?aQ.LP:aQ.NM,purchasePrice:a.marketPrice,addedAt:new Date().toISOString(),isListing:!0,listingPrice:0===b?5500:1===b?1200:15e3,isGraded:2===b,gradingCompany:2===b?"PSA":void 0,grade:2===b?10:void 0})),includeInPortfolio:!0,createdAt:new Date().toISOString()}]),[E,F]=(0,aO.useState)(!1),G=(0,aO.useRef)(null),H=aW[q]||1,I="THB"===q?"฿":q,J=(0,aO.useMemo)(()=>C.filter(a=>a.includeInPortfolio).reduce((a,b)=>a+b.items.reduce((a,b)=>a+b.purchasePrice*b.quantity,0),0),[C])*("THB"===q?1:H),K=a=>{n(b=>b.find(b=>b.id===a.id)?b.filter(b=>b.id!==a.id):[...b,a])},L=(a,c="default")=>{let d={id:Math.random().toString(36).substr(2,9),cardId:a.id,card:a,quantity:1,condition:aQ.NM,purchasePrice:a.marketPrice,addedAt:new Date().toISOString()};D(a=>a.map(a=>a.id===c?{...a,items:[...a.items,d]}:a)),n(b=>b.filter(b=>b.id!==a.id)),b("vault")},M=a=>{v(b=>b.find(b=>b.id===a.id)?b:[...b,a]),x(!0)},[N,O]=(0,aO.useState)(null),P=(0,aO.useMemo)(()=>{let a=[];return C.forEach(b=>{b.items.forEach(b=>{b.isListing&&a.push({id:b.id,price:b.listingPrice||0,condition:b.condition,card_data:b.card||aY.find(a=>a.id===b.cardId),seller:o||{display_name:"Guest",avatar_url:""},created_at:new Date().toISOString()})})}),[...a,...a_.map(a=>({...a,seller:{display_name:a.seller.name,avatar_url:a.seller.avatar}}))]},[C,o]);return(0,aN.jsx)("div",{className:"bg-brand-darker min-h-screen flex justify-center selection:bg-brand-cyan/30 overflow-hidden text-slate-200 font-sans",children:(0,aN.jsxs)("div",{className:"w-full max-w-[480px] bg-brand-darker h-screen flex flex-col relative border-x border-white/5 shadow-2xl overflow-hidden",children:[(0,aN.jsx)("div",{className:"absolute top-[-10%] left-[-20%] w-[200px] h-[200px] bg-brand-cyan/10 rounded-full blur-[80px] pointer-events-none"}),(0,aN.jsx)("div",{className:"absolute bottom-[-10%] right-[-20%] w-[200px] h-[200px] bg-brand-red/10 rounded-full blur-[80px] pointer-events-none"}),(0,aN.jsxs)("main",{className:"flex-1 overflow-y-auto scrollbar-hide flex flex-col z-10",children:[(0,aN.jsxs)("header",{className:"w-full px-6 py-6 flex justify-between items-center z-30 shrink-0",children:[(0,aN.jsx)("div",{className:"flex items-center",children:(0,aN.jsx)("div",{className:"relative w-[60px] h-[60px] flex-shrink-0",children:(0,aN.jsx)("img",{src:"/logo.png",alt:"CardStreet",className:"w-full h-full object-contain"})})}),(0,aN.jsxs)("div",{className:"flex gap-2",children:[(0,aN.jsxs)("button",{onClick:()=>x(!0),className:"w-9 h-9 flex items-center justify-center rounded-xl bg-white/5 hover:bg-white/10 relative transition-all",children:[(0,aN.jsx)("i",{className:"fa-solid fa-cart-shopping text-slate-400"}),u.length>0&&(0,aN.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-brand-red text-white text-[9px] font-black rounded-full flex items-center justify-center border border-brand-darker",children:u.length})]}),(0,aN.jsx)(a0,{currentCurrency:q,onCurrencyChange:r})]})]}),(0,aN.jsxs)("div",{className:"flex-1 px-6 pb-40",children:["explore"===a&&(0,aN.jsx)(d6,{onSelectCard:f,searchRequest:A,localListings:P,currency:q,exchangeRate:H}),"marketplace"===a&&(0,aN.jsx)(d7,{initialGame:c,onSelectCard:f,onSelectListing:h,onSellerClick:a=>{j({id:a.id||"mock-id",name:a.display_name,email:"seller@example.com",avatar:a.avatar_url,provider:"google",rating:parseFloat(a.rating)||4.8,badges:["Verified Pro","Fast Shipper"]}),b("seller_profile")},onAddToCart:M,listings:P,currency:q,exchangeRate:H}),"seller_profile"===a&&i&&(0,aN.jsx)(Ip,{seller:i,listings:P.slice(0,4),reviews:a$,onBack:()=>b("marketplace"),onSelectCard:f,currency:q,exchangeRate:H}),"add"===a&&(0,aN.jsx)(d8,{onScanClick:()=>G.current?.click(),onSelectCard:f}),"vault"===a&&(0,aN.jsx)(yf,{customCollections:C,wishlist:m,onUpdateCollections:D,onToggleWishlist:K,onAddToCollection:L,onListCard:(a,b,c)=>O({colId:a,item:b,card:c}),listingTarget:N,onCancelListing:()=>O(null),onPublishListing:a=>{N&&(D(b=>b.map(b=>b.id===N.colId?{...b,items:b.items.map(b=>b.id===N.item.id?{...b,isListing:!0,listingPrice:a.price,condition:a.condition,isGraded:a.is_graded,gradingCompany:a.grading_company,grade:a.grade}:b)}:b)),O(null))},activeListings:P,totalValue:J,currencySymbol:I}),"profile"===a&&(0,aN.jsx)(E0,{user:o,onNavigatePartner:()=>b("partner"),onGuestLogin:()=>{p({id:"guest",name:"Guest Director",email:"guest@cardstreet.app",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=guest",provider:"guest"})}}),"partner"===a&&(o?.isPartner?(0,aN.jsx)(Il,{user:o}):(0,aN.jsx)(Im,{onApply:()=>{o?p({...o,isPartner:!0,partnerStats:{totalSignups:324,level:2,currentFee:4.5,totalEarnings:15400,referralCode:`CS-${o.name.toUpperCase().slice(0,3)}`}}):(alert("Please sign in to apply."),b("profile"))}}))]})]}),(0,aN.jsxs)("nav",{className:"absolute bottom-0 left-0 w-full bg-brand-darker/90 backdrop-blur-xl border-t border-white/5 px-6 pt-2 pb-8 flex justify-between items-end z-40 animate-slideUp",children:[(0,aN.jsxs)("button",{onClick:()=>b("marketplace"),className:`flex flex-col items-center gap-1.5 flex-1 transition-all group p-2 ${"marketplace"===a?"-translate-y-2":""}`,children:[(0,aN.jsx)("i",{className:`fa-solid fa-shop text-xl transition-colors ${"marketplace"===a?"text-brand-purple drop-shadow-[0_0_10px_rgba(168,85,247,0.5)]":"text-slate-600 group-hover:text-slate-400"}`}),(0,aN.jsx)("span",{className:`text-[9px] font-black uppercase tracking-widest transition-opacity ${"marketplace"===a?"opacity-100 text-white":"opacity-0"}`,children:"Shop"})]}),(0,aN.jsxs)("button",{onClick:()=>b("explore"),className:`flex flex-col items-center gap-1.5 flex-1 transition-all group p-2 ${"explore"===a?"-translate-y-2":""}`,children:[(0,aN.jsx)("i",{className:`fa-solid fa-magnifying-glass text-xl transition-colors ${"explore"===a?"text-brand-red drop-shadow-[0_0_10px_rgba(244,63,94,0.5)]":"text-slate-600 group-hover:text-slate-400"}`}),(0,aN.jsx)("span",{className:`text-[9px] font-black uppercase tracking-widest transition-opacity ${"explore"===a?"opacity-100 text-white":"opacity-0"}`,children:"Explore"})]}),(0,aN.jsxs)("div",{className:"relative -top-6",children:[(0,aN.jsxs)("button",{onClick:()=>b("add"),className:"flex items-center justify-center bg-white text-brand-darker w-16 h-16 rounded-full border-[6px] border-brand-darker z-50 active:scale-95 transition-all shadow-xl shadow-white/10 group",children:[(0,aN.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-brand-cyan via-brand-red to-brand-green opacity-20 group-hover:opacity-100 transition-opacity"}),E?(0,aN.jsx)("div",{className:"animate-spin h-6 w-6 border-3 border-brand-darker/20 border-t-brand-darker rounded-full relative z-10"}):(0,aN.jsx)("i",{className:"fa-solid fa-camera text-2xl relative z-10"})]}),(0,aN.jsx)("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 w-full text-center",children:(0,aN.jsx)("span",{className:`text-[9px] font-black uppercase tracking-widest transition-opacity ${"add"===a?"opacity-100 text-white":"opacity-0"}`,children:"Scan"})})]}),(0,aN.jsxs)("button",{onClick:()=>b("vault"),className:`flex flex-col items-center gap-1.5 flex-1 transition-all group p-2 ${"vault"===a?"-translate-y-2":""}`,children:[(0,aN.jsx)("i",{className:`fa-solid fa-vault text-xl transition-colors ${"vault"===a?"text-brand-green drop-shadow-[0_0_10px_rgba(132,204,22,0.5)]":"text-slate-600 group-hover:text-slate-400"}`}),(0,aN.jsx)("span",{className:`text-[9px] font-black uppercase tracking-widest transition-opacity ${"vault"===a?"opacity-100 text-white":"opacity-0"}`,children:"Vault"})]}),(0,aN.jsxs)("button",{onClick:()=>b("profile"),className:`flex flex-col items-center gap-1.5 flex-1 transition-all group p-2 ${"profile"===a?"-translate-y-2":""}`,children:[(0,aN.jsx)("i",{className:`fa-solid fa-user-astronaut text-xl transition-colors ${"profile"===a?"text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.5)]":"text-slate-600 group-hover:text-slate-400"}`}),(0,aN.jsx)("span",{className:`text-[9px] font-black uppercase tracking-widest transition-opacity ${"profile"===a?"opacity-100 text-white":"opacity-0"}`,children:"Profile"})]})]}),k.length>0&&(0,aN.jsx)(E2,{candidates:k,onSelect:a=>{f(a),l([])},onCancel:()=>l([])}),e&&(0,aN.jsx)(ye,{card:e,isWishlisted:!!m.find(a=>a.id===e.id),onClose:()=>f(null),onToggleWishlist:K,onAddToCollection:a=>{L(a),f(null)},onShopNow:()=>{b("marketplace"),B({term:e.name,timestamp:Date.now()}),f(null)},onAddToCart:a=>M(a),currency:q,exchangeRate:H}),g&&(0,aN.jsx)(E5,{listing:g,onClose:()=>h(null),onBuyNow:()=>{v([{id:g.id,card:g.card_data,price:g.price,sellerName:g.seller?.display_name||"Unknown",condition:g.condition}]),h(null),z(!0)},onAddToCart:()=>{M({id:g.id,card:g.card_data,price:g.price,sellerName:g.seller?.display_name||"Unknown",condition:g.condition}),h(null)},onSellerClick:a=>{j({id:a.id||"mock-id",name:a.display_name,email:"seller@example.com",avatar:a.avatar_url,provider:"google",rating:parseFloat(a.rating)||4.8,badges:["Verified Pro","Fast Shipper"]}),h(null),b("seller_profile")},currency:q,exchangeRate:H}),(0,aN.jsx)(E1,{isOpen:w,onClose:()=>x(!1),cart:u,onRemoveItem:a=>{v(b=>b.filter(b=>b.id!==a))},onCheckout:()=>{x(!1),z(!0)},currencySymbol:I}),(0,aN.jsx)(E4,{isOpen:y,onClose:()=>z(!1),amount:u.reduce((a,b)=>a+b.price,0)*("THB"===q?1:H),currency:q,items:u,onPaymentSuccess:()=>{z(!1),v([]),alert("Payment Successful! Thank you for your purchase.")},onPaymentFailed:a=>alert("Payment Failed: "+a)})]})})}},32852:(a,b,c)=>{"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.OAuth2Client=b.ClientAuthentication=b.CertificateFormat=b.CodeChallengeMethod=void 0;let g=c(30911),h=c(11723),i=c(27910),j=c(89158),k=c(21111),l=c(4052),m=c(72449),n=c(56455);!function(a){a.Plain="plain",a.S256="S256"}(d||(b.CodeChallengeMethod=d={})),function(a){a.PEM="PEM",a.JWK="JWK"}(e||(b.CertificateFormat=e={})),function(a){a.ClientSecretPost="ClientSecretPost",a.ClientSecretBasic="ClientSecretBasic",a.None="None"}(f||(b.ClientAuthentication=f={}));class o extends m.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=e.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(a={},b,c){super("object"==typeof a?a:{}),"object"!=typeof a&&(a={clientId:a,clientSecret:b,redirectUri:c}),this._clientId=a.clientId||a.client_id,this._clientSecret=a.clientSecret||a.client_secret,this.redirectUri=a.redirectUri||a.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...a.endpoints},this.clientAuthentication=a.clientAuthentication||f.ClientSecretPost,this.issuers=a.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(a={}){if(a.code_challenge_method&&!a.code_challenge)throw Error("If a code_challenge_method is provided, code_challenge must be included.");return a.response_type=a.response_type||"code",a.client_id=a.client_id||this._clientId,a.redirect_uri=a.redirect_uri||this.redirectUri,Array.isArray(a.scope)&&(a.scope=a.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+h.stringify(a)}generateCodeVerifier(){throw Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let a=(0,l.createCrypto)(),b=a.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),c=(await a.sha256DigestBase64(b)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:b,codeChallenge:c}}getToken(a,b){let c="string"==typeof a?{code:a}:a;if(!b)return this.getTokenAsync(c);this.getTokenAsync(c).then(a=>b(null,a.tokens,a.res),a=>b(a,null,a.response))}async getTokenAsync(a){let b=this.endpoints.oauth2TokenUrl.toString(),c=new Headers,d={client_id:a.client_id||this._clientId,code_verifier:a.codeVerifier,code:a.code,grant_type:"authorization_code",redirect_uri:a.redirect_uri||this.redirectUri};if(this.clientAuthentication===f.ClientSecretBasic){let a=Buffer.from(`${this._clientId}:${this._clientSecret}`);c.set("authorization",`Basic ${a.toString("base64")}`)}this.clientAuthentication===f.ClientSecretPost&&(d.client_secret=this._clientSecret);let e={...o.RETRY_CONFIG,method:"POST",url:b,data:new URLSearchParams((0,k.removeUndefinedValuesInObject)(d)),headers:c};m.AuthClient.setMethodName(e,"getTokenAsync");let g=await this.transporter.request(e),h=g.data;return g.data&&g.data.expires_in&&(h.expiry_date=new Date().getTime()+1e3*g.data.expires_in,delete h.expires_in),this.emit("tokens",h),{tokens:h,res:g}}async refreshToken(a){if(!a)return this.refreshTokenNoCache(a);if(this.refreshTokenPromises.has(a))return this.refreshTokenPromises.get(a);let b=this.refreshTokenNoCache(a).then(b=>(this.refreshTokenPromises.delete(a),b),b=>{throw this.refreshTokenPromises.delete(a),b});return this.refreshTokenPromises.set(a,b),b}async refreshTokenNoCache(a){let b;if(!a)throw Error("No refresh token is set.");let c=this.endpoints.oauth2TokenUrl.toString(),d={refresh_token:a,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};try{let a={...o.RETRY_CONFIG,method:"POST",url:c,data:new URLSearchParams((0,k.removeUndefinedValuesInObject)(d))};m.AuthClient.setMethodName(a,"refreshTokenNoCache"),b=await this.transporter.request(a)}catch(a){throw a instanceof g.GaxiosError&&"invalid_grant"===a.message&&a.response?.data&&/ReAuth/i.test(a.response.data.error_description)&&(a.message=JSON.stringify(a.response.data)),a}let e=b.data;return b.data&&b.data.expires_in&&(e.expiry_date=new Date().getTime()+1e3*b.data.expires_in,delete e.expires_in),this.emit("tokens",e),{tokens:e,res:b}}refreshAccessToken(a){if(!a)return this.refreshAccessTokenAsync();this.refreshAccessTokenAsync().then(b=>a(null,b.credentials,b.res),a)}async refreshAccessTokenAsync(){let a=await this.refreshToken(this.credentials.refresh_token),b=a.tokens;return b.refresh_token=this.credentials.refresh_token,this.credentials=b,{credentials:this.credentials,res:a.res}}getAccessToken(a){if(!a)return this.getAccessTokenAsync();this.getAccessTokenAsync().then(b=>a(null,b.token,b.res),a)}async getAccessTokenAsync(){if(!(!this.credentials.access_token||this.isTokenExpiring()))return{token:this.credentials.access_token};{if(!this.credentials.refresh_token)if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token)return this.setCredentials(a),{token:this.credentials.access_token}}else throw Error("No refresh token or refresh handler callback is set.");let a=await this.refreshAccessTokenAsync();if(!a.credentials||a.credentials&&!a.credentials.access_token)throw Error("Could not refresh access token.");return{token:a.credentials.access_token,res:a.res}}}async getRequestHeaders(a){return(await this.getRequestMetadataAsync(a)).headers}async getRequestMetadataAsync(a){let b=this.credentials;if(!b.access_token&&!b.refresh_token&&!this.apiKey&&!this.refreshHandler)throw Error("No access, refresh token, API key or refresh handler callback is set.");if(b.access_token&&!this.isTokenExpiring()){b.token_type=b.token_type||"Bearer";let a=new Headers({authorization:b.token_type+" "+b.access_token});return{headers:this.addSharedMetadataHeaders(a)}}if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token){this.setCredentials(a);let b=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(b)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let c=null,d=null;try{d=(c=await this.refreshToken(b.refresh_token)).tokens}catch(a){throw a.response&&(403===a.response.status||404===a.response.status)&&(a.message=`Could not refresh access token: ${a.message}`),a}let e=this.credentials;e.token_type=e.token_type||"Bearer",d.refresh_token=e.refresh_token,this.credentials=d;let f=new Headers({authorization:e.token_type+" "+d.access_token});return{headers:this.addSharedMetadataHeaders(f),res:c.res}}static getRevokeTokenUrl(a){return new o().getRevokeTokenURL(a).toString()}getRevokeTokenURL(a){let b=new URL(this.endpoints.oauth2RevokeUrl);return b.searchParams.append("token",a),b}revokeToken(a,b){let c={...o.RETRY_CONFIG,url:this.getRevokeTokenURL(a).toString(),method:"POST"};if(m.AuthClient.setMethodName(c,"revokeToken"),!b)return this.transporter.request(c);this.transporter.request(c).then(a=>b(null,a),b)}revokeCredentials(a){if(!a)return this.revokeCredentialsAsync();this.revokeCredentialsAsync().then(b=>a(null,b),a)}async revokeCredentialsAsync(){let a=this.credentials.access_token;if(this.credentials={},a)return this.revokeToken(a);throw Error("No access token to revoke.")}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){try{let b=await this.getRequestMetadataAsync();return a.headers=g.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b.headers),this.apiKey&&a.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),f=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,g=c.config.data instanceof i.Readable,h=401===d||403===d;if(!b&&h&&!g&&e)return await this.refreshAccessTokenAsync(),this.requestAsync(a,!0);if(!b&&h&&!g&&f){let b=await this.processAndValidateRefreshHandler();return b?.access_token&&this.setCredentials(b),this.requestAsync(a,!0)}}throw d}}verifyIdToken(a,b){if(b&&"function"!=typeof b)throw Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(!b)return this.verifyIdTokenAsync(a);this.verifyIdTokenAsync(a).then(a=>b(null,a),b)}async verifyIdTokenAsync(a){if(!a.idToken)throw Error("The verifyIdToken method requires an ID Token");let b=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(a.idToken,b.certs,a.audience,this.issuers,a.maxExpiry)}async getTokenInfo(a){let{data:b}=await this.transporter.request({...o.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${a}`},url:this.endpoints.tokenInfoUrl.toString()}),c=Object.assign({expiry_date:new Date().getTime()+1e3*b.expires_in,scopes:b.scope.split(" ")},b);return delete c.expires_in,delete c.scope,c}getFederatedSignonCerts(a){if(!a)return this.getFederatedSignonCertsAsync();this.getFederatedSignonCertsAsync().then(b=>a(null,b.certs,b.res),a)}async getFederatedSignonCertsAsync(){let a,b,c=new Date().getTime(),d=(0,l.hasBrowserCrypto)()?e.JWK:e.PEM;if(this.certificateExpiry&&c<this.certificateExpiry.getTime()&&this.certificateCacheFormat===d)return{certs:this.certificateCache,format:d};switch(d){case e.PEM:b=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case e.JWK:b=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw Error(`Unsupported certificate format ${d}`)}try{let c={...o.RETRY_CONFIG,url:b};m.AuthClient.setMethodName(c,"getFederatedSignonCertsAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}let f=a?.headers.get("cache-control"),g=-1;if(f){let a=/max-age=(?<maxAge>[0-9]+)/.exec(f)?.groups?.maxAge;a&&(g=1e3*Number(a))}let h={};switch(d){case e.PEM:h=a.data;break;case e.JWK:for(let b of a.data.keys)h[b.kid]=b;break;default:throw Error(`Unsupported certificate format ${d}`)}let i=new Date;return this.certificateExpiry=-1===g?null:new Date(i.getTime()+g),this.certificateCache=h,this.certificateCacheFormat=d,{certs:h,format:d,res:a}}getIapPublicKeys(a){if(!a)return this.getIapPublicKeysAsync();this.getIapPublicKeysAsync().then(b=>a(null,b.pubkeys,b.res),a)}async getIapPublicKeysAsync(){let a,b=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let c={...o.RETRY_CONFIG,url:b};m.AuthClient.setMethodName(c,"getIapPublicKeysAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}return{pubkeys:a.data,res:a}}verifySignedJwtWithCerts(){throw Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(a,b,c,d,e){let f,g,h=(0,l.createCrypto)();e||(e=o.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let i=a.split(".");if(3!==i.length)throw Error("Wrong number of segments in token: "+a);let k=i[0]+"."+i[1],m=i[2];try{f=JSON.parse(h.decodeBase64StringUtf8(i[0]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token envelope: ${i[0]}': ${a.message}`),a}if(!f)throw Error("Can't parse token envelope: "+i[0]);try{g=JSON.parse(h.decodeBase64StringUtf8(i[1]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token payload '${i[0]}`),a}if(!g)throw Error("Can't parse token payload: "+i[1]);if(!Object.prototype.hasOwnProperty.call(b,f.kid))throw Error("No pem found for envelope: "+JSON.stringify(f));let p=b[f.kid];if("ES256"===f.alg&&(m=j.joseToDer(m,"ES256").toString("base64")),!await h.verify(p,k,m))throw Error("Invalid token signature: "+a);if(!g.iat)throw Error("No issue time in token: "+JSON.stringify(g));if(!g.exp)throw Error("No expiration time in token: "+JSON.stringify(g));let q=Number(g.iat);if(isNaN(q))throw Error("iat field using invalid format");let r=Number(g.exp);if(isNaN(r))throw Error("exp field using invalid format");let s=new Date().getTime()/1e3;if(r>=s+e)throw Error("Expiration time too far in future: "+JSON.stringify(g));let t=q-o.CLOCK_SKEW_SECS_,u=r+o.CLOCK_SKEW_SECS_;if(s<t)throw Error("Token used too early, "+s+" < "+t+": "+JSON.stringify(g));if(s>u)throw Error("Token used too late, "+s+" > "+u+": "+JSON.stringify(g));if(d&&0>d.indexOf(g.iss))throw Error("Invalid issuer, expected one of ["+d+"], but got "+g.iss);if(null!=c){let a=g.aud;if(!(c.constructor===Array?c.indexOf(a)>-1:a===c))throw Error("Wrong recipient, payload audience != requiredAudience")}return new n.LoginTicket(f,g)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let a=await this.refreshHandler();if(!a.access_token)throw Error("No access token is returned by the refreshHandler callback.");return a}}isTokenExpiring(){let a=this.credentials.expiry_date;return!!a&&a<=new Date().getTime()+this.eagerRefreshThresholdMillis}}b.OAuth2Client=o},32999:(a,b,c)=>{var d=c(79428).Buffer;a.exports=function(a){return"string"==typeof a?a:"number"==typeof a||d.isBuffer(a)?a.toString():JSON.stringify(a)}},33780:(a,b)=>{"use strict";function c(a){return"symbol"==typeof a?1:null===a?2:void 0===a?3:4*(a!=a)}Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.compareValues=(a,b,d)=>{if(a!==b){let e=c(a),f=c(b);if(e===f&&0===e){if(a<b)return"desc"===d?1:-1;if(a>b)return"desc"===d?-1:1}return"desc"===d?f-e:e-f}return 0}},33873:a=>{"use strict";a.exports=require("path")},34101:(a,b,c)=>{Promise.resolve().then(c.bind(c,32737))},34548:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(4516),e=c(38649),f=c(38352),g=c(99032),h=c(26140);function i(a,b,c,d=new Map,k){let l=k?.(a,b,c,d);if(void 0!==l)return l;if(g.isPrimitive(a))return a;if(d.has(a))return d.get(a);if(Array.isArray(a)){let b=Array(a.length);d.set(a,b);for(let e=0;e<a.length;e++)b[e]=i(a[e],e,c,d,k);return Object.hasOwn(a,"index")&&(b.index=a.index),Object.hasOwn(a,"input")&&(b.input=a.input),b}if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp){let b=new RegExp(a.source,a.flags);return b.lastIndex=a.lastIndex,b}if(a instanceof Map){let b=new Map;for(let[e,f]of(d.set(a,b),a))b.set(e,i(f,e,c,d,k));return b}if(a instanceof Set){let b=new Set;for(let e of(d.set(a,b),a))b.add(i(e,void 0,c,d,k));return b}if("undefined"!=typeof Buffer&&Buffer.isBuffer(a))return a.subarray();if(h.isTypedArray(a)){let b=new(Object.getPrototypeOf(a)).constructor(a.length);d.set(a,b);for(let e=0;e<a.length;e++)b[e]=i(a[e],e,c,d,k);return b}if(a instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&a instanceof SharedArrayBuffer)return a.slice(0);if(a instanceof DataView){let b=new DataView(a.buffer.slice(0),a.byteOffset,a.byteLength);return d.set(a,b),j(b,a,c,d,k),b}if("undefined"!=typeof File&&a instanceof File){let b=new File([a],a.name,{type:a.type});return d.set(a,b),j(b,a,c,d,k),b}if("undefined"!=typeof Blob&&a instanceof Blob){let b=new Blob([a],{type:a.type});return d.set(a,b),j(b,a,c,d,k),b}if(a instanceof Error){let b=new a.constructor;return d.set(a,b),b.message=a.message,b.name=a.name,b.stack=a.stack,b.cause=a.cause,j(b,a,c,d,k),b}if(a instanceof Boolean){let b=new Boolean(a.valueOf());return d.set(a,b),j(b,a,c,d,k),b}if(a instanceof Number){let b=new Number(a.valueOf());return d.set(a,b),j(b,a,c,d,k),b}if(a instanceof String){let b=new String(a.valueOf());return d.set(a,b),j(b,a,c,d,k),b}if("object"==typeof a&&function(a){switch(e.getTag(a)){case f.argumentsTag:case f.arrayTag:case f.arrayBufferTag:case f.dataViewTag:case f.booleanTag:case f.dateTag:case f.float32ArrayTag:case f.float64ArrayTag:case f.int8ArrayTag:case f.int16ArrayTag:case f.int32ArrayTag:case f.mapTag:case f.numberTag:case f.objectTag:case f.regexpTag:case f.setTag:case f.stringTag:case f.symbolTag:case f.uint8ArrayTag:case f.uint8ClampedArrayTag:case f.uint16ArrayTag:case f.uint32ArrayTag:return!0;default:return!1}}(a)){let b=Object.create(Object.getPrototypeOf(a));return d.set(a,b),j(b,a,c,d,k),b}return a}function j(a,b,c=a,e,f){let g=[...Object.keys(b),...d.getSymbols(b)];for(let d=0;d<g.length;d++){let h=g[d],j=Object.getOwnPropertyDescriptor(a,h);(null==j||j.writable)&&(a[h]=i(b[h],h,c,e,f))}}b.cloneDeepWith=function(a,b){return i(a,void 0,a,new Map,b)},b.cloneDeepWithImpl=i,b.copyProperties=j},34631:a=>{"use strict";a.exports=require("tls")},35046:(a,b,c)=>{"use strict";var d;let e;Object.defineProperty(b,"__esModule",{value:!0}),b.GCPEnv=void 0,b.clear=function(){e=void 0},b.getEnv=g;let f=c(54447);async function g(){return e||(e=h())}async function h(){d.NONE;return process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME?d.APP_ENGINE:process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET?d.CLOUD_FUNCTIONS:await j()?await i()?d.KUBERNETES_ENGINE:process.env.K_CONFIGURATION?d.CLOUD_RUN:process.env.CLOUD_RUN_JOB?d.CLOUD_RUN_JOBS:d.COMPUTE_ENGINE:d.NONE}async function i(){try{return await f.instance("attributes/cluster-name"),!0}catch(a){return!1}}async function j(){return f.isAvailable()}!function(a){a.APP_ENGINE="APP_ENGINE",a.KUBERNETES_ENGINE="KUBERNETES_ENGINE",a.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",a.COMPUTE_ENGINE="COMPUTE_ENGINE",a.CLOUD_RUN="CLOUD_RUN",a.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",a.NONE="NONE"}(d||(b.GCPEnv=d={}))},35366:(a,b,c)=>{"use strict";let d=c(94735),e=c(81630),{Duplex:f}=c(27910),{createHash:g}=c(55511),h=c(58986),i=c(20879),j=c(43677),k=c(77740),{CLOSE_TIMEOUT:l,GUID:m,kWebSocket:n}=c(63674),o=/^[+/0-9A-Za-z]{22}==$/;class p extends d{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,closeTimeout:l,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:k,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){let a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(q,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(q,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{q(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",r);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,g=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void t(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void t(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!o.test(e))return void t(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==g&&8!==g)return void t(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(a))return void s(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=j.parse(k)}catch(c){t(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let m=a.headers["sec-websocket-extensions"],n={};if(this.options.perMessageDeflate&&void 0!==m){let c=new i(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=h.parse(m);a[i.extensionName]&&(c.accept(a[i.extensionName]),n[i.extensionName]=c)}catch(c){t(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===g?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return s(b,g||401,h,i);this.completeUpgrade(n,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return s(b,401)}this.completeUpgrade(n,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,f,j){if(!e.readable||!e.writable)return e.destroy();if(e[n])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return s(e,503);let k=g("sha1").update(b+m).digest("base64"),l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k}`],o=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(l.push(`Sec-WebSocket-Protocol: ${a}`),o._protocol=a)}if(a[i.extensionName]){let b=a[i.extensionName].params,c=h.format({[i.extensionName]:[b]});l.push(`Sec-WebSocket-Extensions: ${c}`),o._extensions=a}this.emit("headers",l,d),e.write(l.concat("\r\n").join("\r\n")),e.removeListener("error",r),o.setSocket(e,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(o),o.on("close",()=>{this.clients.delete(o),this._shouldEmitClose&&!this.clients.size&&process.nextTick(q,this)})),j(o,d)}}function q(a){a._state=2,a.emit("close")}function r(){this.destroy()}function s(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function t(a,b,c,d,e,f){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,t),a.emit("wsClientError",d,c,b)}else s(c,d,e,f)}a.exports=p},35552:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GCE_LINUX_BIOS_PATHS=void 0,b.isGoogleCloudServerless=g,b.isGoogleComputeEngineLinux=h,b.isGoogleComputeEngineMACAddress=i,b.isGoogleComputeEngine=j,b.detectGCPResidency=function(){return g()||j()};let d=c(29021),e=c(21820);b.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};let f=/^42:01/;function g(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function h(){if("linux"!==(0,e.platform)())return!1;try{(0,d.statSync)(b.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let a=(0,d.readFileSync)(b.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(a)}catch{return!1}}function i(){for(let a of Object.values((0,e.networkInterfaces)()))if(a){for(let{mac:b}of a)if(f.test(b))return!0}return!1}function j(){return h()||i()}},37067:a=>{"use strict";a.exports=require("node:http")},37177:(a,b,c)=>{a.exports=c(92264).get},37830:a=>{"use strict";a.exports=require("node:stream/web")},38229:(a,b)=>{"use strict";async function c(a){var b;let c=e(a);if(!a||!a.config||!c&&!a.config.retry)return{shouldRetry:!1};(c=c||{}).currentRetryAttempt=c.currentRetryAttempt||0,c.retry=void 0===c.retry||null===c.retry?3:c.retry,c.httpMethodsToRetry=c.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],c.noResponseRetries=void 0===c.noResponseRetries||null===c.noResponseRetries?2:c.noResponseRetries,c.retryDelayMultiplier=c.retryDelayMultiplier?c.retryDelayMultiplier:2,c.timeOfFirstRequest=c.timeOfFirstRequest?c.timeOfFirstRequest:Date.now(),c.totalTimeout=c.totalTimeout?c.totalTimeout:Number.MAX_SAFE_INTEGER,c.maxRetryDelay=c.maxRetryDelay?c.maxRetryDelay:Number.MAX_SAFE_INTEGER,c.statusCodesToRetry=c.statusCodesToRetry||[[100,199],[408,408],[429,429],[500,599]],a.config.retryConfig=c;let f=c.shouldRetry||d;if(!await f(a))return{shouldRetry:!1,config:a.config};let g=Math.min(((b=c).currentRetryAttempt?0:b.retryDelay??100)+(Math.pow(b.retryDelayMultiplier,b.currentRetryAttempt)-1)/2*1e3,b.totalTimeout-(Date.now()-b.timeOfFirstRequest),b.maxRetryDelay);a.config.retryConfig.currentRetryAttempt+=1;let h=c.retryBackoff?c.retryBackoff(a,g):new Promise(a=>{setTimeout(a,g)});return c.onRetryAttempt&&await c.onRetryAttempt(a),await h,{shouldRetry:!0,config:a.config}}function d(a){let b=e(a);if(a.config.signal?.aborted&&"TimeoutError"!==a.code||"AbortError"===a.code||!b||0===b.retry||!a.response&&(b.currentRetryAttempt||0)>=b.noResponseRetries||!b.httpMethodsToRetry||!b.httpMethodsToRetry.includes(a.config.method?.toUpperCase()||"GET"))return!1;if(a.response&&a.response.status){let c=!1;for(let[d,e]of b.statusCodesToRetry){let b=a.response.status;if(b>=d&&b<=e){c=!0;break}}if(!c)return!1}return b.currentRetryAttempt=b.currentRetryAttempt||0,!(b.currentRetryAttempt>=b.retry)}function e(a){if(a&&a.config&&a.config.retryConfig)return a.config.retryConfig}Object.defineProperty(b,"__esModule",{value:!0}),b.getRetryConfig=c},38352:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.argumentsTag="[object Arguments]",b.arrayBufferTag="[object ArrayBuffer]",b.arrayTag="[object Array]",b.bigInt64ArrayTag="[object BigInt64Array]",b.bigUint64ArrayTag="[object BigUint64Array]",b.booleanTag="[object Boolean]",b.dataViewTag="[object DataView]",b.dateTag="[object Date]",b.errorTag="[object Error]",b.float32ArrayTag="[object Float32Array]",b.float64ArrayTag="[object Float64Array]",b.functionTag="[object Function]",b.int16ArrayTag="[object Int16Array]",b.int32ArrayTag="[object Int32Array]",b.int8ArrayTag="[object Int8Array]",b.mapTag="[object Map]",b.numberTag="[object Number]",b.objectTag="[object Object]",b.regexpTag="[object RegExp]",b.setTag="[object Set]",b.stringTag="[object String]",b.symbolTag="[object Symbol]",b.uint16ArrayTag="[object Uint16Array]",b.uint32ArrayTag="[object Uint32Array]",b.uint8ArrayTag="[object Uint8Array]",b.uint8ClampedArrayTag="[object Uint8ClampedArray]"},38522:a=>{"use strict";a.exports=require("node:zlib")},38649:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.getTag=function(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}},39115:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.flatten=function(a,b=1){let c=[],d=Math.floor(b),e=(a,b)=>{for(let f=0;f<a.length;f++){let g=a[f];Array.isArray(g)&&b<d?e(g,b+1):c.push(g)}};return e(a,0),c}},39727:()=>{},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},41062:function(a,b,c){var d;!function(e){"use strict";var f,g=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,h=Math.ceil,i=Math.floor,j="[BigNumber Error] ",k=j+"Number primitive has more than 15 significant digits: ",l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function m(a){var b=0|a;return a>0||a===b?b:b-1}function n(a){for(var b,c,d=1,e=a.length,f=a[0]+"";d<e;){for(c=14-(b=a[d++]+"").length;c--;b="0"+b);f+=b}for(e=f.length;48===f.charCodeAt(--e););return f.slice(0,e+1||1)}function o(a,b){var c,d,e=a.c,f=b.c,g=a.s,h=b.s,i=a.e,j=b.e;if(!g||!h)return null;if(c=e&&!e[0],d=f&&!f[0],c||d)return c?d?0:-h:g;if(g!=h)return g;if(c=g<0,d=i==j,!e||!f)return d?0:!e^c?1:-1;if(!d)return i>j^c?1:-1;for(g=0,h=(i=e.length)<(j=f.length)?i:j;g<h;g++)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1}function p(a,b,c,d){if(a<b||a>c||a!==i(a))throw Error(j+(d||"Argument")+("number"==typeof a?a<b||a>c?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function q(a){var b=a.c.length-1;return m(a.e/14)==b&&a.c[b]%2!=0}function r(a,b){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(b<0?"e":"e+")+b}function s(a,b,c){var d,e;if(b<0){for(e=c+".";++b;e+=c);a=e+a}else if(d=a.length,++b>d){for(e=c,b-=d;--b;e+=c);a+=e}else b<d&&(a=a.slice(0,b)+"."+a.slice(b));return a}(f=function a(b){var c,d,e,f,t,u,v,w,x,y=M.prototype={constructor:M,toString:null,valueOf:null},z=new M(1),A=20,B=4,C=-7,D=21,E=-1e7,F=1e7,G=!1,H=1,I=0,J={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",L=!0;function M(a,b){var c,d,e,f,h,j,l,m,n=this;if(!(n instanceof M))return new M(a,b);if(null==b){if(a&&!0===a._isBigNumber){n.s=a.s,!a.c||a.e>F?n.c=n.e=null:a.e<E?n.c=[n.e=0]:(n.e=a.e,n.c=a.c.slice());return}if((j="number"==typeof a)&&0*a==0){if(n.s=1/a<0?(a=-a,-1):1,a===~~a){for(f=0,h=a;h>=10;h/=10,f++);f>F?n.c=n.e=null:(n.e=f,n.c=[a]);return}m=String(a)}else{if(!g.test(m=String(a)))return x(n,m,j);n.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(f=m.indexOf("."))>-1&&(m=m.replace(".","")),(h=m.search(/e/i))>0?(f<0&&(f=h),f+=+m.slice(h+1),m=m.substring(0,h)):f<0&&(f=m.length)}else{if(p(b,2,K.length,"Base"),10==b&&L)return Q(n=new M(a),A+n.e+1,B);if(m=String(a),j="number"==typeof a){if(0*a!=0)return x(n,m,j,b);if(n.s=1/a<0?(m=m.slice(1),-1):1,M.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(k+a)}else n.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(c=K.slice(0,b),f=h=0,l=m.length;h<l;h++)if(0>c.indexOf(d=m.charAt(h))){if("."==d){if(h>f){f=l;continue}}else if(!e&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){e=!0,h=-1,f=0;continue}return x(n,String(a),j,b)}j=!1,(f=(m=w(m,b,10,n.s)).indexOf("."))>-1?m=m.replace(".",""):f=m.length}for(h=0;48===m.charCodeAt(h);h++);for(l=m.length;48===m.charCodeAt(--l););if(m=m.slice(h,++l)){if(l-=h,j&&M.DEBUG&&l>15&&(a>0x1fffffffffffff||a!==i(a)))throw Error(k+n.s*a);if((f=f-h-1)>F)n.c=n.e=null;else if(f<E)n.c=[n.e=0];else{if(n.e=f,n.c=[],h=(f+1)%14,f<0&&(h+=14),h<l){for(h&&n.c.push(+m.slice(0,h)),l-=14;h<l;)n.c.push(+m.slice(h,h+=14));h=14-(m=m.slice(h)).length}else h-=l;for(;h--;m+="0");n.c.push(+m)}}else n.c=[n.e=0]}function N(a,b,c,d){var e,f,g,h,i;if(null==c?c=B:p(c,0,8),!a.c)return a.toString();if(e=a.c[0],g=a.e,null==b)i=n(a.c),i=1==d||2==d&&(g<=C||g>=D)?r(i,g):s(i,g,"0");else if(f=(a=Q(new M(a),b,c)).e,h=(i=n(a.c)).length,1==d||2==d&&(b<=f||f<=C)){for(;h<b;i+="0",h++);i=r(i,f)}else if(b-=g+(2===d&&f>g),i=s(i,f,"0"),f+1>h){if(--b>0)for(i+=".";b--;i+="0");}else if((b+=f-h)>0)for(f+1==h&&(i+=".");b--;i+="0");return a.s<0&&e?"-"+i:i}function O(a,b){for(var c,d,e=1,f=new M(a[0]);e<a.length;e++)(d=new M(a[e])).s&&(c=o(f,d))!==b&&(0!==c||f.s!==b)||(f=d);return f}function P(a,b,c){for(var d=1,e=b.length;!b[--e];b.pop());for(e=b[0];e>=10;e/=10,d++);return(c=d+14*c-1)>F?a.c=a.e=null:c<E?a.c=[a.e=0]:(a.e=c,a.c=b),a}function Q(a,b,c,d){var e,f,g,j,k,m,n,o=a.c;if(o){a:{for(e=1,j=o[0];j>=10;j/=10,e++);if((f=b-e)<0)f+=14,g=b,n=i((k=o[m=0])/l[e-g-1]%10);else if((m=h((f+1)/14))>=o.length)if(d){for(;o.length<=m;o.push(0));k=n=0,e=1,f%=14,g=f-14+1}else break a;else{for(e=1,k=j=o[m];j>=10;j/=10,e++);f%=14,n=(g=f-14+e)<0?0:i(k/l[e-g-1]%10)}if(d=d||b<0||null!=o[m+1]||(g<0?k:k%l[e-g-1]),d=c<4?(n||d)&&(0==c||c==(a.s<0?3:2)):n>5||5==n&&(4==c||d||6==c&&(f>0?g>0?k/l[e-g]:0:o[m-1])%10&1||c==(a.s<0?8:7)),b<1||!o[0])return o.length=0,d?(b-=a.e+1,o[0]=l[(14-b%14)%14],a.e=-b||0):o[0]=a.e=0,a;if(0==f?(o.length=m,j=1,m--):(o.length=m+1,j=l[14-f],o[m]=g>0?i(k/l[e-g]%l[g])*j:0),d)for(;;)if(0==m){for(f=1,g=o[0];g>=10;g/=10,f++);for(g=o[0]+=j,j=1;g>=10;g/=10,j++);f!=j&&(a.e++,1e14==o[0]&&(o[0]=1));break}else{if(o[m]+=j,1e14!=o[m])break;o[m--]=0,j=1}for(f=o.length;0===o[--f];o.pop());}a.e>F?a.c=a.e=null:a.e<E&&(a.c=[a.e=0])}return a}function R(a){var b,c=a.e;return null===c?a.toString():(b=n(a.c),b=c<=C||c>=D?r(b,c):s(b,c,"0"),a.s<0?"-"+b:b)}return M.clone=a,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(a){var b,c;if(null!=a)if("object"==typeof a){if(a.hasOwnProperty(b="DECIMAL_PLACES")&&(p(c=a[b],0,1e9,b),A=c),a.hasOwnProperty(b="ROUNDING_MODE")&&(p(c=a[b],0,8,b),B=c),a.hasOwnProperty(b="EXPONENTIAL_AT")&&((c=a[b])&&c.pop?(p(c[0],-1e9,0,b),p(c[1],0,1e9,b),C=c[0],D=c[1]):(p(c,-1e9,1e9,b),C=-(D=c<0?-c:c))),a.hasOwnProperty(b="RANGE"))if((c=a[b])&&c.pop)p(c[0],-1e9,-1,b),p(c[1],1,1e9,b),E=c[0],F=c[1];else if(p(c,-1e9,1e9,b),c)E=-(F=c<0?-c:c);else throw Error(j+b+" cannot be zero: "+c);if(a.hasOwnProperty(b="CRYPTO"))if(!!(c=a[b])===c)if(c)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))G=c;else throw G=!c,Error(j+"crypto unavailable");else G=c;else throw Error(j+b+" not true or false: "+c);if(a.hasOwnProperty(b="MODULO_MODE")&&(p(c=a[b],0,9,b),H=c),a.hasOwnProperty(b="POW_PRECISION")&&(p(c=a[b],0,1e9,b),I=c),a.hasOwnProperty(b="FORMAT"))if("object"==typeof(c=a[b]))J=c;else throw Error(j+b+" not an object: "+c);if(a.hasOwnProperty(b="ALPHABET")){if("string"!=typeof(c=a[b])||/^.?$|[+\-.\s]|(.).*\1/.test(c))throw Error(j+b+" invalid: "+c);L="0123456789"==c.slice(0,10),K=c}}else throw Error(j+"Object expected: "+a);return{DECIMAL_PLACES:A,ROUNDING_MODE:B,EXPONENTIAL_AT:[C,D],RANGE:[E,F],CRYPTO:G,MODULO_MODE:H,POW_PRECISION:I,FORMAT:J,ALPHABET:K}},M.isBigNumber=function(a){if(!a||!0!==a._isBigNumber)return!1;if(!M.DEBUG)return!0;var b,c,d=a.c,e=a.e,f=a.s;a:if("[object Array]"==({}).toString.call(d)){if((1===f||-1===f)&&e>=-1e9&&e<=1e9&&e===i(e)){if(0===d[0]){if(0===e&&1===d.length)return!0;break a}if((b=(e+1)%14)<1&&(b+=14),String(d[0]).length==b){for(b=0;b<d.length;b++)if((c=d[b])<0||c>=1e14||c!==i(c))break a;if(0!==c)return!0}}}else if(null===d&&null===e&&(null===f||1===f||-1===f))return!0;throw Error(j+"Invalid BigNumber: "+a)},M.maximum=M.max=function(){return O(arguments,-1)},M.minimum=M.min=function(){return O(arguments,1)},c=0x20000000000000*Math.random()&2097151?function(){return i(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},M.random=function(a){var b,d,e,f,g,k=0,m=[],n=new M(z);if(null==a?a=A:p(a,0,1e9),f=h(a/14),G)if(crypto.getRandomValues){for(b=crypto.getRandomValues(new Uint32Array(f*=2));k<f;)(g=131072*b[k]+(b[k+1]>>>11))>=9e15?(d=crypto.getRandomValues(new Uint32Array(2)),b[k]=d[0],b[k+1]=d[1]):(m.push(g%1e14),k+=2);k=f/2}else if(crypto.randomBytes){for(b=crypto.randomBytes(f*=7);k<f;)(g=(31&b[k])*0x1000000000000+0x10000000000*b[k+1]+0x100000000*b[k+2]+0x1000000*b[k+3]+(b[k+4]<<16)+(b[k+5]<<8)+b[k+6])>=9e15?crypto.randomBytes(7).copy(b,k):(m.push(g%1e14),k+=7);k=f/7}else throw G=!1,Error(j+"crypto unavailable");if(!G)for(;k<f;)(g=c())<9e15&&(m[k++]=g%1e14);for(f=m[--k],a%=14,f&&a&&(g=l[14-a],m[k]=i(f/g)*g);0===m[k];m.pop(),k--);if(k<0)m=[e=0];else{for(e=-1;0===m[0];m.splice(0,1),e-=14);for(k=1,g=m[0];g>=10;g/=10,k++);k<14&&(e-=14-k)}return n.e=e,n.c=m,n},M.sum=function(){for(var a=1,b=arguments,c=new M(b[0]);a<b.length;)c=c.plus(b[a++]);return c},w=function(){var a="0123456789";function b(a,b,c,d){for(var e,f,g=[0],h=0,i=a.length;h<i;){for(f=g.length;f--;g[f]*=b);for(g[0]+=d.indexOf(a.charAt(h++)),e=0;e<g.length;e++)g[e]>c-1&&(null==g[e+1]&&(g[e+1]=0),g[e+1]+=g[e]/c|0,g[e]%=c)}return g.reverse()}return function(c,d,e,f,g){var h,i,j,k,l,m,o,p,q=c.indexOf("."),r=A,t=B;for(q>=0&&(k=I,I=0,c=c.replace(".",""),m=(p=new M(d)).pow(c.length-q),I=k,p.c=b(s(n(m.c),m.e,"0"),10,e,a),p.e=p.c.length),j=k=(o=b(c,d,e,g?(h=K,a):(h=a,K))).length;0==o[--k];o.pop());if(!o[0])return h.charAt(0);if(q<0?--j:(m.c=o,m.e=j,m.s=f,o=(m=v(m,p,r,t,e)).c,l=m.r,j=m.e),q=o[i=j+r+1],k=e/2,l=l||i<0||null!=o[i+1],l=t<4?(null!=q||l)&&(0==t||t==(m.s<0?3:2)):q>k||q==k&&(4==t||l||6==t&&1&o[i-1]||t==(m.s<0?8:7)),i<1||!o[0])c=l?s(h.charAt(1),-r,h.charAt(0)):h.charAt(0);else{if(o.length=i,l)for(--e;++o[--i]>e;)o[i]=0,i||(++j,o=[1].concat(o));for(k=o.length;!o[--k];);for(q=0,c="";q<=k;c+=h.charAt(o[q++]));c=s(c,j,h.charAt(0))}return c}}(),v=function(){function a(a,b,c){var d,e,f,g,h=0,i=a.length,j=b%1e7,k=b/1e7|0;for(a=a.slice();i--;)d=k*(f=a[i]%1e7)+(g=a[i]/1e7|0)*j,h=((e=j*f+d%1e7*1e7+h)/c|0)+(d/1e7|0)+k*g,a[i]=e%c;return h&&(a=[h].concat(a)),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c,d){for(var e=0;c--;)a[c]-=e,e=+(a[c]<b[c]),a[c]=e*d+a[c]-b[c];for(;!a[0]&&a.length>1;a.splice(0,1));}return function(d,e,f,g,h){var j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=d.s==e.s?1:-1,C=d.c,D=e.c;if(!C||!C[0]||!D||!D[0])return new M(!d.s||!e.s||(C?D&&C[0]==D[0]:!D)?NaN:C&&0==C[0]||!D?0*B:B/0);for(s=(r=new M(B)).c=[],B=f+(k=d.e-e.e)+1,h||(h=1e14,k=m(d.e/14)-m(e.e/14),B=B/14|0),l=0;D[l]==(C[l]||0);l++);if(D[l]>(C[l]||0)&&k--,B<0)s.push(1),n=!0;else{for(x=C.length,z=D.length,l=0,B+=2,(o=i(h/(D[0]+1)))>1&&(D=a(D,o,h),C=a(C,o,h),z=D.length,x=C.length),w=z,u=(t=C.slice(0,z)).length;u<z;t[u++]=0);A=[0].concat(A=D.slice()),y=D[0],D[1]>=h/2&&y++;do{if(o=0,(j=b(D,t,z,u))<0){if(v=t[0],z!=u&&(v=v*h+(t[1]||0)),(o=i(v/y))>1)for(o>=h&&(o=h-1),q=(p=a(D,o,h)).length,u=t.length;1==b(p,t,q,u);)o--,c(p,z<q?A:D,q,h),q=p.length,j=1;else 0==o&&(j=o=1),q=(p=D.slice()).length;if(q<u&&(p=[0].concat(p)),c(t,p,u,h),u=t.length,-1==j)for(;1>b(D,t,z,u);)o++,c(t,z<u?A:D,u,h),u=t.length}else 0===j&&(o++,t=[0]);s[l++]=o,t[0]?t[u++]=C[w]||0:(t=[C[w]],u=1)}while((w++<x||null!=t[0])&&B--);n=null!=t[0],s[0]||s.splice(0,1)}if(1e14==h){for(l=1,B=s[0];B>=10;B/=10,l++);Q(r,f+(r.e=l+14*k-1)+1,g,n)}else r.e=k,r.r=+n;return r}}(),d=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,f=/^\.([^.]+)$/,t=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,x=function(a,b,c,g){var h,i=c?b:b.replace(u,"");if(t.test(i))a.s=isNaN(i)?null:i<0?-1:1;else{if(!c&&(i=i.replace(d,function(a,b,c){return h="x"==(c=c.toLowerCase())?16:"b"==c?2:8,g&&g!=h?a:b}),g&&(h=g,i=i.replace(e,"$1").replace(f,"0.$1")),b!=i))return new M(i,h);if(M.DEBUG)throw Error(j+"Not a"+(g?" base "+g:"")+" number: "+b);a.s=null}a.c=a.e=null},y.absoluteValue=y.abs=function(){var a=new M(this);return a.s<0&&(a.s=1),a},y.comparedTo=function(a,b){return o(this,new M(a,b))},y.decimalPlaces=y.dp=function(a,b){var c,d,e;if(null!=a)return p(a,0,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a+this.e+1,b);if(!(c=this.c))return null;if(d=((e=c.length-1)-m(this.e/14))*14,e=c[e])for(;e%10==0;e/=10,d--);return d<0&&(d=0),d},y.dividedBy=y.div=function(a,b){return v(this,new M(a,b),A,B)},y.dividedToIntegerBy=y.idiv=function(a,b){return v(this,new M(a,b),0,1)},y.exponentiatedBy=y.pow=function(a,b){var c,d,e,f,g,k,l,m,n,o=this;if((a=new M(a)).c&&!a.isInteger())throw Error(j+"Exponent not an integer: "+R(a));if(null!=b&&(b=new M(b)),k=a.e>14,!o.c||!o.c[0]||1==o.c[0]&&!o.e&&1==o.c.length||!a.c||!a.c[0])return n=new M(Math.pow(+R(o),k?a.s*(2-q(a)):+R(a))),b?n.mod(b):n;if(l=a.s<0,b){if(b.c?!b.c[0]:!b.s)return new M(NaN);(d=!l&&o.isInteger()&&b.isInteger())&&(o=o.mod(b))}else{if(a.e>9&&(o.e>0||o.e<-1||(0==o.e?o.c[0]>1||k&&o.c[1]>=24e7:o.c[0]<8e13||k&&o.c[0]<=9999975e7)))return f=o.s<0&&q(a)?-0:0,o.e>-1&&(f=1/f),new M(l?1/f:f);I&&(f=h(I/14+2))}for(k?(c=new M(.5),l&&(a.s=1),m=q(a)):m=(e=Math.abs(+R(a)))%2,n=new M(z);;){if(m){if(!(n=n.times(o)).c)break;f?n.c.length>f&&(n.c.length=f):d&&(n=n.mod(b))}if(e){if(0===(e=i(e/2)))break;m=e%2}else if(Q(a=a.times(c),a.e+1,1),a.e>14)m=q(a);else{if(0==(e=+R(a)))break;m=e%2}o=o.times(o),f?o.c&&o.c.length>f&&(o.c.length=f):d&&(o=o.mod(b))}return d?n:(l&&(n=z.div(n)),b?n.mod(b):f?Q(n,I,B,g):n)},y.integerValue=function(a){var b=new M(this);return null==a?a=B:p(a,0,8),Q(b,b.e+1,a)},y.isEqualTo=y.eq=function(a,b){return 0===o(this,new M(a,b))},y.isFinite=function(){return!!this.c},y.isGreaterThan=y.gt=function(a,b){return o(this,new M(a,b))>0},y.isGreaterThanOrEqualTo=y.gte=function(a,b){return 1===(b=o(this,new M(a,b)))||0===b},y.isInteger=function(){return!!this.c&&m(this.e/14)>this.c.length-2},y.isLessThan=y.lt=function(a,b){return 0>o(this,new M(a,b))},y.isLessThanOrEqualTo=y.lte=function(a,b){return -1===(b=o(this,new M(a,b)))||0===b},y.isNaN=function(){return!this.s},y.isNegative=function(){return this.s<0},y.isPositive=function(){return this.s>0},y.isZero=function(){return!!this.c&&0==this.c[0]},y.minus=function(a,b){var c,d,e,f,g=this.s;if(b=(a=new M(a,b)).s,!g||!b)return new M(NaN);if(g!=b)return a.s=-b,this.plus(a);var h=this.e/14,i=a.e/14,j=this.c,k=a.c;if(!h||!i){if(!j||!k)return j?(a.s=-b,a):new M(k?this:NaN);if(!j[0]||!k[0])return k[0]?(a.s=-b,a):new M(j[0]?this:3==B?-0:0)}if(h=m(h),i=m(i),j=j.slice(),g=h-i){for((f=g<0)?(g=-g,e=j):(i=h,e=k),e.reverse(),b=g;b--;e.push(0));e.reverse()}else for(d=(f=(g=j.length)<(b=k.length))?g:b,g=b=0;b<d;b++)if(j[b]!=k[b]){f=j[b]<k[b];break}if(f&&(e=j,j=k,k=e,a.s=-a.s),(b=(d=k.length)-(c=j.length))>0)for(;b--;j[c++]=0);for(b=1e14-1;d>g;){if(j[--d]<k[d]){for(c=d;c&&!j[--c];j[c]=b);--j[c],j[d]+=1e14}j[d]-=k[d]}for(;0==j[0];j.splice(0,1),--i);return j[0]?P(a,j,i):(a.s=3==B?-1:1,a.c=[a.e=0],a)},y.modulo=y.mod=function(a,b){var c,d;return(a=new M(a,b),this.c&&a.s&&(!a.c||a.c[0]))?a.c&&(!this.c||this.c[0])?(9==H?(d=a.s,a.s=1,c=v(this,a,0,3),a.s=d,c.s*=d):c=v(this,a,0,H),(a=this.minus(c.times(a))).c[0]||1!=H||(a.s=this.s),a):new M(this):new M(NaN)},y.multipliedBy=y.times=function(a,b){var c,d,e,f,g,h,i,j,k,l,n,o,p,q=this.c,r=(a=new M(a,b)).c;if(!q||!r||!q[0]||!r[0])return this.s&&a.s&&(!q||q[0]||r)&&(!r||r[0]||q)?(a.s*=this.s,q&&r?(a.c=[0],a.e=0):a.c=a.e=null):a.c=a.e=a.s=null,a;for(d=m(this.e/14)+m(a.e/14),a.s*=this.s,(i=q.length)<(l=r.length)&&(p=q,q=r,r=p,e=i,i=l,l=e),e=i+l,p=[];e--;p.push(0));for(e=l;--e>=0;){for(c=0,n=r[e]%1e7,o=r[e]/1e7|0,f=e+(g=i);f>e;)h=o*(j=q[--g]%1e7)+(k=q[g]/1e7|0)*n,c=((j=n*j+h%1e7*1e7+p[f]+c)/1e14|0)+(h/1e7|0)+o*k,p[f--]=j%1e14;p[f]=c}return c?++d:p.splice(0,1),P(a,p,d)},y.negated=function(){var a=new M(this);return a.s=-a.s||null,a},y.plus=function(a,b){var c,d=this.s;if(b=(a=new M(a,b)).s,!d||!b)return new M(NaN);if(d!=b)return a.s=-b,this.minus(a);var e=this.e/14,f=a.e/14,g=this.c,h=a.c;if(!e||!f){if(!g||!h)return new M(d/0);if(!g[0]||!h[0])return h[0]?a:new M(g[0]?this:0*d)}if(e=m(e),f=m(f),g=g.slice(),d=e-f){for(d>0?(f=e,c=h):(d=-d,c=g),c.reverse();d--;c.push(0));c.reverse()}for((d=g.length)-(b=h.length)<0&&(c=h,h=g,g=c,b=d),d=0;b;)d=(g[--b]=g[b]+h[b]+d)/1e14|0,g[b]=1e14===g[b]?0:g[b]%1e14;return d&&(g=[d].concat(g),++f),P(a,g,f)},y.precision=y.sd=function(a,b){var c,d,e;if(null!=a&&!!a!==a)return p(a,1,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a,b);if(!(c=this.c))return null;if(d=14*(e=c.length-1)+1,e=c[e]){for(;e%10==0;e/=10,d--);for(e=c[0];e>=10;e/=10,d++);}return a&&this.e+1>d&&(d=this.e+1),d},y.shiftedBy=function(a){return p(a,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+a)},y.squareRoot=y.sqrt=function(){var a,b,c,d,e,f=this.c,g=this.s,h=this.e,i=A+4,j=new M("0.5");if(1!==g||!f||!f[0])return new M(!g||g<0&&(!f||f[0])?NaN:f?this:1/0);if(0==(g=Math.sqrt(+R(this)))||g==1/0?(((b=n(f)).length+h)%2==0&&(b+="0"),g=Math.sqrt(+b),h=m((h+1)/2)-(h<0||h%2),c=new M(b=g==1/0?"5e"+h:(b=g.toExponential()).slice(0,b.indexOf("e")+1)+h)):c=new M(g+""),c.c[0]){for((g=(h=c.e)+i)<3&&(g=0);;)if(e=c,c=j.times(e.plus(v(this,e,i,1))),n(e.c).slice(0,g)===(b=n(c.c)).slice(0,g)){if(c.e<h&&--g,"9999"!=(b=b.slice(g-3,g+1))&&(d||"4999"!=b)){+b&&(+b.slice(1)||"5"!=b.charAt(0))||(Q(c,c.e+A+2,1),a=!c.times(c).eq(this));break}if(!d&&(Q(e,e.e+A+2,0),e.times(e).eq(this))){c=e;break}i+=4,g+=4,d=1}}return Q(c,c.e+A+1,B,a)},y.toExponential=function(a,b){return null!=a&&(p(a,0,1e9),a++),N(this,a,b,1)},y.toFixed=function(a,b){return null!=a&&(p(a,0,1e9),a=a+this.e+1),N(this,a,b)},y.toFormat=function(a,b,c){var d;if(null==c)null!=a&&b&&"object"==typeof b?(c=b,b=null):a&&"object"==typeof a?(c=a,a=b=null):c=J;else if("object"!=typeof c)throw Error(j+"Argument not an object: "+c);if(d=this.toFixed(a,b),this.c){var e,f=d.split("."),g=+c.groupSize,h=+c.secondaryGroupSize,i=c.groupSeparator||"",k=f[0],l=f[1],m=this.s<0,n=m?k.slice(1):k,o=n.length;if(h&&(e=g,g=h,h=e,o-=e),g>0&&o>0){for(e=o%g||g,k=n.substr(0,e);e<o;e+=g)k+=i+n.substr(e,g);h>0&&(k+=i+n.slice(e)),m&&(k="-"+k)}d=l?k+(c.decimalSeparator||"")+((h=+c.fractionGroupSize)?l.replace(RegExp("\\d{"+h+"}\\B","g"),"$&"+(c.fractionGroupSeparator||"")):l):k}return(c.prefix||"")+d+(c.suffix||"")},y.toFraction=function(a){var b,c,d,e,f,g,h,i,k,m,o,p,q=this.c;if(null!=a&&(!(h=new M(a)).isInteger()&&(h.c||1!==h.s)||h.lt(z)))throw Error(j+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+R(h));if(!q)return new M(this);for(b=new M(z),k=c=new M(z),d=i=new M(z),p=n(q),f=b.e=p.length-this.e-1,b.c[0]=l[(g=f%14)<0?14+g:g],a=!a||h.comparedTo(b)>0?f>0?b:k:h,g=F,F=1/0,h=new M(p),i.c[0]=0;m=v(h,b,0,1),1!=(e=c.plus(m.times(d))).comparedTo(a);)c=d,d=e,k=i.plus(m.times(e=k)),i=e,b=h.minus(m.times(e=b)),h=e;return e=v(a.minus(c),d,0,1),i=i.plus(e.times(k)),c=c.plus(e.times(d)),i.s=k.s=this.s,f*=2,o=1>v(k,d,f,B).minus(this).abs().comparedTo(v(i,c,f,B).minus(this).abs())?[k,d]:[i,c],F=g,o},y.toNumber=function(){return+R(this)},y.toPrecision=function(a,b){return null!=a&&p(a,1,1e9),N(this,a,b,2)},y.toString=function(a){var b,c=this,d=c.s,e=c.e;return null===e?d?(b="Infinity",d<0&&(b="-"+b)):b="NaN":(null==a?b=e<=C||e>=D?r(n(c.c),e):s(n(c.c),e,"0"):10===a&&L?b=s(n((c=Q(new M(c),A+e+1,B)).c),c.e,"0"):(p(a,2,K.length,"Base"),b=w(s(n(c.c),e,"0"),10,a,d,!0)),d<0&&c.c[0]&&(b="-"+b)),b},y.valueOf=y.toJSON=function(){return R(this)},y._isBigNumber=!0,null!=b&&M.set(b),M}()).default=f.BigNumber=f,void 0===(d=(function(){return f}).call(b,c,b,a))||(a.exports=d)}(0)},41167:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IdentityPoolClient=void 0;let d=c(52177),e=c(21111),f=c(8111),g=c(49690),h=c(76380),i=c(43358),j=c(30911);class k extends d.BaseExternalAccountClient{subjectTokenSupplier;constructor(a){super(a);let b=(0,e.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("subject_token_supplier");if(!c&&!d)throw Error("A credential source or subject token supplier must be specified.");if(c&&d)throw Error("Only one of credential source or subject token supplier can be specified.");if(d)this.subjectTokenSupplier=d,this.credentialSourceType="programmatic";else{let a=(0,e.originalOrCamelOptions)(c),b=(0,e.originalOrCamelOptions)(a.get("format")),d=b.get("type")||"text",i=b.get("subject_token_field_name");if("json"!==d&&"text"!==d)throw Error(`Invalid credential_source format "${d}"`);if("json"===d&&!i)throw Error("Missing subject_token_field_name for JSON credential_source format");let j=a.get("file"),l=a.get("url"),m=a.get("certificate"),n=a.get("headers");if(j&&l||l&&m||j&&m)throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(j)this.credentialSourceType="file",this.subjectTokenSupplier=new f.FileSubjectTokenSupplier({filePath:j,formatType:d,subjectTokenFieldName:i});else if(l)this.credentialSourceType="url",this.subjectTokenSupplier=new g.UrlSubjectTokenSupplier({url:l,formatType:d,subjectTokenFieldName:i,headers:n,additionalGaxiosOptions:k.RETRY_CONFIG});else if(m){this.credentialSourceType="certificate";let a=new h.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:m.use_default_certificate_config,certificateConfigLocation:m.certificate_config_location,trustChainPath:m.trust_chain_path});this.subjectTokenSupplier=a}else throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let a=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof h.CertificateSubjectTokenSupplier){let a=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new i.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new j.Gaxios({agent:a})}),this.transporter=new j.Gaxios({...this.transporter.defaults||{},agent:a})}return a}}b.IdentityPoolClient=k},41523:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(1162);b.toNumber=function(a){return d.isSymbol(a)?NaN:Number(a)}},41650:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(1162),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;b.isKey=function(a,b){return!Array.isArray(a)&&(!!("number"==typeof a||"boolean"==typeof a||null==a||d.isSymbol(a))||"string"==typeof a&&(f.test(a)||!e.test(a))||null!=b&&Object.hasOwn(b,a))}},41867:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Impersonated=b.IMPERSONATED_ACCOUNT_TYPE=void 0;let d=c(32852),e=c(30911),f=c(21111);b.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class g extends d.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(a={}){if(super(a),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=a.sourceClient??new d.OAuth2Client,this.targetPrincipal=a.targetPrincipal??"",this.delegates=a.delegates??[],this.targetScopes=a.targetScopes??[],this.lifetime=a.lifetime??3600,(0,f.originalOrCamelOptions)(a).get("universe_domain")){if(this.sourceClient.universeDomain!==this.universeDomain)throw RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`)}else this.universeDomain=this.sourceClient.universeDomain;this.endpoint=a.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(a){await this.sourceClient.getAccessToken();let b=`projects/-/serviceAccounts/${this.targetPrincipal}`,c=`${this.endpoint}/v1/${b}:signBlob`,d={delegates:this.delegates,payload:Buffer.from(a).toString("base64")};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:c,data:d,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let a="projects/-/serviceAccounts/"+this.targetPrincipal,b=`${this.endpoint}/v1/${a}:generateAccessToken`,c={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},d=await this.sourceClient.request({...g.RETRY_CONFIG,url:b,data:c,method:"POST"}),e=d.data;return this.credentials.access_token=e.accessToken,this.credentials.expiry_date=Date.parse(e.expireTime),{tokens:this.credentials,res:d}}catch(c){if(!(c instanceof Error))throw c;let a=0,b="";if(c instanceof e.GaxiosError&&(a=c?.response?.data?.error?.status,b=c?.response?.data?.error?.message),a&&b)throw c.message=`${a}: unable to impersonate: ${b}`,c;throw c.message=`unable to impersonate: ${c}`,c}}async fetchIdToken(a,b){await this.sourceClient.getAccessToken();let c=`projects/-/serviceAccounts/${this.targetPrincipal}`,d=`${this.endpoint}/v1/${c}:generateIdToken`,e={delegates:this.delegates,audience:a,includeEmail:b?.includeEmail??!0,useEmailAzp:b?.includeEmail??!0};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:d,data:e,method:"POST"})).data.token}}b.Impersonated=g},42646:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.ary=function(a,b){return function(...c){return a.apply(this,c.slice(0,b))}}},42797:(a,b,c)=>{"use strict";var d=c(38301),e="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},f=d.useState,g=d.useEffect,h=d.useLayoutEffect,i=d.useDebugValue;function j(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!e(a,c)}catch(a){return!0}}var k="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(a,b){return b()}:function(a,b){var c=b(),d=f({inst:{value:c,getSnapshot:b}}),e=d[0].inst,k=d[1];return h(function(){e.value=c,e.getSnapshot=b,j(e)&&k({inst:e})},[a,c,b]),g(function(){return j(e)&&k({inst:e}),a(function(){j(e)&&k({inst:e})})},[a]),i(c),c};b.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:k},43358:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.StsCredentials=void 0;let d=c(30911),e=c(72449),f=c(55161),g=c(21111);class h extends f.OAuthClientAuthHandler{#i;constructor(a={tokenExchangeEndpoint:""},b){("object"!=typeof a||a instanceof URL)&&(a={tokenExchangeEndpoint:a,clientAuthentication:b}),super(a),this.#i=a.tokenExchangeEndpoint}async exchangeToken(a,b,c){let i={grant_type:a.grantType,resource:a.resource,audience:a.audience,scope:a.scope?.join(" "),requested_token_type:a.requestedTokenType,subject_token:a.subjectToken,subject_token_type:a.subjectTokenType,actor_token:a.actingParty?.actorToken,actor_token_type:a.actingParty?.actorTokenType,options:c&&JSON.stringify(c)},j={...h.RETRY_CONFIG,url:this.#i.toString(),method:"POST",headers:b,data:new URLSearchParams((0,g.removeUndefinedValuesInObject)(i))};e.AuthClient.setMethodName(j,"exchangeToken"),this.applyClientAuthenticationOptions(j);try{let a=await this.transporter.request(j),b=a.data;return b.res=a,b}catch(a){if(a instanceof d.GaxiosError&&a.response)throw(0,f.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}b.StsCredentials=h},43604:(a,b,c)=>{var d=c(41062),e=a.exports;!function(){"use strict";var a,b,c,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function h(a){return f.lastIndex=0,f.test(a)?'"'+a.replace(f,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}"function"!=typeof e.stringify&&(e.stringify=function(e,f,g){var i;if(a="",b="","number"==typeof g)for(i=0;i<g;i+=1)b+=" ";else"string"==typeof g&&(b=g);if(c=f,f&&"function"!=typeof f&&("object"!=typeof f||"number"!=typeof f.length))throw Error("JSON.stringify");return function e(f,g){var i,j,k,l,m,n=a,o=g[f],p=null!=o&&(o instanceof d||d.isBigNumber(o));switch(o&&"object"==typeof o&&"function"==typeof o.toJSON&&(o=o.toJSON(f)),"function"==typeof c&&(o=c.call(g,f,o)),typeof o){case"string":if(p)return o;return h(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":case"bigint":return String(o);case"object":if(!o)return"null";if(a+=b,m=[],"[object Array]"===Object.prototype.toString.apply(o)){for(i=0,l=o.length;i<l;i+=1)m[i]=e(i,o)||"null";return k=0===m.length?"[]":a?"[\n"+a+m.join(",\n"+a)+"\n"+n+"]":"["+m.join(",")+"]",a=n,k}if(c&&"object"==typeof c)for(i=0,l=c.length;i<l;i+=1)"string"==typeof c[i]&&(k=e(j=c[i],o))&&m.push(h(j)+(a?": ":":")+k);else Object.keys(o).forEach(function(b){var c=e(b,o);c&&m.push(h(b)+(a?": ":":")+c)});return k=0===m.length?"{}":a?"{\n"+a+m.join(",\n"+a)+"\n"+n+"}":"{"+m.join(",")+"}",a=n,k}}("",{"":e})})}()},43677:(a,b,c)=>{"use strict";let{tokenChars:d}=c(86200);a.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},44029:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(47369);b.isMatch=function(a,b){return d.isMatchWith(a,b,()=>void 0)}},44708:a=>{"use strict";a.exports=require("node:https")},45215:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(92264);b.property=function(a){return function(b){return d.get(b,a)}}},45608:(a,b,c)=>{a.exports=c(22263).sortBy},46153:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isUnsafeProperty=function(a){return"__proto__"===a}},46193:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.toKey=function(a){return"string"==typeof a||"symbol"==typeof a?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}},46456:(a,b)=>{"use strict";b.qg=function(a,b){let c=new h,d=a.length;if(d<2)return c;let e=b?.decode||k,f=0;do{let b=function(a,b,c){let d=a.indexOf("=",b);return d<c?d:-1}(a,f,d);if(-1===b)break;let g=function(a,b,c){let d=a.indexOf(";",b);return -1===d?c:d}(a,f,d);if(b>g){f=a.lastIndexOf(";",b-1)+1;continue}let h=j(a,f,b);void 0===c[h]&&(c[h]=e(j(a,b+1,g))),f=g+1}while(f<d);return c},b.lK=i,b.lK=i;let c=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,d=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,f=/^[\u0020-\u003A\u003D-\u007E]*$/,g=Object.prototype.toString,h=(()=>{let a=function(){};return a.prototype=Object.create(null),a})();function i(a,b,h){let i="object"==typeof a?a:{...h,name:a,value:String(b)},j=("object"==typeof b?b:h)?.encode||encodeURIComponent;if(!c.test(i.name))throw TypeError(`argument name is invalid: ${i.name}`);let k=i.value?j(i.value):"";if(!d.test(k))throw TypeError(`argument val is invalid: ${i.value}`);let l=i.name+"="+k;if(void 0!==i.maxAge){if(!Number.isInteger(i.maxAge))throw TypeError(`option maxAge is invalid: ${i.maxAge}`);l+="; Max-Age="+i.maxAge}if(i.domain){if(!e.test(i.domain))throw TypeError(`option domain is invalid: ${i.domain}`);l+="; Domain="+i.domain}if(i.path){if(!f.test(i.path))throw TypeError(`option path is invalid: ${i.path}`);l+="; Path="+i.path}if(i.expires){var m;if(m=i.expires,"[object Date]"!==g.call(m)||!Number.isFinite(i.expires.valueOf()))throw TypeError(`option expires is invalid: ${i.expires}`);l+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(l+="; HttpOnly"),i.secure&&(l+="; Secure"),i.partitioned&&(l+="; Partitioned"),i.priority)switch("string"==typeof i.priority?i.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${i.priority}`)}if(i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${i.sameSite}`)}return l}function j(a,b,c){let d=b,e=c;do{let b=a.charCodeAt(d);if(32!==b&&9!==b)break}while(++d<e);for(;e>d;){let b=a.charCodeAt(e-1);if(32!==b&&9!==b)break;e--}return a.slice(d,e)}function k(a){if(-1===a.indexOf("%"))return a;try{return decodeURIComponent(a)}catch(b){return a}}},46600:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.identity=function(a){return a}},47369:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(50497),e=c(99032),f=c(48986);function g(a,b,c,j){if(b===a)return!0;switch(typeof b){case"object":return function(a,b,c,d){if(null==b)return!0;if(Array.isArray(b))return h(a,b,c,d);if(b instanceof Map){var f=a,g=b,j=c,k=d;if(0===g.size)return!0;if(!(f instanceof Map))return!1;for(let[a,b]of g.entries())if(!1===j(f.get(a),b,a,f,g,k))return!1;return!0}if(b instanceof Set)return i(a,b,c,d);let l=Object.keys(b);if(null==a||e.isPrimitive(a))return 0===l.length;if(0===l.length)return!0;if(d?.has(b))return d.get(b)===a;d?.set(b,a);try{for(let f=0;f<l.length;f++){let g=l[f];if(!e.isPrimitive(a)&&!(g in a)||void 0===b[g]&&void 0!==a[g]||null===b[g]&&null!==a[g]||!c(a[g],b[g],g,a,b,d))return!1}return!0}finally{d?.delete(b)}}(a,b,c,j);case"function":if(Object.keys(b).length>0)return g(a,{...b},c,j);return f.isEqualsSameValueZero(a,b);default:if(!d.isObject(a))return f.isEqualsSameValueZero(a,b);if("string"==typeof b)return""===b;return!0}}function h(a,b,c,d){if(0===b.length)return!0;if(!Array.isArray(a))return!1;let e=new Set;for(let f=0;f<b.length;f++){let g=b[f],h=!1;for(let i=0;i<a.length;i++){if(e.has(i))continue;let j=a[i],k=!1;if(c(j,g,f,a,b,d)&&(k=!0),k){e.add(i),h=!0;break}}if(!h)return!1}return!0}function i(a,b,c,d){return 0===b.size||a instanceof Set&&h([...a],[...b],c,d)}b.isMatchWith=function a(b,c,d){return"function"!=typeof d?a(b,c,()=>void 0):g(b,c,function a(b,c,e,f,h,i){let j=d(b,c,e,f,h,i);return void 0!==j?!!j:g(b,c,a,i)},new Map)},b.isSetMatch=i},47447:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DownscopedClient=b.EXPIRATION_TIME_OFFSET=b.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;let d=c(30911),e=c(27910),f=c(72449),g=c(43358);b.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,b.EXPIRATION_TIME_OFFSET=3e5;class h extends f.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(a,c={accessBoundary:{accessBoundaryRules:[]}}){if(super(a instanceof f.AuthClient?{}:a),a instanceof f.AuthClient?(this.authClient=a,this.credentialAccessBoundary=c):(this.authClient=a.authClient,this.credentialAccessBoundary=a.credentialAccessBoundary),0===this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length)throw Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>b.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw Error(`The provided access boundary has more than ${b.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(0===a.availablePermissions.length)throw Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(a){if(!a.expiry_date)throw Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(a),this.cachedDownscopedAccessToken=a}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=(await this.authClient.getAccessToken()).token,b=await this.stsCredential.exchangeToken({grantType:"urn:ietf:params:oauth:grant-type:token-exchange",requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:"urn:ietf:params:oauth:token-type:access_token"},void 0,this.credentialAccessBoundary),c=this.authClient.credentials?.expiry_date||null,d=b.expires_in?new Date().getTime()+1e3*b.expires_in:c;return this.cachedDownscopedAccessToken={access_token:b.access_token,expiry_date:d,res:b.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}b.DownscopedClient=h},47990:()=>{},48986:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isEqualsSameValueZero=function(a,b){return a===b||Number.isNaN(a)&&Number.isNaN(b)}},49560:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(38649);b.isArguments=function(a){return null!==a&&"object"==typeof a&&"[object Arguments]"===d.getTag(a)}},49690:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UrlSubjectTokenSupplier=void 0;let d=c(72449);class e{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(a){this.url=a.url,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName,this.headers=a.headers,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getSubjectToken(a){let b,c={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};if(d.AuthClient.setMethodName(c,"getSubjectToken"),"text"===this.formatType?b=(await a.transporter.request(c)).data:"json"===this.formatType&&this.subjectTokenFieldName&&(b=(await a.transporter.request(c)).data[this.subjectTokenFieldName]),!b)throw Error("Unable to parse the subject_token from the credential_source URL");return b}}b.UrlSubjectTokenSupplier=e},50193:(a,b,c)=>{a.exports=c(60735).throttle},50497:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isObject=function(a){return null!==a&&("object"==typeof a||"function"==typeof a)}},50619:a=>{"use strict";a.exports=JSON.parse('{"name":"gaxios","version":"7.1.3","description":"A simple common HTTP client specifically for Google APIs and services.","main":"build/cjs/src/index.js","types":"build/cjs/src/index.d.ts","files":["build/"],"exports":{".":{"import":{"types":"./build/esm/src/index.d.ts","default":"./build/esm/src/index.js"},"require":{"types":"./build/cjs/src/index.d.ts","default":"./build/cjs/src/index.js"}}},"scripts":{"lint":"gts check --no-inline-config","test":"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000","compile":"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs","fix":"gts fix","prepare":"npm run compile","pretest":"npm run compile","webpack":"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js","docs":"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","prelint":"cd samples; npm link ../; npm install","clean":"gts clean"},"repository":{"type":"git","directory":"packages/gaxios","url":"https://github.com/googleapis/google-cloud-node-core.git"},"keywords":["google"],"engines":{"node":">=18"},"author":"Google, LLC","license":"Apache-2.0","devDependencies":{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6","assert":"^2.0.0","browserify":"^17.0.0","c8":"^10.0.0","cors":"^2.8.5","express":"^5.0.0","gts":"^6.0.0","is-docker":"^3.0.0","jsdoc":"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0","karma":"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1","linkinator":"^6.1.2","mocha":"^11.1.0","multiparty":"^4.2.1","mv":"^2.1.1","ncp":"^2.0.0","nock":"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0","puppeteer":"^24.0.0","sinon":"^21.0.0","stream-browserify":"^3.0.0","tmp":"0.2.5","ts-loader":"^9.5.2","typescript":"^5.8.3","webpack":"^5.35.0","webpack-cli":"^6.0.1"},"dependencies":{"extend":"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2","rimraf":"^5.0.1"},"homepage":"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"}')},51911:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(2095);b.cloneDeep=function(a){return d.cloneDeepWith(a)}},52177:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BaseExternalAccountClient=b.CLOUD_RESOURCE_MANAGER=b.EXTERNAL_ACCOUNT_TYPE=b.EXPIRATION_TIME_OFFSET=void 0;let d=c(30911),e=c(27910),f=c(72449),g=c(43358),h=c(21111),i=c(74119),j="https://www.googleapis.com/auth/cloud-platform";b.EXPIRATION_TIME_OFFSET=3e5,b.EXTERNAL_ACCOUNT_TYPE="external_account",b.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";class k extends f.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#j=null;constructor(a){super(a);let c=(0,h.originalOrCamelOptions)(a),d=c.get("type");if(d&&d!==b.EXTERNAL_ACCOUNT_TYPE)throw Error(`Expected "${b.EXTERNAL_ACCOUNT_TYPE}" type but received "${a.type}"`);let e=c.get("client_id"),f=c.get("client_secret");this.tokenUrl=c.get("token_url")??"https://sts.{universeDomain}/v1/token".replace("{universeDomain}",this.universeDomain);let i=c.get("subject_token_type"),k=c.get("workforce_pool_user_project"),l=c.get("service_account_impersonation_url"),m=c.get("service_account_impersonation"),n=(0,h.originalOrCamelOptions)(m).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(c.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),e&&(this.clientAuth={confidentialClientType:"basic",clientId:e,clientSecret:f}),this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=c.get("scopes")||[j],this.cachedAccessToken=null,this.audience=c.get("audience"),this.subjectTokenType=i,this.workforcePoolUserProject=k;let o=RegExp("//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+");if(this.workforcePoolUserProject&&!this.audience.match(o))throw Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=l,this.serviceAccountImpersonationLifetime=n,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=3600),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);let a=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return a?.groups?.email||null}return null}setCredentials(a){super.setCredentials(a),this.cachedAccessToken=a}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async getProjectId(){let a=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(a){let b=await this.getRequestHeaders(),c={...k.RETRY_CONFIG,headers:b,url:`${this.cloudResourceManagerURL.toString()}${a}`};f.AuthClient.setMethodName(c,"getProjectId");let d=await this.transporter.request(c);return this.projectId=d.data.projectId,this.projectId}return null}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){this.#j=this.#j||this.#k();try{return await this.#j}finally{this.#j=null}}async #k(){let a=await this.retrieveSubjectToken(),b={grantType:"urn:ietf:params:oauth:grant-type:token-exchange",audience:this.audience,requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[j]:this.getScopesArray()},c=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,d=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),e=await this.stsCredential.exchangeToken(b,d,c);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(e.access_token):e.expires_in?this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+1e3*e.expires_in,res:e.res}:this.cachedAccessToken={access_token:e.access_token,res:e.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(a){let b=a.match(/\/projects\/([^/]+)/);return b?b[1]:null}async getImpersonatedAccessToken(a){let b={...k.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${a}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};f.AuthClient.setMethodName(b,"getImpersonatedAccessToken");let c=await this.transporter.request(b),d=c.data;return{access_token:d.accessToken,expiry_date:new Date(d.expireTime).getTime(),res:c}}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}getScopesArray(){return"string"==typeof this.scopes?[this.scopes]:this.scopes||[j]}getMetricsHeaderValue(){let a=process.version.replace(/^v/,""),b=void 0!==this.serviceAccountImpersonationUrl,c=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${a} auth/${i.pkg.version} google-byoid-sdk source/${c} sa-impersonation/${b} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}}b.BaseExternalAccountClient=k},53533:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWTAccess=void 0;let d=c(99255),e=c(21111),f={alg:"RS256",typ:"JWT"};class g{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new e.LRUCache({capacity:500,maxAge:36e5});constructor(a,b,c,d){this.email=a,this.key=b,this.keyId=c,this.eagerRefreshThresholdMillis=d??3e5}getCachedKey(a,b){let c=a;if(b&&Array.isArray(b)&&b.length?c=a?`${a}_${b.join("_")}`:`${b.join("_")}`:"string"==typeof b&&(c=a?`${a}_${b}`:b),!c)throw Error("Scopes or url must be provided");return c}getRequestHeaders(a,b,c){let e,h=this.getCachedKey(a,c),i=this.cache.get(h),j=Date.now();if(i&&i.expiration-j>this.eagerRefreshThresholdMillis)return new Headers(i.headers);let k=Math.floor(Date.now()/1e3),l=g.getExpirationTime(k);if(Array.isArray(c)&&(c=c.join(" ")),e=c?{iss:this.email,sub:this.email,scope:c,exp:l,iat:k}:{iss:this.email,sub:this.email,aud:a,exp:l,iat:k},b){for(let a in e)if(b[a])throw Error(`The '${a}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let m=this.keyId?{...f,kid:this.keyId}:f,n=Object.assign(e,b),o=d.sign({header:m,payload:n,secret:this.key}),p=new Headers({authorization:`Bearer ${o}`});return this.cache.set(h,{expiration:1e3*l,headers:p}),p}static getExpirationTime(a){return a+3600}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{a||c(Error("Must pass in a stream containing the service account auth settings."));let d="";a.setEncoding("utf8").on("data",a=>d+=a).on("error",c).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}}b.JWTAccess=g},54447:function(a,b,c){"use strict";let d;var e,f=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),g=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),h=this&&this.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&f(b,a,c[d]);return g(b,a),b}),i=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||f(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.gcpResidencyCache=b.METADATA_SERVER_DETECTION=b.HEADERS=b.HEADER_VALUE=b.HEADER_NAME=b.SECONDARY_HOST_ADDRESS=b.HOST_ADDRESS=b.BASE_PATH=void 0,b.instance=function(a){return p("instance",a)},b.project=function(a){return p("project",a)},b.universe=function(a){return p("universe",a)},b.bulk=r,b.isAvailable=s,b.resetIsAvailableCache=function(){d=void 0},b.getGCPResidency=t,b.setGCPResidency=u,b.requestTimeout=v;let j=c(30911),k=c(26069),l=c(35552),m=h(c(3752));b.BASE_PATH="/computeMetadata/v1",b.HOST_ADDRESS="http://169.254.169.254",b.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",b.HEADER_NAME="Metadata-Flavor",b.HEADER_VALUE="Google",b.HEADERS=Object.freeze({[b.HEADER_NAME]:b.HEADER_VALUE});let n=m.log("gcp-metadata");function o(a){return a||(a=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||b.HOST_ADDRESS),/^https?:\/\//.test(a)||(a=`http://${a}`),new URL(b.BASE_PATH,a).href}async function p(a,c={},d=3,e=!1){let f=new Headers(b.HEADERS),g="",h={};("object"==typeof a?(new Headers(a.headers).forEach((a,b)=>f.set(b,a)),g=a.metadataKey,h=a.params||h,d=a.noResponseRetries||d,e=a.fastFail||e):g=a,"string"==typeof c)?g+=`/${c}`:(Object.keys(c).forEach(a=>{switch(a){case"params":case"property":case"headers":break;case"qs":throw Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw Error(`'${a}' is not a valid configuration option.`)}}),c.property&&(g+=`/${c.property}`),new Headers(c.headers).forEach((a,b)=>f.set(b,a)),h=c.params||h);let i=e?q:j.request,l={url:`${o()}/${g}`,headers:f,retryConfig:{noResponseRetries:d},params:h,responseType:"text",timeout:v()};n.info("instance request %j",l);let m=await i(l);n.info("instance metadata is %s",m.data);let r=m.headers.get(b.HEADER_NAME);if(r!==b.HEADER_VALUE)throw RangeError(`Invalid response from metadata service: incorrect ${b.HEADER_NAME} header. Expected '${b.HEADER_VALUE}', got ${r?`'${r}'`:"no header"}`);if("string"==typeof m.data)try{return k.parse(m.data)}catch{}return m.data}async function q(a){let c={...a,url:a.url?.toString().replace(o(),o(b.SECONDARY_HOST_ADDRESS))};return Promise.any([(0,j.request)(a),(0,j.request)(c)])}async function r(a){let b={};return await Promise.all(a.map(a=>(async()=>{let c=await p(a);b[a.metadataKey]=c})())),b}async function s(){if(process.env.METADATA_SERVER_DETECTION){let a=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(a in b.METADATA_SERVER_DETECTION))throw RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${a}\`, but it should be \`${Object.keys(b.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(a){case"assume-present":return!0;case"none":return!1;case"bios-only":return t()}}try{return void 0===d&&(d=p("instance",void 0,process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0,!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await d,!0}catch(a){if(process.env.DEBUG_AUTH&&console.info(a),"request-timeout"===a.type||a.response&&404===a.response.status)return!1;if(!(a.response&&404===a.response.status)&&(!a.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(a.code.toString()))){let b="UNKNOWN";a.code&&(b=a.code.toString()),process.emitWarning(`received unexpected error = ${a.message} code = ${b}`,"MetadataLookupWarning")}return!1}}function t(){return null===b.gcpResidencyCache&&u(),b.gcpResidencyCache}function u(a=null){b.gcpResidencyCache=null!==a?a:(0,l.detectGCPResidency)()}function v(){return 3e3*!t()}b.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"}),b.gcpResidencyCache=null,i(c(35552),b)},55161:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.OAuthClientAuthHandler=void 0,b.getErrorFromOAuthErrorResponse=function(a,b){let c=a.error,d=a.error_description,e=a.error_uri,f=`Error code ${c}`;void 0!==d&&(f+=`: ${d}`),void 0!==e&&(f+=` - ${e}`);let g=Error(f);if(b){let a=Object.keys(b);b.stack&&a.push("stack"),a.forEach(a=>{"message"!==a&&Object.defineProperty(g,a,{value:b[a],writable:!1,enumerable:!0})})}return g};let d=c(30911),e=c(4052),f=["PUT","POST","PATCH"];class g{#l=(0,e.createCrypto)();#m;transporter;constructor(a){a&&"clientId"in a?(this.#m=a,this.transporter=new d.Gaxios):(this.#m=a?.clientAuthentication,this.transporter=a?.transporter||new d.Gaxios)}applyClientAuthenticationOptions(a,b){a.headers=d.Gaxios.mergeHeaders(a.headers),this.injectAuthenticatedHeaders(a,b),b||this.injectAuthenticatedRequestBody(a)}injectAuthenticatedHeaders(a,b){if(b)a.headers=d.Gaxios.mergeHeaders(a.headers,{authorization:`Bearer ${b}`});else if(this.#m?.confidentialClientType==="basic"){a.headers=d.Gaxios.mergeHeaders(a.headers);let b=this.#m.clientId,c=this.#m.clientSecret||"",e=this.#l.encodeBase64StringUtf8(`${b}:${c}`);d.Gaxios.mergeHeaders(a.headers,{authorization:`Basic ${e}`})}}injectAuthenticatedRequestBody(a){if(this.#m?.confidentialClientType==="request-body"){let b=(a.method||"GET").toUpperCase();if(!f.includes(b))throw Error(`${b} HTTP method does not support ${this.#m.confidentialClientType} client authentication`);let c=new Headers(a.headers).get("content-type");if(c?.startsWith("application/x-www-form-urlencoded")||a.data instanceof URLSearchParams){let b=new URLSearchParams(a.data??"");b.append("client_id",this.#m.clientId),b.append("client_secret",this.#m.clientSecret||""),a.data=b}else if(c?.startsWith("application/json"))a.data=a.data||{},Object.assign(a.data,{client_id:this.#m.clientId,client_secret:this.#m.clientSecret||""});else throw Error(`${c} content-types are not supported with ${this.#m.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}b.OAuthClientAuthHandler=g},55382:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},56455:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LoginTicket=void 0;class c{envelope;payload;constructor(a,b){this.envelope=a,this.payload=b}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let a=this.getPayload();return a&&a.sub?a.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}b.LoginTicket=c},56735:(a,b,c)=>{var d=c(62253).Buffer,e=c(88828),f=c(16293),g=c(27910),h=c(32999),i=c(28354);function j(a,b){return d.from(a,b).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function k(a){var b,c,d,e=a.header,g=a.payload,k=a.secret||a.privateKey,l=a.encoding,m=f(e.alg),n=(b=(b=l)||"utf8",c=j(h(e),"binary"),d=j(h(g),b),i.format("%s.%s",c,d)),o=m.sign(n,k);return i.format("%s.%s",n,o)}function l(a){var b=a.secret;if(b=null==(b=null==b?a.privateKey:b)?a.key:b,!0===/^hs/i.test(a.header.alg)&&null==b)throw TypeError("secret must be a string or buffer or a KeyObject");var c=new e(b);this.readable=!0,this.header=a.header,this.encoding=a.encoding,this.secret=this.privateKey=this.key=c,this.payload=new e(a.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}i.inherits(l,g),l.prototype.sign=function(){try{var a=k({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",a),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},l.sign=k,a.exports=l},57075:a=>{"use strict";a.exports=require("node:stream")},57932:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.fromArrayBufferToHex=function(a){return Array.from(new Uint8Array(a)).map(a=>a.toString(16).padStart(2,"0")).join("")}},57975:a=>{"use strict";a.exports=require("node:util")},58211:a=>{"use strict";function b(a){return(a/8|0)+ +(a%8!=0)}var c={ES256:b(256),ES384:b(384),ES512:b(521)};a.exports=function(a){var b=c[a];if(b)return b;throw Error('Unknown algorithm "'+a+'"')}},58925:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GoogleAuth=b.GoogleAuthExceptionMessages=void 0;let d=c(79646),e=c(29021),f=c(30911),g=c(54447),h=c(21820),i=c(33873),j=c(4052),k=c(82648),l=c(93759),m=c(35046),n=c(83364),o=c(1682),p=c(41867),q=c(13284),r=c(52177),s=c(72449),t=c(59857),u=c(21111);b.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:"Unable to detect a Project Id in the current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_CREDENTIALS_FOUND:"Unable to find credentials in current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:"Unable to detect a Universe Domain in the current environment.\nTo learn more about Universe Domain retrieval, visit: \nhttps://cloud.google.com/compute/docs/metadata/predefined-metadata-keys"};class v{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#n=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(a={}){if(this._cachedProjectId=a.projectId||null,this.cachedCredential=a.authClient||null,this.keyFilename=a.keyFilename||a.keyFile,this.scopes=a.scopes,this.clientOptions=a.clientOptions||{},this.jsonContent=a.credentials||null,this.apiKey=a.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw RangeError(b.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);a.universeDomain&&(this.clientOptions.universeDomain=a.universeDomain)}setGapicJWTValues(a){a.defaultServicePath=this.defaultServicePath,a.useJWTAccessWithScope=this.useJWTAccessWithScope,a.defaultScopes=this.defaultScopes}getProjectId(a){if(!a)return this.getProjectIdAsync();this.getProjectIdAsync().then(b=>a(null,b),a)}async getProjectIdOptional(){try{return await this.getProjectId()}catch(a){if(a instanceof Error&&a.message===b.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw a}}async findAndCacheProjectId(){let a=null;if(a||=await this.getProductionProjectId(),a||=await this.getFileProjectId(),a||=await this.getDefaultServiceProjectId(),a||=await this.getGCEProjectId(),a||=await this.getExternalAccountClientProjectId())return this._cachedProjectId=a,a;throw Error(b.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let a;try{a=await g.universe("universe-domain"),a||=s.DEFAULT_UNIVERSE}catch(b){if(b&&b?.response?.status===404)a=s.DEFAULT_UNIVERSE;else throw b}return a}async getUniverseDomain(){let a=(0,u.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{a??=(await this.getClient()).universeDomain}catch{a??=s.DEFAULT_UNIVERSE}return a}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(a={},b){let c;if("function"==typeof a?b=a:c=a,!b)return this.getApplicationDefaultAsync(c);this.getApplicationDefaultAsync(c).then(a=>b(null,a.credential,a.projectId),b)}async getApplicationDefaultAsync(a={}){let c;if(this.cachedCredential)return await this.#o(this.cachedCredential,null);if((c=await this._tryGetApplicationCredentialsFromEnvironmentVariable(a))||(c=await this._tryGetApplicationCredentialsFromWellKnownFile(a)))return c instanceof n.JWT?c.scopes=this.scopes:c instanceof r.BaseExternalAccountClient&&(c.scopes=this.getAnyScopes()),await this.#o(c);if(await this._checkIsGCE())return a.scopes=this.getAnyScopes(),await this.#o(new k.Compute(a));throw Error(b.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async #o(a,b=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let c=await this.getProjectIdOptional();return b&&(a.quotaProjectId=b),this.cachedCredential=a,{credential:a,projectId:c}}async _checkIsGCE(){return void 0===this.checkIsGCE&&(this.checkIsGCE=g.getGCPResidency()||await g.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(a){let b=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!b||0===b.length)return null;try{return this._getApplicationCredentialsFromFilePath(b,a)}catch(a){throw a instanceof Error&&(a.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${a.message}`),a}}async _tryGetApplicationCredentialsFromWellKnownFile(a){let b=null;if(this._isWindows())b=process.env.APPDATA;else{let a=process.env.HOME;a&&(b=i.join(a,".config"))}return(b&&(b=i.join(b,"gcloud","application_default_credentials.json"),e.existsSync(b)||(b=null)),b)?await this._getApplicationCredentialsFromFilePath(b,a):null}async _getApplicationCredentialsFromFilePath(a,b={}){if(!a||0===a.length)throw Error("The file path is invalid.");try{if(a=e.realpathSync(a),!e.lstatSync(a).isFile())throw Error()}catch(b){throw b instanceof Error&&(b.message=`The file at ${a} does not exist, or it is not a file. ${b.message}`),b}let c=e.createReadStream(a);return this.fromStream(c,b)}fromImpersonatedJSON(a){if(!a)throw Error("Must pass in a JSON object containing an  impersonated refresh token");if(a.type!==p.IMPERSONATED_ACCOUNT_TYPE)throw Error(`The incoming JSON object does not have the "${p.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!a.source_credentials)throw Error("The incoming JSON object does not contain a source_credentials field");if(!a.service_account_impersonation_url)throw Error("The incoming JSON object does not contain a service_account_impersonation_url field");let b=this.fromJSON(a.source_credentials);if(a.service_account_impersonation_url?.length>256)throw RangeError(`Target principal is too long: ${a.service_account_impersonation_url}`);let c=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(a.service_account_impersonation_url)?.groups?.target;if(!c)throw RangeError(`Cannot extract target principal from ${a.service_account_impersonation_url}`);let d=(this.scopes||a.scopes||this.defaultScopes)??[];return new p.Impersonated({...a,sourceClient:b,targetPrincipal:c,targetScopes:Array.isArray(d)?d:[d]})}fromJSON(a,b={}){let c,d=(0,u.originalOrCamelOptions)(b).get("universe_domain");return a.type===o.USER_REFRESH_ACCOUNT_TYPE?(c=new o.UserRefreshClient(b)).fromJSON(a):a.type===p.IMPERSONATED_ACCOUNT_TYPE?c=this.fromImpersonatedJSON(a):a.type===r.EXTERNAL_ACCOUNT_TYPE?(c=q.ExternalAccountClient.fromJSON({...a,...b})).scopes=this.getAnyScopes():a.type===t.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?c=new t.ExternalAccountAuthorizedUserClient({...a,...b}):(b.scopes=this.scopes,c=new n.JWT(b),this.setGapicJWTValues(c),c.fromJSON(a)),d&&(c.universeDomain=d),c}_cacheClientFromJSON(a,b){let c=this.fromJSON(a,b);return this.jsonContent=a,this.cachedCredential=c,c}fromStream(a,b={},c){let d={};if("function"==typeof b?c=b:d=b,!c)return this.fromStreamAsync(a,d);this.fromStreamAsync(a,d).then(a=>c(null,a),c)}fromStreamAsync(a,b){return new Promise((c,d)=>{if(!a)throw Error("Must pass in a stream containing the Google auth settings.");let e=[];a.setEncoding("utf8").on("error",d).on("data",a=>e.push(a)).on("end",()=>{try{try{let a=JSON.parse(e.join("")),d=this._cacheClientFromJSON(a,b);return c(d)}catch(b){if(!this.keyFilename)throw b;let a=new n.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),c(a)}}catch(a){return d(a)}})})}fromAPIKey(a,b={}){return new n.JWT({...b,apiKey:a})}_isWindows(){let a=h.platform();return!!a&&!!(a.length>=3)&&"win"===a.substring(0,3).toLowerCase()}async getDefaultServiceProjectId(){return new Promise(a=>{(0,d.exec)("gcloud config config-helper --format json",(b,c)=>{if(!b&&c)try{let b=JSON.parse(c).configuration.properties.core.project;a(b);return}catch(a){}a(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let a=await this.getClient();if(a&&a.projectId)return a.projectId}let a=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return a?a.projectId:null}async getExternalAccountClientProjectId(){if(!this.jsonContent||this.jsonContent.type!==r.EXTERNAL_ACCOUNT_TYPE)return null;let a=await this.getClient();return await a.getProjectId()}async getGCEProjectId(){try{return await g.project("project-id")}catch(a){return null}}getCredentials(a){if(!a)return this.getCredentialsAsync();this.getCredentialsAsync().then(b=>a(null,b),a)}async getCredentialsAsync(){let a=await this.getClient();if(a instanceof p.Impersonated)return{client_email:a.getTargetPrincipal()};if(a instanceof r.BaseExternalAccountClient){let b=a.getServiceAccountEmail();if(b)return{client_email:b,universe_domain:a.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[a,b]=await Promise.all([g.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:a,universe_domain:b}}throw Error(b.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#n=this.#n||this.#p();try{return await this.#n}finally{this.#n=null}}async #p(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let a=i.resolve(this.keyFilename),b=e.createReadStream(a);return await this.fromStreamAsync(b,this.clientOptions)}if(this.apiKey){let a=await this.fromAPIKey(this.apiKey,this.clientOptions);a.scopes=this.scopes;let{credential:b}=await this.#o(a);return b}{let{credential:a}=await this.getApplicationDefaultAsync(this.clientOptions);return a}}async getIdTokenClient(a){let b=await this.getClient();if(!("fetchIdToken"in b))throw Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new l.IdTokenClient({targetAudience:a,idTokenProvider:b})}async getAccessToken(){let a=await this.getClient();return(await a.getAccessToken()).token}async getRequestHeaders(a){return(await this.getClient()).getRequestHeaders(a)}async authorizeRequest(a={}){let b=a.url,c=await this.getClient(),d=await c.getRequestHeaders(b);return a.headers=f.Gaxios.mergeHeaders(a.headers,d),a}async fetch(...a){return(await this.getClient()).fetch(...a)}async request(a){return(await this.getClient()).request(a)}getEnv(){return(0,m.getEnv)()}async sign(a,b){let c=await this.getClient(),d=await this.getUniverseDomain();if(b=b||`https://iamcredentials.${d}/v1/projects/-/serviceAccounts/`,c instanceof p.Impersonated)return(await c.sign(a)).signedBlob;let e=(0,j.createCrypto)();if(c instanceof n.JWT&&c.key)return await e.sign(c.key,a);let f=await this.getCredentials();if(!f.client_email)throw Error("Cannot sign data without `client_email`.");return this.signBlob(e,f.client_email,a,b)}async signBlob(a,b,c,d){let e=new URL(d+`${b}:signBlob`);return(await this.request({method:"POST",url:e.href,data:{payload:a.encodeBase64StringUtf8(c)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}b.GoogleAuth=v},58986:(a,b,c)=>{"use strict";let{tokenChars:d}=c(86200);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}a.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},59857:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ExternalAccountAuthorizedUserClient=b.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;let d=c(72449),e=c(55161),f=c(30911),g=c(27910),h=c(52177);b.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";class i extends e.OAuthClientAuthHandler{#q;constructor(a){super(a),this.#q=a.tokenRefreshEndpoint}async refreshToken(a,b){let c={...i.RETRY_CONFIG,url:this.#q,method:"POST",headers:b,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:a})};d.AuthClient.setMethodName(c,"refreshToken"),this.applyClientAuthenticationOptions(c);try{let a=await this.transporter.request(c),b=a.data;return b.res=a,b}catch(a){if(a instanceof f.GaxiosError&&a.response)throw(0,e.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}class j extends d.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(a){super(a),a.universe_domain&&(this.universeDomain=a.universe_domain),this.refreshToken=a.refresh_token;let b={confidentialClientType:"basic",clientId:a.client_id,clientSecret:a.client_secret};this.externalAccountAuthorizedUserHandler=new i({tokenRefreshEndpoint:a.token_url??"https://sts.{universeDomain}/v1/oauthtoken".replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:b}),this.cachedAccessToken=null,this.quotaProjectId=a.quota_project_id,"number"!=typeof a?.eagerRefreshThresholdMillis?this.eagerRefreshThresholdMillis=h.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!a?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=f.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=c.config.data instanceof g.Readable;if(!b&&(401===d||403===d)&&!e&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:a.access_token,expiry_date:new Date().getTime()+1e3*a.expires_in,res:a.res},void 0!==a.refresh_token&&(this.refreshToken=a.refresh_token),this.cachedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}b.ExternalAccountAuthorizedUserClient=j},60333:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,17742)),"C:\\Users\\brand\\Downloads\\cardstreet-tcg\\app\\page.tsx"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"C:\\Users\\brand\\Downloads\\cardstreet-tcg\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],I=["C:\\Users\\brand\\Downloads\\cardstreet-tcg\\app\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},60366:a=>{"use strict";a.exports=JSON.parse('{"name":"google-auth-library","version":"10.5.0","author":"Google Inc.","description":"Google APIs Authentication Client Library for Node.js","engines":{"node":">=18"},"main":"./build/src/index.js","types":"./build/src/index.d.ts","repository":"googleapis/google-auth-library-nodejs.git","keywords":["google","api","google apis","client","client library"],"dependencies":{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","gaxios":"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0","gtoken":"^8.0.0","jws":"^4.0.0"},"devDependencies":{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0","c8":"^10.0.0","codecov":"^3.0.2","gts":"^6.0.0","is-docker":"^3.0.0","jsdoc":"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0","karma":"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1","keypair":"^1.0.4","mocha":"^11.1.0","mv":"^2.1.1","ncp":"^2.0.0","nock":"^14.0.5","null-loader":"^4.0.0","puppeteer":"^24.0.0","sinon":"^21.0.0","ts-loader":"^8.0.0","typescript":"5.8.2","webpack":"^5.21.2","webpack-cli":"^4.0.0"},"files":["build/src","!build/src/**/*.map"],"scripts":{"test":"c8 mocha build/test","clean":"gts clean","prepare":"npm run compile","lint":"gts check --no-inline-config","compile":"tsc -p .","fix":"gts fix","pretest":"npm run compile -- --sourceMap","docs":"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap","webpack":"webpack","browser-test":"karma start","docs-test":"echo \'disabled until linkinator is fixed\'","predocs-test":"npm run docs","prelint":"cd samples; npm link ../; npm install"},"license":"Apache-2.0"}')},60735:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(71016);b.throttle=function(a,b=0,c={}){let{leading:e=!0,trailing:f=!0}=c;return d.debounce(a,b,{leading:e,maxWait:b,trailing:f})}},60993:(a,b,c)=>{Promise.resolve().then(c.bind(c,22872))},61075:a=>{"use strict";let b=Symbol("kDone"),c=Symbol("kRun");class d{constructor(a){this[b]=()=>{this.pending--,this[c]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[c]()}[c](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[b])}}}a.exports=d},61526:(a,b,c)=>{a.exports=c(10003).isPlainObject},61649:(a,b,c)=>{a.exports=c(69014).uniqBy},62253:(a,b,c)=>{var d=c(79428),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?a.exports=d:(f(d,b),b.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},63004:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(34548);b.cloneDeep=function(a){return d.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63674:a=>{"use strict";let b=["nodebuffer","arraybuffer","fragments"],c="undefined"!=typeof Blob;c&&b.push("blob"),a.exports={BINARY_TYPES:b,CLOSE_TIMEOUT:3e4,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:c,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},63724:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(30276),e=c(26609);b.range=function(a,b,c){c&&"number"!=typeof c&&d.isIterateeCall(a,b,c)&&(b=c=void 0),a=e.toFinite(a),void 0===b?(b=a,a=0):b=e.toFinite(b),c=void 0===c?a<b?1:-1:e.toFinite(c);let f=Math.max(Math.ceil((b-a)/(c||1)),0),g=Array(f);for(let b=0;b<f;b++)g[b]=a,a+=c;return g}},65302:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(46600),e=c(45215),f=c(94741),g=c(22580);b.iteratee=function(a){if(null==a)return d.identity;switch(typeof a){case"function":return a;case"object":if(Array.isArray(a)&&2===a.length)return g.matchesProperty(a[0],a[1]);return f.matches(a);case"string":case"symbol":case"number":return e.property(a)}}},69014:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(88485),e=c(42646),f=c(46600),g=c(71929),h=c(65302);b.uniqBy=function(a,b=f.identity){return g.isArrayLikeObject(a)?d.uniqBy(Array.from(a),e.ary(h.iteratee(b),1)):[]}},71016:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(90469);b.debounce=function(a,b=0,c={}){let e;"object"!=typeof c&&(c={});let{leading:f=!1,trailing:g=!0,maxWait:h}=c,i=[,,];f&&(i[0]="leading"),g&&(i[1]="trailing");let j=null,k=d.debounce(function(...b){e=a.apply(this,b),j=null},b,{edges:i}),l=function(...b){return null!=h&&(null===j&&(j=Date.now()),Date.now()-j>=h)?(e=a.apply(this,b),j=Date.now(),k.cancel(),k.schedule(),e):(k.apply(this,b),e)};return l.cancel=k.cancel,l.flush=()=>(k.flush(),e),l}},71929:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(77542),e=c(13258);b.isArrayLikeObject=function(a){return e.isObjectLike(a)&&d.isArrayLike(a)}},72449:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AuthClient=b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=b.DEFAULT_UNIVERSE=void 0;let d=c(94735),e=c(30911),f=c(21111),g=c(3752),h=c(74119);b.DEFAULT_UNIVERSE="googleapis.com",b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=3e5;class i extends d.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=b.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(a={}){super();let c=(0,f.originalOrCamelOptions)(a);this.apiKey=a.apiKey,this.projectId=c.get("project_id")??null,this.quotaProjectId=c.get("quota_project_id"),this.credentials=c.get("credentials")??{},this.universeDomain=c.get("universe_domain")??b.DEFAULT_UNIVERSE,this.transporter=a.transporter??new e.Gaxios(a.transporterOptions),!1!==c.get("useAuthRequestParameters")&&(this.transporter.interceptors.request.add(i.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(i.DEFAULT_RESPONSE_INTERCEPTOR)),a.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=a.forceRefreshOnFailure??!1}fetch(...a){let b,c=a[0],d=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&e.Gaxios.mergeHeaders(f,c.headers),d&&e.Gaxios.mergeHeaders(f,new Headers(d.headers)),"object"!=typeof c||c instanceof URL)?this.request({...d,headers:f,url:b}):this.request({...d,...c,headers:f,url:b})}setCredentials(a){this.credentials=a}addSharedMetadataHeaders(a){return!a.has("x-goog-user-project")&&this.quotaProjectId&&a.set("x-goog-user-project",this.quotaProjectId),a}addUserProjectAndAuthHeaders(a,b){let c=b.get("x-goog-user-project"),d=b.get("authorization");return c&&a.set("x-goog-user-project",c),d&&a.set("authorization",d),a}static log=(0,g.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async a=>{if(!a.headers.has("x-goog-api-client")){let b=process.version.replace(/^v/,"");a.headers.set("x-goog-api-client",`gl-node/${b}`)}let b=a.headers.get("User-Agent");b?b.includes(`${h.PRODUCT_NAME}/`)||a.headers.set("User-Agent",`${b} ${h.USER_AGENT}`):a.headers.set("User-Agent",h.USER_AGENT);try{let b=a[i.RequestMethodNameSymbol],c=`${Math.floor(1e3*Math.random())}`;a[i.RequestLogIdSymbol]=c;let d={url:a.url,headers:a.headers};b?i.log.info("%s [%s] request %j",b,c,d):i.log.info("[%s] request %j",c,d)}catch(a){}return a}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] response %j",c,d,a.data):i.log.info("[%s] response %j",d,a.data)}catch(a){}return a},rejected:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] error %j",c,d,a.response?.data):i.log.error("[%s] error %j",d,a.response?.data)}catch(a){}throw a}};static setMethodName(a,b){try{a[i.RequestMethodNameSymbol]=b}catch(a){}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}b.AuthClient=i},72577:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(33780),e=c(41650),f=c(77241);b.orderBy=function(a,b,c,g){if(null==a)return[];c=g?void 0:c,Array.isArray(a)||(a=Object.values(a)),Array.isArray(b)||(b=null==b?[null]:[b]),0===b.length&&(b=[null]),Array.isArray(c)||(c=null==c?[]:[c]),c=c.map(a=>String(a));let h=(a,b)=>{let c=a;for(let a=0;a<b.length&&null!=c;++a)c=c[b[a]];return c},i=b.map(a=>(Array.isArray(a)&&1===a.length&&(a=a[0]),null==a||"function"==typeof a||Array.isArray(a)||e.isKey(a))?a:{key:a,path:f.toPath(a)});return a.map(a=>({original:a,criteria:i.map(b=>{var c,d;return c=b,null==(d=a)||null==c?d:"object"==typeof c&&"key"in c?Object.hasOwn(d,c.key)?d[c.key]:h(d,c.path):"function"==typeof c?c(d):Array.isArray(c)?h(d,c):"object"==typeof d?d[c]:d})})).slice().sort((a,b)=>{for(let e=0;e<i.length;e++){let f=d.compareValues(a.criteria[e],b.criteria[e],c[e]);if(0!==f)return f}return 0}).map(a=>a.original)}},73024:a=>{"use strict";a.exports=require("node:fs")},73133:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BrowserCrypto=void 0;let d=c(99290),e=c(57932);class f{constructor(){if("undefined"==typeof window||void 0===window.crypto||void 0===window.crypto.subtle)throw Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return d.fromByteArray(new Uint8Array(c))}randomBytesBase64(a){let b=new Uint8Array(a);return window.crypto.getRandomValues(b),d.fromByteArray(b)}static padBase64(a){for(;a.length%4!=0;)a+="=";return a}async verify(a,b,c){let e={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},g=new TextEncoder().encode(b),h=d.toByteArray(f.padBase64(c)),i=await window.crypto.subtle.importKey("jwk",a,e,!0,["verify"]);return await window.crypto.subtle.verify(e,i,h,g)}async sign(a,b){let c={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},e=new TextEncoder().encode(b),f=await window.crypto.subtle.importKey("jwk",a,c,!0,["sign"]),g=await window.crypto.subtle.sign(c,f,e);return d.fromByteArray(new Uint8Array(g))}decodeBase64StringUtf8(a){let b=d.toByteArray(f.padBase64(a));return new TextDecoder().decode(b)}encodeBase64StringUtf8(a){let b=new TextEncoder().encode(a);return d.fromByteArray(b)}async sha256DigestHex(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return(0,e.fromArrayBufferToHex)(c)}async signWithHmacSha256(a,b){let c="string"==typeof a?a:String.fromCharCode(...new Uint16Array(a)),d=new TextEncoder,e=await window.crypto.subtle.importKey("raw",d.encode(c),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",e,d.encode(b))}}b.BrowserCrypto=f},73136:a=>{"use strict";a.exports=require("node:url")},73566:a=>{"use strict";a.exports=require("worker_threads")},73820:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PassThroughClient=void 0;let d=c(72449);class e extends d.AuthClient{async request(a){return this.transporter.request(a)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}}b.PassThroughClient=e},74075:a=>{"use strict";a.exports=require("zlib")},74119:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.USER_AGENT=b.PRODUCT_NAME=b.pkg=void 0;let d=c(60366);b.pkg=d;let e="google-api-nodejs-client";b.PRODUCT_NAME=e,b.USER_AGENT=`${e}/${d.version}`},74539:(a,b,c)=>{var d=c(62253).Buffer,e=c(88828),f=c(16293),g=c(27910),h=c(32999),i=c(28354),j=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function k(a){var b=a.split(".",1)[0],c=d.from(b,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(c))return c;try{return JSON.parse(c)}catch(a){return}}function l(a){return a.split(".")[2]}function m(a){return j.test(a)&&!!k(a)}function n(a,b,c){if(!b){var d=Error("Missing algorithm parameter for jws.verify");throw d.code="MISSING_ALGORITHM",d}var e=l(a=h(a)),g=a.split(".",2).join(".");return f(b).verify(g,e,c)}function o(a,b){if(b=b||{},!m(a=h(a)))return null;var c,e,f=k(a);if(!f)return null;var g=(c=c||"utf8",e=a.split(".")[1],d.from(e,"base64").toString(c));return("JWT"===f.typ||b.json)&&(g=JSON.parse(g,b.encoding)),{header:f,payload:g,signature:l(a)}}function p(a){var b=(a=a||{}).secret;if(b=null==(b=null==b?a.publicKey:b)?a.key:b,!0===/^hs/i.test(a.algorithm)&&null==b)throw TypeError("secret must be a string or buffer or a KeyObject");var c=new e(b);this.readable=!0,this.algorithm=a.algorithm,this.encoding=a.encoding,this.secret=this.publicKey=this.key=c,this.signature=new e(a.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}i.inherits(p,g),p.prototype.verify=function(){try{var a=n(this.signature.buffer,this.algorithm,this.key.buffer),b=o(this.signature.buffer,this.encoding);return this.emit("done",a,b),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},p.decode=o,p.isValid=m,p.verify=n,a.exports=p},75758:(a,b,c)=>{var d=null;let e=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,f=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;a.exports=function(a){"use strict";var b={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=a){if(!0===a.strict&&(b.strict=!0),!0===a.storeAsString&&(b.storeAsString=!0),b.alwaysParseAsBig=!0===a.alwaysParseAsBig&&a.alwaysParseAsBig,b.useNativeBigInt=!0===a.useNativeBigInt&&a.useNativeBigInt,void 0!==a.constructorAction)if("error"===a.constructorAction||"ignore"===a.constructorAction||"preserve"===a.constructorAction)b.constructorAction=a.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${a.constructorAction}`);if(void 0!==a.protoAction)if("error"===a.protoAction||"ignore"===a.protoAction||"preserve"===a.protoAction)b.protoAction=a.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${a.protoAction}`)}var g,h,i,j,k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},l=function(a){throw{name:"SyntaxError",message:a,at:g,text:i}},m=function(a){return a&&a!==h&&l("Expected '"+a+"' instead of '"+h+"'"),h=i.charAt(g),g+=1,h},n=function(){var a,e="";for("-"===h&&(e="-",m("-"));h>="0"&&h<="9";)e+=h,m();if("."===h)for(e+=".";m()&&h>="0"&&h<="9";)e+=h;if("e"===h||"E"===h)for(e+=h,m(),("-"===h||"+"===h)&&(e+=h,m());h>="0"&&h<="9";)e+=h,m();if(isFinite(a=+e))return(null==d&&(d=c(41062)),e.length>15)?b.storeAsString?e:b.useNativeBigInt?BigInt(e):new d(e):b.alwaysParseAsBig?b.useNativeBigInt?BigInt(a):new d(a):a;l("Bad number")},o=function(){var a,b,c,d="";if('"'===h)for(var e=g;m();){if('"'===h)return g-1>e&&(d+=i.substring(e,g-1)),m(),d;if("\\"===h){if(g-1>e&&(d+=i.substring(e,g-1)),m(),"u"===h){for(b=0,c=0;b<4&&isFinite(a=parseInt(m(),16));b+=1)c=16*c+a;d+=String.fromCharCode(c)}else if("string"==typeof k[h])d+=k[h];else break;e=g}}l("Bad string")},p=function(){for(;h&&h<=" ";)m()},q=function(){switch(h){case"t":return m("t"),m("r"),m("u"),m("e"),!0;case"f":return m("f"),m("a"),m("l"),m("s"),m("e"),!1;case"n":return m("n"),m("u"),m("l"),m("l"),null}l("Unexpected '"+h+"'")},r=function(){var a=[];if("["===h){if(m("["),p(),"]"===h)return m("]"),a;for(;h;){if(a.push(j()),p(),"]"===h)return m("]"),a;m(","),p()}}l("Bad array")},s=function(){var a,c=Object.create(null);if("{"===h){if(m("{"),p(),"}"===h)return m("}"),c;for(;h;){if(a=o(),p(),m(":"),!0===b.strict&&Object.hasOwnProperty.call(c,a)&&l('Duplicate key "'+a+'"'),!0===e.test(a)?"error"===b.protoAction?l("Object contains forbidden prototype property"):"ignore"===b.protoAction?j():c[a]=j():!0===f.test(a)?"error"===b.constructorAction?l("Object contains forbidden constructor property"):"ignore"===b.constructorAction?j():c[a]=j():c[a]=j(),p(),"}"===h)return m("}"),c;m(","),p()}}l("Bad object")};return j=function(){switch(p(),h){case"{":return s();case"[":return r();case'"':return o();case"-":return n();default:return h>="0"&&h<="9"?n():q()}},function(a,b){var c;return i=a+"",g=0,h=" ",c=j(),p(),h&&l("Syntax error"),"function"==typeof b?function a(c,d){var e,f=c[d];return f&&"object"==typeof f&&Object.keys(f).forEach(function(b){void 0!==(e=a(f,b))?f[b]=e:delete f[b]}),b.call(c,d,f)}({"":c},""):c}}},75994:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.InvalidSubjectTokenError=b.InvalidMessageFieldError=b.InvalidCodeFieldError=b.InvalidTokenTypeFieldError=b.InvalidExpirationTimeFieldError=b.InvalidSuccessFieldError=b.InvalidVersionFieldError=b.ExecutableResponseError=b.ExecutableResponse=void 0;let c="urn:ietf:params:oauth:token-type:saml2",d="urn:ietf:params:oauth:token-type:id_token",e="urn:ietf:params:oauth:token-type:jwt";class f{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(a){if(!a.version)throw new h("Executable response must contain a 'version' field.");if(void 0===a.success)throw new i("Executable response must contain a 'success' field.");if(this.version=a.version,this.success=a.success,this.success){if(this.expirationTime=a.expiration_time,this.tokenType=a.token_type,this.tokenType!==c&&this.tokenType!==d&&this.tokenType!==e)throw new k(`Executable response must contain a 'token_type' field when successful and it must be one of ${d}, ${e}, or ${c}.`);if(this.tokenType===c){if(!a.saml_response)throw new n(`Executable response must contain a 'saml_response' field when token_type=${c}.`);this.subjectToken=a.saml_response}else{if(!a.id_token)throw new n(`Executable response must contain a 'id_token' field when token_type=${d} or ${e}.`);this.subjectToken=a.id_token}}else{if(!a.code)throw new l("Executable response must contain a 'code' field when unsuccessful.");if(!a.message)throw new m("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=a.code,this.errorMessage=a.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return void 0!==this.expirationTime&&this.expirationTime<Math.round(Date.now()/1e3)}}b.ExecutableResponse=f;class g extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}b.ExecutableResponseError=g;class h extends g{}b.InvalidVersionFieldError=h;class i extends g{}b.InvalidSuccessFieldError=i;class j extends g{}b.InvalidExpirationTimeFieldError=j;class k extends g{}b.InvalidTokenTypeFieldError=k;class l extends g{}b.InvalidCodeFieldError=l;class m extends g{}b.InvalidMessageFieldError=m;class n extends g{}b.InvalidSubjectTokenError=n},76380:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CertificateSubjectTokenSupplier=b.InvalidConfigurationError=b.CertificateSourceUnavailableError=b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;let d=c(21111),e=c(29021),f=c(55511),g=c(55591);b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";class h extends Error{constructor(a){super(a),this.name="CertificateSourceUnavailableError"}}b.CertificateSourceUnavailableError=h;class i extends Error{constructor(a){super(a),this.name="InvalidConfigurationError"}}b.InvalidConfigurationError=i;class j{certificateConfigPath;trustChainPath;cert;key;constructor(a){if(!a.useDefaultCertificateConfig&&!a.certificateConfigLocation)throw new i("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(a.useDefaultCertificateConfig&&a.certificateConfigLocation)throw new i("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=a.trustChainPath,this.certificateConfigPath=a.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new i("Cannot create mTLS Agent with missing certificate or key");return new g.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#r();let{certPath:a,keyPath:b}=await this.#s();return{cert:this.cert,key:this.key}=await this.#t(a,b),await this.#u(this.cert)}async #r(){let a=this.certificateConfigPath;if(a){if(await (0,d.isValidFile)(a))return a;throw new h(`Provided certificate config path is invalid: ${a}`)}let c=process.env[b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(c){if(await (0,d.isValidFile)(c))return c;throw new h(`Path from environment variable "${b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${c}`)}let e=(0,d.getWellKnownCertificateConfigFileLocation)();if(await (0,d.isValidFile)(e))return e;throw new h(`Could not find certificate configuration file. Searched override path, the "${b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${e}).`)}async #s(){let a,b=this.certificateConfigPath;try{a=await e.promises.readFile(b,"utf8")}catch(a){throw new h(`Failed to read certificate config file at: ${b}`)}try{let c=JSON.parse(a),d=c?.cert_configs?.workload?.cert_path,e=c?.cert_configs?.workload?.key_path;if(!d||!e)throw new i(`Certificate config file (${b}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:d,keyPath:e}}catch(a){if(a instanceof i)throw a;throw new i(`Failed to parse certificate config from ${b}: ${a.message}`)}}async #t(a,b){let c,d;try{c=await e.promises.readFile(a),new f.X509Certificate(c)}catch(c){let b=c instanceof Error?c.message:String(c);throw new h(`Failed to read certificate file at ${a}: ${b}`)}try{d=await e.promises.readFile(b),(0,f.createPrivateKey)(d)}catch(c){let a=c instanceof Error?c.message:String(c);throw new h(`Failed to read private key file at ${b}: ${a}`)}return{cert:c,key:d}}async #u(a){let b=new f.X509Certificate(a);if(!this.trustChainPath)return JSON.stringify([b.raw.toString("base64")]);try{let a,c=((await e.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((a,b)=>{try{return new f.X509Certificate(a)}catch(c){let a=c instanceof Error?c.message:String(c);throw new i(`Failed to parse certificate at index ${b} in trust chain file ${this.trustChainPath}: ${a}`)}}),d=c.findIndex(a=>b.raw.equals(a.raw));if(-1===d)a=[b,...c];else if(0===d)a=c;else throw new i(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${d}).`);return JSON.stringify(a.map(a=>a.raw.toString("base64")))}catch(b){if(b instanceof i)throw b;let a=b instanceof Error?b.message:String(b);throw new h(`Failed to process certificate chain from ${this.trustChainPath}: ${a}`)}}}b.CertificateSubjectTokenSupplier=j},76760:a=>{"use strict";a.exports=require("node:path")},77030:a=>{"use strict";a.exports=require("node:net")},77241:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(79395),e=c(46193);b.toPath=function(a){if(Array.isArray(a))return a.map(e.toKey);if("symbol"==typeof a)return[a];a=d.toString(a);let b=[],c=a.length;if(0===c)return b;let f=0,g="",h="",i=!1;for(46===a.charCodeAt(0)&&(b.push(""),f++);f<c;){let d=a[f];h?"\\"===d&&f+1<c?g+=a[++f]:d===h?h="":g+=d:i?'"'===d||"'"===d?h=d:"]"===d?(i=!1,b.push(g),g=""):g+=d:"["===d?(i=!0,g&&(b.push(g),g="")):"."===d?g&&(b.push(g),g=""):g+=d,f++}return g&&b.push(g),b}},77542:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(15261);b.isArrayLike=function(a){return null!=a&&"function"!=typeof a&&d.isLength(a.length)}},77740:(a,b,c)=>{"use strict";let d=c(94735),e=c(55591),f=c(81630),g=c(91645),h=c(34631),{randomBytes:i,createHash:j}=c(55511),{Duplex:k,Readable:l}=c(27910),{URL:m}=c(79551),n=c(20879),o=c(26802),p=c(92910),{isBlob:q}=c(86200),{BINARY_TYPES:r,CLOSE_TIMEOUT:s,EMPTY_BUFFER:t,GUID:u,kForOnEventAttribute:v,kListener:w,kStatusCode:x,kWebSocket:y,NOOP:z}=c(63674),{EventTarget:{addEventListener:A,removeEventListener:B}}=c(17605),{format:C,parse:D}=c(58986),{toBuffer:E}=c(78086),F=Symbol("kAborted"),G=[8,13],H=["CONNECTING","OPEN","CLOSING","CLOSED"],I=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class J extends d{constructor(a,b,c){super(),this._binaryType=r[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=t,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=J.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,l,o,p={allowSynchronousEvents:!0,autoPong:!0,closeTimeout:s,protocolVersion:G[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,b._closeTimeout=p.closeTimeout,!G.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${G.join(", ")})`);if(c instanceof m)h=c;else try{h=new m(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===h.protocol?h.protocol="ws:":"https:"===h.protocol&&(h.protocol="wss:"),b._url=h.href;let q="wss:"===h.protocol,r="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||r?r&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void K(b,a);throw a}let t=q?443:80,v=i(16).toString("base64"),w=q?e.request:f.request,x=new Set;if(p.createConnection=p.createConnection||(q?M:L),p.defaultPort=p.defaultPort||t,p.port=h.port||t,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":v,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(l=new n(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=C({[n.extensionName]:l.offer()})),d.length){for(let a of d){if("string"!=typeof a||!I.test(a)||x.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");x.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=w(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=w(p);p.timeout&&o.on("timeout",()=>{N(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[F]||(o=b._req=null,K(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void N(b,o,"Maximum redirects exceeded");o.abort();try{e=new m(f,c)}catch(a){K(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||N(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==J.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void N(b,c,"Invalid Upgrade header");let g=j("sha1").update(v+u).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void N(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?x.size?x.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":x.size&&(e="Server sent no subprotocol"),e)return void N(b,c,e);h&&(b._protocol=h);let i=a.headers["sec-websocket-extensions"];if(void 0!==i){let a;if(!l)return void N(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=D(i)}catch(a){N(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==n.extensionName)return void N(b,c,"Server indicated an extension that was not requested");try{l.accept(a[n.extensionName])}catch(a){N(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[n.extensionName]=l}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,a,b,c)):(this._autoPong=c.autoPong,this._closeTimeout=c.closeTimeout,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){r.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new o({allowSynchronousEvents:c.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation}),e=new p(a,this._extensions,c.generateMask);this._receiver=d,this._sender=e,this._socket=a,d[y]=this,e[y]=this,a[y]=this,d.on("conclude",P),d.on("drain",Q),d.on("error",R),d.on("message",T),d.on("ping",U),d.on("pong",V),e.onerror=X,a.setTimeout&&a.setTimeout(0),a.setNoDelay&&a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",Z),a.on("data",$),a.on("end",_),a.on("error",aa),this._readyState=J.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=J.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[n.extensionName]&&this._extensions[n.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=J.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==J.CLOSED){if(this.readyState===J.CONNECTING)return void N(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===J.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=J.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Y(this)}}pause(){this.readyState!==J.CONNECTING&&this.readyState!==J.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===J.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==J.OPEN)return void O(this,a,c);void 0===b&&(b=!this._isServer),this._sender.ping(a||t,b,c)}pong(a,b,c){if(this.readyState===J.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==J.OPEN)return void O(this,a,c);void 0===b&&(b=!this._isServer),this._sender.pong(a||t,b,c)}resume(){this.readyState!==J.CONNECTING&&this.readyState!==J.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===J.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==J.OPEN)return void O(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[n.extensionName]||(d.compress=!1),this._sender.send(a||t,d,c)}terminate(){if(this.readyState!==J.CLOSED){if(this.readyState===J.CONNECTING)return void N(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=J.CLOSING,this._socket.destroy())}}}function K(a,b){a._readyState=J.CLOSING,a._errorEmitted=!0,a.emit("error",b),a.emitClose()}function L(a){return a.path=a.socketPath,g.connect(a)}function M(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function N(a,b,c){a._readyState=J.CLOSING;let d=Error(c);Error.captureStackTrace(d,N),b.setHeader?(b[F]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(K,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function O(a,b,c){if(b){let c=q(b)?b.size:E(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${H[a.readyState]})`);process.nextTick(c,b)}}function P(a,b){let c=this[y];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[y]&&(c._socket.removeListener("data",$),process.nextTick(W,c._socket),1005===a?c.close():c.close(a,b))}function Q(){let a=this[y];a.isPaused||a._socket.resume()}function R(a){let b=this[y];void 0!==b._socket[y]&&(b._socket.removeListener("data",$),process.nextTick(W,b._socket),b.close(a[x])),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a))}function S(){this[y].emitClose()}function T(a,b){this[y].emit("message",a,b)}function U(a){let b=this[y];b._autoPong&&b.pong(a,!this._isServer,z),b.emit("ping",a)}function V(a){this[y].emit("pong",a)}function W(a){a.resume()}function X(a){let b=this[y];b.readyState!==J.CLOSED&&(b.readyState===J.OPEN&&(b._readyState=J.CLOSING,Y(b)),this._socket.end(),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a)))}function Y(a){a._closeTimer=setTimeout(a._socket.destroy.bind(a._socket),a._closeTimeout)}function Z(){let a=this[y];if(this.removeListener("close",Z),this.removeListener("data",$),this.removeListener("end",_),a._readyState=J.CLOSING,!this._readableState.endEmitted&&!a._closeFrameReceived&&!a._receiver._writableState.errorEmitted&&0!==this._readableState.length){let b=this.read(this._readableState.length);a._receiver.write(b)}a._receiver.end(),this[y]=void 0,clearTimeout(a._closeTimer),a._receiver._writableState.finished||a._receiver._writableState.errorEmitted?a.emitClose():(a._receiver.on("error",S),a._receiver.on("finish",S))}function $(a){this[y]._receiver.write(a)||this.pause()}function _(){let a=this[y];a._readyState=J.CLOSING,a._receiver.end(),this.end()}function aa(){let a=this[y];this.removeListener("error",aa),this.on("error",z),a&&(a._readyState=J.CLOSING,this.destroy())}Object.defineProperty(J,"CONNECTING",{enumerable:!0,value:H.indexOf("CONNECTING")}),Object.defineProperty(J.prototype,"CONNECTING",{enumerable:!0,value:H.indexOf("CONNECTING")}),Object.defineProperty(J,"OPEN",{enumerable:!0,value:H.indexOf("OPEN")}),Object.defineProperty(J.prototype,"OPEN",{enumerable:!0,value:H.indexOf("OPEN")}),Object.defineProperty(J,"CLOSING",{enumerable:!0,value:H.indexOf("CLOSING")}),Object.defineProperty(J.prototype,"CLOSING",{enumerable:!0,value:H.indexOf("CLOSING")}),Object.defineProperty(J,"CLOSED",{enumerable:!0,value:H.indexOf("CLOSED")}),Object.defineProperty(J.prototype,"CLOSED",{enumerable:!0,value:H.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(J.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(J.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[v])return b[w];return null},set(b){for(let b of this.listeners(a))if(b[v]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[v]:!0})}})}),J.prototype.addEventListener=A,J.prototype.removeEventListener=B,a.exports=J},78086:(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=c(63674),e=Buffer[Symbol.species];function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function h(a){let b;return(h.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new e(a):ArrayBuffer.isView(a)?b=new e(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),h.readOnly=!1),b)}if(a.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,f),f+=d.length}return f<b?new e(c.buffer,c.byteOffset,f):c},mask:f,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:h,unmask:g},!process.env.WS_NO_BUFFER_UTIL)try{let b=c(39727);a.exports.mask=function(a,c,d,e,g){g<48?f(a,c,d,e,g):b.mask(a,c,d,e,g)},a.exports.unmask=function(a,c){a.length<32?g(a,c):b.unmask(a,c)}}catch(a){}},79395:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.toString=function a(b){if(null==b)return"";if("string"==typeof b)return b;if(Array.isArray(b))return b.map(a).join(",");let c=String(b);return"0"===c&&Object.is(Number(b),-0)?"-0":c}},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},79646:a=>{"use strict";a.exports=require("child_process")},80223:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PluggableAuthHandler=b.ExecutableError=void 0;let d=c(75994),e=c(79646),f=c(29021);class g extends Error{code;constructor(a,b){super(`The executable failed with exit code: ${b} and error message: ${a}.`),this.code=b,Object.setPrototypeOf(this,new.target.prototype)}}b.ExecutableError=g;class h{commandComponents;timeoutMillis;outputFile;constructor(a){if(!a.command)throw Error("No command provided.");if(this.commandComponents=h.parseCommand(a.command),this.timeoutMillis=a.timeoutMillis,!this.timeoutMillis)throw Error("No timeoutMillis provided.");this.outputFile=a.outputFile}retrieveResponseFromExecutable(a){return new Promise((b,c)=>{let f=e.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(a)}}),h="";f.stdout.on("data",a=>{h+=a}),f.stderr.on("data",a=>{h+=a});let i=setTimeout(()=>(f.removeAllListeners(),f.kill(),c(Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);f.on("close",a=>{if(clearTimeout(i),0!==a)return c(new g(h,a.toString()));try{let a=JSON.parse(h),c=new d.ExecutableResponse(a);return b(c)}catch(a){if(a instanceof d.ExecutableResponseError)return c(a);return c(new d.ExecutableResponseError(`The executable returned an invalid response: ${h}`))}})})}async retrieveCachedResponse(){let a;if(!this.outputFile||0===this.outputFile.length)return;try{a=await f.promises.realpath(this.outputFile)}catch{return}if(!(await f.promises.lstat(a)).isFile())return;let b=await f.promises.readFile(a,{encoding:"utf8"});if(""!==b)try{let a=JSON.parse(b);if(new d.ExecutableResponse(a).isValid())return new d.ExecutableResponse(a);return}catch(a){if(a instanceof d.ExecutableResponseError)throw a;throw new d.ExecutableResponseError(`The output file contained an invalid response: ${b}`)}}static parseCommand(a){let b=a.match(/(?:[^\s"]+|"[^"]*")+/g);if(!b)throw Error(`Provided command: "${a}" could not be parsed.`);for(let a=0;a<b.length;a++)'"'===b[a][0]&&'"'===b[a].slice(-1)&&(b[a]=b[a].slice(1,-1));return b}}b.PluggableAuthHandler=h},81542:function(a,b,c){"use strict";var d,e=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.Gaxios=void 0;let f=e(c(88633)),g=c(55591),h=c(78),i=c(38229),j=c(27910),k=c(31672),l=async()=>globalThis.crypto?.randomUUID()||(await Promise.resolve().then(c.t.bind(c,55511,23))).randomUUID();class m{agentCache=new Map;defaults;interceptors;constructor(a){this.defaults=a||{},this.interceptors={request:new k.GaxiosInterceptorManager,response:new k.GaxiosInterceptorManager}}fetch(...a){let b,c=a[0],e=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&d.mergeHeaders(f,c.headers),e&&d.mergeHeaders(f,new Headers(e.headers)),"object"!=typeof c||c instanceof URL)?this.request({...e,headers:f,url:b}):this.request({...e,...c,headers:f,url:b})}async request(a={}){let b=await this.#v(a);return b=await this.#w(b),this.#x(this._request(b))}async _defaultAdapter(a){let b=a.fetchImplementation||this.defaults.fetchImplementation||await d.#y(),c={...a};delete c.data;let e=await b(a.url,c),f=await this.getResponseData(a,e);return Object.getOwnPropertyDescriptor(e,"data")?.configurable||Object.defineProperties(e,{data:{configurable:!0,writable:!0,enumerable:!0,value:f}}),Object.assign(e,{config:a,data:f})}async _request(a){try{let b;if(b=a.adapter?await a.adapter(a,this._defaultAdapter.bind(this)):await this._defaultAdapter(a),!a.validateStatus(b.status)){if("stream"===a.responseType){let a=[];for await(let c of b.data)a.push(c);b.data=a.toString()}let c=h.GaxiosError.extractAPIErrorFromResponse(b,`Request failed with status code ${b.status}`);throw new h.GaxiosError(c?.message,a,b,c)}return b}catch(e){let b;b=e instanceof h.GaxiosError?e:e instanceof Error?new h.GaxiosError(e.message,a,void 0,e):new h.GaxiosError("Unexpected Gaxios Error",a,void 0,e);let{shouldRetry:c,config:d}=await (0,i.getRetryConfig)(b);if(c&&d)return b.config.retryConfig.currentRetryAttempt=d.retryConfig.currentRetryAttempt,a.retryConfig=b.config?.retryConfig,this.#z(a),this._request(a);throw a.errorRedactor&&a.errorRedactor(b),b}}async getResponseData(a,b){if(204===b.status)return"";if(a.maxContentLength&&b.headers.has("content-length")&&a.maxContentLength<Number.parseInt(b.headers?.get("content-length")||""))throw new h.GaxiosError("Response's `Content-Length` is over the limit.",a,Object.assign(b,{config:a}));switch(a.responseType){case"stream":return b.body;case"json":{let a=await b.text();try{return JSON.parse(a)}catch{return a}}case"arraybuffer":return b.arrayBuffer();case"blob":return b.blob();case"text":return b.text();default:return this.getResponseDataFromContentType(b)}}#A(a,b=[]){let c=new URL(a),d=[...b];for(let a of(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[])d.push(a.trim());for(let a of d)if(a instanceof RegExp){if(a.test(c.toString()))return!1}else if(a instanceof URL){if(a.origin===c.origin)return!1}else if(a.startsWith("*.")||a.startsWith(".")){let b=a.replace(/^\*\./,".");if(c.hostname.endsWith(b))return!1}else if(a===c.origin||a===c.hostname||a===c.href)return!1;return!0}async #w(a){let b=Promise.resolve(a);for(let a of this.interceptors.request.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #x(a){let b=Promise.resolve(a);for(let a of this.interceptors.response.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #v(a){let b=new Headers(this.defaults.headers);d.mergeHeaders(b,a.headers);let c=(0,f.default)(!0,{},this.defaults,a);if(!c.url)throw Error("URL is required.");if(c.baseURL&&(c.url=new URL(c.url,c.baseURL)),c.url=new URL(c.url),c.params)if(c.paramsSerializer){let a=c.paramsSerializer(c.params);a.startsWith("?")&&(a=a.slice(1));let b=c.url.toString().includes("?")?"&":"?";c.url=c.url+b+a}else{let a=c.url instanceof URL?c.url:new URL(c.url);for(let[b,d]of new URLSearchParams(c.params))a.searchParams.append(b,d);c.url=a}"number"==typeof a.maxContentLength&&(c.size=a.maxContentLength),"number"==typeof a.maxRedirects&&(c.follow=a.maxRedirects);let e="string"==typeof c.data||c.data instanceof ArrayBuffer||c.data instanceof Blob||globalThis.File&&c.data instanceof File||c.data instanceof FormData||c.data instanceof j.Readable||c.data instanceof ReadableStream||c.data instanceof String||c.data instanceof URLSearchParams||ArrayBuffer.isView(c.data)||["Blob","File","FormData"].includes(c.data?.constructor?.name||"");if(c.multipart?.length){let a=await l();b.set("content-type",`multipart/related; boundary=${a}`),c.body=j.Readable.from(this.getMultipartRequest(c.multipart,a))}else e?c.body=c.data:"object"==typeof c.data?"application/x-www-form-urlencoded"===b.get("Content-Type")?c.body=c.paramsSerializer?c.paramsSerializer(c.data):new URLSearchParams(c.data):(b.has("content-type")||b.set("content-type","application/json"),c.body=JSON.stringify(c.data)):c.data&&(c.body=c.data);c.validateStatus=c.validateStatus||this.validateStatus,c.responseType=c.responseType||"unknown",b.has("accept")||"json"!==c.responseType||b.set("accept","application/json");let i=c.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(c.agent);else if(i&&this.#A(c.url,c.noProxy)){let a=await d.#B();this.agentCache.has(i)?c.agent=this.agentCache.get(i):(c.agent=new a(i,{cert:c.cert,key:c.key}),this.agentCache.set(i,c.agent))}else c.cert&&c.key&&(this.agentCache.has(c.key)?c.agent=this.agentCache.get(c.key):(c.agent=new g.Agent({cert:c.cert,key:c.key}),this.agentCache.set(c.key,c.agent)));return"function"!=typeof c.errorRedactor&&!1!==c.errorRedactor&&(c.errorRedactor=h.defaultErrorRedactor),!c.body||"duplex"in c||(c.duplex="half"),this.#z(c),Object.assign(c,{headers:b,url:c.url instanceof URL?c.url:new URL(c.url)})}#z(a){if(a.timeout){let b=AbortSignal.timeout(a.timeout);a.signal&&!a.signal.aborted?a.signal=AbortSignal.any([a.signal,b]):a.signal=b}}validateStatus(a){return a>=200&&a<300}async getResponseDataFromContentType(a){let b=a.headers.get("Content-Type");if(null===b)return a.text();if((b=b.toLowerCase()).includes("application/json")){let b=await a.text();try{b=JSON.parse(b)}catch{}return b}return b.match(/^text\//)?a.text():a.blob()}async *getMultipartRequest(a,b){let c=`--${b}--`;for(let c of a){let a=c.headers.get("Content-Type")||"application/octet-stream",d=`--${b}\r
Content-Type: ${a}\r
\r
`;yield d,"string"==typeof c.content?yield c.content:yield*c.content,yield"\r\n"}yield c}static #C;static #D;static async #B(){return this.#C||=(await c.e(664).then(c.t.bind(c,31664,23))).HttpsProxyAgent,this.#C}static async #y(){let a="undefined"!=typeof window&&!!window;return this.#D||=a?window.fetch:(await c.e(638).then(c.bind(c,37638))).default,this.#D}static mergeHeaders(a,...b){for(let c of(a=a instanceof Headers?a:new Headers(a),b))(c instanceof Headers?c:new Headers(c)).forEach((b,c)=>{"set-cookie"===c?a.append(c,b):a.set(c,b)});return a}}b.Gaxios=m,d=m},81630:a=>{"use strict";a.exports=require("http")},82083:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IAMAuth=void 0;class c{selector;token;constructor(a,b){this.selector=a,this.token=b,this.selector=a,this.token=b}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}b.IAMAuth=c},82648:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Compute=void 0;let d=c(30911),e=c(54447),f=c(32852);class g extends f.OAuth2Client{serviceAccountEmail;scopes;constructor(a={}){super(a),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=a.serviceAccountEmail||"default",this.scopes=Array.isArray(a.scopes)?a.scopes:a.scopes?[a.scopes]:[]}async refreshTokenNoCache(){let a,b=`service-accounts/${this.serviceAccountEmail}/token`;try{let c={property:b};this.scopes.length>0&&(c.params={scopes:this.scopes.join(",")}),a=await e.instance(c)}catch(a){throw a instanceof d.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let c=a;return a&&a.expires_in&&(c.expiry_date=new Date().getTime()+1e3*a.expires_in,delete c.expires_in),this.emit("tokens",c),{tokens:c,res:null}}async fetchIdToken(a){let b,c=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${a}`;try{b=await e.instance({property:c})}catch(a){throw a instanceof Error&&(a.message=`Could not fetch ID token: ${a.message}`),a}return b}wrapError(a){let b=a.response;b&&b.status&&(a.status=b.status,403===b.status?a.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+a.message:404===b.status&&(a.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+a.message))}}b.Compute=g},82704:()=>{},82846:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\brand\\\\Downloads\\\\cardstreet-tcg\\\\components\\\\PayPalProvider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\brand\\Downloads\\cardstreet-tcg\\components\\PayPalProvider.tsx","default")},83364:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWT=void 0;let d=c(20425),e=c(53533),f=c(32852),g=c(72449);class h extends f.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(a={}){super(a),this.email=a.email,this.keyFile=a.keyFile,this.key=a.key,this.keyId=a.keyId,this.scopes=a.scopes,this.subject=a.subject,this.additionalClaims=a.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(a){let b=new h(this);return b.scopes=a,b}async getRequestMetadataAsync(a){a=this.defaultServicePath?`https://${this.defaultServicePath}/`:a;let b=!this.hasUserScopes()&&a||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==g.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==g.DEFAULT_UNIVERSE)throw RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${g.DEFAULT_UNIVERSE}`);if(!this.apiKey&&b)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${a.id_token}`}))}}else{let b;this.access||(this.access=new e.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis)),this.hasUserScopes()?b=this.scopes:a||(b=this.defaultScopes);let c=this.useJWTAccessWithScope||this.universeDomain!==g.DEFAULT_UNIVERSE,d=await this.access.getRequestHeaders(a??void 0,this.additionalClaims,c?b:void 0);return{headers:this.addSharedMetadataHeaders(d)}}return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(a):{headers:new Headers}}async fetchIdToken(a){let b=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:a},transporter:this.transporter});if(await b.getToken({forceRefresh:!0}),!b.idToken)throw Error("Unknown error: Failed to fetch ID token");return b.idToken}hasUserScopes(){return!!this.scopes&&this.scopes.length>0}hasAnyScopes(){return!!this.scopes&&!!(this.scopes.length>0)||!!this.defaultScopes&&!!(this.defaultScopes.length>0)}authorize(a){if(!a)return this.authorizeAsync();this.authorizeAsync().then(b=>a(null,b),a)}async authorizeAsync(){let a=await this.refreshToken();if(!a)throw Error("No result returned");return this.credentials=a.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,a.tokens}async refreshTokenNoCache(){let a=this.createGToken(),b={access_token:(await a.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:a.expiresAt,id_token:a.idToken};return this.emit("tokens",b),{res:null,tokens:b}}createGToken(){return this.gtoken||(this.gtoken=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{if(!a)throw Error("Must pass in a stream containing the service account auth settings.");let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}fromAPIKey(a){if("string"!=typeof a)throw Error("Must provide an API Key string.");this.apiKey=a}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let a=this.createGToken(),b=await a.getCredentials(this.keyFile);return{private_key:b.privateKey,client_email:b.clientEmail}}throw Error("A key or a keyFile must be provided to getCredentials.")}}b.JWT=h},83948:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AwsClient=void 0;let d=c(29780),e=c(52177),f=c(30896),g=c(21111),h=c(30911);class i extends e.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static #E="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(a){super(a);let b=(0,g.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("aws_security_credentials_supplier");if(!c&&!d)throw Error("A credential source or AWS security credentials supplier must be specified.");if(c&&d)throw Error("Only one of credential source or AWS security credentials supplier can be specified.");if(d)this.awsSecurityCredentialsSupplier=d,this.regionalCredVerificationUrl=i.#E,this.credentialSourceType="programmatic";else{let a=(0,g.originalOrCamelOptions)(c);this.environmentId=a.get("environment_id");let b=a.get("region_url"),d=a.get("url"),e=a.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new f.DefaultAwsSecurityCredentialsSupplier({regionUrl:b,securityCredentialsUrl:d,imdsV2SessionTokenUrl:e}),this.regionalCredVerificationUrl=a.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let a=this.environmentId?.match(/^(aws)(\d+)$/);if(a&&this.regionalCredVerificationUrl){if(1!==parseInt(a[2],10))throw Error(`aws version "${a[2]}" is not supported in the current build.`)}else throw Error('No valid AWS "credential_source" provided')}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new d.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let a=await this.awsRequestSigner.getRequestOptions({...i.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),b=[];return h.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},a.headers).forEach((a,c)=>b.push({key:c,value:a})),encodeURIComponent(JSON.stringify({url:a.url,method:a.method,headers:b}))}}b.AwsClient=i},83997:a=>{"use strict";a.exports=require("tty")},85964:a=>{"use strict";var b=Object.prototype.hasOwnProperty,c="~";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(a,b,d,f,g){if("function"!=typeof d)throw TypeError("The listener must be a function");var h=new e(d,f||a,g),i=c?c+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function g(a,b){0==--a._eventsCount?a._events=new d:delete a._events[b]}function h(){this._events=new d,this._eventsCount=0}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(c=!1)),h.prototype.eventNames=function(){var a,d,e=[];if(0===this._eventsCount)return e;for(d in a=this._events)b.call(a,d)&&e.push(c?d.slice(1):d);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(a)):e},h.prototype.listeners=function(a){var b=c?c+a:a,d=this._events[b];if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=Array(f);e<f;e++)g[e]=d[e].fn;return g},h.prototype.listenerCount=function(a){var b=c?c+a:a,d=this._events[b];return d?d.fn?1:d.length:0},h.prototype.emit=function(a,b,d,e,f,g){var h=c?c+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,d),!0;case 4:return k.fn.call(k.context,b,d,e),!0;case 5:return k.fn.call(k.context,b,d,e,f),!0;case 6:return k.fn.call(k.context,b,d,e,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,d);break;case 4:k[j].fn.call(k[j].context,b,d,e);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},h.prototype.on=function(a,b,c){return f(this,a,b,c,!1)},h.prototype.once=function(a,b,c){return f(this,a,b,c,!0)},h.prototype.removeListener=function(a,b,d,e){var f=c?c+a:a;if(!this._events[f])return this;if(!b)return g(this,f),this;var h=this._events[f];if(h.fn)h.fn!==b||e&&!h.once||d&&h.context!==d||g(this,f);else{for(var i=0,j=[],k=h.length;i<k;i++)(h[i].fn!==b||e&&!h[i].once||d&&h[i].context!==d)&&j.push(h[i]);j.length?this._events[f]=1===j.length?j[0]:j:g(this,f)}return this},h.prototype.removeAllListeners=function(a){var b;return a?(b=c?c+a:a,this._events[b]&&g(this,b)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=c,h.EventEmitter=h,a.exports=h},86200:(a,b,c)=>{"use strict";let{isUtf8:d}=c(79428),{hasBlob:e}=c(63674);function f(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(a.exports={isBlob:function(a){return e&&"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&("Blob"===a[Symbol.toStringTag]||"File"===a[Symbol.toStringTag])},isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:f,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},d)a.exports.isValidUTF8=function(a){return a.length<24?f(a):d(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let b=c(47990);a.exports.isValidUTF8=function(a){return a.length<32?f(a):b(a)}}catch(a){}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},88485:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.uniqBy=function(a,b){let c=new Map;for(let d=0;d<a.length;d++){let e=a[d],f=b(e,d,a);c.has(f)||c.set(f,e)}return Array.from(c.values())}},88633:a=>{"use strict";var b=Object.prototype.hasOwnProperty,c=Object.prototype.toString,d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===c.call(a)},g=function(a){if(!a||"[object Object]"!==c.call(a))return!1;var d,e=b.call(a,"constructor"),f=a.constructor&&a.constructor.prototype&&b.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!e&&!f)return!1;for(d in a);return void 0===d||b.call(a,d)},h=function(a,b){d&&"__proto__"===b.name?d(a,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):a[b.name]=b.newValue},i=function(a,c){if("__proto__"===c){if(!b.call(a,c))return;else if(e)return e(a,c).value}return a[c]};a.exports=function a(){var b,c,d,e,j,k,l=arguments[0],m=1,n=arguments.length,o=!1;for("boolean"==typeof l&&(o=l,l=arguments[1]||{},m=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});m<n;++m)if(b=arguments[m],null!=b)for(c in b)d=i(l,c),l!==(e=i(b,c))&&(o&&e&&(g(e)||(j=f(e)))?(j?(j=!1,k=d&&f(d)?d:[]):k=d&&g(d)?d:{},h(l,{name:c,newValue:a(o,k,e)})):void 0!==e&&h(l,{name:c,newValue:e}));return l}},88828:(a,b,c)=>{var d=c(62253).Buffer,e=c(27910);function f(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=d.alloc(0),this;if("function"==typeof a.pipe)return this.buffer=d.alloc(0),a.pipe(this),this;if(a.length||"object"==typeof a)return this.buffer=a,this.writable=!1,process.nextTick((function(){this.emit("end",a),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof a+")")}c(28354).inherits(f,e),f.prototype.write=function(a){this.buffer=d.concat([this.buffer,d.from(a)]),this.emit("data",a)},f.prototype.end=function(a){a&&this.write(a),this.emit("end",a),this.emit("close"),this.writable=!1,this.readable=!1},a.exports=f},89158:(a,b,c)=>{"use strict";var d=c(62253).Buffer,e=c(58211);function f(a){if(d.isBuffer(a))return a;if("string"==typeof a)return d.from(a,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function g(a,b,c){for(var d=0;b+d<c&&0===a[b+d];)++d;return a[b+d]>=128&&--d,d}a.exports={derToJose:function(a,b){a=f(a);var c=e(b),g=c+1,h=a.length,i=0;if(48!==a[i++])throw Error('Could not find expected "seq"');var j=a[i++];if(129===j&&(j=a[i++]),h-i<j)throw Error('"seq" specified length of "'+j+'", only "'+(h-i)+'" remaining');if(2!==a[i++])throw Error('Could not find expected "int" for "r"');var k=a[i++];if(h-i-2<k)throw Error('"r" specified length of "'+k+'", only "'+(h-i-2)+'" available');if(g<k)throw Error('"r" specified length of "'+k+'", max of "'+g+'" is acceptable');var l=i;if(i+=k,2!==a[i++])throw Error('Could not find expected "int" for "s"');var m=a[i++];if(h-i!==m)throw Error('"s" specified length of "'+m+'", expected "'+(h-i)+'"');if(g<m)throw Error('"s" specified length of "'+m+'", max of "'+g+'" is acceptable');var n=i;if((i+=m)!==h)throw Error('Expected to consume entire buffer, but "'+(h-i)+'" bytes remain');var o=c-k,p=c-m,q=d.allocUnsafe(o+k+p+m);for(i=0;i<o;++i)q[i]=0;a.copy(q,i,l+Math.max(-o,0),l+k),i=c;for(var r=i;i<r+p;++i)q[i]=0;return a.copy(q,i,n+Math.max(-p,0),n+m),q=(q=q.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(a,b){a=f(a);var c=e(b),h=a.length;if(h!==2*c)throw TypeError('"'+b+'" signatures must be "'+2*c+'" bytes, saw "'+h+'"');var i=g(a,0,c),j=g(a,c,a.length),k=c-i,l=c-j,m=2+k+1+1+l,n=m<128,o=d.allocUnsafe((n?2:3)+m),p=0;return o[p++]=48,n?o[p++]=m:(o[p++]=129,o[p++]=255&m),o[p++]=2,o[p++]=k,i<0?(o[p++]=0,p+=a.copy(o,p,0,c)):p+=a.copy(o,p,i,c),o[p++]=2,o[p++]=l,j<0?(o[p++]=0,a.copy(o,p,c)):a.copy(o,p,c+j),o}}},90469:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.debounce=function(a,b,{signal:c,edges:d}={}){let e,f=null,g=null!=d&&d.includes("leading"),h=null==d||d.includes("trailing"),i=()=>{null!==f&&(a.apply(e,f),e=void 0,f=null)},j=null,k=()=>{null!=j&&clearTimeout(j),j=setTimeout(()=>{j=null,h&&i(),l()},b)},l=()=>{null!==j&&(clearTimeout(j),j=null),e=void 0,f=null},m=function(...a){if(c?.aborted)return;e=this,f=a;let b=null==j;k(),g&&b&&i()};return m.schedule=k,m.cancel=l,m.flush=()=>{i()},c?.addEventListener("abort",l,{once:!0}),m}},90478:(a,b,c)=>{"use strict";c(94040)},91143:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.toArray=function(a){return Array.isArray(a)?a:Array.from(a)}},91645:a=>{"use strict";a.exports=require("net")},92245:(a,b,c)=>{Promise.resolve().then(c.bind(c,17742))},92264:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(46153),e=c(10680),f=c(46193),g=c(77241);b.get=function a(b,c,h){if(null==b)return h;switch(typeof c){case"string":{if(d.isUnsafeProperty(c))return h;let f=b[c];if(void 0===f)if(e.isDeepKey(c))return a(b,g.toPath(c),h);else return h;return f}case"number":case"symbol":{"number"==typeof c&&(c=f.toKey(c));let a=b[c];if(void 0===a)return h;return a}default:{if(Array.isArray(c)){var i=b,j=c,k=h;if(0===j.length)return k;let a=i;for(let b=0;b<j.length;b++){if(null==a||d.isUnsafeProperty(j[b]))return k;a=a[j[b]]}return void 0===a?k:a}if(c=Object.is(c?.valueOf(),-0)?"-0":String(c),d.isUnsafeProperty(c))return h;let a=b[c];if(void 0===a)return h;return a}}}},92334:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},92910:(a,b,c)=>{"use strict";let d,{Duplex:e}=c(27910),{randomFillSync:f}=c(55511),g=c(20879),{EMPTY_BUFFER:h,kWebSocket:i,NOOP:j}=c(63674),{isBlob:k,isValidStatusCode:l}=c(86200),{mask:m,toBuffer:n}=c(78086),o=Symbol("kByteLength"),p=Buffer.alloc(4),q=8192;class r{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=j,this[i]=void 0}static frame(a,b){let c,e,g=!1,h=2,i=!1;b.mask&&(c=b.maskBuffer||p,b.generateMask?b.generateMask(c):(8192===q&&(void 0===d&&(d=Buffer.alloc(8192)),f(d,0,8192),q=0),c[0]=d[q++],c[1]=d[q++],c[2]=d[q++],c[3]=d[q++]),i=(c[0]|c[1]|c[2]|c[3])==0,h=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[o]?b[o]:(a=Buffer.from(a)).length:(e=a.length,g=b.mask&&b.readOnly&&!i);let j=e;e>=65536?(h+=8,j=127):e>125&&(h+=2,j=126);let k=Buffer.allocUnsafe(g?e+h:h);return(k[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(k[0]|=64),k[1]=j,126===j?k.writeUInt16BE(e,2):127===j&&(k[2]=k[3]=0,k.writeUIntBE(e,4,6)),b.mask)?(k[1]|=128,k[h-4]=c[0],k[h-3]=c[1],k[h-2]=c[2],k[h-1]=c[3],i)?[k,a]:g?(m(a,c,k,h,e),[k]):(m(a,c,a,0,e),[k,a]):[k,a]}close(a,b,c,d){let e;if(void 0===a)e=h;else if("number"==typeof a&&l(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let f={[o]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,e,!1,f,d]):this.sendFrame(r.frame(e,f),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}send(a,b,c){let d,e,f=this._extensions[g.extensionName],h=b.binary?2:1,i=b.compress;"string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),this._firstFragment?(this._firstFragment=!1,i&&f&&f.params[f._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=f._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0);let j={[o]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,this._compress,j,c]):this.getBlobData(a,this._compress,j,c):0!==this._state?this.enqueue([this.dispatch,a,this._compress,j,c]):this.dispatch(a,this._compress,j,c)}getBlobData(a,b,c,d){this._bufferedBytes+=c[o],this._state=2,a.arrayBuffer().then(a=>{if(this._socket.destroyed){let a=Error("The socket was closed while the blob was being read");process.nextTick(s,this,a,d);return}this._bufferedBytes-=c[o];let e=n(a);b?this.dispatch(e,b,c,d):(this._state=0,this.sendFrame(r.frame(e,c),d),this.dequeue())}).catch(a=>{process.nextTick(t,this,a,d)})}dispatch(a,b,c,d){if(!b)return void this.sendFrame(r.frame(a,c),d);let e=this._extensions[g.extensionName];this._bufferedBytes+=c[o],this._state=1,e.compress(a,c.fin,(a,b)=>{if(this._socket.destroyed)return void s(this,Error("The socket was closed while data was being compressed"),d);this._bufferedBytes-=c[o],this._state=0,c.readOnly=!1,this.sendFrame(r.frame(b,c),d),this.dequeue()})}dequeue(){for(;0===this._state&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][o],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][o],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}function s(a,b,c){"function"==typeof c&&c(b);for(let c=0;c<a._queue.length;c++){let d=a._queue[c],e=d[d.length-1];"function"==typeof e&&e(b)}}function t(a,b,c){s(a,b,c),a.onerror(b)}a.exports=r},93350:(a,b,c)=>{"use strict";a.exports=c(2958)},93759:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IdTokenClient=void 0;let d=c(32852);class e extends d.OAuth2Client{targetAudience;idTokenProvider;constructor(a){super(a),this.targetAudience=a.targetAudience,this.idTokenProvider=a.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let a=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:a,expiry_date:this.getIdTokenExpiryDate(a)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(a){let b=a.split(".")[1];if(b)return 1e3*JSON.parse(Buffer.from(b,"base64").toString("ascii")).exp}}b.IdTokenClient=e},94040:(a,b,c)=>{"use strict";var d=c(38301);"function"==typeof Object.is&&Object.is,d.useSyncExternalStore,d.useRef,d.useEffect,d.useMemo,d.useDebugValue},94735:a=>{"use strict";a.exports=require("events")},94741:(a,b,c)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let d=c(44029),e=c(63004);b.matches=function(a){return a=e.cloneDeep(a),b=>d.isMatch(b,a)}},96061:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});let c=/^(?:0|[1-9]\d*)$/;b.isIndex=function(a,b=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<b;case"symbol":return!1;case"string":return c.test(a)}}},96693:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.NodeCrypto=void 0;let d=c(55511);class e{async sha256DigestBase64(a){return d.createHash("sha256").update(a).digest("base64")}randomBytesBase64(a){return d.randomBytes(a).toString("base64")}async verify(a,b,c){let e=d.createVerify("RSA-SHA256");return e.update(b),e.end(),e.verify(a,c,"base64")}async sign(a,b){let c=d.createSign("RSA-SHA256");return c.update(b),c.end(),c.sign(a,"base64")}decodeBase64StringUtf8(a){return Buffer.from(a,"base64").toString("utf-8")}encodeBase64StringUtf8(a){return Buffer.from(a,"utf-8").toString("base64")}async sha256DigestHex(a){return d.createHash("sha256").update(a).digest("hex")}async signWithHmacSha256(a,b){var c,e;let f="string"==typeof a?a:(c=a,Buffer.from(c));return(e=d.createHmac("sha256",f).update(b).digest()).buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}}b.NodeCrypto=e},97376:(a,b,c)=>{"use strict";a.exports={pkg:c(50619)}},99032:(a,b)=>{"use strict";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b.isPrimitive=function(a){return null==a||"object"!=typeof a&&"function"!=typeof a}},99088:(a,b,c)=>{"use strict";a.exports=c(42797)},99255:(a,b,c)=>{var d=c(56735),e=c(74539);b.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],b.sign=d.sign,b.verify=e.verify,b.decode=e.decode,b.isValid=e.isValid,b.createSign=function(a){return new d(a)},b.createVerify=function(a){return new e(a)}},99290:(a,b)=>{"use strict";b.byteLength=function(a){var b=i(a),c=b[0],d=b[1];return(c+d)*3/4-d},b.toByteArray=function(a){var b,c,f=i(a),g=f[0],h=f[1],j=new e((g+h)*3/4-h),k=0,l=h>0?g-4:g;for(c=0;c<l;c+=4)b=d[a.charCodeAt(c)]<<18|d[a.charCodeAt(c+1)]<<12|d[a.charCodeAt(c+2)]<<6|d[a.charCodeAt(c+3)],j[k++]=b>>16&255,j[k++]=b>>8&255,j[k++]=255&b;return 2===h&&(b=d[a.charCodeAt(c)]<<2|d[a.charCodeAt(c+1)]>>4,j[k++]=255&b),1===h&&(b=d[a.charCodeAt(c)]<<10|d[a.charCodeAt(c+1)]<<4|d[a.charCodeAt(c+2)]>>2,j[k++]=b>>8&255,j[k++]=255&b),j},b.fromByteArray=function(a){for(var b,d=a.length,e=d%3,f=[],g=0,h=d-e;g<h;g+=16383)f.push(function(a,b,d){for(var e,f=[],g=b;g<d;g+=3)e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(c[(b=a[d-1])>>2]+c[b<<4&63]+"=="):2===e&&f.push(c[(b=(a[d-2]<<8)+a[d-1])>>10]+c[b>>4&63]+c[b<<2&63]+"="),f.join("")};for(var c=[],d=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,h=f.length;g<h;++g)c[g]=f[g],d[f.charCodeAt(g)]=g;function i(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}d[45]=62,d[95]=63}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[996,870],()=>b(b.s=60333));module.exports=c})();